# 处理边界情况

## 访问元素和组件 
在绝大多数情况下，我们最好不要访问另一个组件实例内部或手动操作 DOM 元素。但某些情况做这些事情是合适的。

### $root访问根实列
new Vue实例的子组件中，子组件内部可以通过$root属性访问根实例的方法、属性、计算属性等。
```js
// 获取根组件的数据
this.$root.foo

// 写入根组件的数据
this.$root.foo = 2

// 访问根组件的计算属性
this.$root.bar

// 调用根组件的方法
this.$root.baz()
```
实例
```html
<div id="app">
  <p>foo: {{ foo }} </p>
  <p>baz: {{ baz }} </p>
  <component-a></component-a>
</div>
<script>
  Vue.component('component-a', {
    methods: {
      doSomething: function(event) {
        alert(this.$root.foo);
        this.$root.foo = 100;
        this.$root.bar();
        setTimeout(()=> {
          alert(this.$root.baz) 
        }, 2000)
      }
    },
    template: `
      <div>
        <button @click="doSomething">执行</button>  
      </div>
    `
  })
  var app = new Vue({
    el: '#app',
    data: {
      foo: 1
    },
    computed: {
      baz: function() {
        return this.foo + 2
      }
    },
    methods: {
      bar: function() {
        alert('bar');
      }
    }
  })
</script>
```
### $parent访问父组件实列
$parent 属性可以用来从一个子组件访问父组件的实例。它提供了一种机会，可以在后期随时触达父级组件，以替代将数据以 prop 的方式传入子组件的方式

### 访问子组件实列或子元素 ref
下面的例子中app vue实例：
- 为其子元素p指定了一个ref特性p，在app的实例中可以通过this.$refs.p 访问对应的p元素
- 为其子组件component-a指定了一个ref特性zxinput，在app的实例中，可以通过this.$refs.zxinput访问该子组件的实例，包括实例子组件实例的属性、方法
- $refs 只会在组件渲染完成之后生效，并且它们不是响应式的。这仅作为一个用于直接操作子组件的“逃生舱”——你应该避免在模板或计算属性中访问 $refs。
```html
<div id="app">
  <p ref="p">这是一个p元素</p>
  <component-a ref="zxinput"></component-a>
  <button @click="bar">点击</button>
</div>
<script>
  Vue.component('component-a', {
    data: function() {
      return {
        foo: 1
      }
    },
    methods: {
      doSomething: function(event) {
        alert('doSomethind');
      }
    },
    template: `
      <button @click="doSomething">执行</button>  
    `
  })
  var app = new Vue({
    el: '#app',
    data: {
    },
    methods: {
      bar: function() {
        alert(this.$refs.p.innerHTML);

        this.$refs.zxinput.doSomething();
        alert(this.$refs.zxinput.foo)
      }
    }
  })
</script>
```
