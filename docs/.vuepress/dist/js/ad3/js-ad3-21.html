<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>21. 错误处理与调试 - JS高程4 | 左小白的前端笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="JS 一直以来被认为是最难调试的语言之一，因为它是动态的，错误经常以令人迷惑的形式抛出，比如："object expected" 这种消息没有上下文，因此很难理解。ES3 为了改进这个问题，引入了 try/catch 和 throw 语句，以及一些错误类型。如果没有使用 try/catch 捕获错误，浏览器会提示未捕获的错误（Uncaught xxxError）">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.b41fd11a.css" as="style"><link rel="preload" href="/assets/js/app.0bf21a3f.js" as="script"><link rel="preload" href="/assets/js/2.3f8a6b0b.js" as="script"><link rel="preload" href="/assets/js/82.e484c003.js" as="script"><link rel="preload" href="/assets/js/3.018b29e2.js" as="script"><link rel="prefetch" href="/assets/js/10.57230952.js"><link rel="prefetch" href="/assets/js/100.e578cf98.js"><link rel="prefetch" href="/assets/js/101.c335944d.js"><link rel="prefetch" href="/assets/js/102.59769da8.js"><link rel="prefetch" href="/assets/js/103.4919b623.js"><link rel="prefetch" href="/assets/js/104.7fe84002.js"><link rel="prefetch" href="/assets/js/105.ddedb83f.js"><link rel="prefetch" href="/assets/js/106.1fb63622.js"><link rel="prefetch" href="/assets/js/107.2b187808.js"><link rel="prefetch" href="/assets/js/108.8f3d5697.js"><link rel="prefetch" href="/assets/js/109.92d36734.js"><link rel="prefetch" href="/assets/js/11.9dc4d318.js"><link rel="prefetch" href="/assets/js/110.cd88ac77.js"><link rel="prefetch" href="/assets/js/111.12009e8d.js"><link rel="prefetch" href="/assets/js/112.e5c55eb4.js"><link rel="prefetch" href="/assets/js/113.4919bdd4.js"><link rel="prefetch" href="/assets/js/114.dcaf0907.js"><link rel="prefetch" href="/assets/js/115.ef10c8bf.js"><link rel="prefetch" href="/assets/js/116.ee1048fb.js"><link rel="prefetch" href="/assets/js/117.755e22c9.js"><link rel="prefetch" href="/assets/js/118.1ef0e114.js"><link rel="prefetch" href="/assets/js/119.6bf38fb4.js"><link rel="prefetch" href="/assets/js/12.40fc9c5a.js"><link rel="prefetch" href="/assets/js/120.b88059fa.js"><link rel="prefetch" href="/assets/js/121.41bab6f4.js"><link rel="prefetch" href="/assets/js/122.0f544020.js"><link rel="prefetch" href="/assets/js/123.77dd2a30.js"><link rel="prefetch" href="/assets/js/124.15b09dbe.js"><link rel="prefetch" href="/assets/js/125.513515e1.js"><link rel="prefetch" href="/assets/js/126.ddc5a463.js"><link rel="prefetch" href="/assets/js/127.fc469abf.js"><link rel="prefetch" href="/assets/js/128.e6e3b457.js"><link rel="prefetch" href="/assets/js/129.1967580f.js"><link rel="prefetch" href="/assets/js/13.986f7498.js"><link rel="prefetch" href="/assets/js/130.42a72e18.js"><link rel="prefetch" href="/assets/js/131.7eb22a2c.js"><link rel="prefetch" href="/assets/js/132.34350e73.js"><link rel="prefetch" href="/assets/js/133.41fcbd8e.js"><link rel="prefetch" href="/assets/js/134.a0eee4de.js"><link rel="prefetch" href="/assets/js/135.36a70bf4.js"><link rel="prefetch" href="/assets/js/136.e7a92be5.js"><link rel="prefetch" href="/assets/js/137.fdea42b5.js"><link rel="prefetch" href="/assets/js/138.bbd75d1f.js"><link rel="prefetch" href="/assets/js/139.b995a099.js"><link rel="prefetch" href="/assets/js/14.1898890b.js"><link rel="prefetch" href="/assets/js/140.6d940105.js"><link rel="prefetch" href="/assets/js/141.9278b1f0.js"><link rel="prefetch" href="/assets/js/142.bb7a043f.js"><link rel="prefetch" href="/assets/js/143.0c428588.js"><link rel="prefetch" href="/assets/js/144.c9c789b3.js"><link rel="prefetch" href="/assets/js/145.9ad8dfa6.js"><link rel="prefetch" href="/assets/js/146.2759ffa3.js"><link rel="prefetch" href="/assets/js/147.fa54787f.js"><link rel="prefetch" href="/assets/js/148.983ee0a5.js"><link rel="prefetch" href="/assets/js/149.2f7704fe.js"><link rel="prefetch" href="/assets/js/15.5469b4a1.js"><link rel="prefetch" href="/assets/js/150.8d43e986.js"><link rel="prefetch" href="/assets/js/151.b5db9fb6.js"><link rel="prefetch" href="/assets/js/152.5b9728d4.js"><link rel="prefetch" href="/assets/js/153.6f0f7af8.js"><link rel="prefetch" href="/assets/js/154.6cb7fdcc.js"><link rel="prefetch" href="/assets/js/155.38d08870.js"><link rel="prefetch" href="/assets/js/156.6e034fca.js"><link rel="prefetch" href="/assets/js/157.1ca78d6e.js"><link rel="prefetch" href="/assets/js/158.b2fe456f.js"><link rel="prefetch" href="/assets/js/159.395b73d0.js"><link rel="prefetch" href="/assets/js/16.1191ebc2.js"><link rel="prefetch" href="/assets/js/160.e7676793.js"><link rel="prefetch" href="/assets/js/161.cd998bb1.js"><link rel="prefetch" href="/assets/js/162.fd413fe6.js"><link rel="prefetch" href="/assets/js/17.08eb5070.js"><link rel="prefetch" href="/assets/js/18.549c446f.js"><link rel="prefetch" href="/assets/js/19.c6c2139d.js"><link rel="prefetch" href="/assets/js/20.5e6c30dc.js"><link rel="prefetch" href="/assets/js/21.9f0ce5d2.js"><link rel="prefetch" href="/assets/js/22.59722d7f.js"><link rel="prefetch" href="/assets/js/23.886ef483.js"><link rel="prefetch" href="/assets/js/24.0d55fdfc.js"><link rel="prefetch" href="/assets/js/25.b513497e.js"><link rel="prefetch" href="/assets/js/26.38b016e3.js"><link rel="prefetch" href="/assets/js/27.51d9bd77.js"><link rel="prefetch" href="/assets/js/28.eebd8b4e.js"><link rel="prefetch" href="/assets/js/29.f81e9274.js"><link rel="prefetch" href="/assets/js/30.f8b68fed.js"><link rel="prefetch" href="/assets/js/31.84f7c8e8.js"><link rel="prefetch" href="/assets/js/32.ff88cb29.js"><link rel="prefetch" href="/assets/js/33.db9f818a.js"><link rel="prefetch" href="/assets/js/34.8528d11c.js"><link rel="prefetch" href="/assets/js/35.8bc50305.js"><link rel="prefetch" href="/assets/js/36.9bf7c6ff.js"><link rel="prefetch" href="/assets/js/37.fbced13e.js"><link rel="prefetch" href="/assets/js/38.2e4e4f00.js"><link rel="prefetch" href="/assets/js/39.fc6e9198.js"><link rel="prefetch" href="/assets/js/4.450bd9c8.js"><link rel="prefetch" href="/assets/js/40.9b113905.js"><link rel="prefetch" href="/assets/js/41.aa3d1bb9.js"><link rel="prefetch" href="/assets/js/42.154c7e55.js"><link rel="prefetch" href="/assets/js/43.05418d59.js"><link rel="prefetch" href="/assets/js/44.7d1b30f3.js"><link rel="prefetch" href="/assets/js/45.235bbacb.js"><link rel="prefetch" href="/assets/js/46.5df48da3.js"><link rel="prefetch" href="/assets/js/47.36b5639f.js"><link rel="prefetch" href="/assets/js/48.bfd892d3.js"><link rel="prefetch" href="/assets/js/49.a66a16bf.js"><link rel="prefetch" href="/assets/js/5.0322d224.js"><link rel="prefetch" href="/assets/js/50.78efb680.js"><link rel="prefetch" href="/assets/js/51.01901ccc.js"><link rel="prefetch" href="/assets/js/52.e6f696eb.js"><link rel="prefetch" href="/assets/js/53.0484ca91.js"><link rel="prefetch" href="/assets/js/54.737263db.js"><link rel="prefetch" href="/assets/js/55.b3d19b3e.js"><link rel="prefetch" href="/assets/js/56.e0a198b8.js"><link rel="prefetch" href="/assets/js/57.66a8fa47.js"><link rel="prefetch" href="/assets/js/58.07738bb5.js"><link rel="prefetch" href="/assets/js/59.192ce926.js"><link rel="prefetch" href="/assets/js/6.8b6802aa.js"><link rel="prefetch" href="/assets/js/60.dcdf7f83.js"><link rel="prefetch" href="/assets/js/61.28314073.js"><link rel="prefetch" href="/assets/js/62.6215c441.js"><link rel="prefetch" href="/assets/js/63.6008b1cd.js"><link rel="prefetch" href="/assets/js/64.3bc7d0de.js"><link rel="prefetch" href="/assets/js/65.db30ed35.js"><link rel="prefetch" href="/assets/js/66.d15f8a2e.js"><link rel="prefetch" href="/assets/js/67.0ced457a.js"><link rel="prefetch" href="/assets/js/68.b1ebe57b.js"><link rel="prefetch" href="/assets/js/69.c5e2e8e2.js"><link rel="prefetch" href="/assets/js/7.55c6af5e.js"><link rel="prefetch" href="/assets/js/70.9558cbe6.js"><link rel="prefetch" href="/assets/js/71.7bafeaae.js"><link rel="prefetch" href="/assets/js/72.11495184.js"><link rel="prefetch" href="/assets/js/73.f4583008.js"><link rel="prefetch" href="/assets/js/74.266c0400.js"><link rel="prefetch" href="/assets/js/75.564fdd78.js"><link rel="prefetch" href="/assets/js/76.0c3efae1.js"><link rel="prefetch" href="/assets/js/77.329d2bb7.js"><link rel="prefetch" href="/assets/js/78.6399e38c.js"><link rel="prefetch" href="/assets/js/79.8585163e.js"><link rel="prefetch" href="/assets/js/8.143ffc63.js"><link rel="prefetch" href="/assets/js/80.7b73a97a.js"><link rel="prefetch" href="/assets/js/81.6193b516.js"><link rel="prefetch" href="/assets/js/83.5779c505.js"><link rel="prefetch" href="/assets/js/84.57692423.js"><link rel="prefetch" href="/assets/js/85.196c5e69.js"><link rel="prefetch" href="/assets/js/86.98fa0bbb.js"><link rel="prefetch" href="/assets/js/87.d228fd1e.js"><link rel="prefetch" href="/assets/js/88.66941670.js"><link rel="prefetch" href="/assets/js/89.c53e9e59.js"><link rel="prefetch" href="/assets/js/9.fbf33cae.js"><link rel="prefetch" href="/assets/js/90.ecdad557.js"><link rel="prefetch" href="/assets/js/91.cd7ab71b.js"><link rel="prefetch" href="/assets/js/92.c9874bab.js"><link rel="prefetch" href="/assets/js/93.55306c79.js"><link rel="prefetch" href="/assets/js/94.6beb55f4.js"><link rel="prefetch" href="/assets/js/95.99b7412d.js"><link rel="prefetch" href="/assets/js/96.3298dad6.js"><link rel="prefetch" href="/assets/js/97.9c189b49.js"><link rel="prefetch" href="/assets/js/98.02b0e19b.js"><link rel="prefetch" href="/assets/js/99.6b4d6823.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b41fd11a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">左小白的前端笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南" class="dropdown-title"><span class="title">指南</span> <span class="arrow down"></span></button> <button type="button" aria-label="指南" class="mobile-dropdown-title"><span class="title">指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  首页
</a></li><li class="dropdown-item"><!----> <a href="/nav.html" class="nav-link">
  前端网址导航
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><span class="title">前端进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端进阶" class="mobile-dropdown-title"><span class="title">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daily/" class="nav-link">
  技术日常记录
</a></li><li class="dropdown-item"><!----> <a href="/server/docker.html" class="nav-link">
  Docker 基础
</a></li><li class="dropdown-item"><h4>
          Vue.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/base/1.html" class="nav-link">
  Vue.js 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vue-router.html" class="nav-link">
  Vue Router 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vuex.html" class="nav-link">
  Vuex 笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          前端工程化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ts/base-1.html" class="nav-link">
  TypeScript 入门教程笔记
</a></li><li class="dropdown-subitem"><a href="/node/base/1.html" class="nav-link">
  Node.js 笔记
</a></li><li class="dropdown-subitem"><a href="/webpack/base.html" class="nav-link">
  webpack 基础
</a></li></ul></li><li class="dropdown-item"><h4>
          数据可视化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/visual/echarts.html" class="nav-link">
  Echarts 笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS/ES6
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/js/es6/es6-1.html" class="nav-link">
  ES6标准入门(第三版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/ad3/js-ad3-1.html" class="nav-link">
  JavaScript高级程序设计(第四版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/js-dom-art.html" class="nav-link">
  JavaScript DOM编程艺术(第二版)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS/CSS3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/css/less.html" class="nav-link">
  CSS 预处理器 Less.js
</a></li><li class="dropdown-subitem"><a href="/css/flex-grid.html" class="nav-link">
  Flex与Grid布局
</a></li><li class="dropdown-subitem"><a href="/css/html5-css-1.html" class="nav-link">
  HTML5权威指南(CSS部分)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          HTML/HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html5/html/1.html" class="nav-link">
  HTML5权威指南(HTML部分)笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/base/js-data-struct.html" class="nav-link">
  学习JavaScript数据结构与算法(第三版)笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/mocha-test.html" class="nav-link">
  Mocha - JavaScript测试框架
</a></li><li class="dropdown-item"><!----> <a href="/base/git.html" class="nav-link">
  Git 笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/markdown.html" class="nav-link">
  Markdown 基础语法
</a></li><li class="dropdown-item"><!----> <a href="/base/dbtheory/1.html" class="nav-link">
  数据库系统原理笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开源项目" class="dropdown-title"><span class="title">开源项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="开源项目" class="mobile-dropdown-title"><span class="title">开源项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/zuoxiaobai/service-monitor" target="_blank" rel="noopener noreferrer" class="nav-link external">
  service-monitor
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://vuechart.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @guoqzuo/vue-chart
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://zuoblog.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  zuo-blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="http://www.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/zuoxiaobai" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南" class="dropdown-title"><span class="title">指南</span> <span class="arrow down"></span></button> <button type="button" aria-label="指南" class="mobile-dropdown-title"><span class="title">指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  首页
</a></li><li class="dropdown-item"><!----> <a href="/nav.html" class="nav-link">
  前端网址导航
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><span class="title">前端进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端进阶" class="mobile-dropdown-title"><span class="title">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daily/" class="nav-link">
  技术日常记录
</a></li><li class="dropdown-item"><!----> <a href="/server/docker.html" class="nav-link">
  Docker 基础
</a></li><li class="dropdown-item"><h4>
          Vue.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/base/1.html" class="nav-link">
  Vue.js 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vue-router.html" class="nav-link">
  Vue Router 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vuex.html" class="nav-link">
  Vuex 笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          前端工程化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ts/base-1.html" class="nav-link">
  TypeScript 入门教程笔记
</a></li><li class="dropdown-subitem"><a href="/node/base/1.html" class="nav-link">
  Node.js 笔记
</a></li><li class="dropdown-subitem"><a href="/webpack/base.html" class="nav-link">
  webpack 基础
</a></li></ul></li><li class="dropdown-item"><h4>
          数据可视化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/visual/echarts.html" class="nav-link">
  Echarts 笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS/ES6
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/js/es6/es6-1.html" class="nav-link">
  ES6标准入门(第三版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/ad3/js-ad3-1.html" class="nav-link">
  JavaScript高级程序设计(第四版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/js-dom-art.html" class="nav-link">
  JavaScript DOM编程艺术(第二版)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS/CSS3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/css/less.html" class="nav-link">
  CSS 预处理器 Less.js
</a></li><li class="dropdown-subitem"><a href="/css/flex-grid.html" class="nav-link">
  Flex与Grid布局
</a></li><li class="dropdown-subitem"><a href="/css/html5-css-1.html" class="nav-link">
  HTML5权威指南(CSS部分)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          HTML/HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html5/html/1.html" class="nav-link">
  HTML5权威指南(HTML部分)笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/base/js-data-struct.html" class="nav-link">
  学习JavaScript数据结构与算法(第三版)笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/mocha-test.html" class="nav-link">
  Mocha - JavaScript测试框架
</a></li><li class="dropdown-item"><!----> <a href="/base/git.html" class="nav-link">
  Git 笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/markdown.html" class="nav-link">
  Markdown 基础语法
</a></li><li class="dropdown-item"><!----> <a href="/base/dbtheory/1.html" class="nav-link">
  数据库系统原理笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开源项目" class="dropdown-title"><span class="title">开源项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="开源项目" class="mobile-dropdown-title"><span class="title">开源项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/zuoxiaobai/service-monitor" target="_blank" rel="noopener noreferrer" class="nav-link external">
  service-monitor
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://vuechart.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @guoqzuo/vue-chart
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://zuoblog.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  zuo-blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="http://www.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/zuoxiaobai" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JS/ES6</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>ES6标准入门(第三版)笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>JavaScript高级程序设计(第四版)笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/ad3/js-ad4-diff.html" class="sidebar-link">第四版相比第三版有哪些更新 - JS高程4</a></li><li><a href="/js/ad3/js-ad3-1.html" class="sidebar-link">1. 什么是JavaScript - JS高程4</a></li><li><a href="/js/ad3/js-ad3-2.html" class="sidebar-link">2. 在HTML中使用JavaScript - JS高程4</a></li><li><a href="/js/ad3/js-ad3-3.html" class="sidebar-link">3. ES基本概念(语言基础) - JS高程4</a></li><li><a href="/js/ad3/js-ad3-4.html" class="sidebar-link">4. 变量、作用域与内存 - JS高程4</a></li><li><a href="/js/ad3/js-ad3-5.html" class="sidebar-link">5. 基本引用类型 - JS高程4</a></li><li><a href="/js/ad3/js-ad3-6.html" class="sidebar-link">6. 集合引用类型 - JS高程4</a></li><li><a href="/js/ad3/js-ad3-7.html" class="sidebar-link">7. 迭代器与生成器(Iterator 与 Generator) - JS高程4</a></li><li><a href="/js/ad3/js-ad3-8.html" class="sidebar-link">8. 对象、类与面向对象编程 - JS高程4</a></li><li><a href="/js/ad3/js-ad3-9.html" class="sidebar-link">9. 代理与反射(Proxy与Reflect) - JS高程4</a></li><li><a href="/js/ad3/js-ad3-10.html" class="sidebar-link">10. 函数 - JS高程4</a></li><li><a href="/js/ad3/js-ad3-11.html" class="sidebar-link">11. 期约与异步函数(Promise与async/await) - JS高程4</a></li><li><a href="/js/ad3/js-ad3-12.html" class="sidebar-link">12. BOM - JS高程4</a></li><li><a href="/js/ad3/js-ad3-13.html" class="sidebar-link">13. 客户端检测 - JS高程4</a></li><li><a href="/js/ad3/js-ad3-14.html" class="sidebar-link">14. DOM - JS高程4</a></li><li><a href="/js/ad3/js-ad3-15.html" class="sidebar-link">15. DOM扩展 - JS高程4</a></li><li><a href="/js/ad3/js-ad3-16.html" class="sidebar-link">16. DOM2 和 DOM3 - JS高程4</a></li><li><a href="/js/ad3/js-ad3-17.html" class="sidebar-link">17. 事件 - JS高程4</a></li><li><a href="/js/ad3/js-ad3-18.html" class="sidebar-link">18. 动画与 Canvas 图形 - JS高程4</a></li><li><a href="/js/ad3/js-ad3-19.html" class="sidebar-link">19. 表单脚本 - JS高程4</a></li><li><a href="/js/ad3/js-ad3-20.html" class="sidebar-link">20. JavaScript API - JS高程4</a></li><li><a href="/js/ad3/js-ad3-21.html" aria-current="page" class="active sidebar-link">21. 错误处理与调试 - JS高程4</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/ad3/js-ad3-21.html#浏览器调试" class="sidebar-link">浏览器调试</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/ad3/js-ad3-21.html#在-pc-端调试-ios-safari-打开的页面" class="sidebar-link">在 PC 端调试 iOS Safari 打开的页面</a></li><li class="sidebar-sub-header"><a href="/js/ad3/js-ad3-21.html#在-pc-上调试-android-设备网页内容" class="sidebar-link">在 PC 上调试 Android 设备网页内容</a></li></ul></li><li class="sidebar-sub-header"><a href="/js/ad3/js-ad3-21.html#错误处理-try-catch-finally" class="sidebar-link">错误处理 try/catch/finally</a></li><li class="sidebar-sub-header"><a href="/js/ad3/js-ad3-21.html#_8-种错误类型" class="sidebar-link">8 种错误类型</a></li><li class="sidebar-sub-header"><a href="/js/ad3/js-ad3-21.html#抛出自定义错误" class="sidebar-link">抛出自定义错误</a></li><li class="sidebar-sub-header"><a href="/js/ad3/js-ad3-21.html#window-的-error-事件" class="sidebar-link">window 的 error 事件</a></li><li class="sidebar-sub-header"><a href="/js/ad3/js-ad3-21.html#处理错误的策略" class="sidebar-link">处理错误的策略</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/ad3/js-ad3-21.html#区分致命错误和非致命错" class="sidebar-link">区分致命错误和非致命错</a></li><li class="sidebar-sub-header"><a href="/js/ad3/js-ad3-21.html#把错误记录到服务器" class="sidebar-link">把错误记录到服务器</a></li></ul></li><li class="sidebar-sub-header"><a href="/js/ad3/js-ad3-21.html#调试技术" class="sidebar-link">调试技术</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/ad3/js-ad3-21.html#使用-console-把消息记录到控制台" class="sidebar-link">使用 console 把消息记录到控制台</a></li><li class="sidebar-sub-header"><a href="/js/ad3/js-ad3-21.html#浏览器断点调试-debugger" class="sidebar-link">浏览器断点调试/debugger</a></li><li class="sidebar-sub-header"><a href="/js/ad3/js-ad3-21.html#在页面中打印消息-拦截原生-console" class="sidebar-link">在页面中打印消息/拦截原生 console</a></li><li class="sidebar-sub-header"><a href="/js/ad3/js-ad3-21.html#抛出错误-throw-assert" class="sidebar-link">抛出错误 throw/assert()</a></li></ul></li><li class="sidebar-sub-header"><a href="/js/ad3/js-ad3-21.html#旧版-ie-的常见错误" class="sidebar-link">旧版 IE 的常见错误</a></li></ul></li><li><a href="/js/ad3/js-ad3-22.html" class="sidebar-link">22. 处理 XML - JS高程4</a></li><li><a href="/js/ad3/js-ad3-23.html" class="sidebar-link">23. JSON - JS高程4</a></li><li><a href="/js/ad3/js-ad3-24.html" class="sidebar-link">24. 网络请求与远程资源 - JS高程4</a></li><li><a href="/js/ad3/js-ad3-25.html" class="sidebar-link">25. 客户端存储 - JS高程4</a></li><li><a href="/js/ad3/js-ad3-26.html" class="sidebar-link">26. 模块(Modules) - JS高程4</a></li><li><a href="/js/ad3/js-ad3-27.html" class="sidebar-link">27. 工作者线程(Web Workers) - JS高程4</a></li><li><a href="/js/ad3/js-ad3-28.html" class="sidebar-link">28. 最佳实践 - JS高程4</a></li><li><a href="/js/ad3/js-ad3-old.html" class="sidebar-link">第三版其他内容(高级技巧) - JS高程4</a></li></ul></section></li><li><a href="/js/js-dom-art.html" class="sidebar-link">JavaScript DOM 编程艺术(第二版)笔记</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_21-错误处理与调试"><a href="#_21-错误处理与调试" class="header-anchor">#</a> 21. 错误处理与调试</h1> <p>JS 一直以来被认为是最难调试的语言之一，因为它是动态的，错误经常以令人迷惑的形式抛出，比如：&quot;object expected&quot; 这种消息没有上下文，因此很难理解。ES3 为了改进这个问题，引入了 try/catch 和 throw 语句，以及一些错误类型。如果没有使用 try/catch 捕获错误，浏览器会提示未捕获的错误（Uncaught xxxError）</p> <p><img src="/images/js/uncaughtError.png" alt="uncaught error"></p> <h2 id="浏览器调试"><a href="#浏览器调试" class="header-anchor">#</a> 浏览器调试</h2> <p>在 PC 端我们打开开发者工具就可以审查元素、调试样式，查看 JS 相关调试信息/错误信息。在移动端，可以引入 vconsole，但 vconsole 有个缺点就是无法调试 DOM 样式效果。我们可以使用数据线将手机连接到电脑，通过 PC 端的 Safari 或 Chrome 浏览器来调试手机页面效果。</p> <h3 id="在-pc-端调试-ios-safari-打开的页面"><a href="#在-pc-端调试-ios-safari-打开的页面" class="header-anchor">#</a> 在 PC 端调试 iOS Safari 打开的页面</h3> <p>首先我们需要在 iPhone 上做一些设置：</p> <ol><li>打开设置</li> <li>点击 Safari</li> <li>滚动到页面最下面，点击高级</li> <li>勾选网页检查器</li></ol> <p>使用手机上的 Safari 打开页面，通过数据线将手机连接到电脑。打开 mac 电脑的 Safari，在顶部菜单 开发 =&gt; 手机名称 里面可以看到手机上打开的网页，如下图手机 Safari 打开了 baidu.com</p> <p><img src="/images/js/error_debug_safari_1.png" alt="error_debug_safari_1.png"></p> <p>点击对应的网页，即可打开 DOM 检查器，console 等调试面板。在里面可以修改手机页面中的 DOM 样式、内容。在 console 中 alert('123')，会应用到移动端的页面中。</p> <p><img src="/images/js/error_debug_safari_2.png" alt="error_debug_safari_2.png"></p> <p>参考：<a href="https://developer.apple.com/library/archive/documentation/AppleApplications/Conceptual/Safari_Developer_Guide/GettingStarted/GettingStarted.html#//apple_ref/doc/uid/TP40007874-CH2-SW8" target="_blank" rel="noopener noreferrer">iOS 上的 Safari - Safari Web Inspector Guide<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="在-pc-上调试-android-设备网页内容"><a href="#在-pc-上调试-android-设备网页内容" class="header-anchor">#</a> 在 PC 上调试 Android 设备网页内容</h3> <p>将安卓手机通过数据线连接到电脑，打开手机的开发者选项，允许 USB 调试。打开 Chrome 浏览器，访问 <code>chrome://inspect#devices</code> 检测到设备后即可开始调试。注意：数据线问题可能导致找不到手机。</p> <p>在 Chrome DevTools 面板中，More Tools - Remote devices 已废弃（deprecated），直接访问 <code>chrome://inspect#devices</code> 即可。</p> <blockquote><p>This panel has been deprecated in favor of the chrome://inspect/#devices interface, which has equivalent functionality.</p></blockquote> <ul><li>deprecate   <code>[ˈdeprəkeɪt]</code> deprecated v. 不赞成；弃用；不宜用</li> <li>in favor of  有利于；支持；赞同</li> <li>equivalent  <code>[ɪˈkwɪvələnt]</code> 相等的；等价的；等效的；</li> <li>functionality  <code>[ˌfʌŋkʃəˈnæləti]</code> n. 功能；</li></ul> <p>参考：</p> <ul><li><a href="https://zhuanlan.zhihu.com/p/265181365" target="_blank" rel="noopener noreferrer">远程调试Android设备 | 知乎<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developers.google.cn/web/tools/chrome-devtools/remote-debugging/?hl=zh-cn" target="_blank" rel="noopener noreferrer">Android 设备的远程调试入门  |  Chrome DevTools  |  Google Developers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="错误处理-try-catch-finally"><a href="#错误处理-try-catch-finally" class="header-anchor">#</a> 错误处理 try/catch/finally</h2> <p>try/catch 可以捕获错误，可以解决出现错误后代码停止向下执行的问题。catch 捕获到错误时，event 会包含如下属性</p> <ul><li><code>message</code> 错误信息，所有浏览器都支持</li> <li><code>description</code> IE，其值始终等于 message</li> <li><code>number</code> IE，内部错误号</li> <li><code>fileName</code> Firefox，发生错误所在的文件名</li> <li><code>lineNumber</code> Firefox，发生错误所在的行号</li> <li><code>stack</code> Firefox/Safari/Chrome，错误的栈跟踪信息</li> <li><code>line</code> Safari，行号</li> <li><code>sourceId</code> Safari，实际值为 undefined</li> <li><code>sourceURL</code> Safari，发生错误所在的 URL</li></ul> <p>出于浏览器兼容性考虑，建议仅使用 message 属性，错误信息 event 属性兼容性测试 demo，参见：<a href="https://github.com/zuoxiaobai/fedemo/blob/master/src/JS_ES6/JS%E9%AB%98%E7%A8%8B3/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E4%B8%8E%E8%B0%83%E8%AF%95/errorPropTest.html" target="_blank" rel="noopener noreferrer">error 事件 event 属性兼容性测试 demo | Github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token comment">// 可能导致的错误代码</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> e<span class="token punctuation">;</span>
  e<span class="token punctuation">.</span><span class="token function">showMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 这里会出现一个错误，后面的代码不会执行，会执行catch里的代码</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 在错误处理时怎么处理</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">)</span> <span class="token comment">// 打印错误信息</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'finally'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 1</span>
<span class="token comment">// Cannot read property 'showMessage' of undefined</span>
<span class="token comment">// finally</span>
</code></pre></div><p>如果加了 finally，try/catch 中的 return 都不会中断 finally 的执行。最终还是会执行 fianlly。下面的例子中，函数会返回 0, 不管正确还是错误，最终都会执行 finally 的内容</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">testFinally</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_8-种错误类型"><a href="#_8-种错误类型" class="header-anchor">#</a> 8 种错误类型</h2> <ul><li>Error 基类型，其他错误类型都是继承自该类型，主要用于抛出自定义错误</li> <li>InternalError 底层 JS 引擎抛出异常时由浏览器抛出，例如：栈溢出</li> <li>EvalError 在使用 eval() 函数异常时会抛出该错误，浏览器实现会有区别 new eval() 会抛出 TypeError，eval 赋值仅 IE 会抛出异常。</li> <li>RangeError 范围错误，数值超出范围时，会触发该错误</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> item <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Uncaught RangeError: Invalid array length</span>
</code></pre></div><ul><li>ReferenceError 参考/引用错误，在找不到对象的情况下会抛出该错误</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> x <span class="token comment">// 这里的x未定义</span>
<span class="token comment">// Uncaught ReferenceError: x is not defined</span>
</code></pre></div><ul><li>SyntaxError 语法错误 <code>[ˈsɪntaks]</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// let重复定义了k，回报语法错误</span>
<span class="token comment">// Uncaught SyntaxError: Identifier 'k' has already been declared</span>

<span class="token keyword">try</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 这里明显语法错误</span>
<span class="token comment">// Uncaught SyntaxError: Unexpected token (</span>
</code></pre></div><ul><li>TypeError 类型错误</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> k <span class="token operator">=</span> <span class="token number">1</span> 
k<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 数字变量，调用了一个函数</span>
<span class="token comment">// Uncaught TypeError: k.getInfo is not a function</span>

<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">10</span> <span class="token comment">// 10不是一个构造函数</span>
<span class="token comment">// Uncaught TypeError: 10 is not a constructor</span>
</code></pre></div><ul><li>URIError 当 encodeURI() 或 decodeURI() 执行时，URI 格式不正确，会导致该错误，基本不会发生该错误，默认会将参数值转为字符串再编码/解码。</li></ul> <h2 id="抛出自定义错误"><a href="#抛出自定义错误" class="header-anchor">#</a> 抛出自定义错误</h2> <p>通过 throw 操作符可以在任何时候抛出异常，如果没有使用 try/catch 捕获会阻止程序向下执行。throw 抛出的异常信息不一定是 Error 类型，信息是由 throw 后面的值指定。这个值的类型不限，try/catch 时 catch 捕获的值就是 throw 后面的值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">throw</span> <span class="token number">123</span> <span class="token comment">// Uncaught 123</span>
<span class="token keyword">throw</span> <span class="token string">&quot;hello&quot;</span> <span class="token comment">// Uncaught hello</span>
<span class="token keyword">throw</span> <span class="token boolean">true</span> <span class="token comment">// Uncaught true</span>
<span class="token keyword">throw</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token comment">// Uncaught { a: 1 }</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token string">'123'</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token comment">// '123'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>使用 throw 抛出自定义错误信息</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'custom message'</span><span class="token punctuation">)</span> <span class="token comment">// 这里除了可以抛出 Error 类型错误外，还可以抛出其他 7 种错误</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error message: '</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error message:  custom message</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error name: '</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error name:  Error   // 这里错误类型为 Error</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error fileName: '</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error fileName:  undefined</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error lineNumber: '</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>lineNumber<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error lineNumber:  undefined</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error columnNumber: '</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>columnNumber<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error columnNumber:  undefined</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error stack: '</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>stack<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error stack:  Error: custom message at http://127.0.0.1/error.html:11:19</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="window-的-error-事件"><a href="#window-的-error-事件" class="header-anchor">#</a> window 的 error 事件</h2> <p>当发生了错误，但没有使用 try/catch 捕获时，会触发在 window 对象上触发 error 事件，该事件有三个参数：</p> <ul><li><code>message</code> 错误信息</li> <li><code>url</code> 错误文件url</li> <li><code>line</code> 错误发生的行数</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>error<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>text/javascript<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      <span class="token comment">// 如果错误有try-catch捕获，那程序会继续执行，如果没有捕获，会触发error事件，程序不会向下执行，注意：window.onerror要放在最前面</span>
      window<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">,</span> url<span class="token punctuation">,</span> line</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'message: '</span> <span class="token operator">+</span> message<span class="token punctuation">)</span> <span class="token comment">// message: Uncaught TypeError: 类型错误</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'url: '</span> <span class="token operator">+</span> url<span class="token punctuation">)</span> <span class="token comment">// url: http://127.0.0.1/error.html</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'line:'</span> <span class="token operator">+</span> line<span class="token punctuation">)</span> <span class="token comment">// line:25</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'custom message'</span><span class="token punctuation">,</span> <span class="token string">'t.js'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error message: '</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error message:  custom message</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error name: '</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error name:  Error</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error fileName: '</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error fileName:  undefined</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error lineNumber: '</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>lineNumber<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error lineNumber:  undefined</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error columnNumber: '</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>columnNumber<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error columnNumber:  undefined</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error stack: '</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>stack<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error stack:  Error: custom message at http://127.0.0.1/error.html:11:19</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'类型错误'</span><span class="token punctuation">)</span> <span class="token comment">// 这里触发的错误，onerror会触发</span>
      cosnole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'info'</span><span class="token punctuation">)</span> <span class="token comment">// 这里不会执行，浏览器实现会有差异，onerror 处理函数中 return，就类似于 try/catch 了</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="处理错误的策略"><a href="#处理错误的策略" class="header-anchor">#</a> 处理错误的策略</h2> <p>常见的错误类型</p> <ul><li>类型转换错误, == 与 === 要注意区分</li> <li>TypeError 数据类型错误, 比如非数组，却执行了数组的方法</li> <li>通信错误，URL 中如果包含了另一个 redirect url 参数，需要用 encodeURIComponent() 转码，防止 URL 格式错误</li></ul> <p>可以使用静态代码分析器，比如 ESLint 等。</p> <h3 id="区分致命错误和非致命错"><a href="#区分致命错误和非致命错" class="header-anchor">#</a> 区分致命错误和非致命错</h3> <p>非致命错误，根据以下一个或多个条件确定：</p> <ul><li>不影响用户的主要任务</li> <li>只影响页面的一部分</li> <li>可以恢复</li> <li>重复相同操作可以消除错误</li></ul> <p>致命错误，可以通过一个或多个条件确定</p> <ul><li>应用程序根本无法继续运行</li> <li>错误明显影响了用户的主要操作</li> <li>会导致其他连带错误</li></ul> <h3 id="把错误记录到服务器"><a href="#把错误记录到服务器" class="header-anchor">#</a> 把错误记录到服务器</h3> <p>日志记录，需要写一个接口来上报信息。这里使用了 Image 对象来发送请求，有以下几个好处：</p> <ol><li>所有浏览器都支持Image对象</li> <li>可以避免跨域限制</li> <li>记录错误的过程中出问题的概率比较低</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">logError</span><span class="token punctuation">(</span><span class="token parameter">sev<span class="token punctuation">,</span> msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// sev 严重程度</span>
  <span class="token comment">// msg 错误信息</span>
  <span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;log.php?sev=&quot;</span> <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>sev<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&amp;msg=&quot;</span> <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 开始使用</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token comment">// 可能发生错误的情况</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// nonfatal adj. 非致命的 ，fatal [ˈfeɪt(ə)l] 致命的</span>
  <span class="token function">logError</span><span class="token punctuation">(</span><span class="token string">'nonfatal'</span><span class="token punctuation">,</span> <span class="token string">'Moudle init failed: '</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="调试技术"><a href="#调试技术" class="header-anchor">#</a> 调试技术</h2> <p>调试错误可以使用 alert() 弹出警告信息，但 alert() 会阻塞程序向下执行，不推荐使用。一般可以使用 console.log 将消息记录到控制台。另外也可以使用浏览器的断点调试功能，ES5 中新增了 debugger 关键字，用于以程序化的方式下断点。在移动端，由于真机运行不方便调试，vconsole 这个工具拦截了系统的 console, xhr 等，在页面中可视化显示调试信息，是移动端调试的利器。</p> <h3 id="使用-console-把消息记录到控制台"><a href="#使用-console-把消息记录到控制台" class="header-anchor">#</a> 使用 console 把消息记录到控制台</h3> <p>console 除了我们平常使用到的 log() 函数外，还支持 info()，warn()，error()</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'一般消息'</span><span class="token punctuation">)</span> <span class="token comment">// 一般消息</span>
console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'信息性消息'</span><span class="token punctuation">)</span> <span class="token comment">// 信息性消息</span>
console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">'警告消息'</span><span class="token punctuation">)</span> <span class="token comment">// 警告消息</span>
console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'错误消息'</span><span class="token punctuation">)</span> <span class="token comment">// 错误消息</span>
</code></pre></div><p><img src="/images/js/console%E6%88%AA%E5%9B%BE.png" alt="console截图"></p> <h3 id="浏览器断点调试-debugger"><a href="#浏览器断点调试-debugger" class="header-anchor">#</a> 浏览器断点调试/debugger</h3> <p>chrome 断点调试参见 <a href="http://www.zuo11.com/blog/2019/11/breakpoint.html" target="_blank" rel="noopener noreferrer">怎么使用Chrome断点调试功能，断点调试使用场景 - 左小白的技术日常<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>在 ES5 中，新增了 debugger 关键字，用于以程序化的方式下断点。打开页面时，程序会停留在该位置，并自动打开 DevTools 调试面板，点击按钮（Resume script execution, Resume <code>[rɪˈzjuːm]</code>）可以继续向下执行</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">123</span>
  <span class="token keyword">let</span> b <span class="token operator">=</span> a <span class="token operator">**</span> <span class="token number">2</span>
  <span class="token keyword">debugger</span>
  <span class="token keyword">let</span> c <span class="token operator">=</span> a <span class="token operator">*</span> b
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>运行效果如下图：</p> <p><img src="/images/js/debugger.png" alt="debugger.png"></p> <h3 id="在页面中打印消息-拦截原生-console"><a href="#在页面中打印消息-拦截原生-console" class="header-anchor">#</a> 在页面中打印消息/拦截原生 console</h3> <p>可以自定义一个 log() 函数，在需要记录 log 时调用。log() 函数每次执行时，可以像 dom 指定区域 append 错误信息的 DOM。</p> <p>vconsole 的思路就是这样，先拦截 console、xhr 等系统方法，在把信息 append 到页面的 DOM 中，方便查看。更多细节参考：<a href="http://www.zuo11.com/blog/2020/9/vconsole.html" target="_blank" rel="noopener noreferrer">为什么vconsole直接new一下就能引入，实现原理是什么？ - 左小白的技术日常<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="抛出错误-throw-assert"><a href="#抛出错误-throw-assert" class="header-anchor">#</a> 抛出错误 throw/assert()</h3> <p>抛出错误是调试代码的好方法，只要看一眼错误就能确定错误的确切信息，可以节省额外调试的工作量。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">divide</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> num1 <span class="token operator">!=</span> <span class="token string">'number'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> num2 <span class="token operator">!=</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'divide(): 所有的参数必须是 number 类型'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> num1 <span class="token operator">/</span> num2
<span class="token punctuation">}</span>
<span class="token comment">// divide(1, 2)</span>
<span class="token comment">// 0.5</span>
<span class="token comment">// divide(3, '123')</span>
<span class="token comment">// Uncaught Error: divide(): 所有的参数必须是 number 类型</span>
<span class="token comment">//   at divide (&lt;anonymous&gt;:3:11)</span>
<span class="token comment">//   at &lt;anonymous&gt;:1:1</span>
</code></pre></div><p>一般对于错误比较多的场景，会使用 assert() <code>[əˈsɜːt]</code> 断言函数来封装抛出异常的操作，使抛出自定义错误时代码更加简洁，更好理解。下面使用 assert() 来重构上面的代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">assert</span><span class="token punctuation">(</span><span class="token parameter">condition<span class="token punctuation">,</span> errorMsg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>errorMsg<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">divide</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">assert</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> num1 <span class="token operator">!=</span> <span class="token string">'number'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> num2 <span class="token operator">!=</span> <span class="token string">'number'</span><span class="token punctuation">,</span> <span class="token string">'divide(): 所有的参数必须是 number 类型'</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> num1 <span class="token operator">/</span> num2
<span class="token punctuation">}</span>
</code></pre></div><h2 id="旧版-ie-的常见错误"><a href="#旧版-ie-的常见错误" class="header-anchor">#</a> 旧版 IE 的常见错误</h2> <p>IE 曾是最难调试 JS 错误的浏览器之一，旧版本抛出的错误通常比较简短，比较含糊，缺少上下文。</p> <ul><li>无效字符 'invalid character'，在检测到 JS 文件中存在无效字符时抛出</li> <li>未找到成员 'member not found'，旧版 IE 中 DOM 对象都是使用非原生 JS 对象（COM 对象）实现的，在垃圾回收时，可能会导致一些奇怪的行为。如果一个已销毁的对象，给他赋值时会出现该错误。</li> <li>未知运行时错误，比如 <code>&lt;p&gt;</code> 标签内包含另一个块级元素时触发</li> <li>语法错误</li> <li>系统找不到指定资源 'the system cannot locate the resource specified'，如果 URL 长度超过了 2083 个字符会发生该错误。</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2020/12/11 下午6:59:29</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/js/ad3/js-ad3-20.html" class="prev">
        20. JavaScript API - JS高程4
      </a></span> <span class="next"><a href="/js/ad3/js-ad3-22.html">
        22. 处理 XML - JS高程4
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.0bf21a3f.js" defer></script><script src="/assets/js/2.3f8a6b0b.js" defer></script><script src="/assets/js/82.e484c003.js" defer></script><script src="/assets/js/3.018b29e2.js" defer></script>
  </body>
</html>
