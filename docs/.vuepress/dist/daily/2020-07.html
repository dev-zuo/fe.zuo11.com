<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2020年07月技术日常 | 左小白的前端笔记</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="左小白的前端笔记，归纳整理自己在前端工作、学习中的一些心得笔记，有利于前端知识系统化。包括 Vue.js、前端工程化（TypeScript、Node.js、webpack）、Docker、JS/ES6、CSS/CSS3、HTML/HTML5、数据可视化、计算机基础、英语等笔记。">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.594b47db.css" as="style"><link rel="preload" href="/assets/js/app.1f511cd1.js" as="script"><link rel="preload" href="/assets/js/2.4b3539f1.js" as="script"><link rel="preload" href="/assets/js/43.8d141598.js" as="script"><link rel="preload" href="/assets/js/3.e6a4dd76.js" as="script"><link rel="prefetch" href="/assets/js/10.f7d631a1.js"><link rel="prefetch" href="/assets/js/100.62403a37.js"><link rel="prefetch" href="/assets/js/101.9eead1bc.js"><link rel="prefetch" href="/assets/js/102.a5a8c608.js"><link rel="prefetch" href="/assets/js/103.2261e92e.js"><link rel="prefetch" href="/assets/js/104.deecf853.js"><link rel="prefetch" href="/assets/js/105.d309d997.js"><link rel="prefetch" href="/assets/js/106.a16552d1.js"><link rel="prefetch" href="/assets/js/107.b2e9608f.js"><link rel="prefetch" href="/assets/js/108.8a2e6046.js"><link rel="prefetch" href="/assets/js/109.43e70fa7.js"><link rel="prefetch" href="/assets/js/11.12c7819b.js"><link rel="prefetch" href="/assets/js/110.0ae45b0c.js"><link rel="prefetch" href="/assets/js/111.3df4e9b7.js"><link rel="prefetch" href="/assets/js/112.f7699b84.js"><link rel="prefetch" href="/assets/js/113.e06ce766.js"><link rel="prefetch" href="/assets/js/114.0e500700.js"><link rel="prefetch" href="/assets/js/115.0cc12c39.js"><link rel="prefetch" href="/assets/js/116.77095d46.js"><link rel="prefetch" href="/assets/js/117.8f2f1eca.js"><link rel="prefetch" href="/assets/js/118.39b86b7e.js"><link rel="prefetch" href="/assets/js/119.da684fa3.js"><link rel="prefetch" href="/assets/js/12.66186d22.js"><link rel="prefetch" href="/assets/js/120.92adaeae.js"><link rel="prefetch" href="/assets/js/121.4dec411b.js"><link rel="prefetch" href="/assets/js/122.fbdacf5a.js"><link rel="prefetch" href="/assets/js/123.444c7f44.js"><link rel="prefetch" href="/assets/js/124.d0efc8b3.js"><link rel="prefetch" href="/assets/js/125.b4743d87.js"><link rel="prefetch" href="/assets/js/126.267168eb.js"><link rel="prefetch" href="/assets/js/127.f1f0b9ff.js"><link rel="prefetch" href="/assets/js/128.79439601.js"><link rel="prefetch" href="/assets/js/129.006b152d.js"><link rel="prefetch" href="/assets/js/13.94147151.js"><link rel="prefetch" href="/assets/js/130.86722a54.js"><link rel="prefetch" href="/assets/js/131.69c4ebcb.js"><link rel="prefetch" href="/assets/js/132.0d7e0897.js"><link rel="prefetch" href="/assets/js/133.d8bf7015.js"><link rel="prefetch" href="/assets/js/134.aeabc9d5.js"><link rel="prefetch" href="/assets/js/135.e1591304.js"><link rel="prefetch" href="/assets/js/136.bf5f4e6a.js"><link rel="prefetch" href="/assets/js/137.327a62e0.js"><link rel="prefetch" href="/assets/js/138.47e8b430.js"><link rel="prefetch" href="/assets/js/139.8ce7878c.js"><link rel="prefetch" href="/assets/js/14.e81004ee.js"><link rel="prefetch" href="/assets/js/140.5a4d28db.js"><link rel="prefetch" href="/assets/js/141.b63840e7.js"><link rel="prefetch" href="/assets/js/142.765333b1.js"><link rel="prefetch" href="/assets/js/143.d3f7d7e0.js"><link rel="prefetch" href="/assets/js/144.bbad5941.js"><link rel="prefetch" href="/assets/js/145.066623a9.js"><link rel="prefetch" href="/assets/js/146.8e265805.js"><link rel="prefetch" href="/assets/js/147.d9d37261.js"><link rel="prefetch" href="/assets/js/148.af57cd78.js"><link rel="prefetch" href="/assets/js/149.61115cb0.js"><link rel="prefetch" href="/assets/js/15.1326e39c.js"><link rel="prefetch" href="/assets/js/150.931e6dbc.js"><link rel="prefetch" href="/assets/js/151.ba91f6a4.js"><link rel="prefetch" href="/assets/js/152.c371187e.js"><link rel="prefetch" href="/assets/js/153.2d8af3b7.js"><link rel="prefetch" href="/assets/js/154.15b96843.js"><link rel="prefetch" href="/assets/js/155.db935936.js"><link rel="prefetch" href="/assets/js/156.85519e24.js"><link rel="prefetch" href="/assets/js/157.c91ed6ba.js"><link rel="prefetch" href="/assets/js/16.eb71a02a.js"><link rel="prefetch" href="/assets/js/17.f4a7a522.js"><link rel="prefetch" href="/assets/js/18.c730c964.js"><link rel="prefetch" href="/assets/js/19.4d7dfdc0.js"><link rel="prefetch" href="/assets/js/20.74075251.js"><link rel="prefetch" href="/assets/js/21.6f2ce4c0.js"><link rel="prefetch" href="/assets/js/22.b6efd501.js"><link rel="prefetch" href="/assets/js/23.c06a1b16.js"><link rel="prefetch" href="/assets/js/24.ad5c06ea.js"><link rel="prefetch" href="/assets/js/25.06895800.js"><link rel="prefetch" href="/assets/js/26.5edf933c.js"><link rel="prefetch" href="/assets/js/27.4ecf6215.js"><link rel="prefetch" href="/assets/js/28.3f66d916.js"><link rel="prefetch" href="/assets/js/29.ba60ca65.js"><link rel="prefetch" href="/assets/js/30.b6b55d35.js"><link rel="prefetch" href="/assets/js/31.5fa558a4.js"><link rel="prefetch" href="/assets/js/32.1671d948.js"><link rel="prefetch" href="/assets/js/33.b8151898.js"><link rel="prefetch" href="/assets/js/34.fc4cac22.js"><link rel="prefetch" href="/assets/js/35.257f3cea.js"><link rel="prefetch" href="/assets/js/36.33d4f83d.js"><link rel="prefetch" href="/assets/js/37.8d0a586e.js"><link rel="prefetch" href="/assets/js/38.34f4ef54.js"><link rel="prefetch" href="/assets/js/39.65fae495.js"><link rel="prefetch" href="/assets/js/4.aeb07d0c.js"><link rel="prefetch" href="/assets/js/40.79d11166.js"><link rel="prefetch" href="/assets/js/41.4a6fbd57.js"><link rel="prefetch" href="/assets/js/42.f49c21cb.js"><link rel="prefetch" href="/assets/js/44.703ca403.js"><link rel="prefetch" href="/assets/js/45.4b04f0f6.js"><link rel="prefetch" href="/assets/js/46.22b3c15a.js"><link rel="prefetch" href="/assets/js/47.706163e5.js"><link rel="prefetch" href="/assets/js/48.c7d214f0.js"><link rel="prefetch" href="/assets/js/49.baf1de95.js"><link rel="prefetch" href="/assets/js/5.5b94bff7.js"><link rel="prefetch" href="/assets/js/50.ad635ba5.js"><link rel="prefetch" href="/assets/js/51.513ee75a.js"><link rel="prefetch" href="/assets/js/52.ea1b4b45.js"><link rel="prefetch" href="/assets/js/53.61eca69d.js"><link rel="prefetch" href="/assets/js/54.e0d4a9e1.js"><link rel="prefetch" href="/assets/js/55.f12ee302.js"><link rel="prefetch" href="/assets/js/56.23108a6b.js"><link rel="prefetch" href="/assets/js/57.aac4a472.js"><link rel="prefetch" href="/assets/js/58.27581ad6.js"><link rel="prefetch" href="/assets/js/59.a661c91c.js"><link rel="prefetch" href="/assets/js/6.481b22df.js"><link rel="prefetch" href="/assets/js/60.4db8717d.js"><link rel="prefetch" href="/assets/js/61.b1d1aa7e.js"><link rel="prefetch" href="/assets/js/62.f3d59428.js"><link rel="prefetch" href="/assets/js/63.0a5db164.js"><link rel="prefetch" href="/assets/js/64.43b1dbf4.js"><link rel="prefetch" href="/assets/js/65.9e2cfd46.js"><link rel="prefetch" href="/assets/js/66.8d2e6fce.js"><link rel="prefetch" href="/assets/js/67.316e3bba.js"><link rel="prefetch" href="/assets/js/68.2a9ea7c0.js"><link rel="prefetch" href="/assets/js/69.013f3120.js"><link rel="prefetch" href="/assets/js/7.cb937ed7.js"><link rel="prefetch" href="/assets/js/70.6c7635f8.js"><link rel="prefetch" href="/assets/js/71.f383131f.js"><link rel="prefetch" href="/assets/js/72.9ed6be02.js"><link rel="prefetch" href="/assets/js/73.5c649771.js"><link rel="prefetch" href="/assets/js/74.597f8d6d.js"><link rel="prefetch" href="/assets/js/75.a38dc25a.js"><link rel="prefetch" href="/assets/js/76.407167b5.js"><link rel="prefetch" href="/assets/js/77.6046be23.js"><link rel="prefetch" href="/assets/js/78.117ef2a9.js"><link rel="prefetch" href="/assets/js/79.2fd97fcb.js"><link rel="prefetch" href="/assets/js/8.dcd2d777.js"><link rel="prefetch" href="/assets/js/80.3ebdbb88.js"><link rel="prefetch" href="/assets/js/81.756f28cf.js"><link rel="prefetch" href="/assets/js/82.3357dd0a.js"><link rel="prefetch" href="/assets/js/83.75bc4803.js"><link rel="prefetch" href="/assets/js/84.bf3d114b.js"><link rel="prefetch" href="/assets/js/85.4ea0353f.js"><link rel="prefetch" href="/assets/js/86.2105b04f.js"><link rel="prefetch" href="/assets/js/87.96f9597f.js"><link rel="prefetch" href="/assets/js/88.b5409c8c.js"><link rel="prefetch" href="/assets/js/89.7459ba86.js"><link rel="prefetch" href="/assets/js/9.e0f173ad.js"><link rel="prefetch" href="/assets/js/90.a66ecac8.js"><link rel="prefetch" href="/assets/js/91.80cc472d.js"><link rel="prefetch" href="/assets/js/92.63c9c0c5.js"><link rel="prefetch" href="/assets/js/93.54570d9f.js"><link rel="prefetch" href="/assets/js/94.168f1690.js"><link rel="prefetch" href="/assets/js/95.595b78a5.js"><link rel="prefetch" href="/assets/js/96.59571918.js"><link rel="prefetch" href="/assets/js/97.e69ef9d0.js"><link rel="prefetch" href="/assets/js/98.d3ad2eac.js"><link rel="prefetch" href="/assets/js/99.70ea2b6d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.594b47db.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">左小白的前端笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南" class="dropdown-title"><span class="title">指南</span> <span class="arrow down"></span></button> <button type="button" aria-label="指南" class="mobile-dropdown-title"><span class="title">指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  首页
</a></li><li class="dropdown-item"><!----> <a href="/nav.html" class="nav-link">
  前端网址导航
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><span class="title">前端进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端进阶" class="mobile-dropdown-title"><span class="title">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daily/" class="nav-link router-link-active">
  技术日常记录
</a></li><li class="dropdown-item"><!----> <a href="/server/docker.html" class="nav-link">
  Docker 基础
</a></li><li class="dropdown-item"><h4>
          Vue.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/base/1.html" class="nav-link">
  Vue.js 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vue-router.html" class="nav-link">
  Vue Router 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vuex.html" class="nav-link">
  Vuex 笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          前端工程化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ts/base-1.html" class="nav-link">
  TypeScript 入门教程笔记
</a></li><li class="dropdown-subitem"><a href="/node/base/1.html" class="nav-link">
  Node.js 笔记
</a></li><li class="dropdown-subitem"><a href="/webpack/base.html" class="nav-link">
  webpack 基础
</a></li></ul></li><li class="dropdown-item"><h4>
          数据可视化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/visual/echarts.html" class="nav-link">
  Echarts 笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS/ES6
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/js/es6/es6-1.html" class="nav-link">
  ES6标准入门(第三版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/ad3/js-ad3-1.html" class="nav-link">
  JavaScript高级程序设计(第四版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/js-dom-art.html" class="nav-link">
  JavaScript DOM编程艺术(第二版)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS/CSS3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/css/less.html" class="nav-link">
  CSS 预处理器 Less.js
</a></li><li class="dropdown-subitem"><a href="/css/flex-grid.html" class="nav-link">
  Flex与Grid布局
</a></li><li class="dropdown-subitem"><a href="/css/html5-css-1.html" class="nav-link">
  HTML5权威指南(CSS部分)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          HTML/HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html5/html/1.html" class="nav-link">
  HTML5权威指南(HTML部分)笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/base/js-data-struct.html" class="nav-link">
  学习JavaScript数据结构与算法(第三版)笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/mocha-test.html" class="nav-link">
  Mocha - JavaScript测试框架
</a></li><li class="dropdown-item"><!----> <a href="/base/git.html" class="nav-link">
  Git 笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/markdown.html" class="nav-link">
  Markdown 基础语法
</a></li><li class="dropdown-item"><!----> <a href="/base/dbtheory/1.html" class="nav-link">
  数据库系统原理笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开源项目" class="dropdown-title"><span class="title">开源项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="开源项目" class="mobile-dropdown-title"><span class="title">开源项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://vuechart.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @guoqzuo/vue-chart
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://zuoblog.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  zuo-blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="http://www.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/zuoxiaobai" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南" class="dropdown-title"><span class="title">指南</span> <span class="arrow down"></span></button> <button type="button" aria-label="指南" class="mobile-dropdown-title"><span class="title">指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  首页
</a></li><li class="dropdown-item"><!----> <a href="/nav.html" class="nav-link">
  前端网址导航
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><span class="title">前端进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端进阶" class="mobile-dropdown-title"><span class="title">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daily/" class="nav-link router-link-active">
  技术日常记录
</a></li><li class="dropdown-item"><!----> <a href="/server/docker.html" class="nav-link">
  Docker 基础
</a></li><li class="dropdown-item"><h4>
          Vue.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/base/1.html" class="nav-link">
  Vue.js 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vue-router.html" class="nav-link">
  Vue Router 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vuex.html" class="nav-link">
  Vuex 笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          前端工程化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ts/base-1.html" class="nav-link">
  TypeScript 入门教程笔记
</a></li><li class="dropdown-subitem"><a href="/node/base/1.html" class="nav-link">
  Node.js 笔记
</a></li><li class="dropdown-subitem"><a href="/webpack/base.html" class="nav-link">
  webpack 基础
</a></li></ul></li><li class="dropdown-item"><h4>
          数据可视化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/visual/echarts.html" class="nav-link">
  Echarts 笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS/ES6
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/js/es6/es6-1.html" class="nav-link">
  ES6标准入门(第三版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/ad3/js-ad3-1.html" class="nav-link">
  JavaScript高级程序设计(第四版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/js-dom-art.html" class="nav-link">
  JavaScript DOM编程艺术(第二版)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS/CSS3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/css/less.html" class="nav-link">
  CSS 预处理器 Less.js
</a></li><li class="dropdown-subitem"><a href="/css/flex-grid.html" class="nav-link">
  Flex与Grid布局
</a></li><li class="dropdown-subitem"><a href="/css/html5-css-1.html" class="nav-link">
  HTML5权威指南(CSS部分)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          HTML/HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html5/html/1.html" class="nav-link">
  HTML5权威指南(HTML部分)笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/base/js-data-struct.html" class="nav-link">
  学习JavaScript数据结构与算法(第三版)笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/mocha-test.html" class="nav-link">
  Mocha - JavaScript测试框架
</a></li><li class="dropdown-item"><!----> <a href="/base/git.html" class="nav-link">
  Git 笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/markdown.html" class="nav-link">
  Markdown 基础语法
</a></li><li class="dropdown-item"><!----> <a href="/base/dbtheory/1.html" class="nav-link">
  数据库系统原理笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开源项目" class="dropdown-title"><span class="title">开源项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="开源项目" class="mobile-dropdown-title"><span class="title">开源项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://vuechart.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @guoqzuo/vue-chart
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://zuoblog.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  zuo-blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="http://www.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/zuoxiaobai" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/daily/" aria-current="page" class="sidebar-link">技术日常记录</a></li><li><a href="/daily/2020-12.html" class="sidebar-link">2020年12月技术日常</a></li><li><a href="/daily/2020-11.html" class="sidebar-link">2020年11月技术日常</a></li><li><a href="/daily/2020-10.html" class="sidebar-link">2020年10月技术日常</a></li><li><a href="/daily/2020-09.html" class="sidebar-link">2020年09月技术日常</a></li><li><a href="/daily/2020-08.html" class="sidebar-link">2020年08月技术日常</a></li><li><a href="/daily/2020-07.html" aria-current="page" class="active sidebar-link">2020年07月技术日常</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-07.html#_2020-07-30-周四" class="sidebar-link">2020/07/30 周四</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-07.html#什么是好的代码" class="sidebar-link">什么是好的代码？</a></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#vue使用js显示弹窗组件" class="sidebar-link">vue使用js显示弹窗组件</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#_2020-07-26-周日" class="sidebar-link">2020/07/26 周日</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-07.html#echarts饼图label两端对齐label距离引导线距离" class="sidebar-link">echarts饼图label两端对齐label距离引导线距离</a></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#element表单中-人数输入框怎么限制只能输入正整数" class="sidebar-link">element表单中，人数输入框怎么限制只能输入正整数</a></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#怎么开发vscode插件" class="sidebar-link">怎么开发vscode插件</a></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#loadash节流与防抖理解" class="sidebar-link">loadash节流与防抖理解</a></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#element源码中节流与防抖的应用" class="sidebar-link">element源码中节流与防抖的应用</a></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#log2n对数在前端的应用场景-把文件大小或金额自动添加合适的单位" class="sidebar-link">log2n对数在前端的应用场景：把文件大小或金额自动添加合适的单位</a></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#关于常用组件、样式、工具函数封装代码快速复用的思考" class="sidebar-link">关于常用组件、样式、工具函数封装代码快速复用的思考</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#_2020-07-25-周六" class="sidebar-link">2020/07/25 周六</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-07.html#el-input类型为textarea时不能使用v-model-trim" class="sidebar-link">el-input类型为textarea时不能使用v-model.trim</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#_2020-07-24-周四" class="sidebar-link">2020/07/24 周四</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-07.html#git修改上上次的commit备注信息" class="sidebar-link">git修改上上次的commit备注信息</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#_2020-07-22" class="sidebar-link">2020/07/22</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-07.html#echarts动态改变option里datazoom的值没有实时生效的问题" class="sidebar-link">echarts动态改变option里dataZoom的值没有实时生效的问题</a></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#http请求有哪几种传参方式" class="sidebar-link">http请求有哪几种传参方式</a></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#object-assgin时是否会忽略null-undefined-空字符串" class="sidebar-link">Object.assgin时是否会忽略null,undefined,空字符串</a></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#git将远程仓库a分支合并到b分支" class="sidebar-link">git将远程仓库A分支合并到B分支</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#_2020-07-17-周五" class="sidebar-link">2020/07/17 周五</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-07.html#前端修改cookie后-相关cookie改动会传到后台吗" class="sidebar-link">前端修改cookie后，相关cookie改动会传到后台吗</a></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#element合并单元格利用css自定义表格border" class="sidebar-link">element合并单元格利用css自定义表格border</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#_2020-07-12-周日" class="sidebar-link">2020/07/12 周日</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-07.html#github-clone下载太慢怎么解决" class="sidebar-link">github clone下载太慢怎么解决</a></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#js获取location-href不真实的问题" class="sidebar-link">js获取location.href不真实的问题</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#_2020-07-09-周四" class="sidebar-link">2020/07/09 周四</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-07.html#表格怎么画斜线" class="sidebar-link">表格怎么画斜线</a></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#权限code状态管理设计" class="sidebar-link">权限code状态管理设计</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#_2020-07-08-周三" class="sidebar-link">2020/07/08 周三</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-07.html#pc样式自适应rem" class="sidebar-link">pc样式自适应rem</a></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#background设置图片背景相关" class="sidebar-link">background设置图片背景相关</a></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#移动端rem自适应" class="sidebar-link">移动端rem自适应</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#_2020-07-05-周日" class="sidebar-link">2020/07/05 周日</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-07.html#vue实现一个tree组件" class="sidebar-link">vue实现一个tree组件</a></li><li class="sidebar-sub-header"><a href="/daily/2020-07.html#select渲染上万条数据卡顿的问题" class="sidebar-link">select渲染上万条数据卡顿的问题</a></li></ul></li></ul></li><li><a href="/daily/2020-06.html" class="sidebar-link">2020年06月技术日常</a></li><li><a href="/daily/2020-05.html" class="sidebar-link">2020年05月技术日常</a></li><li><a href="/daily/2020-04.html" class="sidebar-link">2020年04月技术日常</a></li><li><a href="/daily/2020-03.html" class="sidebar-link">2020年03月技术日常</a></li><li><a href="/daily/2020-02.html" class="sidebar-link">2020年02月技术日常</a></li><li><a href="/daily/2020-01.html" class="sidebar-link">2020年01月技术日常</a></li><li><a href="/daily/2019-12.html" class="sidebar-link">2019年12月技术日常</a></li><li><a href="/daily/2019-11.html" class="sidebar-link">2019年11月技术日常</a></li><li><a href="/daily/2019-10.html" class="sidebar-link">2019年10月技术日常</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2020年07月技术日常"><a href="#_2020年07月技术日常" class="header-anchor">#</a> 2020年07月技术日常</h1> <h2 id="_2020-07-30-周四"><a href="#_2020-07-30-周四" class="header-anchor">#</a> 2020/07/30 周四</h2> <h3 id="什么是好的代码"><a href="#什么是好的代码" class="header-anchor">#</a> 什么是好的代码？</h3> <p>在web前端方面，什么是好的代码？好的代码应该包含以下两个特性</p> <ul><li>高性能，低时延（性能优化）
<ul><li>熟悉数据结构与算法，减少时间复杂度或空间复杂度</li> <li>熟悉浏览器渲染基本原理、熟悉HTTP请求与响应细节、熟悉前端框架源码、减少不必要的渲染开销，提高加载速度</li></ul></li> <li>可读性、可维护性、可扩展性
<ul><li>熟悉设计模式，封装变化。代码高内聚、低耦合、指责单一、高度复用。写出好维护、好迭代、好扩展的代码</li> <li>化繁为简，形成特定代码规范，注意命名、注释。写出人能看懂的代码，不做骚操作。尽量保持简单、易懂，在可扩展性和简单之间寻找平衡</li></ul></li></ul> <p>前端只要不是写框架，性能问题会很少遇到。简单来讲，在实现功能的基础上，代码简单、易懂、好维护迭代就很好了。技术始终是为业务需求服务的。基础建设是很重要的一个环节，这样有利于快速迭代开发</p> <h3 id="vue使用js显示弹窗组件"><a href="#vue使用js显示弹窗组件" class="header-anchor">#</a> vue使用js显示弹窗组件</h3> <p>重点是使用vue的render函数，把单文件vue组件，再封装为一个函数，挂载到vue的实例属性后，其他地方直接调用该函数即可调用组件。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 在main.js里注册实例属性</span>
<span class="token keyword">import</span> showDialog <span class="token keyword">from</span> <span class="token string">'@/views/jsDialog/index.js'</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$showDialog <span class="token operator">=</span> showDialog

<span class="token comment">// 其他地方直接使用 this.$showDialog(options) 即可调用组件</span>
</code></pre></div><p>下面来看看实现思路，关于render函数createElement的options的配置，参见 <a href="https://cn.vuejs.org/v2/guide/render-function.html#%E6%B7%B1%E5%85%A5%E6%95%B0%E6%8D%AE%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">createElement 参数 - 深入数据对象<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> DialogComponent <span class="token keyword">from</span> <span class="token string">'@/views/jsDialog/src/index.vue'</span>

<span class="token keyword">let</span> TheDialog <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">showDialog</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 如果未移除，先移除</span>
  TheDialog <span class="token operator">&amp;&amp;</span> TheDialog<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  TheDialog <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span>DialogComponent<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    on<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 单文件组件内部可以emit该事件，销毁TheDialog组件</span>
      <span class="token string">'close-dialog'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        TheDialog<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    props<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 需要传入的属性，单文件组件需要使用props接收</span>
      title<span class="token operator">:</span> <span class="token string">'标题'</span><span class="token punctuation">,</span>
      content<span class="token operator">:</span> <span class="token string">'内容'</span> 
    <span class="token punctuation">}</span>
    <span class="token comment">// 其他参数</span>
    <span class="token operator">...</span>options
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">Component<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 先创建实例</span>
    <span class="token keyword">const</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">h</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// h就是createElement，它返回VNode</span>
        <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span>Component<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 手动挂载</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$el<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 销毁方法</span>
    <span class="token keyword">const</span> comp <span class="token operator">=</span> vm<span class="token punctuation">.</span>$children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    comp<span class="token punctuation">.</span><span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$el<span class="token punctuation">)</span><span class="token punctuation">;</span>
      vm<span class="token punctuation">.</span><span class="token function">$destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> comp<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2020-07-26-周日"><a href="#_2020-07-26-周日" class="header-anchor">#</a> 2020/07/26 周日</h2> <h3 id="echarts饼图label两端对齐label距离引导线距离"><a href="#echarts饼图label两端对齐label距离引导线距离" class="header-anchor">#</a> echarts饼图label两端对齐label距离引导线距离</h3> <p>注意echarts版本要是 v4.6 +</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 两端对齐 + 引导线距离</span>
<span class="token punctuation">{</span>
name<span class="token operator">:</span> <span class="token string">'访问来源'</span><span class="token punctuation">,</span>
type<span class="token operator">:</span> <span class="token string">'pie'</span><span class="token punctuation">,</span>
minAngle<span class="token operator">:</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token comment">// label最小扇区大小</span>
label<span class="token operator">:</span> <span class="token punctuation">{</span>
    normal<span class="token operator">:</span> <span class="token punctuation">{</span>
        alignTo<span class="token operator">:</span> <span class="token string">'edge'</span><span class="token punctuation">,</span> <span class="token comment">// label两端对称布局</span>
        <span class="token comment">//  ECharts v4.6.0 版本起，提供了 'labelLine' 与 'edge' 两种新的布局方式</span>
        margin<span class="token operator">:</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token comment">// 布局为两端对称时候需要外边距防止图表变形 数值随意不要太大</span>
        distanceToLabelLine<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// label距离引导线距离</span>
        <span class="token function-variable function">formatter</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">param</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">'{a|'</span> <span class="token operator">+</span> param<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'}\n{hr|}\n'</span> <span class="token operator">+</span> <span class="token string">'{d|'</span> <span class="token operator">+</span> param<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token string">'}'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        rich<span class="token operator">:</span> <span class="token punctuation">{</span>
            a<span class="token operator">:</span> <span class="token punctuation">{</span>
                padding<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">// 4边距是文字和hr间距，此处的边距10用于解决label和引导线有间距问题</span>
                color<span class="token operator">:</span> <span class="token string">'blue'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            d<span class="token operator">:</span> <span class="token punctuation">{</span>
                padding<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                color<span class="token operator">:</span> <span class="token string">'purple'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            hr<span class="token operator">:</span> <span class="token punctuation">{</span>
                borderWidth<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                width<span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span>
                height<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                borderColor<span class="token operator">:</span> <span class="token string">' '</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token punctuation">}</span>

<span class="token comment">// 分隔线上线显示内容 </span>
label<span class="token operator">:</span> <span class="token punctuation">{</span>
    normal<span class="token operator">:</span> <span class="token punctuation">{</span>
        formatter<span class="token operator">:</span> <span class="token string">'{font|{c}}\n{hr|}\n{font|{d}%}'</span><span class="token punctuation">,</span>
        rich<span class="token operator">:</span> <span class="token punctuation">{</span>
            font<span class="token operator">:</span> <span class="token punctuation">{</span>
                fontSize<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
                padding<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                color<span class="token operator">:</span> <span class="token string">'#fff'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            hr<span class="token operator">:</span> <span class="token punctuation">{</span>
                height<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                borderWidth<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                width<span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span>
                borderColor<span class="token operator">:</span> <span class="token string">'#fff'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
labelLine<span class="token operator">:</span> <span class="token punctuation">{</span>
    lineStyle<span class="token operator">:</span> <span class="token punctuation">{</span>
        color<span class="token operator">:</span> <span class="token string">'#fff'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>参考：</p> <ul><li><a href="https://gallery.echartsjs.com/editor.html?c=x1TVKFGtZ1" target="_blank" rel="noopener noreferrer">饼图标签两端对称效果<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://gallery.echartsjs.com/editor.html?c=xtv96q-x7e" target="_blank" rel="noopener noreferrer">南丁格尔 + 折线上下内容显示<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="element表单中-人数输入框怎么限制只能输入正整数"><a href="#element表单中-人数输入框怎么限制只能输入正整数" class="header-anchor">#</a> element表单中，人数输入框怎么限制只能输入正整数</h3> <p>在人数这一栏，输入时，前端需要确保输入的只能是正整数，且不能是负数，且自动校正，来看看怎么实现</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    只能输入正整数: {{ peopleCount }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span>
      <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>peopleCount<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@keyup.native</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>keyUp<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name">
      <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span>200px<span class="token punctuation">;</span><span class="token property">margin</span><span class="token punctuation">:</span>50px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-input</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      peopleCount<span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">keyUp</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 非数字全部转换为''</span>
      e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^\d]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 开始的0处理</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>peopleCount <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
      <span class="token keyword">return</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>有了上面的思路后，对于万元输入框怎么限制只能输入最多保留两位小数点的number类型数据，可以思考下</p> <h3 id="怎么开发vscode插件"><a href="#怎么开发vscode插件" class="header-anchor">#</a> 怎么开发vscode插件</h3> <p>在vue-cli项目中，每次修改vue.config.js都需要手动停止在运行，怎么一键就搞定呢？能不能开发个vscode插件</p> <p>带着这个问题，来看看vscode插件的开发。直接找vscode官方教程。按照文档先来跑一个hello word</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Install Yeoman and VS Code Extension Generator with:</span>
<span class="token function">npm</span> <span class="token function">install</span> -g yo generator-code
</code></pre></div><p>运行yo code，生成一个脚手架项目</p> <div class="language-bash extra-class"><pre class="language-bash"><code>guoqzuo-mac:vscodeExtension kevin$ yo code

     _-----_     ╭──────────────────────────╮
    <span class="token operator">|</span>       <span class="token operator">|</span>    │   Welcome to the Visual  │
    <span class="token operator">|</span>--<span class="token punctuation">(</span>o<span class="token punctuation">)</span>--<span class="token operator">|</span>    │   Studio Code Extension  │
   <span class="token variable"><span class="token variable">`</span>---------´   │        generator<span class="token operator">!</span>        │
    <span class="token punctuation">(</span> _´U<span class="token variable">`</span></span>_ <span class="token punctuation">)</span>    ╰──────────────────────────╯
    /___A___<span class="token punctuation">\</span>   /
     <span class="token operator">|</span>  ~  <span class="token operator">|</span>     
   __<span class="token string">'.___.'</span>__   
 ´   <span class="token variable"><span class="token variable">`</span>  <span class="token operator">|</span>° ´ Y <span class="token variable">`</span></span> 

? What <span class="token builtin class-name">type</span> of extension <span class="token keyword">do</span> you want to create? New Extension <span class="token punctuation">(</span>TypeScript<span class="token punctuation">)</span>
? What<span class="token string">'s the name of your extension? zuo-restart
? What'</span>s the identifier of your extension? zuo-restart
? What's the description of your extension? A plugin use to auto restart vue.con
fig.js
? Initialize a <span class="token function">git</span> repository? Yes
? Which package manager to use? <span class="token function">npm</span>

Your extension zuo-restart has been created<span class="token operator">!</span>

To start editing with Visual Studio Code, use the following commands:

     <span class="token builtin class-name">cd</span> zuo-restart
     code <span class="token builtin class-name">.</span>

Open vsc-extension-quickstart.md inside the new extension <span class="token keyword">for</span> further instructions
on how to modify, <span class="token builtin class-name">test</span> and publish your extension.

For <span class="token function">more</span> information, also visit http://code.visualstudio.com and follow us @code.
</code></pre></div><p>这样会创建一个空的项目，只注册了helloworld命令，我们按照 vsc-extension-quickstart.md 里的说明运行demo</p> <p>按F5，进入如下页面，但并没有像官网上的视频那样弹一个新的插件调试窗口，一直在运行中</p> <p><img src="/images/daily/vscode_plugin_1.png" alt="vscode_plugin_1.png"></p> <p>网上说要装一个 run code的 vscode插件，也装了。后面发现还是不行，点击正在生成，ctrl + c 就弹出一个名为 &quot;扩展开发宿主&quot; 的新窗口了，里面可以调试插件，如下图</p> <p><img src="/images/daily/vscode_plugin_2.png" alt="vscode_plugin_2.png"></p> <p>生成项目的入口是 extension.ts，他默认注册了一个helloword命令，我们输入命令就会显示一个弹窗消息</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// The module 'vscode' contains the VS Code extensibility API</span>
<span class="token comment">// Import the module and reference it with the alias vscode in your code below</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> vscode <span class="token keyword">from</span> <span class="token string">'vscode'</span><span class="token punctuation">;</span>

<span class="token comment">// this method is called when your extension is activated</span>
<span class="token comment">// your extension is activated the very first time the command is executed</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token operator">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// Use the console to output diagnostic information (console.log) and errors (console.error)</span>
	<span class="token comment">// This line of code will only be executed once when your extension is activated</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Congratulations, your extension &quot;zuo-restart&quot; is now active!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// The command has been defined in the package.json file</span>
	<span class="token comment">// Now provide the implementation of the command with registerCommand</span>
	<span class="token comment">// The commandId parameter must match the command field in package.json</span>
	<span class="token keyword">let</span> disposable <span class="token operator">=</span> vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">'zuo-restart.helloWorld'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token comment">// The code you place here will be executed every time your command is executed</span>

		<span class="token comment">// Display a message box to the user</span>
		vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">showInformationMessage</span><span class="token punctuation">(</span><span class="token string">'Hello World from zuo-restart!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>disposable<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// this method is called when your extension is deactivated</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">deactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

</code></pre></div><p>我们在插件调试窗口跑下hello world命令</p> <p><img src="/images/daily/vscode_plugin_3.png" alt="vscode_plugin_3.png"></p> <p>出现如下弹窗消息，就说明跑的没问题了</p> <p><img src="/images/daily/vscode_plugin_4.png" alt="vscode_plugin_4.png"></p> <p>这样hellowrod就跑起来了，vsc-extension-quickstart.md 里面有构架、发布插件的文档说明</p> <p>官网提供了一些简单的demo，可以练练手，<a href="https://github.com/microsoft/vscode-extension-samples" target="_blank" rel="noopener noreferrer">vscode-extension-samples | github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，后续有时间了继续研究</p> <p>参考：</p> <ul><li><a href="https://code.visualstudio.com/api" target="_blank" rel="noopener noreferrer">Extension API | Visual Studio Code Extension API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://code.visualstudio.com/api/get-started/your-first-extension" target="_blank" rel="noopener noreferrer">Get Started - Your First Extension<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zhuanlan.zhihu.com/p/99198980" target="_blank" rel="noopener noreferrer">VSCode插件开发入门<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="loadash节流与防抖理解"><a href="#loadash节流与防抖理解" class="header-anchor">#</a> loadash节流与防抖理解</h3> <p>理论上throttle节流一般用于像监听resize方法，想要减少执行频率时使用。对于点击按钮提交，防止短时间内多次点击可以用防抖</p> <p>但实际使用时可根据具体情况来看，本质上都是利用setTimeout来处理执行频率或执行间隔。下面是一个简单的防抖示例</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> debounce <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'loadsh'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    submitFormDebounce<span class="token operator">:</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'submit'</span><span class="token punctuation">,</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">submitForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>trailing<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token function">submitForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="element源码中节流与防抖的应用"><a href="#element源码中节流与防抖的应用" class="header-anchor">#</a> element源码中节流与防抖的应用</h3> <p>在做input搜索时，由于input change后需要请求接口，这里el-autocomplete有个默认的300豪秒debounce，可以减少请求频率。理论上这里减少频率需要使用节流，但为什么是防抖呢？</p> <p>我们把element源码中对节流防抖的使用都找一找。可以看到element使用的节流防抖库是 <code>throttle-debounce</code></p> <p>发现节流throttle用的比较少，只找到了三个地方：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Backtop 回到顶部</span>
<span class="token comment">// packages/backtop/src/main.vue  滚动监听时用到了节流</span>
<span class="token keyword">import</span> throttle <span class="token keyword">from</span> <span class="token string">'throttle-debounce/throttle'</span><span class="token punctuation">;</span>
<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>throttledScrollHandler <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onScroll<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>throttledScrollHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token comment">// Carousel 走马灯 </span>
<span class="token comment">// packages/carouse/src/main.vue 鼠标hover，箭头点击使用了节流</span>
<span class="token keyword">import</span> throttle <span class="token keyword">from</span> <span class="token string">'throttle-debounce/throttle'</span><span class="token punctuation">;</span>
<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>throttledArrowClick <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token parameter">index</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setActiveItem</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>throttledIndicatorHover <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token parameter">index</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleIndicatorHover</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token comment">// Image 图片 滚动到区域懒加载时，使用了节流</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>_scrollContainer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>_scrollContainer <span class="token operator">=</span> _scrollContainer<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>_lazyLoadHandler <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleLazyLoad<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">on</span><span class="token punctuation">(</span>_scrollContainer<span class="token punctuation">,</span> <span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_lazyLoadHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleLazyLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>再来看看防抖的地方</p> <p><img src="/images/daily/el_debounce.png" alt="el_debounce.png"></p> <p><strong>总结：涉及到接口请求的基本都是防抖，对于不请求接口，防止多次执行的情况才用节流，其他请求一律防抖</strong></p> <h3 id="log2n对数在前端的应用场景-把文件大小或金额自动添加合适的单位"><a href="#log2n对数在前端的应用场景-把文件大小或金额自动添加合适的单位" class="header-anchor">#</a> log2n对数在前端的应用场景：把文件大小或金额自动添加合适的单位</h3> <p>在写下载/导出文件接口时，由于接口文件数据是流的形式而非buffer，导致total为0，无法获取进度。只能通过loaded知道当前下载了多少字节。前端显示时，怎么给出合适的单位，是KB、MB，还是G？</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Math.pow(2, 0) // B</span>
<span class="token comment">// &gt; Math.pow(2, 10) // KB</span>
<span class="token comment">// &gt; Math.pow(2, 20) // MB</span>
<span class="token comment">// &gt; Math.pow(2, 30) // GB</span>
<span class="token comment">// &gt; Math.pow(2, 40) // TB</span>
<span class="token comment">// &gt; Math.pow(2, 50) // PB</span>
<span class="token comment">// 以此类推...</span>
</code></pre></div><p>可以通过对数来快速确定区间</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @description 格式化文件size
 * @param { Number } value 文件大小 B 字节
 * @returns 转换后的文件大小及单位数组，保留两位小数
 * @example
 * formatFileSize(100) =&gt;  [100, &quot;B&quot;]
 * formatFileSize(10000) =&gt; [9.77, &quot;KB&quot;]
 * formatFileSize(100000000) =&gt; [95.37, &quot;MB&quot;]
 */</span>
<span class="token keyword">function</span> <span class="token function">formatFileSize</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> unitArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'KB'</span><span class="token punctuation">,</span> <span class="token string">'MB'</span><span class="token punctuation">,</span> <span class="token string">'GB'</span><span class="token punctuation">,</span> <span class="token string">'TB'</span><span class="token punctuation">,</span> <span class="token string">'PB'</span><span class="token punctuation">,</span> <span class="token string">'EB'</span><span class="token punctuation">,</span> <span class="token string">'ZB'</span><span class="token punctuation">,</span><span class="token string">'YB'</span><span class="token punctuation">]</span>
  <span class="token keyword">let</span> index <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">log2</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">// 计算该value的值为2的多少次方，向下取整</span>
  <span class="token comment">// 如果超出范围取最大值</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> unitArr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    index <span class="token operator">=</span> unitArr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> value <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> index <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">// 装换为合适的单位</span>
  result <span class="token operator">=</span> <span class="token punctuation">(</span>result <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span> 

  <span class="token keyword">return</span> <span class="token punctuation">[</span>result<span class="token punctuation">,</span> unitArr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>依此类推，假设给定单位为元，将值转换为合适的单位：元/万/亿/兆(万亿)，10的4次方 万，10的8次方 亿，10的12次方 兆</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @description 格式化人民币
 * @param { Number } value 元
 * @returns 转换后的人民币及单位数组，保留两位小数
 * @example
 * formartMoney(1000) =&gt; [1000, &quot;元&quot;]
 * formartMoney(98000) =&gt; [9.8, &quot;万&quot;]
 * formartMoney(100000000) =&gt; [1, &quot;亿&quot;]
 */</span>
<span class="token keyword">function</span> <span class="token function">formartMoney</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> unitArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'元'</span><span class="token punctuation">,</span> <span class="token string">'万'</span><span class="token punctuation">,</span> <span class="token string">'亿'</span><span class="token punctuation">,</span> <span class="token string">'兆'</span><span class="token punctuation">]</span> 
  <span class="token keyword">let</span> index <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">log10</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">)</span>
  <span class="token comment">// 如果超出范围取最大值</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> unitArr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    index <span class="token operator">=</span> unitArr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> value <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> index <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">// 装换为合适的单位</span>

  result <span class="token operator">=</span> <span class="token punctuation">(</span>result <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span> 

  <span class="token keyword">return</span> <span class="token punctuation">[</span>result<span class="token punctuation">,</span> unitArr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>扩展：</p> <ul><li><a href="https://zhidao.baidu.com/question/542103416.html" target="_blank" rel="noopener noreferrer">KB,MB,GB,TB,在往上是什么单位呢<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zhidao.baidu.com/question/70310844.html" target="_blank" rel="noopener noreferrer">万亿上面是什么数位<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="关于常用组件、样式、工具函数封装代码快速复用的思考"><a href="#关于常用组件、样式、工具函数封装代码快速复用的思考" class="header-anchor">#</a> 关于常用组件、样式、工具函数封装代码快速复用的思考</h3> <p>怎么让搬砖更有效率，整理常用工具库utils、搜集各种场景常用的代码片段，快速ctrl+c、ctrl+v</p> <p>接口请求、表单校验(正则)、表单/表格/通用样式、表格分页、图表等常用的碎片化代码搜集整理，形成文档，以便快速复用</p> <h2 id="_2020-07-25-周六"><a href="#_2020-07-25-周六" class="header-anchor">#</a> 2020/07/25 周六</h2> <h3 id="el-input类型为textarea时不能使用v-model-trim"><a href="#el-input类型为textarea时不能使用v-model-trim" class="header-anchor">#</a> el-input类型为textarea时不能使用v-model.trim</h3> <p>el-input如果type为textarea，不能使用.trim修饰符，否则输入内容时会无法换行，如果需要去掉收尾空格，可以在提交数据时，手动执行.trim()去空格</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span>
      <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>textarea<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">v-model.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name">
      <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span>200px<span class="token punctuation">;</span><span class="token property">margin</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-input</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      text<span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_2020-07-24-周四"><a href="#_2020-07-24-周四" class="header-anchor">#</a> 2020/07/24 周四</h2> <h3 id="git修改上上次的commit备注信息"><a href="#git修改上上次的commit备注信息" class="header-anchor">#</a> git修改上上次的commit备注信息</h3> <p>由于提交代码时有钩子函数，信息里面没有包含前置的code会无法提交。所以如果commit信息写的有问题需要修改后才能提交</p> <p>对于修改上一次commit备注信息，我们可以使用 --amend -m 来修改。但它无法修改上上次提交信息，这种情况我们可以使用rebase来做处理，下面来做一个测试</p> <p>本地做两次提交，第一次提交信息为&quot;测试第一次提交&quot;, 第二次提交信息为 &quot;第二次提交&quot;，先不push，我们需要修改上上次的提交信息，也就是修改&quot;测试第一次提交&quot;的内容</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 查看git记录</span>
guoqzuo-mac:fedemo kevin$ <span class="token function">git</span> log
commit 3814855781da539d21e2072e42a53558587497c6 <span class="token punctuation">(</span>HEAD -<span class="token operator">&gt;</span> master<span class="token punctuation">)</span>
Author: guoqzuo <span class="token operator">&lt;</span>guoqzuo@gmail.com<span class="token operator">&gt;</span>
Date:   Mon Aug <span class="token number">10</span> <span class="token number">22</span>:28:15 <span class="token number">2020</span> +0800

    第二次提交

commit e889c7ecbcb024037701eb48c9bfe3b9c22f9490
Author: guoqzuo <span class="token operator">&lt;</span>guoqzuo@gmail.com<span class="token operator">&gt;</span>
Date:   Mon Aug <span class="token number">10</span> <span class="token number">20</span>:04:27 <span class="token number">2020</span> +0800

    测试第一次提交

commit d5c2f2f3193cf02d6ac1ae995ca00c4082e36cad <span class="token punctuation">(</span>origin/master, origin/HEAD<span class="token punctuation">)</span>
Author: guoqzuo <span class="token operator">&lt;</span>guoqzuo@gmail.com<span class="token operator">&gt;</span>
Date:   Mon Aug <span class="token number">10</span> 00:56:34 <span class="token number">2020</span> +0800

    update cookie研究,合并单元格研究demo
<span class="token builtin class-name">:</span>
</code></pre></div><p>执行 <code>git rebase -i HEAD~2</code>，如下图可以看到最近两次提交，进入一个vim编辑页面</p> <p><img src="/images/daily/edit_commit_rebase_1.png" alt="edit_commit_rebase_1.png"></p> <p>按ESC, 再按a进入INSERT模式, 将上上次提交的信息前的pick改为edit，如下图，按ESC, shift + : 进入命令模式，输入x 或wq保存，不熟悉vim操作的可以搜索下vim教程</p> <p><img src="/images/daily/edit_commit_rebase_2.png" alt="edit_commit_rebase_2.png"></p> <p>保存后，会看到下面log</p> <div class="language-js extra-class"><pre class="language-js"><code>guoqzuo<span class="token operator">-</span>mac<span class="token operator">:</span>fedemo kevin$ git rebase <span class="token operator">-</span>i <span class="token constant">HEAD</span><span class="token operator">~</span><span class="token number">2</span>
Stopped at e889c7e<span class="token operator">...</span>  测试第一次提交
You can amend the commit now<span class="token punctuation">,</span> <span class="token keyword">with</span>

  git commit <span class="token operator">--</span>amend 

Once you are satisfied <span class="token keyword">with</span> your changes<span class="token punctuation">,</span> run

  git rebase <span class="token operator">--</span><span class="token keyword">continue</span>
guoqzuo<span class="token operator">-</span>mac<span class="token operator">:</span>fedemo kevin$ 
</code></pre></div><p>运行 <code>git commit --amend</code> 会进入下面的修改页面，可以修改上上次的信息</p> <p><img src="/images/daily/edit_commit_rebase_3.png" alt="edit_commit_rebase_3.png"></p> <p>这里我们把上上次信息改为 &quot;测试第一次提交,修改第一次提交的内容&quot;，保存后，结果如下</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span>detached <span class="token constant">HEAD</span> <span class="token number">45</span>f5911<span class="token punctuation">]</span> 测试第一次提交<span class="token punctuation">,</span>修改第一次提交的内容
 Date<span class="token operator">:</span> Mon Aug <span class="token number">10</span> <span class="token number">20</span><span class="token operator">:</span><span class="token number">04</span><span class="token operator">:</span><span class="token number">27</span> <span class="token number">2020</span> <span class="token operator">+</span><span class="token number">0800</span>
 <span class="token number">1</span> file changed<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token function">insertions</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">)</span>
guoqzuo<span class="token operator">-</span>mac<span class="token operator">:</span>fedemo kevin$ 
</code></pre></div><p>然后运行 <code>git rebase --continue</code>，这样就修改好了</p> <div class="language-js extra-class"><pre class="language-js"><code>guoqzuo<span class="token operator">-</span>mac<span class="token operator">:</span>fedemo kevin$ git rebase <span class="token operator">--</span><span class="token keyword">continue</span>
Successfully rebased and updated refs<span class="token operator">/</span>heads<span class="token operator">/</span>master<span class="token punctuation">.</span>
guoqzuo<span class="token operator">-</span>mac<span class="token operator">:</span>fedemo kevin$ 
</code></pre></div><p>再来git log 看看提交记录，修改上上次的提交信息已ok</p> <div class="language-js extra-class"><pre class="language-js"><code>guoqzuo<span class="token operator">-</span>mac<span class="token operator">:</span>fedemo kevin$ git log
commit <span class="token function">e498bcabf2d2e4c97f47320e1d72693cb82d9db8</span> <span class="token punctuation">(</span><span class="token constant">HEAD</span> <span class="token operator">-</span><span class="token operator">&gt;</span> master<span class="token punctuation">)</span>
Author<span class="token operator">:</span> guoqzuo <span class="token operator">&lt;</span>guoqzuo@gmail<span class="token punctuation">.</span>com<span class="token operator">&gt;</span>
Date<span class="token operator">:</span>   Mon Aug <span class="token number">10</span> <span class="token number">22</span><span class="token operator">:</span><span class="token number">28</span><span class="token operator">:</span><span class="token number">15</span> <span class="token number">2020</span> <span class="token operator">+</span><span class="token number">0800</span>

    第二次提交

commit <span class="token number">45</span>f591157be44100073de14f5808b816104a8f2b
Author<span class="token operator">:</span> guoqzuo <span class="token operator">&lt;</span>guoqzuo@gmail<span class="token punctuation">.</span>com<span class="token operator">&gt;</span>
Date<span class="token operator">:</span>   Mon Aug <span class="token number">10</span> <span class="token number">20</span><span class="token operator">:</span><span class="token number">04</span><span class="token operator">:</span><span class="token number">27</span> <span class="token number">2020</span> <span class="token operator">+</span><span class="token number">0800</span>

    测试第一次提交<span class="token punctuation">,</span>修改第一次提交的内容

</code></pre></div><p>参考：<a href="https://www.jianshu.com/p/0f1fbd50b4be" target="_blank" rel="noopener noreferrer">修改上上次的commit信息<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2020-07-22"><a href="#_2020-07-22" class="header-anchor">#</a> 2020/07/22</h2> <h3 id="echarts动态改变option里datazoom的值没有实时生效的问题"><a href="#echarts动态改变option里datazoom的值没有实时生效的问题" class="header-anchor">#</a> echarts动态改变option里dataZoom的值没有实时生效的问题</h3> <p>这里我们虽然修改了options的值，但不会实时生效，需要手动调用下echarts实例的resize()方法</p> <p>另外在做echarts时，对于自适应缩放的图表，一定要注意在窗口缩放时，重新调用resize()</p> <h3 id="http请求有哪几种传参方式"><a href="#http请求有哪几种传参方式" class="header-anchor">#</a> http请求有哪几种传参方式</h3> <p>在swagger文档里，有一个传参类型的描述 Parameter Type，一般有四种</p> <ul><li>header 通过请求头传参，也就是参数加到首部 headers 里</li> <li>path  参数放到url路径里，比如 /user/123 这里 123是用户id</li> <li>query 查询参数，也就是url后面 ? 符号之后的传参，一般用于get请求传参，比如 /user/123?a=xx&amp;b=xx</li> <li>body 参数放到请求体，一般用于post请求，相对get请求来说，安全性好，可以传的数据更多</li></ul> <h3 id="object-assgin时是否会忽略null-undefined-空字符串"><a href="#object-assgin时是否会忽略null-undefined-空字符串" class="header-anchor">#</a> Object.assgin时是否会忽略null,undefined,空字符串</h3> <p>一般我们在需要设置某个对象的多个值时Object.assgin是一种很好的方法，但又怕当某个属性的值为空字符串、null或undefined时，会自动跳过的情况。这里来做一个简单的测试</p> <div class="language-js extra-class"><pre class="language-js"><code>objA <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token string">'b'</span><span class="token punctuation">,</span> c<span class="token operator">:</span> <span class="token string">'c'</span><span class="token punctuation">,</span> d<span class="token operator">:</span> <span class="token string">'d'</span><span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>objA<span class="token punctuation">,</span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> c<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> d<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
objA <span class="token comment">// {a: 1, b: undefined, c: null, d: &quot;&quot;}</span>
</code></pre></div><p><img src="/images/daily/Object_assign.png" alt="Object_assign.png"></p> <p>综上，Object.assgin可以放心用</p> <h3 id="git将远程仓库a分支合并到b分支"><a href="#git将远程仓库a分支合并到b分支" class="header-anchor">#</a> git将远程仓库A分支合并到B分支</h3> <p>假设要将远程分支的 A 分支合并到 B 分支，一般我会先在A分支将B分支merge，再切到B分支，merge A分支。</p> <p>以将远程仓库的 dev1.3.4 分支合并到远程的 test1.3.4 分支为例，下面是我一般的合并过程</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 1. 本地切到 dev1.3.4 分支</span>
<span class="token comment"># 2. merge远程的test1.3.4分支，命令如下</span>
<span class="token function">git</span> merge origin/test1.3.4
<span class="token comment"># 3.如果有冲突(conflict)，修改冲突文件</span>
<span class="token comment"># 4.修改冲突后提交代码到远程仓库，命令如下</span>
<span class="token function">git</span> <span class="token function">add</span> 修改冲突相关的文件
<span class="token function">git</span> commit <span class="token string">'修改冲突，fix conflict'</span>
<span class="token function">git</span> push
<span class="token comment"># 5.切换到test1.3.4分支</span>
<span class="token comment"># 6.merge本地的dev1.3.4，因为本地的dev1.3.4是最新的代码，命令如下</span>
<span class="token function">git</span> merge dev1.3.4 <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">git</span> push
</code></pre></div><p><strong>另外，养成习惯，在git push前，先git pull</strong></p> <h2 id="_2020-07-17-周五"><a href="#_2020-07-17-周五" class="header-anchor">#</a> 2020/07/17 周五</h2> <h3 id="前端修改cookie后-相关cookie改动会传到后台吗"><a href="#前端修改cookie后-相关cookie改动会传到后台吗" class="header-anchor">#</a> 前端修改cookie后，相关cookie改动会传到后台吗</h3> <p>首先我们来捋一捋，什么是cookie？与cookie相关的知识点有两个：</p> <ol><li>前端获取/设置cookie，使用 document.cookie</li> <li>HTTP请求与响应相关cookie</li></ol> <p>我们先下个结论：他们之间是相互关联的，接口响应头设置cookie，会对document.cookie的值产生影响；前端设置docuemnt.cookie也会对请求头cookie值产生影响，<strong>但如果后端写到前端的cookie如果使用了HttpOnly属性，前端是无法通过document.cookie做修改的</strong></p> <h4 id="根据功能点写测试demo"><a href="#根据功能点写测试demo" class="header-anchor">#</a> 根据功能点写测试demo</h4> <p>纸上得来终觉浅，这里为了弄懂这里面的关系，我们来写一个demo做测试，将涉及的知识点都串起来，首先要有一个html页面，有两个用处</p> <ol><li>在该页面打开F12，在console里通过命令查看或设置document.cookie信息</li> <li>在该页面中请求接口，在F12 Network里观察请求头，响应头里cookie的信息</li></ol> <p>另外需要写两个接口，用户观察请求响应头里cookie的信息，这里我们用koa来写两个简单的接口。</p> <p>下面是demo目录层级</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># demo 目录层级</span>
├── public
│   └── index.html <span class="token comment"># 静态页面</span>
├── index.js <span class="token comment"># 接口</span>
└── package.json <span class="token comment"># npm init 创建，用于安装index.js引入的koa等npm包</span>
</code></pre></div><p>index.html代码如下</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>test测试<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userInfoBtn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>获取user信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>editInfoBtn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改user信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/axios/dist/axios.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">let</span> userInfoBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#userInfoBtn'</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> eidtInfoBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#userInfoBtn'</span><span class="token punctuation">)</span>
    <span class="token comment">// 请求获取用户信息接口</span>
    <span class="token comment">// 用于测试响应头设置 'Set-Cookie' 对前端docuemnt.cookie的影响</span>
    userInfoBtn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 请求修改用户信息接口</span>
    <span class="token comment">// 用于测试document.cookie设置后或者第一次请求响应头设置Set-Cookie后，对下次接口请求头的影响</span>
    editInfoBtn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      axios<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>index.js接口代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Koa <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> Router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa-router'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Koa</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 静态服务，用于使用 http://127.0.0.1:9000/ 访问 public下的index.html页面</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">require</span><span class="token punctuation">(</span><span class="token string">'koa-static'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'./public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// GET /user  接口，设置Set-Cookie响应头测试</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 'Set-Cookie': 'token=123;path=/;max-age=100;HttpOnly',</span>
    <span class="token string">'Set-Cookie'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'token=123;path=/;max-age=100;HttpOnly'</span><span class="token punctuation">,</span><span class="token string">'mark=9;path=/;'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'张三'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">20</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// PUT /user  接口，用于观察接口请求头</span>
router<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span>
    code<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    msg<span class="token operator">:</span> <span class="token string">'成功'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 开启本地HTTP服务，9000端口</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">9000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server listen on 9000 port'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="document-cookie设置对请求头的影响"><a href="#document-cookie设置对请求头的影响" class="header-anchor">#</a> document.cookie设置对请求头的影响</h4> <p>首先我们可以先看 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/cookie" target="_blank" rel="noopener noreferrer">Document.cookie - Web API 接口参考 | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 这个文档，对document.cookie有一个大概的了解。</p> <p>我们先运行demo，nodemon index.js，访问 <code>http://127.0.0.1:9000/</code> 进入页面，查看cookie信息，如下图</p> <p><img src="/images/daily/what_cookie_1.png" alt="what_cookie_1.png"></p> <p>这时，我们发送一个put请求，看接口请求头信息。再通过 document.cookie = &quot;a=1&quot; 设置cookie，然后再发送一个put请求，对比请求头之前的区别，如下图，我们初步得出结论：<strong>前端设置cookie后，下次请求，在请求头里会携带这个cookie</strong></p> <p><img src="/images/daily/what_cookie_2.png" alt="what_cookie_2.png"></p> <h4 id="document-cookie操作方法"><a href="#document-cookie操作方法" class="header-anchor">#</a> document.cookie操作方法</h4> <p>document.cookie API的设计不怎么友好，一般会使用一个库，来操作docuemnt.cookie，需要注意</p> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token string">&quot;a=1&quot;</span> <span class="token comment">// 如果cookie中没有a这个key，可以添加key为a，值为1的cookie，否则修改对应的值为1</span>
document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token string">&quot;&quot;</span> <span class="token comment">// 不会清空cookie，对cookie基本无影响</span>
<span class="token comment">// 怎么删除 a=1 的cookie呢？将该cookie的有效时间设置为过去的时间即可</span>
document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token string">&quot;a=1;expires=&quot;</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'1970-1-1'</span><span class="token punctuation">)</span>
</code></pre></div><p>MDN document.cookie文档里有推荐的一个操作cookie的封装方法，可以参考下</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*\
|*|
|*|  :: cookies.js ::
|*|
|*|  A complete cookies reader/writer framework with full unicode support.
|*|
|*|  https://developer.mozilla.org/en-US/docs/DOM/document.cookie
|*|
|*|  This framework is released under the GNU Public License, version 3 or later.
|*|  http://www.gnu.org/licenses/gpl-3.0-standalone.html
|*|
|*|  Syntaxes:
|*|
|*|  * docCookies.setItem(name, value[, end[, path[, domain[, secure]]]])
|*|  * docCookies.getItem(name)
|*|  * docCookies.removeItem(name[, path], domain)
|*|  * docCookies.hasItem(name)
|*|  * docCookies.keys()
|*|
\*/</span>

<span class="token keyword">var</span> docCookies <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">getItem</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">sKey</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;(?:(?:^|.*;)\\s*&quot;</span> <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>sKey<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[-.+*]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;\\$&amp;&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\\s*\\=\\s*([^;]*).*$)|^.*$&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;$1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">setItem</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">sKey<span class="token punctuation">,</span> sValue<span class="token punctuation">,</span> vEnd<span class="token punctuation">,</span> sPath<span class="token punctuation">,</span> sDomain<span class="token punctuation">,</span> bSecure</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>sKey <span class="token operator">||</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:expires|max\-age|path|domain|secure)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>sKey<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">var</span> sExpires <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>vEnd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>vEnd<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> Number<span class="token operator">:</span>
          sExpires <span class="token operator">=</span> vEnd <span class="token operator">===</span> <span class="token number">Infinity</span> <span class="token operator">?</span> <span class="token string">&quot;; expires=Fri, 31 Dec 9999 23:59:59 GMT&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;; max-age=&quot;</span> <span class="token operator">+</span> vEnd<span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> String<span class="token operator">:</span>
          sExpires <span class="token operator">=</span> <span class="token string">&quot;; expires=&quot;</span> <span class="token operator">+</span> vEnd<span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> Date<span class="token operator">:</span>
          sExpires <span class="token operator">=</span> <span class="token string">&quot;; expires=&quot;</span> <span class="token operator">+</span> vEnd<span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>sKey<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span> <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>sValue<span class="token punctuation">)</span> <span class="token operator">+</span> sExpires <span class="token operator">+</span> <span class="token punctuation">(</span>sDomain <span class="token operator">?</span> <span class="token string">&quot;; domain=&quot;</span> <span class="token operator">+</span> sDomain <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>sPath <span class="token operator">?</span> <span class="token string">&quot;; path=&quot;</span> <span class="token operator">+</span> sPath <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>bSecure <span class="token operator">?</span> <span class="token string">&quot;; secure&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">removeItem</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">sKey<span class="token punctuation">,</span> sPath<span class="token punctuation">,</span> sDomain</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>sKey <span class="token operator">||</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hasItem</span><span class="token punctuation">(</span>sKey<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>sKey<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;=; expires=Thu, 01 Jan 1970 00:00:00 GMT&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span> sDomain <span class="token operator">?</span> <span class="token string">&quot;; domain=&quot;</span> <span class="token operator">+</span> sDomain <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span> sPath <span class="token operator">?</span> <span class="token string">&quot;; path=&quot;</span> <span class="token operator">+</span> sPath <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">hasItem</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">sKey</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;(?:^|;\\s*)&quot;</span> <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>sKey<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[-.+*]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;\\$&amp;&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\\s*\\=&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  keys<span class="token operator">:</span> <span class="token comment">/* optional method: you can safely remove it! */</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> aKeys <span class="token operator">=</span> document<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s*(?:\=[^;]*)?;\s*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> nIdx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> nIdx <span class="token operator">&lt;</span> aKeys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> nIdx<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> aKeys<span class="token punctuation">[</span>nIdx<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>aKeys<span class="token punctuation">[</span>nIdx<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">return</span> aKeys<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="http-cookies后端接口向前端页面写入cookie"><a href="#http-cookies后端接口向前端页面写入cookie" class="header-anchor">#</a> HTTP cookies后端接口向前端页面写入cookie</h4> <p>可以先看下面两个文档，对http cookie有一个基本的了解</p> <ol><li>http请求头或响应头参数cookie <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cookie" target="_blank" rel="noopener noreferrer">Cookie - HTTP Headers | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>http cookies <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies" target="_blank" rel="noopener noreferrer">HTTP cookies - HTTP | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol> <blockquote><p>An HTTP cookie (web cookie, browser cookie) is a small piece of data that a server sends to the user's web browser. The browser may store it and send it back with later requests to the same server. Typically, it's used to tell if two requests came from the same browser — keeping a user logged-in, for example. It remembers stateful information for the stateless HTTP protocol.（HTTP Cookie 是服务器发送到用户浏览器并保存在本地的一小块数据，它会在浏览器下次向同一服务器再发起请求时被携带并发送到服务器上。通常，它用于告知服务端两个请求是否来自同一浏览器，如保持用户的登录状态。Cookie 使基于无状态的HTTP协议记录稳定的状态信息成为了可能。）</p></blockquote> <p>Cookies are mainly used for three purposes(cookie主要由以下三个应用场景):</p> <ul><li>Session management (会话管理)
<ul><li>Logins, shopping carts, game scores, or anything else the server should remember(用户登录状态、购物车、游戏分数或其它需要记录的信息)</li></ul></li> <li>Personalization (个性化)
<ul><li>User preferences, themes, and other settings（用户自定义配置，主题或其他设置）</li></ul></li> <li>Tracking (用户行为跟踪)
<ul><li>Recording and analyzing user behavior （用于记录和分析用户行为）</li></ul></li></ul> <h4 id="cookie设置属性详解"><a href="#cookie设置属性详解" class="header-anchor">#</a> cookie设置属性详解</h4> <p>服务端通过在接口响应头设置 'Set-Cookie' ，将对应的cookie写到前端，先来看看设置cookie的格式</p> <p>Set-Cookie: “name=value;domain=.domain.com;path=/;expires=Sat, 11 Jun 2016 11:29:42 GMT;HttpOnly;secure;samesite”</p> <table><thead><tr><th>属性</th> <th>说明</th> <th>默认值</th></tr></thead> <tbody><tr><td>name</td> <td>一个唯一确定的cookie名称。如有特殊字符需要编码(encodeURIComponent)</td> <td>/</td></tr> <tr><td>value</td> <td>存储在cookie中的字符串值。如有特殊字符需要编码</td> <td>空字符串</td></tr> <tr><td>domain</td> <td>cookie对于哪个域是有效，如果指定了一个域，那么子域也包含在内。.xx.com，对于xx.com的所有子域都有效</td> <td>当前url所在的域名</td></tr> <tr><td>path</td> <td>表示这个cookie影响到的路径，浏览器跟会根据这项配置，像指定域中匹配的路径在请求头发送cookie信息</td> <td>当前url所在的path</td></tr> <tr><td>expires</td> <td>失效时间，是一个具体的时间，这个值是GMT时间格式，expires=&quot; + new Date('1970-1-1') 这种即可。如果客户端和服务器端时间不一致，使用expires就会存在偏差。注意两点：1.设置一个过去的时间，可用于删除该cookie 2.当Cookie的过期时间被设定时，设定的日期和时间只与客户端相关，而不是服务端。max-age也是如此</td> <td>如果没有定义，cookie会在对话结束时(关闭浏览器)过期</td></tr> <tr><td>max-age</td> <td>与expires作用相同，用来告诉浏览器此cookie多久过期（单位是秒），而不是一个固定的时间点。正常情况下，max-age的优先级高于expires。</td> <td>同上面的expires</td></tr> <tr><td>HttpOnly</td> <td>告知浏览器不允许通过脚本document.cookie去更改这个值，同样这个值在document.cookie中也不可见。但在http请求张仍然会携带这个cookie。注意这个值虽然在脚本中不可获取，但仍然在浏览器安装目录中以文件形式存在。这项设置通常在服务器端设置。有助于缓解跨站点脚本（XSS）攻击。</td> <td>不设置</td></tr> <tr><td>secure</td> <td>安全标志，指定后，只有在使用SSL链接（https）时候才能发送到服务器，如果是http链接则不会传递该信息。就算设置了secure 属性也并不代表他人不能看到你机器本地保存的 cookie 信息，因此未加密的重要信息尽量不要放cookie了</td> <td>不设置</td></tr> <tr><td>samesite</td> <td>当跨域请求是浏览器是否发送cookie，可以阻止跨站请求伪造攻击CSRF。1. 值为None: 浏览器会在同站请求、跨站请求下继续发送 cookies，不区分大小写。2.Strict：浏览器将只在访问相同站点时发送 3.Lax：与 Strict 类似，但用户从外部站点导航至URL时（例如通过链接）除外。  Same-site cookies 将会为一些跨站子请求保留，如图片加载或者 frames 的调用，但只有当用户从外部站点导航到URL时才会发送。如 link 链接</td> <td>以默认值都是None，现在基本新的浏览器基本都是Lax了</td></tr></tbody></table> <h4 id="后端设置-set-cookie-响应头对前端的影响"><a href="#后端设置-set-cookie-响应头对前端的影响" class="header-anchor">#</a> 后端设置'Set-Cookie'响应头对前端的影响</h4> <p>我们在 GET /user 接口做了处理，当访问这个接口时，向前端设置cookie, 一个HttpOnly的，一个非httpOnly，看看效果</p> <div class="language-js extra-class"><pre class="language-js"><code>ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 单个cookie设置</span>
  <span class="token comment">// 'Set-Cookie': 'token=123;domain=;path=/;max-age=100;HttpOnly', </span>
  <span class="token comment">// 多个cookie设置</span>
  <span class="token string">'Set-Cookie'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'token=123;path=/;max-age=100;HttpOnly'</span><span class="token punctuation">,</span><span class="token string">'mark=9;path=/;max-age=60;'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>先删除之前的cookie，保证document.cookie为空</p> <p><img src="/images/daily/what_cookie_3.png" alt="what_cookie_3.png"></p> <ol><li>先请求获取user信息接口，在F12里看响应头，Respons e Headers可以看到HttpOnly的cookie</li> <li>使用document.cookie看下前端cookie信息。这里获取不到设置了HttpOnly的cookie</li> <li>请求修改user信息接口，看请求头。后端设置的cookie，下次请求会携带</li> <li>100秒后，发现document.cookie以及application面板都没有cookie值了，因为我们设置了有效时间，再次发送修改user的put请求，请求头不会携带任何cookie信息</li></ol> <p><img src="/images/daily/what_cookie_4.png" alt="what_cookie_4.png"></p> <ol start="5"><li>再次请求获取user信息接口，然后用document.cookie修改token的值，发现HttpOnly属性的cookie前端无法通过document.cookie来修改，且再次请求put接口，token值还是原先后端设置的值，<strong>所以HttpOnly属性的cookie前端无法修改</strong></li></ol> <p><img src="/images/daily/what_cookie_5.png" alt="what_cookie_5.png"></p> <h4 id="参考文档"><a href="#参考文档" class="header-anchor">#</a> 参考文档</h4> <ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/cookie" target="_blank" rel="noopener noreferrer">Document.cookie - Web API 接口参考 | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cookie" target="_blank" rel="noopener noreferrer">Cookie - HTTP Headers | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies" target="_blank" rel="noopener noreferrer">HTTP cookies - HTTP | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://nodejs.org/dist/latest-v8.x/docs/api/http.html#http_response_setheader_name_value" target="_blank" rel="noopener noreferrer">Node.js 设置 Set-Cookie 响应头信息 | Node.js v8.17.0 Documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/qq_39207066/article/details/80970668" target="_blank" rel="noopener noreferrer">HTTP-服务器端CooKie与浏览器端Cookie<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="element合并单元格利用css自定义表格border"><a href="#element合并单元格利用css自定义表格border" class="header-anchor">#</a> element合并单元格利用css自定义表格border</h3> <p>有个较为特殊的表格，需要合并单元格，且改变表格border，看看element el-table怎么实现这种表格</p> <p><img src="/images/daily/special_table.png" alt="special_table.png"></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table-test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table</span>
      <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataList<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">border</span>
      <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mini<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:span-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>arraySpanMethod<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:header-cell-</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token punctuation">{</span> <span class="token property">background</span><span class="token punctuation">:</span> <span class="token string">'#f7f7f7'</span> <span class="token punctuation">}</span></span><span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span>
        <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in [<span class="token punctuation">'</span>a<span class="token punctuation">'</span>, <span class="token punctuation">'</span>b<span class="token punctuation">'</span>, <span class="token punctuation">'</span>c<span class="token punctuation">'</span>, <span class="token punctuation">'</span>d<span class="token punctuation">'</span>]<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      dataList<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dataList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> c<span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> d<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">arraySpanMethod</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> row<span class="token punctuation">,</span> column<span class="token punctuation">,</span> rowIndex<span class="token punctuation">,</span> columnIndex <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>row<span class="token punctuation">,</span> column<span class="token punctuation">,</span> rowIndex<span class="token punctuation">,</span> columnIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 只是遍历表格td内容，不包含th表头</span>
      <span class="token comment">// 对第一列，进行合并列</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>columnIndex <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>rowIndex <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 第一列，第一行，默认</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            rowspan<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            colspan<span class="token operator">:</span> <span class="token number">1</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>rowIndex <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 第一列，第二行，合并，占this.dataList.length - 1行</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            rowspan<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataList<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span>
            colspan<span class="token operator">:</span> <span class="token number">1</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>rowIndex <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 第一列，剩余行，为空</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            rowspan<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            colspan<span class="token operator">:</span> <span class="token number">0</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.table-test</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 100px<span class="token selector">;
  // border处理
  // 去掉表头单元格th右边框
  /deep/ .el-table th:not(:first-child)</span> <span class="token punctuation">{</span>
    <span class="token property">border-right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">// 去掉表格内容单元格td的右侧边框、底部边框
  /deep/ .el-table td</span> <span class="token punctuation">{</span>
    <span class="token property">border-right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">// 为第一行td增加底部border
  /deep/ .el-table__row:first-child td</span> <span class="token punctuation">{</span>
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #eaeaea<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">// 为第一行第一列td增加右侧border
  /deep/ .el-table__row:first-child td:first-child,
  // 为第二行（合并后的）第一列td设置右侧border
  /deep/ .el-table__row:nth-child(2) td:first-child</span> <span class="token punctuation">{</span>
    <span class="token property">border-right</span><span class="token punctuation">:</span> 1px solid #eaeaea<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_2020-07-12-周日"><a href="#_2020-07-12-周日" class="header-anchor">#</a> 2020/07/12 周日</h2> <h3 id="github-clone下载太慢怎么解决"><a href="#github-clone下载太慢怎么解决" class="header-anchor">#</a> github clone下载太慢怎么解决</h3> <p>以clone vue源码为例，默认git clone下载非常慢，我们可以把github.com链接改为镜像github.com.cnpmjs.org，这样下载速度就很快了，过程如下</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># git clone 下载vue源码</span>
guoqzuo-mac:source kevin$ <span class="token function">git</span> clone https://github.com/vuejs/vue.git
Cloning into <span class="token string">'vue'</span><span class="token punctuation">..</span>.
remote: Enumerating objects: <span class="token number">56366</span>, done.
^Cceiving objects:   <span class="token number">5</span>% <span class="token punctuation">(</span><span class="token number">2823</span>/56366<span class="token punctuation">)</span>, <span class="token number">556.01</span> KiB <span class="token operator">|</span> <span class="token number">10.00</span> KiB/s   
guoqzuo-mac:source kevin$ 
guoqzuo-mac:source kevin$ <span class="token function">git</span> clone https://github.com.cnpmjs.org/vuejs/vue.git
Cloning into <span class="token string">'vue'</span><span class="token punctuation">..</span>.
remote: Enumerating objects: <span class="token number">56366</span>, done.
remote: Total <span class="token number">56366</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>, reused <span class="token number">0</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>, pack-reused <span class="token number">56366</span>
Receiving objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">56366</span>/56366<span class="token punctuation">)</span>, <span class="token number">26.75</span> MiB <span class="token operator">|</span> <span class="token number">1.22</span> MiB/s, done.
Resolving deltas: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">39568</span>/39568<span class="token punctuation">)</span>, done.
guoqzuo-mac:source kevin$ 
</code></pre></div><p><img src="/images/daily/github_clone_slow.png" alt="github_clone_slow.png"></p> <h3 id="js获取location-href不真实的问题"><a href="#js获取location-href不真实的问题" class="header-anchor">#</a> js获取location.href不真实的问题</h3> <p>macOS 修改host文件 /etc/hosts 后，本地访问某个域名会按照host指定的ip去解析，就会造成前端location.href不准确的问题，下面来看看</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 默认没有写的权限，无法编辑</span>
guoqzuo-mac:~ kevin$ <span class="token function">ls</span> -l /etc/hosts 
-rw-r--r--  <span class="token number">1</span> root  wheel  <span class="token number">244</span>  <span class="token number">3</span> <span class="token number">24</span>  <span class="token number">2019</span> /etc/hosts
<span class="token comment"># 新增写的权限</span>
guoqzuo-mac:~ kevin$ <span class="token function">sudo</span> <span class="token function">chmod</span> 0666 /etc/hosts
Password:
<span class="token comment"># 再次查看权限</span>
guoqzuo-mac:~ kevin$ <span class="token function">ls</span> -l /etc/hosts 
-rw-rw-rw-  <span class="token number">1</span> root  wheel  <span class="token number">244</span>  <span class="token number">3</span> <span class="token number">24</span>  <span class="token number">2019</span> /etc/hosts
<span class="token comment"># 使用vi修改该文件</span>
guoqzuo-mac:~ kevin$ <span class="token function">vi</span> /etc/hosts
<span class="token comment"># 新增a.com解析，在本地将a.com解析到47.107.190.93的服务器，也就是zuo11.com解析到的服务器</span>
<span class="token number">47.107</span>.190.93 a.com
</code></pre></div><p>macOS修改host是实时生效的，修改后，本地浏览器访问a.com，会访问47.107.190.93的服务器，显示的是zuo11.com的内容。这时用location.href就是a.com，而不是zuo11.com。下面是百度统计的数据，显示的就是a.com</p> <p><img src="/images/daily/a_com_tongji.png" alt="a_com_tongji.png"></p> <h2 id="_2020-07-09-周四"><a href="#_2020-07-09-周四" class="header-anchor">#</a> 2020/07/09 周四</h2> <h3 id="表格怎么画斜线"><a href="#表格怎么画斜线" class="header-anchor">#</a> 表格怎么画斜线</h3> <p>在最近的需求中，有个表格表头里有斜线，我特意翻了HTML5权威指南的笔记，发现并没有介绍怎么画表头的斜线。找了下网上的实现，一般都是通过css来实现，效果如下，在线预览地址: <a href="https://zuoxiaobai.github.io/fedemo/src/DebugDemo/%E8%A1%A8%E6%A0%BC%E6%80%8E%E4%B9%88%E7%94%BB%E6%96%9C%E7%BA%BF/index.html" target="_blank" rel="noopener noreferrer">表格画斜线 | github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="/images/daily/table_slash.png" alt="table_slash.png"></p> <p>基本实现都是纯css，有的用到的伪元素。我这里直接用了三个元素来实现，如果想要完全理解，需要用到一点点数学方面的知识。</p> <ol><li>比如计算斜线的长度。勾股定理 a² + b² = c²</li></ol> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* 斜边边长 */</span>
<span class="token comment">/* Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)) */</span>
<span class="token comment">/* Math.sqrt(Math.pow(150, 2) + Math.pow(80, 2)) = 170 */</span>
</code></pre></div><ol start="2"><li>根据th单元格的宽高计算斜线的rotate角度。给定直角三角形的边长，怎么计算角度? 这里我们知道宽高，不知道斜边边长,假设角度A，正切tanA = 对边(高) / 邻边(宽)，我们知道这个角度A的正切值，怎么反向计算A的角度呢。就需要用到反正切函数 Math.atan了，他会返回一个弧度值。在JS中 180度对应的值为 Math.PI，计算出来的值乘以 (180 / Math.PI) 就是可以在css中使用的度数了，单位为 deg</li></ol> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* 角度计算公式 */</span> 
<span class="token comment">/*  Math.atan(height / width) * 180 / Math.PI  */</span>
<span class="token comment">/*  Math.atan(80 / 150) * 180 / Math.PI  = 28.072486935852954 */</span>
</code></pre></div><p>完整代码如下</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token comment">/* 基本表格元素 */</span>
    <span class="token selector">table</span> <span class="token punctuation">{</span>
      <span class="token property">border-collapse</span><span class="token punctuation">:</span> collapse<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">th,td</span> <span class="token punctuation">{</span>
      <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #666<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* th单元格 */</span>
    <span class="token selector">.slash-wrap</span> <span class="token punctuation">{</span>
      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
      <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* 斜线 */</span>
    <span class="token selector">.slash</span> <span class="token punctuation">{</span>
      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
      <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token comment">/* 斜边边长 */</span>
      <span class="token comment">/* Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)) */</span>
      <span class="token comment">/* Math.sqrt(Math.pow(150, 2) + Math.pow(80, 2)) = 170 */</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 170px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>
      <span class="token property">background-color</span><span class="token punctuation">:</span>#000<span class="token punctuation">;</span>
      <span class="token comment">/* 旋转角度计算公式 */</span> 
      <span class="token comment">/*  Math.atan(height / width) * 180 / Math.PI  */</span>
      <span class="token comment">/*  Math.atan(80 / 150) * 180 / Math.PI  = 28.072486935852954 */</span>
      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>28.072486935852954deg<span class="token punctuation">)</span><span class="token punctuation">;</span> 
      <span class="token property">transform-origin</span><span class="token punctuation">:</span> top left<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* 左下角文字 */</span>
    <span class="token selector">.left</span> <span class="token punctuation">{</span>
      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
      <span class="token comment">/* 左下角 left:0; bottom: 0; */</span>
      <span class="token property">left</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
      <span class="token property">bottom</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* 右上角文字 */</span>
    <span class="token selector">.right</span> <span class="token punctuation">{</span>
      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
      <span class="token comment">/* 右上角 right:0; top: 0; */</span>
      <span class="token property">right</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
      <span class="token property">top</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slash-wrap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>姓名<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slash<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>科目<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>语文<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>数学<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>张三<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>89<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>80<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>李四<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>89<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>80<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>参考：</p> <ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Math/atan" target="_blank" rel="noopener noreferrer">Math.atan | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zhidao.baidu.com/question/1734209350028464467.html" target="_blank" rel="noopener noreferrer">【数学】sin cos tan分别是什么意思<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zhidao.baidu.com/question/1049676482244639019.html" target="_blank" rel="noopener noreferrer">有边长怎么计算三角形的角度<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://tool.520101.com/calculator/sanjiaoxingjiaodu/" target="_blank" rel="noopener noreferrer">在线三角形的角度计算器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.cnblogs.com/zhaozhenzhen/p/12187482.html" target="_blank" rel="noopener noreferrer">vue element 表头添加斜线<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="权限code状态管理设计"><a href="#权限code状态管理设计" class="header-anchor">#</a> 权限code状态管理设计</h3> <p>一般使用vuex状态管理，提供一个getter方法获取对应的角色权限，假设getter名为roleMuster，通过mapGetters导入，然后使用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token punctuation">{</span> role_admin<span class="token punctuation">,</span> role_a<span class="token punctuation">,</span> role_b<span class="token punctuation">,</span> role_c <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>roleMuster
<span class="token comment">// 如果有对应的权限，值则为true</span>
</code></pre></div><p>在getter的逻辑里可以对角色对应的code进行转换，使用好理解变量代替，消除魔术字符串</p> <h2 id="_2020-07-08-周三"><a href="#_2020-07-08-周三" class="header-anchor">#</a> 2020/07/08 周三</h2> <h3 id="pc样式自适应rem"><a href="#pc样式自适应rem" class="header-anchor">#</a> pc样式自适应rem</h3> <p>pc端如果做官网、展示类的UI，就需要使用rem了。为了好还原UI图，1rem通常设计为100px。rem是相对于html元素font-size来计算的，我们可以通过动态的改变html元素的fontSize，来实现页面自适应</p> <p>怎么动态设置html元素的font-size呢？来看看</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">recalc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> designSize <span class="token operator">=</span> <span class="token number">1920</span>
      <span class="token keyword">let</span> minWidth <span class="token operator">=</span> <span class="token number">1280</span>
      <span class="token keyword">let</span> html <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement
      <span class="token keyword">let</span> w <span class="token operator">=</span> html<span class="token punctuation">.</span>clientWidth <span class="token operator">&lt;</span> minWidth <span class="token operator">?</span> minWidth <span class="token operator">:</span> html<span class="token punctuation">.</span>clientWidth
      <span class="token keyword">let</span> rem <span class="token operator">=</span> <span class="token punctuation">(</span> w <span class="token operator">/</span> designSize<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>rem <span class="token operator">=</span> rem <span class="token comment">// 当前页面 使用时宽高使用 this.rem * (设计稿标记尺寸/100)</span>
      <span class="token comment">// html.style.fontSize = `${rem}px`  // 会影响所有页面</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>recalc <span class="token operator">=</span> recalc
    <span class="token function">recalc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 窗口变更后，变更rem</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> recalc<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 组件销毁时移除resize事件的recalc</span>
  <span class="token function">beforeDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>recalc<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这里就凸显出 window.addEventListener('resize') 相对于 window.onresize 的优势，假设项目很大，其他代码已经监听了window.onresize如果你再用window.onresize可能会覆盖原来的方法，要特别小心，而window.addEventListener就不用担心这个问题，你只需要注意remove的时候，只移除你自己的监听函数即可。</p> <h3 id="background设置图片背景相关"><a href="#background设置图片背景相关" class="header-anchor">#</a> background设置图片背景相关</h3> <p>HTML5权威指南这本书对background的简写貌似有点不正确，使用起来会有问题，这次让图片在某个区域完全显示，是分开写的，如下：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">div</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #fff <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'/images/xxx.png'</span><span class="token punctuation">)</span></span> no-repeat<span class="token punctuation">;</span>
  <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>后面仔细测试下这块</p> <h3 id="移动端rem自适应"><a href="#移动端rem自适应" class="header-anchor">#</a> 移动端rem自适应</h3> <p>设计图750 * xx(iphone 6/7/8 或 全面屏)，以100为基准</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">initRem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> html <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement
  <span class="token keyword">let</span> resizeEventName <span class="token operator">=</span> <span class="token string">'orientationchange'</span> <span class="token keyword">in</span> window <span class="token operator">?</span> <span class="token string">'orientationchange'</span> <span class="token operator">:</span> <span class="token string">'resize'</span>
  <span class="token keyword">let</span> <span class="token function-variable function">recalc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> w <span class="token operator">=</span> html<span class="token punctuation">.</span>clientWidth <span class="token operator">&lt;</span> <span class="token number">320</span> <span class="token operator">?</span> <span class="token number">320</span> <span class="token operator">:</span> html<span class="token punctuation">.</span>clientWidth
    <span class="token keyword">let</span> fontSize <span class="token operator">=</span> w <span class="token operator">&gt;</span> <span class="token number">750</span> <span class="token operator">?</span> <span class="token number">200</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>w <span class="token operator">/</span> <span class="token number">375</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span>
    Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>html<span class="token punctuation">.</span>style<span class="token punctuation">,</span> <span class="token punctuation">{</span> fontSize <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">recalc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">[</span>resizeEventName<span class="token punctuation">,</span> <span class="token string">'DOMContentLoaded'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">eventName</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> recalc<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2020-07-05-周日"><a href="#_2020-07-05-周日" class="header-anchor">#</a> 2020/07/05 周日</h2> <h3 id="vue实现一个tree组件"><a href="#vue实现一个tree组件" class="header-anchor">#</a> vue实现一个tree组件</h3> <p>树形组件主要是递归的问题，组件自己调用自己，来写个简单的例子</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>z-tree</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>treeData<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>z-tree</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">ZTree</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./ZTree&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      treeData<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          label<span class="token operator">:</span> <span class="token string">&quot;冰箱&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          label<span class="token operator">:</span> <span class="token string">&quot;水果&quot;</span><span class="token punctuation">,</span>
          list<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;苹果&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;梨子&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;葡萄&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              label<span class="token operator">:</span> <span class="token string">&quot;喜欢的水果&quot;</span><span class="token punctuation">,</span>
              list<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;水果1&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;水果2&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;水果3&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;香蕉&quot;</span> <span class="token punctuation">}</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          label<span class="token operator">:</span> <span class="token string">&quot;茶叶&quot;</span><span class="token punctuation">,</span>
          list<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;铁观音&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;西湖龙井&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;毛尖&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              label<span class="token operator">:</span> <span class="token string">&quot;红茶&quot;</span><span class="token punctuation">,</span>
              list<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;红茶1&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;红茶2&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;红茶3&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ZTree.vue实现</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- z-tree递归组件实现 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in data<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.label<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        {{ item.label }}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont el-icon-arrow-right<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>z-tree</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>z-tree</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">ZTree</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./ZTree&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Array<span class="token punctuation">,</span>
      required<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="select渲染上万条数据卡顿的问题"><a href="#select渲染上万条数据卡顿的问题" class="header-anchor">#</a> select渲染上万条数据卡顿的问题</h3> <p>一般下拉选择时会使用select组件，但如果select数据过万，可能会产生卡顿，其实这种数据大的情况使用select就体验很差了。</p> <p>可以做成弹窗选择或搜索框，那怎么保持select有数万条数据而不卡呢？我的理解是，使用触底刷新，滚动到底部时加载后面的内容</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">10/29/2020, 10:59:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/daily/2020-08.html" class="prev">
        2020年08月技术日常
      </a></span> <span class="next"><a href="/daily/2020-06.html">
        2020年06月技术日常
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.1f511cd1.js" defer></script><script src="/assets/js/2.4b3539f1.js" defer></script><script src="/assets/js/43.8d141598.js" defer></script><script src="/assets/js/3.e6a4dd76.js" defer></script>
  </body>
</html>
