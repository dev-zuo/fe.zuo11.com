<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2020年01月技术日常 | 左小白的前端笔记</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="左小白的前端笔记，归纳整理自己在前端工作、学习中的一些心得笔记，有利于前端知识系统化。包括 Vue.js、前端工程化（TypeScript、Node.js、webpack）、Docker、JS/ES6、CSS/CSS3、HTML/HTML5、数据可视化、计算机基础、英语等笔记。">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.594b47db.css" as="style"><link rel="preload" href="/assets/js/app.1f511cd1.js" as="script"><link rel="preload" href="/assets/js/2.4b3539f1.js" as="script"><link rel="preload" href="/assets/js/37.8d0a586e.js" as="script"><link rel="preload" href="/assets/js/3.e6a4dd76.js" as="script"><link rel="prefetch" href="/assets/js/10.f7d631a1.js"><link rel="prefetch" href="/assets/js/100.62403a37.js"><link rel="prefetch" href="/assets/js/101.9eead1bc.js"><link rel="prefetch" href="/assets/js/102.a5a8c608.js"><link rel="prefetch" href="/assets/js/103.2261e92e.js"><link rel="prefetch" href="/assets/js/104.deecf853.js"><link rel="prefetch" href="/assets/js/105.d309d997.js"><link rel="prefetch" href="/assets/js/106.a16552d1.js"><link rel="prefetch" href="/assets/js/107.b2e9608f.js"><link rel="prefetch" href="/assets/js/108.8a2e6046.js"><link rel="prefetch" href="/assets/js/109.43e70fa7.js"><link rel="prefetch" href="/assets/js/11.12c7819b.js"><link rel="prefetch" href="/assets/js/110.0ae45b0c.js"><link rel="prefetch" href="/assets/js/111.3df4e9b7.js"><link rel="prefetch" href="/assets/js/112.f7699b84.js"><link rel="prefetch" href="/assets/js/113.e06ce766.js"><link rel="prefetch" href="/assets/js/114.0e500700.js"><link rel="prefetch" href="/assets/js/115.0cc12c39.js"><link rel="prefetch" href="/assets/js/116.77095d46.js"><link rel="prefetch" href="/assets/js/117.8f2f1eca.js"><link rel="prefetch" href="/assets/js/118.39b86b7e.js"><link rel="prefetch" href="/assets/js/119.da684fa3.js"><link rel="prefetch" href="/assets/js/12.66186d22.js"><link rel="prefetch" href="/assets/js/120.92adaeae.js"><link rel="prefetch" href="/assets/js/121.4dec411b.js"><link rel="prefetch" href="/assets/js/122.fbdacf5a.js"><link rel="prefetch" href="/assets/js/123.444c7f44.js"><link rel="prefetch" href="/assets/js/124.d0efc8b3.js"><link rel="prefetch" href="/assets/js/125.b4743d87.js"><link rel="prefetch" href="/assets/js/126.267168eb.js"><link rel="prefetch" href="/assets/js/127.f1f0b9ff.js"><link rel="prefetch" href="/assets/js/128.79439601.js"><link rel="prefetch" href="/assets/js/129.006b152d.js"><link rel="prefetch" href="/assets/js/13.94147151.js"><link rel="prefetch" href="/assets/js/130.86722a54.js"><link rel="prefetch" href="/assets/js/131.69c4ebcb.js"><link rel="prefetch" href="/assets/js/132.0d7e0897.js"><link rel="prefetch" href="/assets/js/133.d8bf7015.js"><link rel="prefetch" href="/assets/js/134.aeabc9d5.js"><link rel="prefetch" href="/assets/js/135.e1591304.js"><link rel="prefetch" href="/assets/js/136.bf5f4e6a.js"><link rel="prefetch" href="/assets/js/137.327a62e0.js"><link rel="prefetch" href="/assets/js/138.47e8b430.js"><link rel="prefetch" href="/assets/js/139.8ce7878c.js"><link rel="prefetch" href="/assets/js/14.e81004ee.js"><link rel="prefetch" href="/assets/js/140.5a4d28db.js"><link rel="prefetch" href="/assets/js/141.b63840e7.js"><link rel="prefetch" href="/assets/js/142.765333b1.js"><link rel="prefetch" href="/assets/js/143.d3f7d7e0.js"><link rel="prefetch" href="/assets/js/144.bbad5941.js"><link rel="prefetch" href="/assets/js/145.066623a9.js"><link rel="prefetch" href="/assets/js/146.8e265805.js"><link rel="prefetch" href="/assets/js/147.d9d37261.js"><link rel="prefetch" href="/assets/js/148.af57cd78.js"><link rel="prefetch" href="/assets/js/149.61115cb0.js"><link rel="prefetch" href="/assets/js/15.1326e39c.js"><link rel="prefetch" href="/assets/js/150.931e6dbc.js"><link rel="prefetch" href="/assets/js/151.ba91f6a4.js"><link rel="prefetch" href="/assets/js/152.c371187e.js"><link rel="prefetch" href="/assets/js/153.2d8af3b7.js"><link rel="prefetch" href="/assets/js/154.15b96843.js"><link rel="prefetch" href="/assets/js/155.db935936.js"><link rel="prefetch" href="/assets/js/156.85519e24.js"><link rel="prefetch" href="/assets/js/157.c91ed6ba.js"><link rel="prefetch" href="/assets/js/16.eb71a02a.js"><link rel="prefetch" href="/assets/js/17.f4a7a522.js"><link rel="prefetch" href="/assets/js/18.c730c964.js"><link rel="prefetch" href="/assets/js/19.4d7dfdc0.js"><link rel="prefetch" href="/assets/js/20.74075251.js"><link rel="prefetch" href="/assets/js/21.6f2ce4c0.js"><link rel="prefetch" href="/assets/js/22.b6efd501.js"><link rel="prefetch" href="/assets/js/23.c06a1b16.js"><link rel="prefetch" href="/assets/js/24.ad5c06ea.js"><link rel="prefetch" href="/assets/js/25.06895800.js"><link rel="prefetch" href="/assets/js/26.5edf933c.js"><link rel="prefetch" href="/assets/js/27.4ecf6215.js"><link rel="prefetch" href="/assets/js/28.3f66d916.js"><link rel="prefetch" href="/assets/js/29.ba60ca65.js"><link rel="prefetch" href="/assets/js/30.b6b55d35.js"><link rel="prefetch" href="/assets/js/31.5fa558a4.js"><link rel="prefetch" href="/assets/js/32.1671d948.js"><link rel="prefetch" href="/assets/js/33.b8151898.js"><link rel="prefetch" href="/assets/js/34.fc4cac22.js"><link rel="prefetch" href="/assets/js/35.257f3cea.js"><link rel="prefetch" href="/assets/js/36.33d4f83d.js"><link rel="prefetch" href="/assets/js/38.34f4ef54.js"><link rel="prefetch" href="/assets/js/39.65fae495.js"><link rel="prefetch" href="/assets/js/4.aeb07d0c.js"><link rel="prefetch" href="/assets/js/40.79d11166.js"><link rel="prefetch" href="/assets/js/41.4a6fbd57.js"><link rel="prefetch" href="/assets/js/42.f49c21cb.js"><link rel="prefetch" href="/assets/js/43.8d141598.js"><link rel="prefetch" href="/assets/js/44.703ca403.js"><link rel="prefetch" href="/assets/js/45.4b04f0f6.js"><link rel="prefetch" href="/assets/js/46.22b3c15a.js"><link rel="prefetch" href="/assets/js/47.706163e5.js"><link rel="prefetch" href="/assets/js/48.c7d214f0.js"><link rel="prefetch" href="/assets/js/49.baf1de95.js"><link rel="prefetch" href="/assets/js/5.5b94bff7.js"><link rel="prefetch" href="/assets/js/50.ad635ba5.js"><link rel="prefetch" href="/assets/js/51.513ee75a.js"><link rel="prefetch" href="/assets/js/52.ea1b4b45.js"><link rel="prefetch" href="/assets/js/53.61eca69d.js"><link rel="prefetch" href="/assets/js/54.e0d4a9e1.js"><link rel="prefetch" href="/assets/js/55.f12ee302.js"><link rel="prefetch" href="/assets/js/56.23108a6b.js"><link rel="prefetch" href="/assets/js/57.aac4a472.js"><link rel="prefetch" href="/assets/js/58.27581ad6.js"><link rel="prefetch" href="/assets/js/59.a661c91c.js"><link rel="prefetch" href="/assets/js/6.481b22df.js"><link rel="prefetch" href="/assets/js/60.4db8717d.js"><link rel="prefetch" href="/assets/js/61.b1d1aa7e.js"><link rel="prefetch" href="/assets/js/62.f3d59428.js"><link rel="prefetch" href="/assets/js/63.0a5db164.js"><link rel="prefetch" href="/assets/js/64.43b1dbf4.js"><link rel="prefetch" href="/assets/js/65.9e2cfd46.js"><link rel="prefetch" href="/assets/js/66.8d2e6fce.js"><link rel="prefetch" href="/assets/js/67.316e3bba.js"><link rel="prefetch" href="/assets/js/68.2a9ea7c0.js"><link rel="prefetch" href="/assets/js/69.013f3120.js"><link rel="prefetch" href="/assets/js/7.cb937ed7.js"><link rel="prefetch" href="/assets/js/70.6c7635f8.js"><link rel="prefetch" href="/assets/js/71.f383131f.js"><link rel="prefetch" href="/assets/js/72.9ed6be02.js"><link rel="prefetch" href="/assets/js/73.5c649771.js"><link rel="prefetch" href="/assets/js/74.597f8d6d.js"><link rel="prefetch" href="/assets/js/75.a38dc25a.js"><link rel="prefetch" href="/assets/js/76.407167b5.js"><link rel="prefetch" href="/assets/js/77.6046be23.js"><link rel="prefetch" href="/assets/js/78.117ef2a9.js"><link rel="prefetch" href="/assets/js/79.2fd97fcb.js"><link rel="prefetch" href="/assets/js/8.dcd2d777.js"><link rel="prefetch" href="/assets/js/80.3ebdbb88.js"><link rel="prefetch" href="/assets/js/81.756f28cf.js"><link rel="prefetch" href="/assets/js/82.3357dd0a.js"><link rel="prefetch" href="/assets/js/83.75bc4803.js"><link rel="prefetch" href="/assets/js/84.bf3d114b.js"><link rel="prefetch" href="/assets/js/85.4ea0353f.js"><link rel="prefetch" href="/assets/js/86.2105b04f.js"><link rel="prefetch" href="/assets/js/87.96f9597f.js"><link rel="prefetch" href="/assets/js/88.b5409c8c.js"><link rel="prefetch" href="/assets/js/89.7459ba86.js"><link rel="prefetch" href="/assets/js/9.e0f173ad.js"><link rel="prefetch" href="/assets/js/90.a66ecac8.js"><link rel="prefetch" href="/assets/js/91.80cc472d.js"><link rel="prefetch" href="/assets/js/92.63c9c0c5.js"><link rel="prefetch" href="/assets/js/93.54570d9f.js"><link rel="prefetch" href="/assets/js/94.168f1690.js"><link rel="prefetch" href="/assets/js/95.595b78a5.js"><link rel="prefetch" href="/assets/js/96.59571918.js"><link rel="prefetch" href="/assets/js/97.e69ef9d0.js"><link rel="prefetch" href="/assets/js/98.d3ad2eac.js"><link rel="prefetch" href="/assets/js/99.70ea2b6d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.594b47db.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">左小白的前端笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南" class="dropdown-title"><span class="title">指南</span> <span class="arrow down"></span></button> <button type="button" aria-label="指南" class="mobile-dropdown-title"><span class="title">指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  首页
</a></li><li class="dropdown-item"><!----> <a href="/nav.html" class="nav-link">
  前端网址导航
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><span class="title">前端进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端进阶" class="mobile-dropdown-title"><span class="title">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daily/" class="nav-link router-link-active">
  技术日常记录
</a></li><li class="dropdown-item"><!----> <a href="/server/docker.html" class="nav-link">
  Docker 基础
</a></li><li class="dropdown-item"><h4>
          Vue.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/base/1.html" class="nav-link">
  Vue.js 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vue-router.html" class="nav-link">
  Vue Router 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vuex.html" class="nav-link">
  Vuex 笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          前端工程化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ts/base-1.html" class="nav-link">
  TypeScript 入门教程笔记
</a></li><li class="dropdown-subitem"><a href="/node/base/1.html" class="nav-link">
  Node.js 笔记
</a></li><li class="dropdown-subitem"><a href="/webpack/base.html" class="nav-link">
  webpack 基础
</a></li></ul></li><li class="dropdown-item"><h4>
          数据可视化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/visual/echarts.html" class="nav-link">
  Echarts 笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS/ES6
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/js/es6/es6-1.html" class="nav-link">
  ES6标准入门(第三版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/ad3/js-ad3-1.html" class="nav-link">
  JavaScript高级程序设计(第四版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/js-dom-art.html" class="nav-link">
  JavaScript DOM编程艺术(第二版)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS/CSS3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/css/less.html" class="nav-link">
  CSS 预处理器 Less.js
</a></li><li class="dropdown-subitem"><a href="/css/flex-grid.html" class="nav-link">
  Flex与Grid布局
</a></li><li class="dropdown-subitem"><a href="/css/html5-css-1.html" class="nav-link">
  HTML5权威指南(CSS部分)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          HTML/HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html5/html/1.html" class="nav-link">
  HTML5权威指南(HTML部分)笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/base/js-data-struct.html" class="nav-link">
  学习JavaScript数据结构与算法(第三版)笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/mocha-test.html" class="nav-link">
  Mocha - JavaScript测试框架
</a></li><li class="dropdown-item"><!----> <a href="/base/git.html" class="nav-link">
  Git 笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/markdown.html" class="nav-link">
  Markdown 基础语法
</a></li><li class="dropdown-item"><!----> <a href="/base/dbtheory/1.html" class="nav-link">
  数据库系统原理笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开源项目" class="dropdown-title"><span class="title">开源项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="开源项目" class="mobile-dropdown-title"><span class="title">开源项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://vuechart.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @guoqzuo/vue-chart
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://zuoblog.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  zuo-blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="http://www.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/zuoxiaobai" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南" class="dropdown-title"><span class="title">指南</span> <span class="arrow down"></span></button> <button type="button" aria-label="指南" class="mobile-dropdown-title"><span class="title">指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  首页
</a></li><li class="dropdown-item"><!----> <a href="/nav.html" class="nav-link">
  前端网址导航
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><span class="title">前端进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端进阶" class="mobile-dropdown-title"><span class="title">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daily/" class="nav-link router-link-active">
  技术日常记录
</a></li><li class="dropdown-item"><!----> <a href="/server/docker.html" class="nav-link">
  Docker 基础
</a></li><li class="dropdown-item"><h4>
          Vue.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/base/1.html" class="nav-link">
  Vue.js 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vue-router.html" class="nav-link">
  Vue Router 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vuex.html" class="nav-link">
  Vuex 笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          前端工程化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ts/base-1.html" class="nav-link">
  TypeScript 入门教程笔记
</a></li><li class="dropdown-subitem"><a href="/node/base/1.html" class="nav-link">
  Node.js 笔记
</a></li><li class="dropdown-subitem"><a href="/webpack/base.html" class="nav-link">
  webpack 基础
</a></li></ul></li><li class="dropdown-item"><h4>
          数据可视化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/visual/echarts.html" class="nav-link">
  Echarts 笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS/ES6
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/js/es6/es6-1.html" class="nav-link">
  ES6标准入门(第三版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/ad3/js-ad3-1.html" class="nav-link">
  JavaScript高级程序设计(第四版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/js-dom-art.html" class="nav-link">
  JavaScript DOM编程艺术(第二版)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS/CSS3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/css/less.html" class="nav-link">
  CSS 预处理器 Less.js
</a></li><li class="dropdown-subitem"><a href="/css/flex-grid.html" class="nav-link">
  Flex与Grid布局
</a></li><li class="dropdown-subitem"><a href="/css/html5-css-1.html" class="nav-link">
  HTML5权威指南(CSS部分)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          HTML/HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html5/html/1.html" class="nav-link">
  HTML5权威指南(HTML部分)笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/base/js-data-struct.html" class="nav-link">
  学习JavaScript数据结构与算法(第三版)笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/mocha-test.html" class="nav-link">
  Mocha - JavaScript测试框架
</a></li><li class="dropdown-item"><!----> <a href="/base/git.html" class="nav-link">
  Git 笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/markdown.html" class="nav-link">
  Markdown 基础语法
</a></li><li class="dropdown-item"><!----> <a href="/base/dbtheory/1.html" class="nav-link">
  数据库系统原理笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开源项目" class="dropdown-title"><span class="title">开源项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="开源项目" class="mobile-dropdown-title"><span class="title">开源项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://vuechart.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @guoqzuo/vue-chart
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://zuoblog.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  zuo-blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="http://www.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/zuoxiaobai" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/daily/" aria-current="page" class="sidebar-link">技术日常记录</a></li><li><a href="/daily/2020-12.html" class="sidebar-link">2020年12月技术日常</a></li><li><a href="/daily/2020-11.html" class="sidebar-link">2020年11月技术日常</a></li><li><a href="/daily/2020-10.html" class="sidebar-link">2020年10月技术日常</a></li><li><a href="/daily/2020-09.html" class="sidebar-link">2020年09月技术日常</a></li><li><a href="/daily/2020-08.html" class="sidebar-link">2020年08月技术日常</a></li><li><a href="/daily/2020-07.html" class="sidebar-link">2020年07月技术日常</a></li><li><a href="/daily/2020-06.html" class="sidebar-link">2020年06月技术日常</a></li><li><a href="/daily/2020-05.html" class="sidebar-link">2020年05月技术日常</a></li><li><a href="/daily/2020-04.html" class="sidebar-link">2020年04月技术日常</a></li><li><a href="/daily/2020-03.html" class="sidebar-link">2020年03月技术日常</a></li><li><a href="/daily/2020-02.html" class="sidebar-link">2020年02月技术日常</a></li><li><a href="/daily/2020-01.html" aria-current="page" class="active sidebar-link">2020年01月技术日常</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-01.html#_2020-01-30-周四" class="sidebar-link">2020/01/30 周四</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-01.html#百度统计网站测速" class="sidebar-link">百度统计网站测速</a></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#seo链接提交到搜索引擎" class="sidebar-link">seo链接提交到搜索引擎</a></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#开源协议mit等具体含义" class="sidebar-link">开源协议MIT等具体含义</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#_2020-01-29-周三" class="sidebar-link">2020/01/29 周三</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-01.html#将markdown文件转html" class="sidebar-link">将markdown文件转html</a></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#nginx开启gzip" class="sidebar-link">nginx开启gzip</a></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#怎么判断nginx是否成功开启gzip" class="sidebar-link">怎么判断nginx是否成功开启gzip</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#_2020-01-21-周二" class="sidebar-link">2020/01/21 周二</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-01.html#使用set去重时的问题" class="sidebar-link">使用set去重时的问题</a></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#数组排序sort值有负数时排序异常" class="sidebar-link">数组排序sort值有负数时排序异常</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#_2020-01-19-周日" class="sidebar-link">2020/01/19 周日</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-01.html#零编码或少编码生成通用封装的axios函数" class="sidebar-link">零编码或少编码生成通用封装的axios函数</a></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#测试loading时写的等待函数最简代码" class="sidebar-link">测试loading时写的等待函数最简代码</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#_2020-01-16-周四" class="sidebar-link">2020/01/16 周四</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-01.html#node遍历文件夹下的文件名再require对应的文件出错" class="sidebar-link">node遍历文件夹下的文件名再require对应的文件出错</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#_2020-01-14-周二" class="sidebar-link">2020/01/14 周二</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-01.html#export-path-后关闭termial就失效了" class="sidebar-link">export PATH 后关闭termial就失效了</a></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#npm简写与项目名称注意事项" class="sidebar-link">npm简写与项目名称注意事项</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#_2020-01-11-周六" class="sidebar-link">2020/01/11 周六</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-01.html#markdown里怎么为文字添加颜色-怎么画复杂表格" class="sidebar-link">markdown里怎么为文字添加颜色，怎么画复杂表格</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#_2020-01-10-周五" class="sidebar-link">2020/01/10 周五</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-01.html#css-var-与变量" class="sidebar-link">css var() 与变量 --</a></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#多行文本截断" class="sidebar-link">多行文本截断</a></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#position-relative" class="sidebar-link">position:relative</a></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#node-path-resolve" class="sidebar-link">node path.resolve()</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#_2020-01-09-周四" class="sidebar-link">2020/01/09 周四</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-01.html#asycn-await-执行顺序问题" class="sidebar-link">asycn/await 执行顺序问题</a></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#foreach的缺点" class="sidebar-link">forEach的缺点</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#_2020-01-08-周三" class="sidebar-link">2020/01/08 周三</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-01.html#ie下dialog弹窗全屏后列表横向滚动卡顿的问题" class="sidebar-link">IE下dialog弹窗全屏后列表横向滚动卡顿的问题</a></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#if-else较多时可使用策略模式" class="sidebar-link">if else较多时可使用策略模式</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#_2020-01-07-周二" class="sidebar-link">2020/01/07 周二</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-01.html#判断当前鼠标是否在某个div内部" class="sidebar-link">判断当前鼠标是否在某个div内部</a></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#ie下dialog弹窗的滚动条滚动到底部时-触发了浏览器滚动条" class="sidebar-link">IE下dialog弹窗的滚动条滚动到底部时，触发了浏览器滚动条</a></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#element表格ie下由于滚动条原因导致错位问题" class="sidebar-link">Element表格IE下由于滚动条原因导致错位问题</a></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#如果组件的隐藏显示切换导致布局异常-可以将透明度设置为0来隐藏" class="sidebar-link">如果组件的隐藏显示切换导致布局异常，可以将透明度设置为0来隐藏</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#_2020-01-03-周五" class="sidebar-link">2020/01/03 周五</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-01.html#初始化一个ts项目" class="sidebar-link">初始化一个ts项目</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-01.html#_2020-01-02-周四" class="sidebar-link">2020/01/02 周四</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-01.html#typescript基础" class="sidebar-link">TypeScript基础</a></li></ul></li></ul></li><li><a href="/daily/2019-12.html" class="sidebar-link">2019年12月技术日常</a></li><li><a href="/daily/2019-11.html" class="sidebar-link">2019年11月技术日常</a></li><li><a href="/daily/2019-10.html" class="sidebar-link">2019年10月技术日常</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2020年01月技术日常"><a href="#_2020年01月技术日常" class="header-anchor">#</a> 2020年01月技术日常</h1> <h2 id="_2020-01-30-周四"><a href="#_2020-01-30-周四" class="header-anchor">#</a> 2020/01/30 周四</h2> <h3 id="百度统计网站测速"><a href="#百度统计网站测速" class="header-anchor">#</a> 百度统计网站测速</h3> <p>登录到百度统计，在优化分析 - 网站速度诊断位置，输入链接，测速速度。现在静态化后的博客比之前的jsp打开速度有了明显的提高。可以达到99分</p> <h3 id="seo链接提交到搜索引擎"><a href="#seo链接提交到搜索引擎" class="header-anchor">#</a> seo链接提交到搜索引擎</h3> <p>最近对zuo11.com进行了改版，完成了博客的静态化并完成了上线，nginx + 静态文件代替了原来的 tomcat + jsp + mysql的模式。针对百度收录与索引，google收录，做了一些处理。</p> <h4 id="登录到百度站长平台"><a href="#登录到百度站长平台" class="header-anchor">#</a> 登录到百度站长平台</h4> <p>由于url除了zuo11.com其他原来文章的url全部失效，需要让百度重新收录，添加索引。入口：<a href="https://ziyuan.baidu.com/" target="_blank" rel="noopener noreferrer">百度站长平台，现在叫资源搜索平台<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol><li>提交网站改版的规则URL对，百度搜索 site:zuo11.com，将收录的网页链接，以及改版后的url以规定的格式提交</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 旧URL，对应的改版后的url，以空格隔开，一行是一条数据</span>
http://zuo11.com/Notes.woe?action<span class="token operator">=</span>detail<span class="token operator">&amp;</span><span class="token assign-left variable">note_id</span><span class="token operator">=</span><span class="token number">24</span> http://www.zuo11.com/blog/2016/10/c_vim.html
http://zuo11.com/Notes.woe?action<span class="token operator">=</span>APUE http://www.zuo11.com/blog/category.html
</code></pre></div><ol start="2"><li>提交死链，对于改版后404的页面，可以提交死链，防止搜索引擎认为网站不稳定或服务异常，导致权重评分降级</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 死链规则</span>
http://zuo11.com/Notes.woe?
</code></pre></div><ol start="3"><li>新链接的提交，这里推荐使用sitemap的方式提交链接，怎么生成sitemap呢？使用 https://www.xml-sitemaps.com/ 输入你的站点，就可以自动生成sitemap.xml信息了，默认只有sitemap.xml，可以找更多文件的下载入口，可以下到一个sitemaps.zip的一个文件，里面还包含了txt、html等非xml格式的数据。<strong>将生成后的sitemap.xml文件放到域名根目录下，提交对应的链接到百度站长平台</strong></li></ol> <h4 id="登录到google-search-console"><a href="#登录到google-search-console" class="header-anchor">#</a> 登录到Google search console</h4> <p>入口：<a href="https://search.google.com/search-console" target="_blank" rel="noopener noreferrer">Google search console<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，登录后左侧菜单index - Sitemaps提交sitemap链接</p> <h3 id="开源协议mit等具体含义"><a href="#开源协议mit等具体含义" class="header-anchor">#</a> 开源协议MIT等具体含义</h3> <p>一般新建一个开源仓库时，需要确定开源协议。之前习惯是MIT，就是别人拿去干什么都可以。对于一些需要控制他人使用的就需要其他协议了。阮一峰博客里有一张图来解释很清晰明了</p> <p><img src="/images/daily/%E5%BC%80%E6%BA%90%E5%8D%8F%E8%AE%AE.jpg" alt="开源协议.jpg"></p> <ul><li>他人修改源码后是否可以闭源?
<ul><li>可以闭源，没一个修改过的文件是否都必须放置版权说明?
<ul><li>需要放置版权说明 <strong>Apache许可证</strong></li> <li>不需要放版权说明，衍生软件的广告是否可以使用你的名字促销?
<ul><li>可以用你的名字促销  <strong>MIT许可证</strong></li> <li>不可以用你的名字促销 <strong>BSD许可证</strong></li></ul></li></ul></li> <li>只能开源，那新增代码后是否采用同样的许可证(不能闭源)?
<ul><li>新增代码后也只能开源 <strong>GPL许可证</strong></li> <li>新增代码后可以闭源，需要对源码的修改之处提供说明文档吗？
<ul><li>需要对源码的修改之处提供说明文档 <strong>LGPL许可证</strong></li> <li>不需要提供说明文档 <strong>Mozilla许可证</strong></li></ul></li></ul></li></ul></li></ul> <p>结合实际情况，zuo11.com个人站点blog部分的开源可以使用 Apache许可证，如果是后面开源生成静态页面的程序，可以使用MIT协议</p> <h2 id="_2020-01-29-周三"><a href="#_2020-01-29-周三" class="header-anchor">#</a> 2020/01/29 周三</h2> <h3 id="将markdown文件转html"><a href="#将markdown文件转html" class="header-anchor">#</a> 将markdown文件转html</h3> <p>其实早在18年12月，我就已经写好了最简的demo，使用的是marked这个工具。本来准备将博客静态化的，但后来就没继续了，这里来说下方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// github: https://github.com/markedjs/marked</span>
<span class="token comment">// marked.js 是下载好的</span>
<span class="token keyword">let</span> marked <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./lib/marked'</span><span class="token punctuation">)</span> <span class="token comment">// import marked.js</span>
<span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
<span class="token comment">// 读取md文件</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./notes/2016/10/iOS程序启动过程，从main函数开始UIApplication与AppDelegate.md'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 这里加入了基本的html框架，加入了代码高亮prismjs</span>
  <span class="token keyword">let</span> htmlStr <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;!DOCTYPE html&gt;
  &lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
      &lt;meta charset=&quot;UTF-8&quot;&gt;
      &lt;title&gt;Title&lt;/title&gt;
      &lt;link href=&quot;../lib/prismjs/prism_default.css&quot; rel=&quot;stylesheet&quot; /&gt;
    &lt;/head&gt;
    &lt;body&gt;
      </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">marked</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
      &lt;script src=&quot;../lib/prismjs/prism_default.js&quot;&gt;&lt;/script&gt;
    &lt;/body&gt;
  &lt;/html&gt;
  </span><span class="token template-punctuation string">`</span></span>
  <span class="token comment">// 生成新的文件</span>
  fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'./dist/test.html'</span><span class="token punctuation">,</span> htmlStr<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'写入文件成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>注意：marked将md文件转html时，如果在ol或ul后面加了代码块，必须换行，如果不换行就会准换异常</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// - 这是一个ul</span>
<span class="token comment">// ul后面这里不能直接用```写代码，需要换行，如果不换行在Typora可以正常渲染，但marked转换时会出问题</span>
</code></pre></div><h3 id="nginx开启gzip"><a href="#nginx开启gzip" class="header-anchor">#</a> nginx开启gzip</h3> <p>首先复习下windows下，nginx怎么使用：</p> <ol><li>在<a href="https://nginx.org/en/download.html" target="_blank" rel="noopener noreferrer">nginx官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>下载nginx，稳定版，现在是nginx/Windows-1.16.1，下载后是一个zip文件</li> <li>解压后放到桌面，进入解压后的目录 nginx-1.16.1，先修改nginx的root文件夹，也就是80端口指向的目录。修改 conf 目录下的 nginx.conf文件，如下图，将静态项目路径设置到root后</li></ol> <p><img src="/images/daily/nginx%E9%85%8D%E7%BD%AE.png" alt="nginx配置.png"></p> <ol start="3"><li>运行nginx</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 进入到nginx目录，shift + 鼠标右键，在此处打开命令窗口，将nginx.exe拖到窗口，再打一个空格 -c 配置文件，类似下面的命令</span>
nginx.exe -c conf/nginx.conf
<span class="token comment"># 关闭nginx服务，注意 nginx.exe 是将nginx.exe文件拖到terminal时产生的</span>
nginx.exe -s stop
</code></pre></div><p>在上面的图中，已经有开启gzip的代码了。默认情况下 gzip on 是注释掉的，我们打开这个注释再添加几个属性即可。对于额外增加的几个属性这里说明下:</p> <ul><li>gzip_types是指定需要开启gzip压缩的文件类型</li> <li>gzip_comp_level 指定压缩等级</li> <li>gzip_min_length 当超过多少字节时就压缩，我上面设置的是1K</li> <li>gzip_vary 增加响应头”Vary: Accept-Encoding”</li></ul> <h3 id="怎么判断nginx是否成功开启gzip"><a href="#怎么判断nginx是否成功开启gzip" class="header-anchor">#</a> 怎么判断nginx是否成功开启gzip</h3> <p>打开chrome访问对应的站点，F12，点击network. 在Name，Priority 那一栏的最右侧空白位置，右键，勾选 Content-Encoding，如下图，设置好后刷新页面就可以看到Content-Encoding那一列了，如果有gzip就说明开启了gzip，需要结合Size这个属性看，如果没有超过设定大小的文件，是不会开启gzip压缩的。</p> <p><img src="/images/daily/chrome_gzip.png" alt="chrome_gzip.png"></p> <h2 id="_2020-01-21-周二"><a href="#_2020-01-21-周二" class="header-anchor">#</a> 2020/01/21 周二</h2> <h3 id="使用set去重时的问题"><a href="#使用set去重时的问题" class="header-anchor">#</a> 使用set去重时的问题</h3> <p>如果add的值是数组，那么是无法自动去重的。下面来看一个例子：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> mySet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
mySet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
mySet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
mySet<span class="token punctuation">.</span>size <span class="token comment">// 2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>mySet<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [[-1, 0, 1], [-1, 0, 1]]</span>

<span class="token comment">// 这种情况想去重，可以将值[-1, 0, 1].join('|') 处理下，添加进去，到时统一再split出来</span>

</code></pre></div><h3 id="数组排序sort值有负数时排序异常"><a href="#数组排序sort值有负数时排序异常" class="header-anchor">#</a> 数组排序sort值有负数时排序异常</h3> <p>正常情况使用 sort 是好用的，但如果有负数时，会有问题</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// </span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">]</span> 
arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// [-10, -11, 5]</span>

<span class="token comment">// 明显上面的结果是有问题的，默认的排序遇到负数就不正确了</span>
<span class="token comment">// 这就需要自定义排序了</span>
arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">-</span> b<span class="token punctuation">)</span> <span class="token comment">// [-11, -10, 5]</span>
</code></pre></div><p>再来个复杂的例子 [[-15, -10, 3], [-14, -9, 5]] 对于这种数组，怎么写自定义排序？</p> <div class="language-js extra-class"><pre class="language-js"><code>arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> b<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span> 
</code></pre></div><h2 id="_2020-01-19-周日"><a href="#_2020-01-19-周日" class="header-anchor">#</a> 2020/01/19 周日</h2> <h3 id="零编码或少编码生成通用封装的axios函数"><a href="#零编码或少编码生成通用封装的axios函数" class="header-anchor">#</a> 零编码或少编码生成通用封装的axios函数</h3> <p>现在项目中，每个模块都会单独弄一个对应service.js，把所有接口请求放到里面，其实就是将axios请求封装为一个个函数。每个函数的函数名、url、请求方法会有所差别。重复代码比较多。最近在看mongodb教程时，了解到零编码编程的思想，于是想把这里优化下，最好以后写新模块时，只要写简单的配置文件就可以自动生成函数，不用再单独手写函数。先来看看原来的方式：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// someService.js</span>
<span class="token comment">// 这里的service是对axios的封装，增加了一些请求拦截，用响应拦截等</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> service<span class="token punctuation">,</span> downloadService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../service.js'</span>
<span class="token keyword">let</span> someService <span class="token operator">=</span> <span class="token punctuation">{</span>
  urls<span class="token operator">:</span> <span class="token punctuation">{</span>
    funcA<span class="token operator">:</span> <span class="token string">'/api/url1'</span><span class="token punctuation">,</span>
    funcB<span class="token operator">:</span> <span class="token string">'/api/url2'</span><span class="token punctuation">,</span>
    funcC<span class="token operator">:</span> <span class="token string">'/api/url3'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">funcA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> service<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>someService<span class="token punctuation">.</span>urls<span class="token punctuation">.</span>funcA<span class="token punctuation">,</span> payload<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">funcB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> service<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>someService<span class="token punctuation">.</span>urls<span class="token punctuation">.</span>funcB<span class="token punctuation">,</span> <span class="token punctuation">{</span>params<span class="token operator">:</span> payload<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">funcC</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> downloadService<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>someService<span class="token punctuation">.</span>urls<span class="token punctuation">.</span>funcC<span class="token punctuation">,</span> payload<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> someService

<span class="token comment">// 在vue组件里，使用方法</span>
<span class="token keyword">import</span> someService <span class="token keyword">from</span> <span class="token string">'someService.js'</span>
someService<span class="token punctuation">.</span><span class="token function">funcA</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 接收结果</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>当接口比较多时，比如20+，那就需要写20个类似的函数，冗余性太高，这里使用零编码编程的思想来优化一下，先来看看优化后的代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 优化后的 someService.js 和旧的写法实现的功能一样，且更加强大</span>
<span class="token keyword">import</span> generateCommonApi <span class="token keyword">from</span> <span class="token string">'./utils/generateCommonApi'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> downloadService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../service.js'</span>

<span class="token comment">// 之前使用对象结构，发现还是有大量重复的属性字段，不是很方便，用数组的方式，写法更精简，更高效</span>
<span class="token comment">// 但同时牺牲了扩展性，类似于大的框架总会遇到的问题：各种实现都各有优缺点，关键是要去找一种平衡，做一些取舍。</span>
<span class="token keyword">const</span> someApiList <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token string">'funcA'</span><span class="token punctuation">,</span> <span class="token string">'/api/url1'</span><span class="token punctuation">,</span> <span class="token string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">'funcB'</span><span class="token punctuation">,</span> <span class="token string">'/api/url2'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">'funcC'</span><span class="token punctuation">,</span> <span class="token string">'/api/url3'</span><span class="token punctuation">,</span> <span class="token string">'post'</span><span class="token punctuation">,</span> downloadService<span class="token punctuation">]</span>
<span class="token punctuation">]</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">generateCommonApi</span><span class="token punctuation">(</span>someApiList<span class="token punctuation">)</span>
</code></pre></div><p>这里通过写一个generateCommonApi.js来实现自动生成通用api对象，以后就不用再写大量重复的代码了。来看看具体实现:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// generateCommonApi.js</span>
<span class="token comment">// 参考文档：https://github.com/axios/axios</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> services <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./service.js'</span>

<span class="token keyword">function</span> <span class="token function">generateCommonApi</span><span class="token punctuation">(</span><span class="token parameter">apiList<span class="token punctuation">,</span> isAddTimestamp2Url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">let</span> methodsList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'request'</span><span class="token punctuation">,</span> <span class="token string">'get'</span><span class="token punctuation">,</span> <span class="token string">'delete'</span><span class="token punctuation">,</span> <span class="token string">'head'</span><span class="token punctuation">,</span> <span class="token string">'options'</span><span class="token punctuation">,</span> <span class="token string">'post'</span><span class="token punctuation">,</span> <span class="token string">'put'</span> <span class="token string">'patch'</span><span class="token punctuation">]</span>

  <span class="token comment">// 遍历JSON配置，生成对应的请求函数并挂载到obj对象</span>
  apiList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>apiName<span class="token punctuation">,</span> url<span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">'get'</span><span class="token punctuation">,</span> servicesFunc <span class="token operator">=</span> services<span class="token punctuation">]</span> <span class="token operator">=</span> item
    <span class="token keyword">let</span> isMethodOk <span class="token operator">=</span> <span class="token keyword">typeof</span> method <span class="token operator">===</span> <span class="token string">'string'</span> <span class="token operator">&amp;&amp;</span> methodsList<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    method <span class="token operator">=</span> isMethodOk <span class="token operator">?</span> method <span class="token operator">:</span> <span class="token string">'get'</span>

    <span class="token comment">// 如果需要加时间戳</span>
    url <span class="token operator">+=</span> isAddTimestamp2Url <span class="token operator">?</span> <span class="token string">''</span> <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'?'</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">'&amp;'</span> <span class="token operator">:</span> <span class="token string">'?'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">t=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>

    obj<span class="token punctuation">[</span>apiName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">payload <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> paramsMap <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'1'</span><span class="token operator">:</span> <span class="token punctuation">[</span>payload<span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'2'</span><span class="token operator">:</span> <span class="token punctuation">[</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span>params<span class="token operator">:</span> payload<span class="token punctuation">,</span> <span class="token operator">...</span>config<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'3'</span><span class="token operator">:</span> <span class="token punctuation">[</span>url<span class="token punctuation">,</span> payload<span class="token punctuation">,</span> config<span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">let</span> is3Args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'post'</span><span class="token punctuation">,</span> <span class="token string">'put'</span><span class="token punctuation">,</span> <span class="token string">'patch'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span>
      <span class="token keyword">let</span> methodType <span class="token operator">=</span> method <span class="token operator">===</span> <span class="token string">'request'</span> <span class="token operator">?</span> <span class="token string">'1'</span> <span class="token operator">:</span> is3Args <span class="token operator">?</span> <span class="token string">'3'</span> <span class="token operator">:</span> <span class="token string">'2'</span>

      <span class="token keyword">return</span> servicesFunc<span class="token punctuation">[</span>method<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>paramsMap<span class="token punctuation">[</span>methodType<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> obj
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> generateCommonApi 
</code></pre></div><h3 id="测试loading时写的等待函数最简代码"><a href="#测试loading时写的等待函数最简代码" class="header-anchor">#</a> 测试loading时写的等待函数最简代码</h3> <p>一般想模拟延时，测试loading效果时，会写一个等待函数，怎么最简单方便呢？</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 一般写法</span>
<span class="token keyword">const</span> <span class="token function-variable function">delay</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">msec</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> msec<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span>
<span class="token keyword">await</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span>

<span class="token comment">// 使用箭头函数简写</span>
<span class="token keyword">const</span> <span class="token function-variable function">delay</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">msec</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> msec<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">await</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span>

<span class="token comment">// 舍弃函数封装与自定义时长，最精简写法</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">r</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">r</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 一行代码</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre></div><p>在vue中的实际应用</p> <div class="language-js extra-class"><pre class="language-js"><code>vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$mydelay</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">r</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">r</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 在vue中间中调用</span>
<span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$mydelay</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_2020-01-16-周四"><a href="#_2020-01-16-周四" class="header-anchor">#</a> 2020/01/16 周四</h2> <h3 id="node遍历文件夹下的文件名再require对应的文件出错"><a href="#node遍历文件夹下的文件名再require对应的文件出错" class="header-anchor">#</a> node遍历文件夹下的文件名再require对应的文件出错</h3> <p>在使用koa mock接口时，一个模块有很多接口，就写了十几个js，每个js对应一个接口数据。如果每增加一个接口，再添加一个require就很麻烦，于是写了个index.js来遍历文件夹，进行动态引入。以后写好js，就不用再手动require了。之前都运行正常的，最近再运行时发现一直报错，require异常。后来打印遍历的fileName，发现居然有 .DS_Store 文件，require这个文件时错误。这个文件属于mac系统自动生成的文件，之前都没有的。在程序中过滤调这个文件即可。</p> <p>mock目录结构如下:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 目录结构</span>
mock
├── pm
│   ├── index.js <span class="token comment"># 入口</span>
│   ├── 接口1.js
│   ├── 接口2.js
│   └── 接口n.js
├── user 
├── product
└── sever.js <span class="token comment"># 入口文件，require('./pm/index.js')(router) 将接口添加到路由</span>
</code></pre></div><p>pm/index.js 代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token parameter">router</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fileName</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>fileName <span class="token operator">===</span> <span class="token string">'index.js'</span> <span class="token operator">||</span> fileName<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./'</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2020-01-14-周二"><a href="#_2020-01-14-周二" class="header-anchor">#</a> 2020/01/14 周二</h2> <h3 id="export-path-后关闭termial就失效了"><a href="#export-path-后关闭termial就失效了" class="header-anchor">#</a> export PATH 后关闭termial就失效了</h3> <p>mac 修改环境变量，以便能在任何地方使用 mongod 命令</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 运行该命令后，当前terminal生效了，但关闭后，打开其他terminal就无效</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/usr/local/mongodb/bin:<span class="token environment constant">$PATH</span>
</code></pre></div><p>这种情况需要在 .bash_profile 文件里，加入 export PATH=/usr/local/mongodb/bin:$PATH 才行</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vi</span> ~/.bash_profile
</code></pre></div><p>修改后的 .bash_profile 文件，之前还修改过mysql的环境变量</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token constant">PATH</span><span class="token operator">=</span>$<span class="token punctuation">{</span><span class="token constant">PATH</span><span class="token punctuation">}</span><span class="token operator">:</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>mysql<span class="token operator">/</span>bin
<span class="token keyword">export</span> <span class="token constant">PATH</span><span class="token operator">=</span><span class="token string">&quot;$HOME/.rbenv/bin:$PATH&quot;</span>
<span class="token keyword">export</span> <span class="token constant">PATH</span><span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>mongodb<span class="token operator">/</span>bin<span class="token operator">:</span>$<span class="token constant">PATH</span>
<span class="token keyword">if</span> which rbenv <span class="token operator">&gt;</span> <span class="token operator">/</span>dev<span class="token operator">/</span><span class="token keyword">null</span><span class="token punctuation">;</span> then eval <span class="token string">&quot;$(rbenv init -)&quot;</span><span class="token punctuation">;</span> fi
</code></pre></div><p>修改好后，关闭该终端，再打开，运行 mongod 命令即可</p> <h3 id="npm简写与项目名称注意事项"><a href="#npm简写与项目名称注意事项" class="header-anchor">#</a> npm简写与项目名称注意事项</h3> <p>最近在安装 npm install 时喜欢简写 <code>npm i mysql2 -s</code> 但发现执行后，并没有安装成功，在package.json里也没有任何记录。还没有报任何错误。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 把简写的命令换成 非简写 再执行</span>
<span class="token function">npm</span> <span class="token function">install</span> mysql --save

<span class="token comment"># kevindeMacBook-Air:mysql2 kevin$ npm i mysql2 -s    # 简写执行后，没有任何信息</span>
<span class="token comment"># kevindeMacBook-Air:mysql2 kevin$ npm install mysql2 -save # 这次就报错了，提示项目名称与包名称相同</span>
<span class="token comment"># npm ERR! code ENOSELF</span>
<span class="token comment"># npm ERR! Refusing to install package with name &quot;mysql2&quot; under a package</span>
<span class="token comment"># npm ERR! also called &quot;mysql2&quot;. Did you name your project the same</span>
<span class="token comment"># npm ERR! as the dependency you're installing?</span>
<span class="token comment"># npm ERR! </span>
<span class="token comment"># npm ERR! For more information, see:</span>
<span class="token comment"># npm ERR!     &lt;https://docs.npmjs.com/cli/install#limitations-of-npms-install-algorithm&gt;</span>

<span class="token comment"># 由于在初始化生成package.json时为了方便，直接使用了下面的命令</span>
<span class="token function">npm</span> init -y  <span class="token comment"># 所有默认yes，生成的package.json里面，项目名称字段为当前文件夹名。</span>

<span class="token comment"># 由于文件夹名就是 mysql2，与安装的包名重复了。将package.json里的name属性改一个名字即可</span>
</code></pre></div><p>总结: 项目名称不要与依赖的包名相同，当npm安装简写执行异常时，使用非简写方法再试试。</p> <h2 id="_2020-01-11-周六"><a href="#_2020-01-11-周六" class="header-anchor">#</a> 2020/01/11 周六</h2> <h3 id="markdown里怎么为文字添加颜色-怎么画复杂表格"><a href="#markdown里怎么为文字添加颜色-怎么画复杂表格" class="header-anchor">#</a> markdown里怎么为文字添加颜色，怎么画复杂表格</h3> <p>之前看markdown语法时，并没有添加颜色和复杂表格的方法，但最近了解到markdown里面可以直接使用html，那就方便了。复杂表格直接使用table标签画，如果想给文字加颜色</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">color</span><span class="token punctuation">:</span> red</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>这是一段有颜色的字体<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 下划线 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u</span><span class="token punctuation">&gt;</span></span>这是一段有下划线的文字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>注意：markdown解析器很多。在Typora嵌入html的复杂表格没什么问题，但在github上显示时，table被放到了文档的最下面。语雀里导入时，也会有一点问题。所以为了保证最大程度的兼容，写md时，尽量避免使用内嵌html，对于复杂表格可以使用图片代替</p> <h2 id="_2020-01-10-周五"><a href="#_2020-01-10-周五" class="header-anchor">#</a> 2020/01/10 周五</h2> <h3 id="css-var-与变量"><a href="#css-var-与变量" class="header-anchor">#</a> css var() 与变量 --</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token comment">/* 最大高度为三行，将line-height定义为变量lh */</span>
  <span class="token selector">.module</span> <span class="token punctuation">{</span>
    <span class="token property">--lh</span><span class="token punctuation">:</span> 1.2rem<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--lh<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">max-height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--lh<span class="token punctuation">)</span> * 3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> 
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="多行文本截断"><a href="#多行文本截断" class="header-anchor">#</a> 多行文本截断</h3> <blockquote><p>参考：<a href="https://css-tricks.com/line-clampin/" target="_blank" rel="noopener noreferrer">Line Clampin' (Truncating Multiple Line Text) | CSS-Tricks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p><img src="/images/daily/line_clamp.png" alt="line_clamp.png"></p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* 方法1：使用 ::after 伪元素选择器，覆盖*/</span>
 <span class="token selector">.method-a</span> <span class="token punctuation">{</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 1.2rem<span class="token punctuation">;</span>
  <span class="token property">max-height</span><span class="token punctuation">:</span> 3.6rem<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.method-a::after</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 30%<span class="token punctuation">;</span>
  <span class="token property">max-width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 1.2rem<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span> <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span>255<span class="token punctuation">,</span>255<span class="token punctuation">,</span>0<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span>255<span class="token punctuation">,</span>255<span class="token punctuation">,</span>1<span class="token punctuation">)</span> 90%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 方法2：使用 -webkit-line-clamp 不过不支持IE */</span>
<span class="token selector">.method-b</span> <span class="token punctuation">{</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> -webkit-box<span class="token punctuation">;</span>
  <span class="token property">-webkit-line-clamp</span><span class="token punctuation">:</span> 3<span class="token punctuation">;</span>
  <span class="token property">-webkit-box-orient</span><span class="token punctuation">:</span> vertical<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="position-relative"><a href="#position-relative" class="header-anchor">#</a> position:relative</h3> <p>之前想把内容区域的title，有一半放到顶部背景，当时只想着使用position:absolute来做，现在发现将title的position设置为relative，top为负数就可以了，且不影响标题下面元素显示的布局。position默认为static，不能使用top,right,left,bottom属性。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.title</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> -10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
</code></pre></div><h3 id="node-path-resolve"><a href="#node-path-resolve" class="header-anchor">#</a> node path.resolve()</h3> <p>koa静态文件服务中间件的实现里，需要将当前路径 __dirname 与用户传入的路径合并为一个绝对路径，就可以使用path.resolve函数</p> <blockquote><p>The path.resolve() method resolves a sequence of paths or path segments into an absolute path.</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'/foo/bar'</span><span class="token punctuation">,</span> <span class="token string">'./baz'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Returns: '/foo/bar/baz'</span>

path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'/foo/bar'</span><span class="token punctuation">,</span> <span class="token string">'/tmp/file/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Returns: '/tmp/file'</span>

<span class="token keyword">let</span> dirPath <span class="token operator">=</span> <span class="token string">'./public'</span>
path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> dirPath<span class="token punctuation">)</span>
</code></pre></div><p>参考：<a href="https://nodejs.org/docs/latest/api/path.html#path_path_resolve_paths" target="_blank" rel="noopener noreferrer">node path.resolve<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2020-01-09-周四"><a href="#_2020-01-09-周四" class="header-anchor">#</a> 2020/01/09 周四</h2> <h3 id="asycn-await-执行顺序问题"><a href="#asycn-await-执行顺序问题" class="header-anchor">#</a> asycn/await 执行顺序问题</h3> <p>注意：await 后面的内容如果值为promise，则等待promise执行完再向下执行，如果非promise，await不会等待(await下面的代码和await等待的函数会同步执行)</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// await fn()</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'异步执行完成'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// return fn() 或 await fn()</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'start fn'</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'end fn'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// return fn()  或 await fn() 结果</span>
<span class="token comment">// start fn</span>
<span class="token comment">// end fn</span>
<span class="token comment">// 异步执行完成</span>

<span class="token comment">// fn() 结果</span>
<span class="token comment">// start fn</span>
<span class="token comment">// 异步执行完成</span>
<span class="token comment">// end fn</span>
</code></pre></div><p>参考：<a href="https://blog.csdn.net/guzhao593/article/details/84191401" target="_blank" rel="noopener noreferrer">async/await函数的执行顺序的理解 - csdn<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="foreach的缺点"><a href="#foreach的缺点" class="header-anchor">#</a> forEach的缺点</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 真实场景: 匹配路由数组里的路径，匹配到就结束遍历，发现无法结束遍历</span>
<span class="token comment">// 遍历路由进行匹配，如果匹配到了则执行，停止往下执行下一个中间件，否则向下执行</span>
stock<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>url <span class="token operator">===</span> item<span class="token punctuation">.</span>path <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>methods<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>总结：<strong>forEach遍历开始后，无法停止后面的遍历，无法终止执行函数。for里面可以通过break来结束循环，return结束函数。对于需要遍历到匹配的数据就退出的情况，就需要使用for了</strong></p> <p>很清奇的操作：使用抛异常的方式，来结束forEach循环</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 参考：https://www.cnblogs.com/Marydon20170307/p/8920775.html</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;first&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;second&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;third&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;fourth&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">// 执行到第3次，结束循环</span>
  array<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">==</span> <span class="token string">&quot;third&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;EndIterative&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// first,sencond</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token operator">!=</span><span class="token string">&quot;EndIterative&quot;</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> e<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_2020-01-08-周三"><a href="#_2020-01-08-周三" class="header-anchor">#</a> 2020/01/08 周三</h2> <h3 id="ie下dialog弹窗全屏后列表横向滚动卡顿的问题"><a href="#ie下dialog弹窗全屏后列表横向滚动卡顿的问题" class="header-anchor">#</a> IE下dialog弹窗全屏后列表横向滚动卡顿的问题</h3> <p>全屏后添加了一个名为 <code>is-fullscreen</code> 的class，发现把对应的overflow:auto去掉后，就不会卡顿。去掉其实就是将overflow设置为默认值visible，如果子组件高度超出范围，将is-fullscreen设置的height 100% 改为 auto。另一种方法是将table的z-index改为3000(相对dialog比较高的一个层级)，这样IE下就不会卡顿了。</p> <p>overflow相关值描述</p> <table><thead><tr><th>值</th> <th>描述</th></tr></thead> <tbody><tr><td>visible</td> <td>默认值。内容不会被修剪，会呈现在元素框之外。</td></tr> <tr><td>hidden</td> <td>内容会被修剪，并且其余内容是不可见的。</td></tr> <tr><td>scroll</td> <td>内容会被修剪，但是浏览器会显示滚动条以便查看其余的内容。</td></tr> <tr><td>auto</td> <td>如果内容被修剪，则浏览器会显示滚动条以便查看其余的内容。</td></tr> <tr><td>inherit</td> <td>规定应该从父元素继承 overflow 属性的值。</td></tr></tbody></table> <p>参考：<a href="https://www.w3school.com.cn/cssref/pr_pos_overflow.asp" target="_blank" rel="noopener noreferrer">CSS overflow 属性<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="if-else较多时可使用策略模式"><a href="#if-else较多时可使用策略模式" class="header-anchor">#</a> if else较多时可使用策略模式</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// if else </span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  a
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  b
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  c
<span class="token punctuation">}</span>

<span class="token comment">// 更优雅的写法，策略模式</span>
<span class="token comment">// 更多策略模式，策略模式表单验证可参考：JS设计模式与开发实战 第五章p82</span>
<span class="token keyword">let</span> rules <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'a'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> a <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'b'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> b <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'c'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> c <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
rules<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_2020-01-07-周二"><a href="#_2020-01-07-周二" class="header-anchor">#</a> 2020/01/07 周二</h2> <h3 id="判断当前鼠标是否在某个div内部"><a href="#判断当前鼠标是否在某个div内部" class="header-anchor">#</a> 判断当前鼠标是否在某个div内部</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> eventType <span class="token operator">=</span> document<span class="token punctuation">.</span>mozHidden <span class="token operator">?</span> <span class="token string">'DOMMouseScroll'</span> <span class="token operator">:</span> <span class="token string">'mousewheel'</span>
<span class="token keyword">let</span> ele <span class="token operator">=</span> <span class="token string">'某个dom'</span>
ele<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>eventType<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'容器范围内dom'</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 当前鼠标在容器内</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>参考： <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/contains" target="_blank" rel="noopener noreferrer">Node.contains - Web API 接口参考 | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="ie下dialog弹窗的滚动条滚动到底部时-触发了浏览器滚动条"><a href="#ie下dialog弹窗的滚动条滚动到底部时-触发了浏览器滚动条" class="header-anchor">#</a> IE下dialog弹窗的滚动条滚动到底部时，触发了浏览器滚动条</h3> <p>同样都是有遮罩层，chrome都是OK的，但IE下会有问题。经过定位后发现，对于dialog使用了append-to-body属性的，都没问题。发现dialog显示时body上添加了一个 el-popup-parent--hidden的class, 设置了overflow为hidden，关了滚动条。对于没有append-to-body属性的dialog如果想修复有两种办法：</p> <ol><li>添加append-to-body，将dialog插入到body上</li> <li>不插入到body，根据el-popup-parent--hidden将有滚动条的子div设置overflow:hidden。</li></ol> <p>对于不是dialog，普通的弹窗，可以使用另一种思路：
监听鼠标滚动事件，使用Node.contains函数，判断鼠标是否在dialog范围内滚动，如果是，且到了底部，禁止其默认行为</p> <p>append-to-body属性： Dialog 自身是否插入至 body 元素上。嵌套的 Dialog 必须指定该属性并赋值为 true</p> <p>参考：<a href="https://element.eleme.cn/#/zh-CN/component/dialog" target="_blank" rel="noopener noreferrer">element dialog<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="element表格ie下由于滚动条原因导致错位问题"><a href="#element表格ie下由于滚动条原因导致错位问题" class="header-anchor">#</a> Element表格IE下由于滚动条原因导致错位问题</h3> <p>Element 表头固定，表内容可滑动，在IE下滚动条会显示，有一定的宽度占位，导致表头与表内容由点错位，解决方法是：由于表单内容是从接口加载的，从接口加载完数据后，对el-talbe进行从新布局dolayout</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Table Methods: doLayout</span>
<span class="token comment">// 对 Table 进行重新布局。当 Table 或其祖先元素由隐藏切换为显示时，可能需要调用此方法</span>
<span class="token comment">// &lt;el-table ref=&quot;table&quot;&gt;&lt;/el-table&gt;</span>

<span class="token comment">// 从接口获取数据成功后</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span><span class="token string">'table'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">doLayout</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>参考：<a href="https://element.eleme.cn/#/zh-CN/component/table#table-methods" target="_blank" rel="noopener noreferrer">Table 表格组件 | Element<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="如果组件的隐藏显示切换导致布局异常-可以将透明度设置为0来隐藏"><a href="#如果组件的隐藏显示切换导致布局异常-可以将透明度设置为0来隐藏" class="header-anchor">#</a> 如果组件的隐藏显示切换导致布局异常，可以将透明度设置为0来隐藏</h3> <p>注意：将元素的透明度设置为0，如果元素内部可点击或者遮挡了下面层级的点击按钮，可以根据布局进行调整，比如调整z-index或使用margin等将元素移动到其他位置。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">element</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> <span class="token comment">/* 设置透明度为0 */</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2020-01-03-周五"><a href="#_2020-01-03-周五" class="header-anchor">#</a> 2020/01/03 周五</h2> <h3 id="初始化一个ts项目"><a href="#初始化一个ts项目" class="header-anchor">#</a> 初始化一个ts项目</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 初始化一个yarn</span>
<span class="token function">yarn</span> init

<span class="token comment"># 新增 ts-node 与 typescript模块</span>
<span class="token function">yarn</span> <span class="token function">add</span> ts-node --dev
<span class="token function">yarn</span> <span class="token function">add</span> typescript --dev

<span class="token comment"># 运行index.ts</span>
<span class="token function">yarn</span> ts-node index.ts  <span class="token comment"># 控制台打印 hello ts-weather</span>

<span class="token comment"># index.ts 内容 console.log('hello ts-weather')</span>

</code></pre></div><h2 id="_2020-01-02-周四"><a href="#_2020-01-02-周四" class="header-anchor">#</a> 2020/01/02 周四</h2> <h3 id="typescript基础"><a href="#typescript基础" class="header-anchor">#</a> TypeScript基础</h3> <p>最近把TypeScript基础初略的过了一遍，笔记：https://www.yuque.com/guoqzuo/tepur0/zb0x9b</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">10/29/2020, 10:59:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/daily/2020-02.html" class="prev">
        2020年02月技术日常
      </a></span> <span class="next"><a href="/daily/2019-12.html">
        2019年12月技术日常
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.1f511cd1.js" defer></script><script src="/assets/js/2.4b3539f1.js" defer></script><script src="/assets/js/37.8d0a586e.js" defer></script><script src="/assets/js/3.e6a4dd76.js" defer></script>
  </body>
</html>
