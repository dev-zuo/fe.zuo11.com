<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2020年03月技术日常 | 左小白的前端笔记</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="左小白的前端笔记，用于记录、完善个人前端知识体系结构">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.acaf374f.css" as="style"><link rel="preload" href="/assets/js/app.203f8a3a.js" as="script"><link rel="preload" href="/assets/js/2.4b3539f1.js" as="script"><link rel="preload" href="/assets/js/37.a9c58175.js" as="script"><link rel="preload" href="/assets/js/3.e6a4dd76.js" as="script"><link rel="prefetch" href="/assets/js/10.71696328.js"><link rel="prefetch" href="/assets/js/100.13f02065.js"><link rel="prefetch" href="/assets/js/101.72f8aa86.js"><link rel="prefetch" href="/assets/js/102.26e5e769.js"><link rel="prefetch" href="/assets/js/103.bd1f11da.js"><link rel="prefetch" href="/assets/js/104.92e87bf2.js"><link rel="prefetch" href="/assets/js/105.c5d791fd.js"><link rel="prefetch" href="/assets/js/106.8a17271c.js"><link rel="prefetch" href="/assets/js/107.63297449.js"><link rel="prefetch" href="/assets/js/108.32c52b33.js"><link rel="prefetch" href="/assets/js/109.6cd42a73.js"><link rel="prefetch" href="/assets/js/11.cd2bed73.js"><link rel="prefetch" href="/assets/js/110.4015358f.js"><link rel="prefetch" href="/assets/js/111.24aa7693.js"><link rel="prefetch" href="/assets/js/112.1f0b1706.js"><link rel="prefetch" href="/assets/js/113.d4059e6b.js"><link rel="prefetch" href="/assets/js/114.0d4d4281.js"><link rel="prefetch" href="/assets/js/115.bd6dfbf0.js"><link rel="prefetch" href="/assets/js/116.b4594e01.js"><link rel="prefetch" href="/assets/js/117.904edc7c.js"><link rel="prefetch" href="/assets/js/118.0210c9fa.js"><link rel="prefetch" href="/assets/js/119.12b65423.js"><link rel="prefetch" href="/assets/js/12.f288e29d.js"><link rel="prefetch" href="/assets/js/120.beaef1ad.js"><link rel="prefetch" href="/assets/js/121.3c18bd2f.js"><link rel="prefetch" href="/assets/js/122.59b49736.js"><link rel="prefetch" href="/assets/js/123.40856117.js"><link rel="prefetch" href="/assets/js/124.3e3f634a.js"><link rel="prefetch" href="/assets/js/125.8e6a815e.js"><link rel="prefetch" href="/assets/js/126.d20eda41.js"><link rel="prefetch" href="/assets/js/127.ebd2093b.js"><link rel="prefetch" href="/assets/js/128.902b7354.js"><link rel="prefetch" href="/assets/js/129.864d215e.js"><link rel="prefetch" href="/assets/js/13.82e7edce.js"><link rel="prefetch" href="/assets/js/130.b7fc05ab.js"><link rel="prefetch" href="/assets/js/131.372298bc.js"><link rel="prefetch" href="/assets/js/132.d579f204.js"><link rel="prefetch" href="/assets/js/133.dd74500c.js"><link rel="prefetch" href="/assets/js/134.a32dedb3.js"><link rel="prefetch" href="/assets/js/135.dc558866.js"><link rel="prefetch" href="/assets/js/136.e0e9a2a5.js"><link rel="prefetch" href="/assets/js/137.bd672a56.js"><link rel="prefetch" href="/assets/js/138.07644d14.js"><link rel="prefetch" href="/assets/js/139.61873602.js"><link rel="prefetch" href="/assets/js/14.e81004ee.js"><link rel="prefetch" href="/assets/js/140.f7bd11f3.js"><link rel="prefetch" href="/assets/js/141.94516bbd.js"><link rel="prefetch" href="/assets/js/142.5d1224ae.js"><link rel="prefetch" href="/assets/js/143.e98b3a46.js"><link rel="prefetch" href="/assets/js/144.bc8db6ee.js"><link rel="prefetch" href="/assets/js/145.98bcfe7f.js"><link rel="prefetch" href="/assets/js/146.283fd90f.js"><link rel="prefetch" href="/assets/js/147.f447a013.js"><link rel="prefetch" href="/assets/js/148.c40adbd7.js"><link rel="prefetch" href="/assets/js/15.6d52c5f9.js"><link rel="prefetch" href="/assets/js/16.6a143e09.js"><link rel="prefetch" href="/assets/js/17.92df7b99.js"><link rel="prefetch" href="/assets/js/18.50bc4846.js"><link rel="prefetch" href="/assets/js/19.310fceff.js"><link rel="prefetch" href="/assets/js/20.e5894862.js"><link rel="prefetch" href="/assets/js/21.8dd45d89.js"><link rel="prefetch" href="/assets/js/22.f96f7f7f.js"><link rel="prefetch" href="/assets/js/23.9670a582.js"><link rel="prefetch" href="/assets/js/24.9b6f6c0e.js"><link rel="prefetch" href="/assets/js/25.f7468bea.js"><link rel="prefetch" href="/assets/js/26.2fa477e0.js"><link rel="prefetch" href="/assets/js/27.4dc6c393.js"><link rel="prefetch" href="/assets/js/28.4a449035.js"><link rel="prefetch" href="/assets/js/29.0039a6c5.js"><link rel="prefetch" href="/assets/js/30.8385df39.js"><link rel="prefetch" href="/assets/js/31.6ccde381.js"><link rel="prefetch" href="/assets/js/32.06759061.js"><link rel="prefetch" href="/assets/js/33.446401f5.js"><link rel="prefetch" href="/assets/js/34.8a330d88.js"><link rel="prefetch" href="/assets/js/35.ab009531.js"><link rel="prefetch" href="/assets/js/36.76e1a2c0.js"><link rel="prefetch" href="/assets/js/38.5b013d96.js"><link rel="prefetch" href="/assets/js/39.cdb89d63.js"><link rel="prefetch" href="/assets/js/4.1546fae2.js"><link rel="prefetch" href="/assets/js/40.8bb1b7f0.js"><link rel="prefetch" href="/assets/js/41.2bb01b3f.js"><link rel="prefetch" href="/assets/js/42.9fcbf6c3.js"><link rel="prefetch" href="/assets/js/43.2566d4e2.js"><link rel="prefetch" href="/assets/js/44.47eef9e4.js"><link rel="prefetch" href="/assets/js/45.b5e3255e.js"><link rel="prefetch" href="/assets/js/46.c5a41894.js"><link rel="prefetch" href="/assets/js/47.5f7bc7e8.js"><link rel="prefetch" href="/assets/js/48.52f1355c.js"><link rel="prefetch" href="/assets/js/49.fb5fa34a.js"><link rel="prefetch" href="/assets/js/5.a74a6229.js"><link rel="prefetch" href="/assets/js/50.9dd30f76.js"><link rel="prefetch" href="/assets/js/51.593ae5ef.js"><link rel="prefetch" href="/assets/js/52.a33c9e05.js"><link rel="prefetch" href="/assets/js/53.1f6ab5f6.js"><link rel="prefetch" href="/assets/js/54.ba46601f.js"><link rel="prefetch" href="/assets/js/55.e4c796c0.js"><link rel="prefetch" href="/assets/js/56.3f66a4f5.js"><link rel="prefetch" href="/assets/js/57.5ffb70f3.js"><link rel="prefetch" href="/assets/js/58.ac90f180.js"><link rel="prefetch" href="/assets/js/59.b6a5fcdf.js"><link rel="prefetch" href="/assets/js/6.68e7d734.js"><link rel="prefetch" href="/assets/js/60.276cc185.js"><link rel="prefetch" href="/assets/js/61.e77e984a.js"><link rel="prefetch" href="/assets/js/62.872daaa3.js"><link rel="prefetch" href="/assets/js/63.a2cd03fc.js"><link rel="prefetch" href="/assets/js/64.1a6d4a06.js"><link rel="prefetch" href="/assets/js/65.3cca1278.js"><link rel="prefetch" href="/assets/js/66.d4482a48.js"><link rel="prefetch" href="/assets/js/67.0e13d8c3.js"><link rel="prefetch" href="/assets/js/68.7d9b4ef6.js"><link rel="prefetch" href="/assets/js/69.577b2fbc.js"><link rel="prefetch" href="/assets/js/7.cb937ed7.js"><link rel="prefetch" href="/assets/js/70.88e4d04d.js"><link rel="prefetch" href="/assets/js/71.7ee4dcbf.js"><link rel="prefetch" href="/assets/js/72.ce4f770e.js"><link rel="prefetch" href="/assets/js/73.e7951b0d.js"><link rel="prefetch" href="/assets/js/74.1a82f36b.js"><link rel="prefetch" href="/assets/js/75.7d20227b.js"><link rel="prefetch" href="/assets/js/76.5dd22cc4.js"><link rel="prefetch" href="/assets/js/77.4416caa6.js"><link rel="prefetch" href="/assets/js/78.84f4de97.js"><link rel="prefetch" href="/assets/js/79.833d6583.js"><link rel="prefetch" href="/assets/js/8.97b32e18.js"><link rel="prefetch" href="/assets/js/80.59e7a444.js"><link rel="prefetch" href="/assets/js/81.bd5879db.js"><link rel="prefetch" href="/assets/js/82.5de38cfa.js"><link rel="prefetch" href="/assets/js/83.a0b3a349.js"><link rel="prefetch" href="/assets/js/84.b6ae8a65.js"><link rel="prefetch" href="/assets/js/85.af9419c6.js"><link rel="prefetch" href="/assets/js/86.b1c300f5.js"><link rel="prefetch" href="/assets/js/87.3732542c.js"><link rel="prefetch" href="/assets/js/88.6d0ce20b.js"><link rel="prefetch" href="/assets/js/89.2c7dbc31.js"><link rel="prefetch" href="/assets/js/9.6344b9c3.js"><link rel="prefetch" href="/assets/js/90.062358cd.js"><link rel="prefetch" href="/assets/js/91.2802e1ed.js"><link rel="prefetch" href="/assets/js/92.83fc011a.js"><link rel="prefetch" href="/assets/js/93.2e4f0637.js"><link rel="prefetch" href="/assets/js/94.57d127a1.js"><link rel="prefetch" href="/assets/js/95.cb445c7d.js"><link rel="prefetch" href="/assets/js/96.6637a2ea.js"><link rel="prefetch" href="/assets/js/97.e2788a04.js"><link rel="prefetch" href="/assets/js/98.0a1f9ea3.js"><link rel="prefetch" href="/assets/js/99.1f4d9522.js">
    <link rel="stylesheet" href="/assets/css/0.styles.acaf374f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">左小白的前端笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南" class="dropdown-title"><span class="title">指南</span> <span class="arrow down"></span></button> <button type="button" aria-label="指南" class="mobile-dropdown-title"><span class="title">指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  首页
</a></li><li class="dropdown-item"><!----> <a href="/nav.html" class="nav-link">
  前端网址导航
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><span class="title">前端进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端进阶" class="mobile-dropdown-title"><span class="title">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daily/" class="nav-link router-link-active">
  技术日常记录
</a></li><li class="dropdown-item"><!----> <a href="/server/docker.html" class="nav-link">
  Docker 基础
</a></li><li class="dropdown-item"><h4>
          Vue.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/base/1.html" class="nav-link">
  Vue.js 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vue-router.html" class="nav-link">
  Vue Router 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vuex.html" class="nav-link">
  Vuex 笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          前端工程化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ts/base-1.html" class="nav-link">
  TypeScript 入门教程笔记
</a></li><li class="dropdown-subitem"><a href="/node/base/1.html" class="nav-link">
  Node.js 笔记
</a></li><li class="dropdown-subitem"><a href="/webpack/base.html" class="nav-link">
  webpack 基础
</a></li></ul></li><li class="dropdown-item"><h4>
          数据可视化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/visual/echarts.html" class="nav-link">
  Echarts 笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS/ES6
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/js/es6/es6-1.html" class="nav-link">
  ES6标准入门(第三版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/ad3/js-ad3-1.html" class="nav-link">
  JavaScript高级程序设计(第三版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/js-dom-art.html" class="nav-link">
  JavaScript DOM编程艺术(第二版)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS/CSS3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/css/less.html" class="nav-link">
  CSS 预处理器 Less.js
</a></li><li class="dropdown-subitem"><a href="/css/flex-grid.html" class="nav-link">
  Flex与Grid布局
</a></li><li class="dropdown-subitem"><a href="/css/html5-css-1.html" class="nav-link">
  HTML5权威指南(CSS部分)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          HTML/HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html5/html/1.html" class="nav-link">
  HTML5权威指南(HTML部分)笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/base/git.html" class="nav-link">
  Git 笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/markdown.html" class="nav-link">
  Markdown 基础语法
</a></li><li class="dropdown-item"><!----> <a href="/base/dbtheory/1.html" class="nav-link">
  数据库系统原理笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开源项目" class="dropdown-title"><span class="title">开源项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="开源项目" class="mobile-dropdown-title"><span class="title">开源项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://vuechart.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @guoqzuo/vue-chart
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://zuoblog.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  zuo-blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="http://www.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/zuoxiaobai/fenote" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南" class="dropdown-title"><span class="title">指南</span> <span class="arrow down"></span></button> <button type="button" aria-label="指南" class="mobile-dropdown-title"><span class="title">指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  首页
</a></li><li class="dropdown-item"><!----> <a href="/nav.html" class="nav-link">
  前端网址导航
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><span class="title">前端进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端进阶" class="mobile-dropdown-title"><span class="title">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daily/" class="nav-link router-link-active">
  技术日常记录
</a></li><li class="dropdown-item"><!----> <a href="/server/docker.html" class="nav-link">
  Docker 基础
</a></li><li class="dropdown-item"><h4>
          Vue.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/base/1.html" class="nav-link">
  Vue.js 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vue-router.html" class="nav-link">
  Vue Router 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vuex.html" class="nav-link">
  Vuex 笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          前端工程化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ts/base-1.html" class="nav-link">
  TypeScript 入门教程笔记
</a></li><li class="dropdown-subitem"><a href="/node/base/1.html" class="nav-link">
  Node.js 笔记
</a></li><li class="dropdown-subitem"><a href="/webpack/base.html" class="nav-link">
  webpack 基础
</a></li></ul></li><li class="dropdown-item"><h4>
          数据可视化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/visual/echarts.html" class="nav-link">
  Echarts 笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS/ES6
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/js/es6/es6-1.html" class="nav-link">
  ES6标准入门(第三版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/ad3/js-ad3-1.html" class="nav-link">
  JavaScript高级程序设计(第三版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/js-dom-art.html" class="nav-link">
  JavaScript DOM编程艺术(第二版)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS/CSS3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/css/less.html" class="nav-link">
  CSS 预处理器 Less.js
</a></li><li class="dropdown-subitem"><a href="/css/flex-grid.html" class="nav-link">
  Flex与Grid布局
</a></li><li class="dropdown-subitem"><a href="/css/html5-css-1.html" class="nav-link">
  HTML5权威指南(CSS部分)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          HTML/HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html5/html/1.html" class="nav-link">
  HTML5权威指南(HTML部分)笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/base/git.html" class="nav-link">
  Git 笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/markdown.html" class="nav-link">
  Markdown 基础语法
</a></li><li class="dropdown-item"><!----> <a href="/base/dbtheory/1.html" class="nav-link">
  数据库系统原理笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开源项目" class="dropdown-title"><span class="title">开源项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="开源项目" class="mobile-dropdown-title"><span class="title">开源项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://vuechart.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @guoqzuo/vue-chart
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://zuoblog.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  zuo-blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="http://www.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/zuoxiaobai/fenote" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/daily/" aria-current="page" class="sidebar-link">技术日常记录</a></li><li><a href="/daily/2020-10.html" class="sidebar-link">2020年10月技术日常</a></li><li><a href="/daily/2020-09.html" class="sidebar-link">2020年09月技术日常</a></li><li><a href="/daily/2020-08.html" class="sidebar-link">2020年08月技术日常</a></li><li><a href="/daily/2020-07.html" class="sidebar-link">2020年07月技术日常</a></li><li><a href="/daily/2020-06.html" class="sidebar-link">2020年06月技术日常</a></li><li><a href="/daily/2020-05.html" class="sidebar-link">2020年05月技术日常</a></li><li><a href="/daily/2020-04.html" class="sidebar-link">2020年04月技术日常</a></li><li><a href="/daily/2020-03.html" aria-current="page" class="active sidebar-link">2020年03月技术日常</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-03.html#_2020-03-30-周一" class="sidebar-link">2020/03/30 周一</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-03.html#json数据转blob后-怎么还原" class="sidebar-link">JSON数据转Blob后，怎么还原</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#_2020-03-28-周六" class="sidebar-link">2020/03/28 周六</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-03.html#网页dark-mode-深色模式-适配" class="sidebar-link">网页dark mode(深色模式)适配</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#_2020-03-27-周五" class="sidebar-link">2020/03/27 周五</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-03.html#canvas绘制模糊的问题" class="sidebar-link">canvas绘制模糊的问题</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#_2020-03-26-周四" class="sidebar-link">2020/03/26 周四</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-03.html#canvas不支持文本换行怎么处理" class="sidebar-link">canvas不支持文本换行怎么处理</a></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#canvas绘制不规则形状填充渐变色" class="sidebar-link">canvas绘制不规则形状填充渐变色</a></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#canvas-多次fill会覆盖前面的fill" class="sidebar-link">canvas 多次fill会覆盖前面的fill</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#_2020-03-25-周三" class="sidebar-link">2020/03/25 周三</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-03.html#根据文件名后缀判断文件类型不准确" class="sidebar-link">根据文件名后缀判断文件类型不准确</a></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#怎么判断两个文件一模一样" class="sidebar-link">怎么判断两个文件一模一样</a></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#md5加密是可逆的吗" class="sidebar-link">md5加密是可逆的吗？</a></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#两个不同文件md5可能一样吗" class="sidebar-link">两个不同文件md5可能一样吗？</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#_2020-03-22-周日" class="sidebar-link">2020/03/22 周日</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-03.html#koa-multer与-koa-multer逻辑差异" class="sidebar-link">koa-multer与@koa/multer逻辑差异</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#_2020-03-20-周五" class="sidebar-link">2020/03/20 周五</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-03.html#npm包前面加-是什么意思-vue-cli与-vue-cli" class="sidebar-link">npm包前面加@是什么意思(vue-cli与@vue/cli)</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#_2020-03-18-周三" class="sidebar-link">2020/03/18 周三</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-03.html#md怎么加引用注释-脚注" class="sidebar-link">md怎么加引用注释，脚注</a></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#md中链接的另一种写法" class="sidebar-link">md中链接的另一种写法</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#_2020-03-17-周二" class="sidebar-link">2020/03/17 周二</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-03.html#node-js的核心用处及应用场景" class="sidebar-link">Node.js的核心用处及应用场景</a></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#webpack与parcel区别" class="sidebar-link">webpack与parcel区别</a></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#mac使用触控板拖动复制、移动窗口" class="sidebar-link">mac使用触控板拖动复制、移动窗口</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#_2020-03-12-周四" class="sidebar-link">2020/03/12 周四</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-03.html#关于vue和react思考" class="sidebar-link">关于vue和react思考</a></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#git-commit-提交信息有误怎么修改" class="sidebar-link">git commit 提交信息有误怎么修改</a></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#他人提交了package-lock-json的更新导致拉取时和本地冲突" class="sidebar-link">他人提交了package-lock.json的更新导致拉取时和本地冲突</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#_2020-03-11-周三" class="sidebar-link">2020/03/11 周三</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-03.html#vue封装组件方式的思考" class="sidebar-link">vue封装组件方式的思考</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#_2020-03-10-周二" class="sidebar-link">2020/03/10 周二</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-03.html#vue自定义组件v-model属性实现dialog组件的二次封装" class="sidebar-link">vue自定义组件v-model属性实现dialog组件的二次封装</a></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#封装组件时预留vue插件入口便于全局引入" class="sidebar-link">封装组件时预留vue插件入口便于全局引入</a></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#css-hover后改变其他元素样式" class="sidebar-link">css hover后改变其他元素样式</a></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#css-vw的使用场景" class="sidebar-link">css vw的使用场景</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#_2020-03-08-周日" class="sidebar-link">2020/03/08 周日</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-03.html#widnows-nginx部署https服务" class="sidebar-link">widnows nginx部署https服务</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#_2020-03-07-周六" class="sidebar-link">2020/03/07 周六</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-03.html#nginx-中文路径404的问题" class="sidebar-link">nginx 中文路径404的问题</a></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#invalid-character-in-header-content-content-disposition" class="sidebar-link">Invalid character in header content [&quot;Content-Disposition&quot;]</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#_2020-03-03-周二" class="sidebar-link">2020/03/03 周二</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-03.html#github-badge-与npm-徽章图片生成" class="sidebar-link">github Badge 与npm 徽章图片生成</a></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#个人小程序主体可以做什么" class="sidebar-link">个人小程序主体可以做什么</a></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#前端pc-web获取时间是不准确的" class="sidebar-link">前端pc web获取时间是不准确的</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#_2020-03-02-周一" class="sidebar-link">2020/03/02 周一</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-03.html#浏览器tab页切换时更改标题" class="sidebar-link">浏览器tab页切换时更改标题</a></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#网页中网络异常或网络正常时动态提示" class="sidebar-link">网页中网络异常或网络正常时动态提示</a></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#页面滚动比例监听实现" class="sidebar-link">页面滚动比例监听实现</a></li><li class="sidebar-sub-header"><a href="/daily/2020-03.html#复制内容后-在内容中插入作者及当前文章信息" class="sidebar-link">复制内容后，在内容中插入作者及当前文章信息</a></li></ul></li></ul></li><li><a href="/daily/2020-02.html" class="sidebar-link">2020年02月技术日常</a></li><li><a href="/daily/2020-01.html" class="sidebar-link">2020年01月技术日常</a></li><li><a href="/daily/2019-12.html" class="sidebar-link">2019年12月技术日常</a></li><li><a href="/daily/2019-11.html" class="sidebar-link">2019年11月技术日常</a></li><li><a href="/daily/2019-10.html" class="sidebar-link">2019年10月技术日常</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2020年03月技术日常"><a href="#_2020年03月技术日常" class="header-anchor">#</a> 2020年03月技术日常</h1> <h2 id="_2020-03-30-周一"><a href="#_2020-03-30-周一" class="header-anchor">#</a> 2020/03/30 周一</h2> <h3 id="json数据转blob后-怎么还原"><a href="#json数据转blob后-怎么还原" class="header-anchor">#</a> JSON数据转Blob后，怎么还原</h3> <p>在axios请求下载文件接口时，一般设置responseType: 'blob'，文件返回正常就没问题，但后台如果处理文件或鉴权有问题，接口返回了包含错误信息的json格式数据，那样json数据也会转为Blob对象，而前端有必要将错误信息展示的，那怎么将Blob数据转JSON呢？下面来看看</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> fileType <span class="token operator">=</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'content-type'</span><span class="token punctuation">]</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>fileType<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'application/json'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  reader<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;loadend&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>reader<span class="token punctuation">.</span>result<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  reader<span class="token punctuation">.</span><span class="token function">readAsText</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">,</span> <span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 加UTF-8防止中文乱码</span>
  <span class="token keyword">return</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2020-03-28-周六"><a href="#_2020-03-28-周六" class="header-anchor">#</a> 2020/03/28 周六</h2> <h3 id="网页dark-mode-深色模式-适配"><a href="#网页dark-mode-深色模式-适配" class="header-anchor">#</a> 网页dark mode(深色模式)适配</h3> <p>微信最近推出了深色模式，我试了下，手机切换时页面效果样式是实时刷新的。于是就想着web怎么能够监听深色模式，并设置样式。查了资料后，在Stack Overflow上找到了答案</p> <p>通过css里的媒体查询就能适配深色模式，先来看看怎么用js获取当前是否是深色模式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 获取当前是否是深色模式</span>
<span class="token comment">// window.matchMedia('(prefers-color-scheme: dark)').matches</span>
window<span class="token punctuation">.</span>matchMedia <span class="token operator">&amp;&amp;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Is dark mode: '</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">'(prefers-color-scheme: dark)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>matches<span class="token punctuation">)</span>

<span class="token comment">// 用js监听深色模式的切换事件</span>
window<span class="token punctuation">.</span>matchMedia <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">'(prefers-color-scheme: dark)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'dark mode change，已'</span> <span class="token operator">+</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>matches <span class="token operator">?</span> <span class="token string">'进入'</span><span class="token operator">:</span> <span class="token string">'退出'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'dark mode'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>window.matchMedia到底是用来做什么的？我查了下mdn，发现了这样一个示例</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> mql <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">'(max-width: 600px)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.mq-value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> mql<span class="token punctuation">.</span>matches<span class="token punctuation">;</span>
</code></pre></div><p>从这个例子看，大概就知道怎么用css来支持dark模式了吧，就是加一个类似小屏适配的一个媒体查询样式，来看个例子</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* dark mode support */</span>
<span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-color-scheme</span><span class="token punctuation">:</span> dark<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">body</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #aaa<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token selector">body .content article, header, aside &gt; div, footer</span>  <span class="token punctuation">{</span>
    <span class="token property">border-color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #aaa<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>
    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 10px #333<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>深色模式下，一般将背景调暗，字体设置为偏白色即可。zuo11.com 已用上面的方法适配了深色模式，可以体验下。网站是开源的，<a href="https://github.com/zuoxiaobai/zuo11.com/blob/master/src/global.css" target="_blank" rel="noopener noreferrer">zuo11.com深色模式支持代码 - github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>参考:</p> <ul><li><a href="https://stackoverflow.com/questions/56393880/how-do-i-detect-dark-mode-using-javascript" target="_blank" rel="noopener noreferrer">How do I detect dark mode using JavaScript? - Stack Overflow<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia" target="_blank" rel="noopener noreferrer">window.matchMedia | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.apple.com/documentation/xcode/supporting_dark_mode_in_your_interface" target="_blank" rel="noopener noreferrer">Supporting Dark Mode in Your Interface | Apple Developer Documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="_2020-03-27-周五"><a href="#_2020-03-27-周五" class="header-anchor">#</a> 2020/03/27 周五</h2> <h3 id="canvas绘制模糊的问题"><a href="#canvas绘制模糊的问题" class="header-anchor">#</a> canvas绘制模糊的问题</h3> <p>今天发现同样的代码在两台电脑上绘制的一个清晰，一个模糊，后来查资料发现确实有这个问题</p> <p>因为canvas不是矢量图，高dpi屏幕每平方英寸有更多的像素，也就是两倍屏，浏览器会以两个像素点的宽度来渲染一个像素，所以在Retina屏上会导致图片、文字都会模糊，怎么解决呢？</p> <p>获取设备像素比：<code>window.devicePixelRatio || 1</code></p> <p><strong>如果绘制的实际区域大小为 750 * 40，假设设备像素比为2，那么，canvas的width、height需要设置为 1500 * 80，然后用内联样式设置width为750，height为40，相当于canvas绘制2倍的大小，然后再缩放，这样就清晰了。</strong></p> <p>综上，在canvas绘制时，各种长度一定要考虑乘以devicePixelRatio，不然可能显示的不清晰</p> <p>参考：<a href="https://www.html.cn/archives/9297" target="_blank" rel="noopener noreferrer">解决 canvas 在高清屏中绘制模糊的问题<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2020-03-26-周四"><a href="#_2020-03-26-周四" class="header-anchor">#</a> 2020/03/26 周四</h2> <h3 id="canvas不支持文本换行怎么处理"><a href="#canvas不支持文本换行怎么处理" class="header-anchor">#</a> canvas不支持文本换行怎么处理</h3> <p>今天在stackoveflow里面搜索ctx.fill的问题时，查到了很多关于canvas ctx.fillText()绘制文本时不支持换行的问题，找到了一个比较好的答案</p> <blockquote><p>I'm afraid it is a limitation of Canvas' fillText. There is no multi-line support. Whats worse, there's no built-in way to measure line height, only width, making doing it yourself even harder!</p></blockquote> <p>一般解决思路是，根据 ctx.measureText('Hello').width 来看需要显示的文字是否需要换行，写一个for循环来处理</p> <p>参考：</p> <ul><li><a href="https://segmentfault.com/a/1190000017869922" target="_blank" rel="noopener noreferrer">canvas绘制文本内容自动换行<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://stackoverflow.com/questions/5026961/html5-canvas-ctx-filltext-wont-do-line-breaks" target="_blank" rel="noopener noreferrer">javascript - HTML5 canvas ctx.fillText won't do line breaks? - Stack Overflow<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="canvas绘制不规则形状填充渐变色"><a href="#canvas绘制不规则形状填充渐变色" class="header-anchor">#</a> canvas绘制不规则形状填充渐变色</h3> <p>在JS高程3中，有一章专门将使用canvas绘图，今天终于用上了，效果还不错，来看效果，原生js，70行不到</p> <p><img src="/images/daily/cavas_unnormal_shape.png" alt="cavas_unnormal_shape.png"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>canvas id<span class="token operator">=</span><span class="token string">&quot;drawing1&quot;</span> width<span class="token operator">=</span><span class="token string">&quot;720&quot;</span> height<span class="token operator">=</span><span class="token string">&quot;45&quot;</span> <span class="token operator">&gt;</span><span class="token constant">A</span> draw <span class="token keyword">of</span> something<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>canvas<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token function">drawStatus</span><span class="token punctuation">(</span><span class="token string">'drawing1'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token keyword">function</span> <span class="token function">drawStatus</span><span class="token punctuation">(</span><span class="token parameter">domId<span class="token punctuation">,</span> position</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'① 状态一'</span><span class="token punctuation">,</span> <span class="token string">'② 状态二'</span><span class="token punctuation">,</span> <span class="token string">'③ 状态三'</span><span class="token punctuation">,</span> <span class="token string">'④ 状态四'</span><span class="token punctuation">,</span> <span class="token string">'⑤ 状态五'</span><span class="token punctuation">,</span> <span class="token string">'⑥ 状态六'</span><span class="token punctuation">]</span>
    <span class="token keyword">let</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
      width<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
      height<span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
      extendLength<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
      radius<span class="token operator">:</span> <span class="token number">4</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> config2 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>config<span class="token punctuation">,</span> width<span class="token operator">:</span> <span class="token number">110</span> <span class="token punctuation">}</span>
    <span class="token keyword">let</span> cur <span class="token operator">=</span> str<span class="token punctuation">.</span>length <span class="token operator">-</span> position

    str<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> pos <span class="token operator">=</span> str<span class="token punctuation">.</span>length <span class="token operator">-</span> index <span class="token operator">-</span> <span class="token number">1</span>
      <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">+</span> <span class="token punctuation">(</span>str<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> config<span class="token punctuation">.</span>radius
      <span class="token keyword">if</span> <span class="token punctuation">(</span>pos <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        x <span class="token operator">=</span> <span class="token punctuation">(</span>pos <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>pos <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token punctuation">(</span>str<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> pos<span class="token punctuation">)</span> <span class="token operator">*</span> config<span class="token punctuation">.</span>radius
      <span class="token punctuation">}</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pos<span class="token punctuation">,</span>x<span class="token punctuation">)</span>
      <span class="token keyword">let</span> curConfig <span class="token operator">=</span> pos <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> config <span class="token operator">:</span> config2 
      <span class="token keyword">if</span> <span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> <span class="token punctuation">(</span>str<span class="token punctuation">.</span>length <span class="token operator">-</span> cur<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        curConfig<span class="token punctuation">.</span>isFocus <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
      <span class="token function">drawUnnormalShape</span><span class="token punctuation">(</span>domId<span class="token punctuation">,</span> x <span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> str<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> curConfig<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">drawUnnormalShape</span><span class="token punctuation">(</span><span class="token parameter">domId<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> text<span class="token punctuation">,</span> config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> drawing <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>domId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> ctx <span class="token operator">=</span> drawing<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> extendLength<span class="token punctuation">,</span> radius<span class="token punctuation">,</span> isFocus <span class="token punctuation">}</span> <span class="token operator">=</span> config 
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 如果都需要重新beginPath 不然，后面的fill会覆盖前面的fill</span>
  
    <span class="token comment">// 不规则矩形</span>
    ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>x <span class="token operator">+</span> radius<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token comment">// 从左上角 (x + radius, y) 位置开始</span>
    ctx<span class="token punctuation">.</span><span class="token function">arcTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y <span class="token operator">+</span> radius<span class="token punctuation">,</span> radius<span class="token punctuation">)</span> <span class="token comment">// 左上圆角</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token operator">+</span> height <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> radius<span class="token punctuation">)</span> <span class="token comment">// 画左边</span>
    ctx<span class="token punctuation">.</span><span class="token function">arcTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token operator">+</span> height<span class="token punctuation">,</span> x <span class="token operator">+</span> radius<span class="token punctuation">,</span> y <span class="token operator">+</span> height<span class="token punctuation">,</span> radius<span class="token punctuation">)</span> <span class="token comment">// 左下圆角</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>x <span class="token operator">+</span> width <span class="token operator">-</span> radius<span class="token punctuation">,</span> y <span class="token operator">+</span> height<span class="token punctuation">)</span> <span class="token comment">// 下边</span>
    <span class="token comment">// ctx.arcTo(x + width - radius, y + height, x + width - radius, y + height - 1, 1) // 圆角</span>

    <span class="token keyword">let</span> extendEndX <span class="token operator">=</span> x <span class="token operator">+</span> width <span class="token operator">+</span> extendLength
    <span class="token keyword">let</span> middleHeight <span class="token operator">=</span> y <span class="token operator">+</span> height <span class="token operator">/</span> <span class="token number">2</span>
    ctx<span class="token punctuation">.</span><span class="token function">arcTo</span><span class="token punctuation">(</span>extendEndX<span class="token punctuation">,</span> middleHeight<span class="token punctuation">,</span> extendEndX <span class="token operator">-</span> radius<span class="token punctuation">,</span> middleHeight <span class="token operator">-</span> radius<span class="token punctuation">,</span> radius<span class="token punctuation">)</span> <span class="token comment">// 线 + 圆角</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>x <span class="token operator">+</span> width <span class="token operator">-</span> radius<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>x <span class="token operator">+</span> radius<span class="token punctuation">,</span> y<span class="token punctuation">)</span>

    <span class="token keyword">var</span> gradient <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createLinearGradient</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token operator">+</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> x <span class="token operator">+</span> width <span class="token operator">+</span> extendLength<span class="token punctuation">,</span> y <span class="token operator">+</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 从(130,130)到(160,160)渐变</span>
    gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> isFocus <span class="token operator">?</span> <span class="token string">'#62ccff'</span> <span class="token operator">:</span> <span class="token string">'#fff'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 渐变的起点色</span>
    gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> isFocus <span class="token operator">?</span> <span class="token string">'#0486fe'</span> <span class="token operator">:</span> <span class="token string">'#fff'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 渐变的结束色</span>

    ctx<span class="token punctuation">.</span>shadowOffsetX <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>shadowOffsetY <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>shadowBlur <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">;</span> <span class="token comment">// 模糊像素</span>
    ctx<span class="token punctuation">.</span>shadowColor <span class="token operator">=</span> <span class="token string">&quot;rgba(58, 86, 111, 0.15)&quot;</span><span class="token punctuation">;</span>

    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> gradient
    ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ctx.stroke()</span>

    <span class="token keyword">let</span> textArr <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">&quot;15px arial&quot;</span>
    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> isFocus <span class="token operator">?</span> <span class="token string">'#fff'</span> <span class="token operator">:</span> <span class="token string">'#ccc'</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span>textArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x <span class="token operator">+</span> width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">20</span><span class="token punctuation">,</span> y <span class="token operator">+</span> height <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">&quot;11px arial&quot;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span>textArr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x <span class="token operator">+</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> y <span class="token operator">+</span> height <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p>参考之前的笔记：<a href="https://www.yuque.com/guoqzuo/js_es6/sbx6vi#a59e2f96" target="_blank" rel="noopener noreferrer">使用canvas绘图 - JS高程3笔记<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>完整demo: <a href="https://github.com/zuoxiaobai/fedemo/blob/master/src/DebugDemo/canvas%E7%94%BB%E4%B8%8D%E8%A7%84%E5%88%99%E5%BD%A2%E7%8A%B6%E5%A1%AB%E5%85%85%E6%B8%90%E5%8F%98%E8%83%8C%E6%99%AF/index.html" target="_blank" rel="noopener noreferrer">canvas画不规则形状填充渐变背景 - github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="canvas-多次fill会覆盖前面的fill"><a href="#canvas-多次fill会覆盖前面的fill" class="header-anchor">#</a> canvas 多次fill会覆盖前面的fill</h3> <p>在使用canvas进行绘图时，封装了一个绘制函数，每次都会填充颜色 ctx.fill()，如果多次执行，只会在最后一次时，整体fill一次？</p> <p>刚开始以为是后面的fill覆盖了前面的fill，后来网上查了下，第一次fill后，<strong>再次fill需要再次调用ctx.beginPath()</strong>，不然只会在最后一次fill。</p> <p>参考: <a href="https://bbs.csdn.net/topics/392293890?page=1" target="_blank" rel="noopener noreferrer">HTML5的canvas标签为什么会覆盖之前画的东西的颜色 <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2020-03-25-周三"><a href="#_2020-03-25-周三" class="header-anchor">#</a> 2020/03/25 周三</h2> <h3 id="根据文件名后缀判断文件类型不准确"><a href="#根据文件名后缀判断文件类型不准确" class="header-anchor">#</a> 根据文件名后缀判断文件类型不准确</h3> <p>比如我有个1.png文件，我修改下后缀名 1.txt，那前端如果仅凭文件名的后缀来显然是不行的，我们需要根据文件类型的二进制数据标记来判断对应的文件类型，这样才会更加准确，安全性更高</p> <p><img src="/images/daily/%E5%88%A4%E6%96%AD%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B.png" alt="判断文件类型.png"></p> <h3 id="怎么判断两个文件一模一样"><a href="#怎么判断两个文件一模一样" class="header-anchor">#</a> 怎么判断两个文件一模一样</h3> <p>一般文件的md5可能会有重复的，怎么减少这种概率呢？校验分三个部分</p> <ol><li>比较整个文件的md5</li> <li>选择文件固定位置的几个片段分别计算md5进行比对</li> <li>比较文件名是否一样</li></ol> <h3 id="md5加密是可逆的吗"><a href="#md5加密是可逆的吗" class="header-anchor">#</a> md5加密是可逆的吗？</h3> <p>理论上md5加密后，在不知道原始消息的前提下，是无法凭借16个字节的消息摘要（Message Digest），还原出原始的消息的.</p> <p>但为什么有些网站可以破解md5加密后的密码呢？主要是使用的碰撞检测。它会提前算出一些常用弱密码的md5值，一个个比较。才会让人产生md5可逆的错觉。一般除了md5加密外，我们可以再多进行一些处理(加盐)，来进行干扰，提高破解难度</p> <p>参考：<a href="https://www.zhihu.com/question/22651987" target="_blank" rel="noopener noreferrer">为什么说 MD5 是不可逆的？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="两个不同文件md5可能一样吗"><a href="#两个不同文件md5可能一样吗" class="header-anchor">#</a> 两个不同文件md5可能一样吗？</h3> <p>什么是md5？md5 是 messge digest [daɪˈdʒest] 5 的缩写，意思是信息摘要算法</p> <p>linux下，在terminal中执行man md5，可以查看对应的文档</p> <p>md5 -- calculate a message-digest fingerprint (checksum) for a file</p> <p>md5 -- 为一个文件计算信息摘要指纹('校验和'或'校验码')</p> <div class="language-bash extra-class"><pre class="language-bash"><code>md5 -s <span class="token string">'123456'</span>
<span class="token comment"># MD5 (&quot;123456&quot;) = e10adc3949ba59abbe56e057f20f883e</span>

md5 <span class="token number">1</span>.txt
<span class="token comment"># MD5 (1.txt) = 6f74626e0749e5353cc7e11767418d43</span>
</code></pre></div><p>从上面的例子中我们可以看到，将文件或字符串进行 md5校验 会生成一个 32位 的校验码。问题来了，网上看到 md5加密后一般是128位，而这里只有32位为什么呢？我们要分清16进制与2进制，<strong>标准说法是，md5加密后的字符为 128bit(16字节)，而一个我们看到的32位是16进制，每一位都可以转为4bit，也就是4个二进制位。1 - f 分别对应 0000 - 1111，所以128bit</strong></p> <p>一个二进制位(bit)只能表示0或1两种情况，128bit可以表示 Math.pow(2, 128) 2的128次方种情况，定死了，最多只能表示这么多种情况，不同内容的文件实在是太多了，理论上绝对是会超过2的128次方的。</p> <p>综上：<strong>两个不同文件md5是有可能相同的，因为md5最多只能表示2的128次方种情况，而不同的文件绝对大于这个数</strong></p> <p><strong>虽然两个文件的md5可能一致，但给定一个文件的md5值，想伪造另一个文件的md5值与该值一样，相对还是比较困难的，因此可用于判断文件完整性</strong></p> <p>参考: <a href="https://www.zhihu.com/question/29406619" target="_blank" rel="noopener noreferrer">有没有两个完全不一样的文件，但是他们的md5值是一样的？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2020-03-22-周日"><a href="#_2020-03-22-周日" class="header-anchor">#</a> 2020/03/22 周日</h2> <h3 id="koa-multer与-koa-multer逻辑差异"><a href="#koa-multer与-koa-multer逻辑差异" class="header-anchor">#</a> koa-multer与@koa/multer逻辑差异</h3> <p>之前有了解过以@开头的作用域包，这次在使用koa-multer这个模块时，发现@koa/multer与koa-multer的逻辑居然不一样。源码有些差异，下面来具体看看</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 在使用 koa-multer 时</span>
<span class="token keyword">const</span> multer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa-multer'</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/test'</span><span class="token punctuation">,</span> <span class="token function">multer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">none</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
  <span class="token keyword">let</span> isFormData <span class="token operator">=</span> ctx<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'content-type'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'multipart/form-data'</span><span class="token punctuation">)</span>
  <span class="token comment">// ctx.req node的request对象, ctx.request koa的request对象</span>
  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> isFormData <span class="token operator">?</span> ctx<span class="token punctuation">.</span>req<span class="token punctuation">.</span>body <span class="token operator">:</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>body
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>koa-multer这个包是从express的multer包上面加了一层封装，而koa-multer并没有把fileds字段挂载到ctx.request.body上，只维持原来express那样挂载到node的request对象上，也就是ctx.req.body，来看看koa-multer的源码部分</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// https://github.com/koa-modules/multer/blob/master/index.js</span>
multer<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> middleware <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">middleware</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>req<span class="token punctuation">,</span> ctx<span class="token punctuation">.</span>res<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          err <span class="token operator">?</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>而@koa/multer则做了处理，可以与上面的例子对比下</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// https://github.com/koajs/multer/blob/master/index.js</span>
multer<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> middleware <span class="token operator">=</span> <span class="token function">Reflect</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">middleware</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>req<span class="token punctuation">,</span> ctx<span class="token punctuation">.</span>res<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'request'</span> <span class="token keyword">in</span> ctx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>body <span class="token operator">=</span> ctx<span class="token punctuation">.</span>req<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
              <span class="token keyword">delete</span> ctx<span class="token punctuation">.</span>req<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>req<span class="token punctuation">.</span>file<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>file <span class="token operator">=</span> ctx<span class="token punctuation">.</span>req<span class="token punctuation">.</span>file<span class="token punctuation">;</span>
              ctx<span class="token punctuation">.</span>file <span class="token operator">=</span> ctx<span class="token punctuation">.</span>req<span class="token punctuation">.</span>file<span class="token punctuation">;</span>
              <span class="token keyword">delete</span> ctx<span class="token punctuation">.</span>req<span class="token punctuation">.</span>file<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>req<span class="token punctuation">.</span>files<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>files <span class="token operator">=</span> ctx<span class="token punctuation">.</span>req<span class="token punctuation">.</span>files<span class="token punctuation">;</span>
              ctx<span class="token punctuation">.</span>files <span class="token operator">=</span> ctx<span class="token punctuation">.</span>req<span class="token punctuation">.</span>files<span class="token punctuation">;</span>
              <span class="token keyword">delete</span> ctx<span class="token punctuation">.</span>req<span class="token punctuation">.</span>files<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>

          <span class="token function">resolve</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>我们再来看看使用@koa/multer的情况，就比较方便了，和其他数据一样挂载到 ctx.request.body</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> multer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@koa/multer'</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/test'</span><span class="token punctuation">,</span> <span class="token function">multer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">none</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>body
<span class="token punctuation">}</span><span class="token punctuation">)</span> 
</code></pre></div><p>综上，如果某个模块有两种包名，建议先考虑@开头的作用域包，通常这种功能会新点。后面迭代维护应该都是以这个为准</p> <h2 id="_2020-03-20-周五"><a href="#_2020-03-20-周五" class="header-anchor">#</a> 2020/03/20 周五</h2> <h3 id="npm包前面加-是什么意思-vue-cli与-vue-cli"><a href="#npm包前面加-是什么意思-vue-cli与-vue-cli" class="header-anchor">#</a> npm包前面加@是什么意思(vue-cli与@vue/cli)</h3> <blockquote><p>Vue CLI 的包名称由 vue-cli 改成了 @vue/cli。 如果你已经全局安装了旧版本的 vue-cli (1.x 或 2.x)，你需要先通过 npm uninstall vue-cli -g 或 yarn global remove vue-cli 卸载它。</p></blockquote> <p>今天看vue-cli文档，发现上面的这段话 vue-cli 改为了 @vue/cli，这两个npm有什么区别呢？npm包前面加@是什么意思，查了下官网</p> <p>npm包前面加@，代表scopes相关的包，可以理解为作用域(范围)包，<strong>作用域使我们可以创建与其他用户或组织创建的包同名，而不会发生冲突。</strong></p> <p>A scope allows you to create a package with the same name as a package created by another user or Org without conflict.</p> <p>作用域名称是介于@和斜线之间的所有内容:</p> <p>The scope name is everything between the @ and the slash:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// “npm” scope:</span>
@npm<span class="token operator">/</span><span class="token keyword">package</span><span class="token operator">-</span>name
<span class="token comment">// “npmcorp” scope:</span>
@npmcorp<span class="token operator">/</span><span class="token keyword">package</span><span class="token operator">-</span>name
</code></pre></div><p>npm包一个诟病就是包名很容易被占用的问题，占用后用其他人就不能用了。而作用域包类似于创建了一个命名空间，不同的命名空间，可以使用相同的包名</p> <p>作用域的命名不是谁便就能用的，只有两种可以使用：自己的用户名、自己创建的组织名</p> <p>注意：必须先注册一个npm用户帐户，然后才能发布用户作用域的npm软件包。此外，要发布组织作用域的软件包，您必须创建一个npm用户帐户，然后创建一个npm Org(组织)。</p> <p>在 vue-cli 中可以用@vue/cli说明使用了vue这个npm账号或者组织发布了该包。</p> <p>参考:</p> <ul><li><a href="https://www.cnblogs.com/kunmomo/p/11222063.html" target="_blank" rel="noopener noreferrer">npm学习（十）之如何使用创建、发布、使用作用域包<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.npmjs.com/about-scopes" target="_blank" rel="noopener noreferrer">About scopes - Packages and modules | npm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.npmjs.com/creating-and-publishing-scoped-public-packages" target="_blank" rel="noopener noreferrer">Creating and publishing scoped public packages | npm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="_2020-03-18-周三"><a href="#_2020-03-18-周三" class="header-anchor">#</a> 2020/03/18 周三</h2> <h3 id="md怎么加引用注释-脚注"><a href="#md怎么加引用注释-脚注" class="header-anchor">#</a> md怎么加引用注释，脚注</h3> <div class="language-md extra-class"><pre class="language-md"><code>这里有一个注脚[^1]，这段话的还有其他意思[^2]在里面

[^1]:这里是注脚内容
[^2]:这里是其他意思的注脚

注脚放到中间也可以
</code></pre></div><p>这里有一个注脚<a href="%E8%BF%99%E9%87%8C%E6%98%AF%E6%B3%A8%E8%84%9A%E5%86%85%E5%AE%B9">^1</a>，这段话的还有其他意思<a href="%E8%BF%99%E9%87%8C%E6%98%AF%E5%85%B6%E4%BB%96%E6%84%8F%E6%80%9D%E7%9A%84%E6%B3%A8%E8%84%9A">^2</a>在里面</p> <p>注脚放到中间也可以</p> <h3 id="md中链接的另一种写法"><a href="#md中链接的另一种写法" class="header-anchor">#</a> md中链接的另一种写法</h3> <div class="language-md extra-class"><pre class="language-md"><code>我是一段文字，<span class="token url">[<span class="token content">baidu</span>][<span class="token variable">1</span>]</span>、<span class="token url">[<span class="token content">qq</span>][<span class="token variable">2</span>]</span>里面有链接

<span class="token url-reference url"><span class="token punctuation">[</span><span class="token variable">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> http://baidu.com <span class="token string">&quot;baidu&quot;</span></span>
<span class="token url-reference url"><span class="token punctuation">[</span><span class="token variable">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span> http://qq.com <span class="token string">&quot;qq&quot;</span></span>
</code></pre></div><p>我是一段文字，<a href="http://baidu.com" title="baidu" target="_blank" rel="noopener noreferrer">baidu<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="http://qq.com" title="qq" target="_blank" rel="noopener noreferrer">qq<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>里面有链接</p> <h2 id="_2020-03-17-周二"><a href="#_2020-03-17-周二" class="header-anchor">#</a> 2020/03/17 周二</h2> <h3 id="node-js的核心用处及应用场景"><a href="#node-js的核心用处及应用场景" class="header-anchor">#</a> Node.js的核心用处及应用场景</h3> <ol><li><p><strong>打包构建、工程化</strong>，主要依赖基础的fs模块，文件读写，如xxx-cli(脚手架)、webpack、parcel、hexo，node在打包构建、前端工程化这块基本影响了整个前端的开发过程，各框架基本都有基于node的cli，快速生成脚手架，使开发更加高效、规范。</p></li> <li><p><strong>写后台接口</strong>，主要依赖基础的http模块，处理请求和响应，如 express.js、koa.js，一般主要用于模拟假数据接口, 调UI、交互效果以及做一些请求响应方面的自测</p></li> <li><p><strong>综合应用：获取数据+渲染页面(高并发、高性能)</strong>，koa.js对于开发商业化应用来说还是比较单薄，egg.js基于koa做了一些增强，让node也可以做企业级应用。阿里的使用场景就是一个很好的例子，基础设施大部分采用 Java 实现，变化较少，有事务要求的 Business Services 通常使用 Java。而Node主要用于<strong>替代过去php、jsp使用场景</strong>, 用在需要快速迭代，需求变化非常快的用户侧。node已经经受了阿里双11的考验，技术上是可行的。</p></li></ol> <blockquote><p>题外话：个人认为综合应用这块，自己玩玩还可以，小团队或node不是非常强的技术团队尽量不要尝试，阿里能做好这块是因为国内顶尖的node方面人才基本都在阿里，经过多年实践踩坑，拥有相对完善的node基建和生态。目前市面上前端里node强的比较少，饿了么为了招node服务端开发，还专门写了个node相关的面试教程。可想而知这方面人才有多少。</p></blockquote> <p>node支持高并发的原因:</p> <ul><li><strong>node.js基于异步I/O</strong>，接收到请求后，直接开一个I/O线程去执行，然后就不管了，立即继续执行主线程。等I/O线程执行完成后，直接执行对应的回调函数即可。省去了许多等待请求的时间</li> <li><strong>事务驱动</strong>，主线程通过event loop事件循环触发的方式来运行程序，这一条暂时还不是很理解，先写上~</li></ul> <p>参考：</p> <ul><li><a href="https://www.zhihu.com/question/50526101/answer/144952130" target="_blank" rel="noopener noreferrer">如何评价阿里开源的企业级 Node.js 框架 EggJS？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://segmentfault.com/a/1190000015841624" target="_blank" rel="noopener noreferrer">Node.js：浅析高并发与分布式集群<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/tmallfe/tmallfe.github.io/issues/28?utm_source=ourjs.com" target="_blank" rel="noopener noreferrer">天猫双11前端分享系列（四）：大规模 Node.js 应用<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://eggjs.org/zh-cn/intro/index.html" target="_blank" rel="noopener noreferrer">egg.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/ElemeFE/node-interview" target="_blank" rel="noopener noreferrer">node-interview | ElemeFE<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="webpack与parcel区别"><a href="#webpack与parcel区别" class="header-anchor">#</a> webpack与parcel区别</h3> <p>webpack与parcel都是打包工具，webpack功能强大，但比较重，配置项比较多，有点繁琐。而parcel就是为了解决配置项太多这个问题的，它默认集成了通用的常规功能，<strong>零配置</strong>，如果自定义较多，还是推荐webpack</p> <blockquote><p>If you don't want to worry about configuring everything and your needs are common needs, you should go directly with parcel. Parcel provides defaults (for babel-preset-env, post-css, html, etc) that fits most scenarios and works for everybody. You don't have to worry about configuring anything.</p></blockquote> <blockquote><p>From the other hand, if you need a more customization, you should go with webpack. Keep in mind that you will have to setup everything that you need, explicitly set those things.</p></blockquote> <p>参考：<a href="https://stackoverflow.com/questions/51453462/webpack-vs-parcel" target="_blank" rel="noopener noreferrer">Webpack vs Parcel - Stack Overflow<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="mac使用触控板拖动复制、移动窗口"><a href="#mac使用触控板拖动复制、移动窗口" class="header-anchor">#</a> mac使用触控板拖动复制、移动窗口</h3> <p>今天才意识到，每次要复制一段文字或移动某个应用窗口，我都是点击触控板再拖动。而且Mac Air的触控板按的声音比较响，于是找了下是否有手势可以支持。</p> <p>发现可以设置使用 <strong>三指拖移</strong> 复制文字和拖动窗口，三个手指放上去拖动就可以了。</p> <p>设置方法：打开系统统偏好设置 =&gt; 点 “辅助功能” =&gt; 点 “鼠标与触控板” =&gt; 点 “触控板选项” =&gt; 先勾上启用拖移，然后选择“三指拖移”，点击 “好”</p> <p>图文详情参考: <a href="https://jingyan.baidu.com/article/bea41d43b236feb4c51be639.html" target="_blank" rel="noopener noreferrer">MacBook触控板选中/复制<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2020-03-12-周四"><a href="#_2020-03-12-周四" class="header-anchor">#</a> 2020/03/12 周四</h2> <h3 id="关于vue和react思考"><a href="#关于vue和react思考" class="header-anchor">#</a> 关于vue和react思考</h3> <p>我个人理解 vue组件设计的对新手超级友好，使用门槛很低。虽然我没用过react，但我可以猜到React应该也是牺牲了一定的用户使用门槛，来实现更加灵活的js控制。而vue牺牲了用js控制的灵活度来降低了用户使用门槛。侧重点不一样，但底层实现基本都差不多，比如虚拟dom、hooks，只是开放给用户的调用方式不一样。</p> <p>前端框架再怎么变动，就算弄出一朵花来，也只是对dom的修改，最终还是会回归到 js高程3里面讲到的dom章节部分内容。</p> <h3 id="git-commit-提交信息有误怎么修改"><a href="#git-commit-提交信息有误怎么修改" class="header-anchor">#</a> git commit 提交信息有误怎么修改</h3> <p>如果不小心提交了，但没有push，可以使用下面的命令来修改上一次的commit信息</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> commit --amend -m <span class="token string">'xxx'</span>
</code></pre></div><h3 id="他人提交了package-lock-json的更新导致拉取时和本地冲突"><a href="#他人提交了package-lock-json的更新导致拉取时和本地冲突" class="header-anchor">#</a> 他人提交了package-lock.json的更新导致拉取时和本地冲突</h3> <p>一般在npm install 时会修改package-lock.json文件，我一般不会提交这个更新，但今天发现有人提交。我拉取时，提示这个文件冲突，导致拉取不下来，我又不想提交更新，所以尝试用下面的命令，将工作区该文件的修改丢弃，再拉取</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> checkout -- package-lock.json
</code></pre></div><p>拉取成功后，npm run serve 基本没什么影响</p> <h2 id="_2020-03-11-周三"><a href="#_2020-03-11-周三" class="header-anchor">#</a> 2020/03/11 周三</h2> <h3 id="vue封装组件方式的思考"><a href="#vue封装组件方式的思考" class="header-anchor">#</a> vue封装组件方式的思考</h3> <p>在封装组件时，一般我们使用的方法是</p> <p><strong>把组件单独放到一个xx.vue，然后需要引入时在components使用懒加载引入再使用</strong></p> <p>我就在想，每次引入组件都需要三步</p> <ol><li>把组件通过 components 引入</li> <li>在template中写对应的代码</li> <li>在data中写对应的数据，methods里写绑定的事件</li></ol> <p>会不会太麻烦了，我希望像element的组件那样，通过 this.$message.error(e.message) 这样直接调用一个组件</p> <p>于是我尝试使用js的方式来调用单文件组件(.vue)，在之前02/20号写过方法，除了直接挂载到body外，也可以挂载到任何地方，只要你能拿到对应的dom，可以使用ref属性，再通过this.$refs['xx']来获取其DOM 元素和组件实例。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 引入该组件</span>
<span class="token keyword">import</span> ShowInfo <span class="token keyword">from</span> <span class="token string">'showInfo.vue'</span>

<span class="token comment">// 通过js调用</span>
<span class="token function">clickShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 创建一个vue组件</span>
  <span class="token keyword">const</span> Component <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>ShowInfo<span class="token punctuation">)</span>

  <span class="token comment">// 在文档之外渲染并且随后挂载，返回对应的Vue实例(vm)</span>
  <span class="token keyword">let</span> showInfoVue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 

  <span class="token comment">// 将组件实例的dom，append到当前页面body下</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>showInfoVue<span class="token punctuation">.</span>$el<span class="token punctuation">)</span> 
<span class="token punctuation">}</span>
</code></pre></div><p>其实你发现没，用js直接调用vue组件可以是可以，但也要比正常情况下写更多代码，比如</p> <ol><li>js调用vue的方法需要封装为一个class</li> <li>以上面的示例为例子，通过js调用组件，我们需要一个成功的回调，以及传参到组件，在获取到ShowInfo时，我们需要知道我们引入的只是一个'js对象'。我们可以在对象的methods里面注入方法，用来获取传入的值，或挂载成功后的回调。这样相当于mixin，但.vue组件实现里使用这些注入的事件时会不好理解，有种默认其妙多出来全局函数的疑惑</li> <li>以js方法写的组件，不能兼容默认的引用方法，如果要支持那就要写一些额外的代码</li> <li>你会发现逻辑会变的不好理解，不够简单，对新手不友好，如果需要其他人维护时，可能不好理解为什么这么做</li></ol> <p>综上所述：默认的封装调用组件的方式就很好，简单、明了，你想在调用的时候轻松，那么在封装组件时，就会增加对应的工作量，整体工作量差不多。</p> <p>我们再来看element组件，对于内容比较少的，比如通知类，element都提供的是js调用方法，而没有普通的组件调用方法。且一般挂载到body上。为什么dialog组件没有封装成js呢？我的理解是dialog里面的内容可扩展性很强，如果改为js调用，可能会出现把大量代码写在js的情况，或者需要写VNode的render方法。就显得不够优雅了。</p> <p>总结：在封装组件时，什么时候用封装为js调用方式、什么时候采用普通的封装呢？我的理解是可以通过下面几个方面来进行评估</p> <ol><li>被封装的组件需求是否稳定，有没有可能会在后面经常变更或者进行渐进式增强，如果不稳定，不建议封装为js调用方式，对于可扩展性强的，还是建议使用普通组件封装方式，更利于维护</li> <li>是否是挂载到body下，还是需要放到任意的div内? 一般普通组件更好放置。如果挂载到body下，可以考虑封装为js调用方式</li> <li>是否功能相对单一简单，如果组件功能单一简单建议封装为js调用方式</li> <li>该组件是否在页面里大量被调用 大量的被调用，意味着大量重复的代码，可以考虑封装为js调用方式，增加组件实现时的复杂度，来降低调用时的复杂度</li></ol> <p>总之，不管怎么样封装，当有人问你为什么这么封装时，你要能够说出你自己的理由。</p> <h2 id="_2020-03-10-周二"><a href="#_2020-03-10-周二" class="header-anchor">#</a> 2020/03/10 周二</h2> <h3 id="vue自定义组件v-model属性实现dialog组件的二次封装"><a href="#vue自定义组件v-model属性实现dialog组件的二次封装" class="header-anchor">#</a> vue自定义组件v-model属性实现dialog组件的二次封装</h3> <p>当某个组件是element的dialog组件时，我们需要对dialog进行隐藏显示，当子组件里的dialog关闭时，需要修改父组件传入的值，尽管不是表单组件也可以使用v-model来解决，先来看看怎么调用</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>user-selection</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showUserSelection<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@confirm</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>confirm<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showUserSelection = true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>打开弹窗<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">UserSelection</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;../src/components/user-selection/src/main&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      showUserSelection<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">confirm</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>再来看组件实现</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-dialog</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>提示<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:visible.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialogVisible<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      内容
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog-footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialogVisible = false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>取 消<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialogVisible = false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>确 定<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-dialog</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  model<span class="token operator">:</span> <span class="token punctuation">{</span>
    prop<span class="token operator">:</span> <span class="token string">'show'</span><span class="token punctuation">,</span> <span class="token comment">// 设置对应v-model的属性字段</span>
    event<span class="token operator">:</span> <span class="token string">'close'</span> <span class="token comment">// 如果不指定默认为input，当$emit该事件，可以自动执行 修改父组件v-model参数的值</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'show'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 接收v-model的传值</span>
  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    dialogVisible<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>show
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">set</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> newVal<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="封装组件时预留vue插件入口便于全局引入"><a href="#封装组件时预留vue插件入口便于全局引入" class="header-anchor">#</a> 封装组件时预留vue插件入口便于全局引入</h3> <p>在element组件中，我们使用el-input等element元素时，不需要在components里引入。为什么呢？在引入element时，我们有在mian.js里我们使用了Vue.use(elemnt组件)，这样进行了全局注入组件，相当于组件做成了一个vue插件，如果我们自己封装组件如何能够在Vue.use后直接可以全局调用呢？</p> <p>于是我特意去看了下element组件源码，这里我们暂时不要求封装为npm包，只需要在平常自定义组件的基础上做一个增强，可以使用Vue.use全局引入。</p> <p>element-ui源码中，以alert组件为例，来看目录结构</p> <div class="language-bash extra-class"><pre class="language-bash"><code>alert
├── src
│   └── main.vue  <span class="token comment"># 组件实现</span>
└── index.js <span class="token comment"># install方法，供全局引入</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Alert <span class="token keyword">from</span> <span class="token string">'./src/main'</span><span class="token punctuation">;</span>

<span class="token comment">/* istanbul ignore next */</span>
Alert<span class="token punctuation">.</span><span class="token function-variable function">install</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>Alert<span class="token punctuation">.</span>name<span class="token punctuation">,</span> Alert<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Alert<span class="token punctuation">;</span>
</code></pre></div><p>综上：我们在开发组件时，可以增加全局引入的接口，层级也可以仿照element的来，多研究源码这样代码才会写的更健壮。</p> <h3 id="css-hover后改变其他元素样式"><a href="#css-hover后改变其他元素样式" class="header-anchor">#</a> css hover后改变其他元素样式</h3> <p>css中某个元素hover后，可以对其他元素设置样式，但注意：只限定于改变他的子元素, 以及其后面的元素</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token comment">/* hover后单独改变某一个子元素的样式 */</span>
  <span class="token selector">.cur-element:hover .child-1</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/* 设置相邻的后一个兄弟节点样式 */</span>
  <span class="token selector">.cur-element:hover + div</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/* 设置后面的所有对应的兄弟节点样式，不必相邻，但需要再其后面 */</span>
  <span class="token selector">.cur-element:hover ~ div</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>parent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>再前一个兄弟元素<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>前一个兄弟元素<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cur-element<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    测试hover
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>child-1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>child-1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>child-2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>child-2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>后一个兄弟元素<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>再后一个兄弟元素<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>再再后一个兄弟元素<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>参考：</p> <ul><li>之前的css笔记：<a href="https://www.yuque.com/guoqzuo/js_es6/dgo9ga#55de599b" target="_blank" rel="noopener noreferrer">css + ~ 选择器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/chaoyang89111/article/details/82782256" target="_blank" rel="noopener noreferrer">css:hover状态改变另一个元素样式的使用<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://stackoverflow.com/questions/12418702/change-style-of-all-other-elements-when-one-element-is-hovered" target="_blank" rel="noopener noreferrer">Change style of all other elements when one element is hovered - stackoverflow<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="css-vw的使用场景"><a href="#css-vw的使用场景" class="header-anchor">#</a> css vw的使用场景</h3> <p>在轮播图纯css的解决方案中：</p> <ul><li>将图片区域宽度设置为 图片张数 * 100%</li> <li>hover切换按钮时，将图片区域向左移动一个100%：transform: translateX(100%)</li></ul> <p>这里就会有问题，向左移动100%，宽度是图片张数*100%，而不是视窗宽度，用 100vw就可以很好的解决了。</p> <p>参考之前的css笔记：<a href="https://www.yuque.com/guoqzuo/js_es6/dg9u82#92bb76d4" target="_blank" rel="noopener noreferrer">css长度单位 相对长度 - HTML权威指南CSS部分<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2020-03-08-周日"><a href="#_2020-03-08-周日" class="header-anchor">#</a> 2020/03/08 周日</h2> <h3 id="widnows-nginx部署https服务"><a href="#widnows-nginx部署https服务" class="header-anchor">#</a> widnows nginx部署https服务</h3> <p>今天打算用使用 zuo11.com的 二级域名 api 来写接口玩玩，打算使用https。</p> <ol><li>在阿里云将域名免费的ssl证书分配给api.zuo11.com</li> <li>在域名解析里，增加 api.zuo11.com 的解析，解析到服务器</li> <li>初始化一个koa项目，监听某个端口，比如 9000端口，写一些测试的接口</li> <li>部署到服务器</li> <li>nginx 添加对https的支持：①. 在ssl证书位置下载证书，会有两个文件 xxx.pem, xxx.key，在服务器nignx目录下的conf目录新建cert目录，将两个文件拷贝进去，修改conf下nginx.conf的配置</li></ol> <div class="language-conf extra-class"><pre class="language-text"><code># HTTPS server
server {
    listen       443 ssl;
    server_name  api.zuo11.com;

    ssl_certificate     cert\3391782_api.zuo11.com.pem;
    ssl_certificate_key cert\3391782_api.zuo11.com.key;

    ssl_session_cache    shared:SSL:1m;
    ssl_session_timeout  5m;

    # 注释掉默认的加密方式
    # ssl_ciphers  HIGH:!aNULL:!MD5;
    # ssl_prefer_server_ciphers  on;

    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;  #使用此加密套件。
    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;   #使用该协议进行配置。
    ssl_prefer_server_ciphers on;

    location / {
        # root   html;
        # index  index.html index.htm;
        proxy_pass http://127.0.0.1:9000;
    }
}
</code></pre></div><h2 id="_2020-03-07-周六"><a href="#_2020-03-07-周六" class="header-anchor">#</a> 2020/03/07 周六</h2> <h3 id="nginx-中文路径404的问题"><a href="#nginx-中文路径404的问题" class="header-anchor">#</a> nginx 中文路径404的问题</h3> <p>在mac本地调试时，都是ok的，部署到windows服务器上后时，发现一个图片出现了404的问题，最开始以为是缓存的问题，清了缓存后还是404。这张图片是中文路径，之前全部用的是英文的，没发现这个问题。试了下英文的图片链接是ok的。百度了下，发现确实有这种问题。是nginx设置的编码与操作系统的编码不一致的问题。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># linux查看电脑默认编码</span>
<span class="token builtin class-name">echo</span>  <span class="token environment constant">$LANG</span>
<span class="token comment"># zh_CN.UTF-8</span>

<span class="token comment"># windows下查看默认字符编码</span>
chcp
<span class="token comment"># 如果显示 活动代码页 936 表示GBK编码  我的服务器就是这个编码，修改了nginx charset utf-8;没效果</span>
<span class="token comment"># 65001 表示utf-8</span>

<span class="token comment"># 设置字符编码，但发现只在当前控制台生效，重新开一个就没了。</span>
chcp <span class="token number">65001</span>

<span class="token comment"># 有个修改注册表的方法：不知道是否可行，但怕影响服务器的其它服务，还是算了，改英文名比较稳。。。。</span>
<span class="token comment"># https://blog.csdn.net/yangzhong0808/article/details/79012628?depth_1-utm_source=distribute.pc_relevant.none-task&amp;utm_source=distribute.pc_relevant.none-task</span>

</code></pre></div><p>参考：<a href="https://www.cnblogs.com/jadyyummy/p/7543704.html" target="_blank" rel="noopener noreferrer">windows下cmd命令行显示UTF8字符设置(CHCP命令)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="invalid-character-in-header-content-content-disposition"><a href="#invalid-character-in-header-content-content-disposition" class="header-anchor">#</a> Invalid character in header content [&quot;Content-Disposition&quot;]</h3> <p>在koa中，如果Content-Disposition里设置文件名有中文会提示错误，需要用类似 encodeURIComponent 转码的函数转码后才行</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fileName <span class="token operator">=</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span><span class="token string">'这是一个文件'</span><span class="token punctuation">)</span> <span class="token comment">// 需要先转码才行</span>
ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/x-tar'</span><span class="token punctuation">,</span>
  <span class="token string">'Content-Disposition'</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">attachment; filename=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fileName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.tar&quot;</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_2020-03-03-周二"><a href="#_2020-03-03-周二" class="header-anchor">#</a> 2020/03/03 周二</h2> <h3 id="github-badge-与npm-徽章图片生成"><a href="#github-badge-与npm-徽章图片生成" class="header-anchor">#</a> github Badge 与npm 徽章图片生成</h3> <p>在写readme时，最开始一般会贴一些徽章图片，比如 build passing，license MIT 等，这些都是引入的图片</p> <p><img src="/images/daily/badge%E5%BE%BD%E7%AB%A0%E5%9B%BE%E7%89%87.png" alt="badge徽章图片.png"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 上图对应的三个徽章图片</span>
<span class="token operator">!</span><span class="token punctuation">[</span>version<span class="token operator">-</span>v0<span class="token punctuation">.</span><span class="token number">2.0</span><span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>img<span class="token punctuation">.</span>shields<span class="token punctuation">.</span>io<span class="token operator">/</span>badge<span class="token operator">/</span>version<span class="token operator">-</span>v0<span class="token punctuation">.</span><span class="token number">2.0</span><span class="token operator">-</span>yellow<span class="token punctuation">.</span>svg<span class="token punctuation">)</span> 
<span class="token operator">!</span><span class="token punctuation">[</span>build<span class="token operator">-</span>passing<span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>img<span class="token punctuation">.</span>shields<span class="token punctuation">.</span>io<span class="token operator">/</span>badge<span class="token operator">/</span>build<span class="token operator">-</span>passing<span class="token operator">-</span>green<span class="token punctuation">.</span>svg<span class="token punctuation">)</span> 
<span class="token operator">!</span><span class="token punctuation">[</span>license<span class="token operator">-</span><span class="token constant">MIT</span><span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>img<span class="token punctuation">.</span>shields<span class="token punctuation">.</span>io<span class="token operator">/</span>badge<span class="token operator">/</span>license<span class="token operator">-</span><span class="token constant">MIT</span><span class="token operator">-</span>green<span class="token punctuation">.</span>svg<span class="token punctuation">)</span> 
<span class="token comment">// 发现规律没，更改后面的参数，就可以生成不同的图片</span>

<span class="token comment">// 比如</span>
https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>img<span class="token punctuation">.</span>shields<span class="token punctuation">.</span>io<span class="token operator">/</span>badge<span class="token operator">/</span><span class="token constant">JAVA</span><span class="token operator">-</span><span class="token number">1.8</span><span class="token operator">+</span><span class="token operator">-</span>green<span class="token punctuation">.</span>svg
</code></pre></div><p>npm 徽章图片，主要适用于npm包，显示npm包的一些信息</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 文档 https://www.npmjs.com/package/npm-badge</span>
<span class="token comment">// zuo-blog npm包使用示例，只需要把对应的npm 包名称修改即可</span>
<span class="token punctuation">[</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">NPM</span><span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>nodei<span class="token punctuation">.</span>co<span class="token operator">/</span>npm<span class="token operator">/</span>zuo<span class="token operator">-</span>blog<span class="token punctuation">.</span>png<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>npmjs<span class="token punctuation">.</span>org<span class="token operator">/</span><span class="token keyword">package</span><span class="token operator">/</span>zuo<span class="token operator">-</span>blog<span class="token punctuation">)</span>
</code></pre></div><h3 id="个人小程序主体可以做什么"><a href="#个人小程序主体可以做什么" class="header-anchor">#</a> 个人小程序主体可以做什么</h3> <p>目前小程序名称变得很严格，只要包含稍微通用点的关键字，比如 &quot;管理&quot;，都会要求上传手持身份证照片，且要有对应的商标证书。但貌似商标申请需要1000，且审批时间需要1年多... 太难了。而且个人小程序能做的东西越来越少了。</p> <p>参考：<a href="https://developers.weixin.qq.com/miniprogram/product/material/#%E4%B8%AA%E4%BA%BA%E4%B8%BB%E4%BD%93%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E6%94%BE%E7%9A%84%E6%9C%8D%E5%8A%A1%E7%B1%BB%E7%9B%AE" target="_blank" rel="noopener noreferrer">个人主体小程序开放的服务类目 - 微信开放文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="前端pc-web获取时间是不准确的"><a href="#前端pc-web获取时间是不准确的" class="header-anchor">#</a> 前端pc web获取时间是不准确的</h3> <p>我们在 new Date() 时，如果是在pc端，电脑时间不对，获取的时间也会不对。<strong>如果需要记录时间，应该发送请求给后端，让后端计算时间。依赖服务器时间</strong></p> <p>修改本地时间后，用 new Date() 获取时间，如下图会是错误的时间</p> <p><img src="/images/daily/%E4%BF%AE%E6%94%B9%E6%9C%AC%E5%9C%B0%E6%97%B6%E9%97%B4%E5%90%8E%E8%8E%B7%E5%8F%96%E6%97%B6%E9%97%B4.png" alt="修改本地时间后获取时间.png"></p> <h2 id="_2020-03-02-周一"><a href="#_2020-03-02-周一" class="header-anchor">#</a> 2020/03/02 周一</h2> <h3 id="浏览器tab页切换时更改标题"><a href="#浏览器tab页切换时更改标题" class="header-anchor">#</a> 浏览器tab页切换时更改标题</h3> <p>当用户点击了浏览器其他tab页离开页面，或者从其他tab页进入当前页，都会触发visibilitychange事件，根据docuemnt.hidden可以判断是否离开或回来，我们可以修改标题达到可视化的一个效果</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 实现tab间切换时，隐藏页面title改变功能</span>
<span class="token comment">// JS高程3 Page Visibility API(页面可见性API)</span>
<span class="token comment">// 参考：https://www.yuque.com/guoqzuo/js_es6/nocthb#0cf7a8b7</span>
<span class="token keyword">var</span> title <span class="token operator">=</span> document<span class="token punctuation">.</span>title<span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'visibilitychange'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span>title <span class="token operator">=</span>  document<span class="token punctuation">.</span>hidden <span class="token operator">?</span> <span class="token string">'~ 你快回来 ~ '</span> <span class="token operator">:</span> title
  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>hidden<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 做一些暂停操作</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 开始操作</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="网页中网络异常或网络正常时动态提示"><a href="#网页中网络异常或网络正常时动态提示" class="header-anchor">#</a> 网页中网络异常或网络正常时动态提示</h3> <p>监听页面的online和offline事件，显示或隐藏对应的信息</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 当网络状态发生改变时（有网 =&gt; 无网，无网 =&gt; 有网）,提示信息</span>
<span class="token comment">// JS高程3 离线检测</span>
<span class="token comment">// 参考: https://www.yuque.com/guoqzuo/js_es6/sp2k81#244d3090</span>
<span class="token keyword">let</span> errorMsgNode <span class="token comment">// 用来移除错误信息节点</span>
window<span class="token punctuation">.</span><span class="token function-variable function">ononline</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  errorMsgNode <span class="token operator">&amp;&amp;</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>errorMsgNode<span class="token punctuation">)</span>
  <span class="token function">message</span><span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">,</span> <span class="token string">'网络已连接'</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onoffline</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">message</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token string">'网络已断开'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * 为了显示网络信息，专门写了个小tips提示函数，在顶部显示信息
 * @param {}} type 文字颜色 error 为红色，其他为绿色
 * @param {*} msg 显示信息
 * @param {*} sec 如果有传入时间，sec秒后关闭提示
 */</span>
<span class="token keyword">function</span> <span class="token function">message</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> msg<span class="token punctuation">,</span> sec</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> color <span class="token operator">=</span> type <span class="token operator">===</span> <span class="token string">'error'</span> <span class="token operator">?</span> <span class="token string">'red'</span> <span class="token operator">:</span> <span class="token string">'green'</span>
  <span class="token keyword">let</span> cssArr <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">'position:fixed;top:8px;left:50%;z-index:9999999;'</span><span class="token punctuation">,</span>
    <span class="token string">'transform:translateX(-50%);padding:5px 10px;background:#fff;'</span>
  <span class="token punctuation">]</span>
  <span class="token keyword">let</span> htmlStr <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;div style=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cssArr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">color:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>msg<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/di&gt;
  </span><span class="token template-punctuation string">`</span></span>
  <span class="token keyword">let</span> node <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
  node<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> htmlStr
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span>sec<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> sec <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> sec<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 错误信息，一直提示，需要设置到变量里，等网络连接上时移除</span>
    errorMsgNode <span class="token operator">=</span> node
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="页面滚动比例监听实现"><a href="#页面滚动比例监听实现" class="header-anchor">#</a> 页面滚动比例监听实现</h3> <p>监听页面的scroll事件，整个滚动距离为 document.documentElement.scrollHeight - window.innerHeight，当前scrollTop除以整个滚动距离，就是页面的百分比，向body挂载两个div来显示进度信息</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 页面滚动比例监听</span>
<span class="token comment">// posTop 顶部类似阮一峰ES6网页的滚动进度条</span>
<span class="token comment">// pos 右下角滚动百分比</span>
<span class="token comment">// JS高程3 - UI事件 scroll事件</span>
<span class="token comment">// https://www.yuque.com/guoqzuo/js_es6/elgng1#e38771e5</span>
<span class="token keyword">let</span> htmlStr <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  &lt;div id=&quot;posTop&quot; style=&quot;position: fixed;top:0;height:2px;background: #25b864;z-index:999999;&quot;&gt;&lt;/div&gt;
  &lt;div id=&quot;pos&quot; style=&quot;display:none;position:fixed;bottom: 100px;right:20px;padding:10px;background: #25b864;color:white;width:40px;text-align: center;border-radius:5px;&quot;&gt;&lt;/div&gt;
</span><span class="token template-punctuation string">`</span></span>
<span class="token keyword">let</span> eleNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
eleNode<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> htmlStr
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>eleNode<span class="token punctuation">)</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> scrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
  <span class="token keyword">let</span> total <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollHeight <span class="token operator">-</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">;</span>
  <span class="token keyword">let</span> persentage <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>scrollTop<span class="token operator">/</span>total<span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// console.log(scrollTop);  </span>

  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'pos'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> scrollTop <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">'none'</span> <span class="token operator">:</span> <span class="token string">'block'</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'pos'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>persentage<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'posTop'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>persentage<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="复制内容后-在内容中插入作者及当前文章信息"><a href="#复制内容后-在内容中插入作者及当前文章信息" class="header-anchor">#</a> 复制内容后，在内容中插入作者及当前文章信息</h3> <p>监听body里的copy事件，然后用 document.getSelection()获取内容，追加内容后，再使用event.clipboardData.setData像粘贴板里写入内容</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 操作粘贴板</span>
<span class="token comment">// JS高程3 表单脚本 操作粘贴板</span>
<span class="token comment">// https://www.yuque.com/guoqzuo/js_es6/ubpn7k#8482e7c5</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function-variable function">oncopy</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'copy'</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 获取copy的内容</span>
  <span class="token comment">// console.log(document.getSelection().toString());</span>
  <span class="token comment">// 在copy内容里加入信息</span>
  <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
-----------------------------
标题：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>document<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
链接：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>location<span class="token punctuation">.</span>href<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
作者：guoqzuo (http://github/zuoxiaobai)
  </span><span class="token template-punctuation string">`</span></span>
  event<span class="token punctuation">.</span>clipboardData<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">'text/plain'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>document<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>msg<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">10/29/2020, 10:59:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/daily/2020-04.html" class="prev">
        2020年04月技术日常
      </a></span> <span class="next"><a href="/daily/2020-02.html">
        2020年02月技术日常
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.203f8a3a.js" defer></script><script src="/assets/js/2.4b3539f1.js" defer></script><script src="/assets/js/37.a9c58175.js" defer></script><script src="/assets/js/3.e6a4dd76.js" defer></script>
  </body>
</html>
