<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2020年04月技术日常 | 左小白的前端笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="左小白的前端笔记，归纳整理自己在前端工作、学习中的一些心得笔记，有利于前端知识系统化。包括 Vue.js、前端工程化（TypeScript、Node.js、webpack）、Docker、JS/ES6、CSS/CSS3、HTML/HTML5、数据可视化、计算机基础、英语等笔记。">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.c896736b.css" as="style"><link rel="preload" href="/assets/js/app.aea08731.js" as="script"><link rel="preload" href="/assets/js/2.3f8a6b0b.js" as="script"><link rel="preload" href="/assets/js/40.9b113905.js" as="script"><link rel="preload" href="/assets/js/3.018b29e2.js" as="script"><link rel="prefetch" href="/assets/js/10.57230952.js"><link rel="prefetch" href="/assets/js/100.0f8b8510.js"><link rel="prefetch" href="/assets/js/101.01cd1b80.js"><link rel="prefetch" href="/assets/js/102.46cc25e7.js"><link rel="prefetch" href="/assets/js/103.5b9d1b0c.js"><link rel="prefetch" href="/assets/js/104.25e9bd43.js"><link rel="prefetch" href="/assets/js/105.96ae6579.js"><link rel="prefetch" href="/assets/js/106.6607dd73.js"><link rel="prefetch" href="/assets/js/107.94e14f3f.js"><link rel="prefetch" href="/assets/js/108.5633630c.js"><link rel="prefetch" href="/assets/js/109.dbc7f4ca.js"><link rel="prefetch" href="/assets/js/11.9dc4d318.js"><link rel="prefetch" href="/assets/js/110.52b6cb6d.js"><link rel="prefetch" href="/assets/js/111.53b0c9b7.js"><link rel="prefetch" href="/assets/js/112.a7a510a2.js"><link rel="prefetch" href="/assets/js/113.8f779566.js"><link rel="prefetch" href="/assets/js/114.09e9fb91.js"><link rel="prefetch" href="/assets/js/115.d3d367a9.js"><link rel="prefetch" href="/assets/js/116.dfe7231d.js"><link rel="prefetch" href="/assets/js/117.480ab03a.js"><link rel="prefetch" href="/assets/js/118.20193bbe.js"><link rel="prefetch" href="/assets/js/119.475d5b5a.js"><link rel="prefetch" href="/assets/js/12.f053a222.js"><link rel="prefetch" href="/assets/js/120.9ddf00b0.js"><link rel="prefetch" href="/assets/js/121.07aecd62.js"><link rel="prefetch" href="/assets/js/122.939a73d8.js"><link rel="prefetch" href="/assets/js/123.ffc0973f.js"><link rel="prefetch" href="/assets/js/124.0d9f5d5c.js"><link rel="prefetch" href="/assets/js/125.92fc58c1.js"><link rel="prefetch" href="/assets/js/126.32b088e4.js"><link rel="prefetch" href="/assets/js/127.6bf4a0fd.js"><link rel="prefetch" href="/assets/js/128.b565cc40.js"><link rel="prefetch" href="/assets/js/129.a2103f6e.js"><link rel="prefetch" href="/assets/js/13.986f7498.js"><link rel="prefetch" href="/assets/js/130.a57f2f1c.js"><link rel="prefetch" href="/assets/js/131.dc7cd795.js"><link rel="prefetch" href="/assets/js/132.2fe1fc61.js"><link rel="prefetch" href="/assets/js/133.5ffb92a3.js"><link rel="prefetch" href="/assets/js/134.bc019c4d.js"><link rel="prefetch" href="/assets/js/135.2154128f.js"><link rel="prefetch" href="/assets/js/136.aab6fa01.js"><link rel="prefetch" href="/assets/js/137.df57a438.js"><link rel="prefetch" href="/assets/js/138.98f86f10.js"><link rel="prefetch" href="/assets/js/139.adc8ae06.js"><link rel="prefetch" href="/assets/js/14.1898890b.js"><link rel="prefetch" href="/assets/js/140.8b1eb51d.js"><link rel="prefetch" href="/assets/js/141.aa5fe296.js"><link rel="prefetch" href="/assets/js/142.3b80d208.js"><link rel="prefetch" href="/assets/js/143.a241ab25.js"><link rel="prefetch" href="/assets/js/144.da557ab1.js"><link rel="prefetch" href="/assets/js/145.29e965d6.js"><link rel="prefetch" href="/assets/js/146.e3b514f9.js"><link rel="prefetch" href="/assets/js/147.883ee835.js"><link rel="prefetch" href="/assets/js/148.254226ea.js"><link rel="prefetch" href="/assets/js/149.432fe3a3.js"><link rel="prefetch" href="/assets/js/15.5469b4a1.js"><link rel="prefetch" href="/assets/js/150.32707229.js"><link rel="prefetch" href="/assets/js/151.55ed235a.js"><link rel="prefetch" href="/assets/js/152.a0961a89.js"><link rel="prefetch" href="/assets/js/153.01a17e73.js"><link rel="prefetch" href="/assets/js/154.3cab5dca.js"><link rel="prefetch" href="/assets/js/155.b38f80af.js"><link rel="prefetch" href="/assets/js/156.2a98ddc9.js"><link rel="prefetch" href="/assets/js/157.6532cea6.js"><link rel="prefetch" href="/assets/js/158.17a38cf8.js"><link rel="prefetch" href="/assets/js/159.0db8580d.js"><link rel="prefetch" href="/assets/js/16.b46ab2d4.js"><link rel="prefetch" href="/assets/js/160.39ce3a9d.js"><link rel="prefetch" href="/assets/js/161.ebc27f72.js"><link rel="prefetch" href="/assets/js/162.3530d9ce.js"><link rel="prefetch" href="/assets/js/163.2876628d.js"><link rel="prefetch" href="/assets/js/164.2d10c49f.js"><link rel="prefetch" href="/assets/js/17.20b93dac.js"><link rel="prefetch" href="/assets/js/18.1773280f.js"><link rel="prefetch" href="/assets/js/19.043092b9.js"><link rel="prefetch" href="/assets/js/20.67b2e7ac.js"><link rel="prefetch" href="/assets/js/21.d8349b66.js"><link rel="prefetch" href="/assets/js/22.bae760a2.js"><link rel="prefetch" href="/assets/js/23.31599c16.js"><link rel="prefetch" href="/assets/js/24.5bbdd298.js"><link rel="prefetch" href="/assets/js/25.059eebcd.js"><link rel="prefetch" href="/assets/js/26.98142d7d.js"><link rel="prefetch" href="/assets/js/27.242fb841.js"><link rel="prefetch" href="/assets/js/28.ada66cb3.js"><link rel="prefetch" href="/assets/js/29.ee6d44fc.js"><link rel="prefetch" href="/assets/js/30.1404a72f.js"><link rel="prefetch" href="/assets/js/31.7db04ede.js"><link rel="prefetch" href="/assets/js/32.ff88cb29.js"><link rel="prefetch" href="/assets/js/33.3872e844.js"><link rel="prefetch" href="/assets/js/34.8528d11c.js"><link rel="prefetch" href="/assets/js/35.8bc50305.js"><link rel="prefetch" href="/assets/js/36.9bf7c6ff.js"><link rel="prefetch" href="/assets/js/37.bfa76084.js"><link rel="prefetch" href="/assets/js/38.2e4e4f00.js"><link rel="prefetch" href="/assets/js/39.72298233.js"><link rel="prefetch" href="/assets/js/4.fc8623a4.js"><link rel="prefetch" href="/assets/js/41.966fbd83.js"><link rel="prefetch" href="/assets/js/42.154c7e55.js"><link rel="prefetch" href="/assets/js/43.82c0efdd.js"><link rel="prefetch" href="/assets/js/44.b09d1cf3.js"><link rel="prefetch" href="/assets/js/45.5783826e.js"><link rel="prefetch" href="/assets/js/46.3e3f4738.js"><link rel="prefetch" href="/assets/js/47.5b1c7435.js"><link rel="prefetch" href="/assets/js/48.3989e8b0.js"><link rel="prefetch" href="/assets/js/49.a66a16bf.js"><link rel="prefetch" href="/assets/js/5.5f97339e.js"><link rel="prefetch" href="/assets/js/50.1b48b123.js"><link rel="prefetch" href="/assets/js/51.ecaa83a0.js"><link rel="prefetch" href="/assets/js/52.987463fe.js"><link rel="prefetch" href="/assets/js/53.fbf93c52.js"><link rel="prefetch" href="/assets/js/54.4b05e141.js"><link rel="prefetch" href="/assets/js/55.49b4ea5b.js"><link rel="prefetch" href="/assets/js/56.6a21abce.js"><link rel="prefetch" href="/assets/js/57.bc7b034b.js"><link rel="prefetch" href="/assets/js/58.a2c22899.js"><link rel="prefetch" href="/assets/js/59.3bdb17f6.js"><link rel="prefetch" href="/assets/js/6.8b6802aa.js"><link rel="prefetch" href="/assets/js/60.e31b8e43.js"><link rel="prefetch" href="/assets/js/61.1a450398.js"><link rel="prefetch" href="/assets/js/62.8d214e4b.js"><link rel="prefetch" href="/assets/js/63.dd8a3381.js"><link rel="prefetch" href="/assets/js/64.3261510d.js"><link rel="prefetch" href="/assets/js/65.2f610ffa.js"><link rel="prefetch" href="/assets/js/66.227ada19.js"><link rel="prefetch" href="/assets/js/67.40ac9dcd.js"><link rel="prefetch" href="/assets/js/68.53912b8a.js"><link rel="prefetch" href="/assets/js/69.7fa926e5.js"><link rel="prefetch" href="/assets/js/7.55c6af5e.js"><link rel="prefetch" href="/assets/js/70.38fc9578.js"><link rel="prefetch" href="/assets/js/71.90f7da46.js"><link rel="prefetch" href="/assets/js/72.d76610ae.js"><link rel="prefetch" href="/assets/js/73.7971d882.js"><link rel="prefetch" href="/assets/js/74.aa48ee7b.js"><link rel="prefetch" href="/assets/js/75.88e9f802.js"><link rel="prefetch" href="/assets/js/76.49e518d0.js"><link rel="prefetch" href="/assets/js/77.cb055f39.js"><link rel="prefetch" href="/assets/js/78.e7e9107d.js"><link rel="prefetch" href="/assets/js/79.8ff34b88.js"><link rel="prefetch" href="/assets/js/8.143ffc63.js"><link rel="prefetch" href="/assets/js/80.af5bfd6d.js"><link rel="prefetch" href="/assets/js/81.b1bc6095.js"><link rel="prefetch" href="/assets/js/82.458d942f.js"><link rel="prefetch" href="/assets/js/83.90fc3d40.js"><link rel="prefetch" href="/assets/js/84.d115314a.js"><link rel="prefetch" href="/assets/js/85.457c338a.js"><link rel="prefetch" href="/assets/js/86.614ce1bc.js"><link rel="prefetch" href="/assets/js/87.b225f160.js"><link rel="prefetch" href="/assets/js/88.54ced39c.js"><link rel="prefetch" href="/assets/js/89.4547f598.js"><link rel="prefetch" href="/assets/js/9.4e36b672.js"><link rel="prefetch" href="/assets/js/90.9e592a2d.js"><link rel="prefetch" href="/assets/js/91.53f5f4fa.js"><link rel="prefetch" href="/assets/js/92.4a311c3f.js"><link rel="prefetch" href="/assets/js/93.d6bbbc9b.js"><link rel="prefetch" href="/assets/js/94.2a069bf7.js"><link rel="prefetch" href="/assets/js/95.4510e613.js"><link rel="prefetch" href="/assets/js/96.13a8e5fe.js"><link rel="prefetch" href="/assets/js/97.50808ce9.js"><link rel="prefetch" href="/assets/js/98.62145787.js"><link rel="prefetch" href="/assets/js/99.1e547bc8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c896736b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">左小白的前端笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南" class="dropdown-title"><span class="title">指南</span> <span class="arrow down"></span></button> <button type="button" aria-label="指南" class="mobile-dropdown-title"><span class="title">指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  首页
</a></li><li class="dropdown-item"><!----> <a href="/nav.html" class="nav-link">
  前端网址导航
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><span class="title">前端进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端进阶" class="mobile-dropdown-title"><span class="title">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daily/" class="nav-link router-link-active">
  技术日常记录
</a></li><li class="dropdown-item"><!----> <a href="/server/docker.html" class="nav-link">
  Docker 基础
</a></li><li class="dropdown-item"><h4>
          Vue.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/base/1.html" class="nav-link">
  Vue.js 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vue-router.html" class="nav-link">
  Vue Router 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vuex.html" class="nav-link">
  Vuex 笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          前端工程化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ts/base-1.html" class="nav-link">
  TypeScript 入门教程笔记
</a></li><li class="dropdown-subitem"><a href="/node/base/1.html" class="nav-link">
  Node.js 笔记
</a></li><li class="dropdown-subitem"><a href="/webpack/base.html" class="nav-link">
  webpack 基础
</a></li></ul></li><li class="dropdown-item"><h4>
          数据可视化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/visual/echarts.html" class="nav-link">
  Echarts 笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS/ES6
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/js/es6/es6-1.html" class="nav-link">
  ES6标准入门(第三版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/ad3/js-ad3-1.html" class="nav-link">
  JavaScript高级程序设计(第四版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/js-dom-art.html" class="nav-link">
  JavaScript DOM编程艺术(第二版)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS/CSS3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/css/less.html" class="nav-link">
  CSS 预处理器 Less.js
</a></li><li class="dropdown-subitem"><a href="/css/flex-grid.html" class="nav-link">
  Flex与Grid布局
</a></li><li class="dropdown-subitem"><a href="/css/html5-css-1.html" class="nav-link">
  HTML5权威指南(CSS部分)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          HTML/HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html5/html/1.html" class="nav-link">
  HTML5权威指南(HTML部分)笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/base/js-data-struct.html" class="nav-link">
  学习JavaScript数据结构与算法(第三版)笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/mocha-test.html" class="nav-link">
  Mocha - JavaScript测试框架
</a></li><li class="dropdown-item"><!----> <a href="/base/git.html" class="nav-link">
  Git 笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/markdown.html" class="nav-link">
  Markdown 基础语法
</a></li><li class="dropdown-item"><!----> <a href="/base/dbtheory/1.html" class="nav-link">
  数据库系统原理笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开源项目" class="dropdown-title"><span class="title">开源项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="开源项目" class="mobile-dropdown-title"><span class="title">开源项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/zuoxiaobai/service-monitor" target="_blank" rel="noopener noreferrer" class="nav-link external">
  service-monitor
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://vuechart.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @guoqzuo/vue-chart
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://zuoblog.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  zuo-blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="http://www.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/zuoxiaobai" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南" class="dropdown-title"><span class="title">指南</span> <span class="arrow down"></span></button> <button type="button" aria-label="指南" class="mobile-dropdown-title"><span class="title">指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  首页
</a></li><li class="dropdown-item"><!----> <a href="/nav.html" class="nav-link">
  前端网址导航
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><span class="title">前端进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端进阶" class="mobile-dropdown-title"><span class="title">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daily/" class="nav-link router-link-active">
  技术日常记录
</a></li><li class="dropdown-item"><!----> <a href="/server/docker.html" class="nav-link">
  Docker 基础
</a></li><li class="dropdown-item"><h4>
          Vue.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/base/1.html" class="nav-link">
  Vue.js 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vue-router.html" class="nav-link">
  Vue Router 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vuex.html" class="nav-link">
  Vuex 笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          前端工程化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ts/base-1.html" class="nav-link">
  TypeScript 入门教程笔记
</a></li><li class="dropdown-subitem"><a href="/node/base/1.html" class="nav-link">
  Node.js 笔记
</a></li><li class="dropdown-subitem"><a href="/webpack/base.html" class="nav-link">
  webpack 基础
</a></li></ul></li><li class="dropdown-item"><h4>
          数据可视化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/visual/echarts.html" class="nav-link">
  Echarts 笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS/ES6
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/js/es6/es6-1.html" class="nav-link">
  ES6标准入门(第三版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/ad3/js-ad3-1.html" class="nav-link">
  JavaScript高级程序设计(第四版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/js-dom-art.html" class="nav-link">
  JavaScript DOM编程艺术(第二版)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS/CSS3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/css/less.html" class="nav-link">
  CSS 预处理器 Less.js
</a></li><li class="dropdown-subitem"><a href="/css/flex-grid.html" class="nav-link">
  Flex与Grid布局
</a></li><li class="dropdown-subitem"><a href="/css/html5-css-1.html" class="nav-link">
  HTML5权威指南(CSS部分)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          HTML/HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html5/html/1.html" class="nav-link">
  HTML5权威指南(HTML部分)笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/base/js-data-struct.html" class="nav-link">
  学习JavaScript数据结构与算法(第三版)笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/mocha-test.html" class="nav-link">
  Mocha - JavaScript测试框架
</a></li><li class="dropdown-item"><!----> <a href="/base/git.html" class="nav-link">
  Git 笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/markdown.html" class="nav-link">
  Markdown 基础语法
</a></li><li class="dropdown-item"><!----> <a href="/base/dbtheory/1.html" class="nav-link">
  数据库系统原理笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开源项目" class="dropdown-title"><span class="title">开源项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="开源项目" class="mobile-dropdown-title"><span class="title">开源项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/zuoxiaobai/service-monitor" target="_blank" rel="noopener noreferrer" class="nav-link external">
  service-monitor
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://vuechart.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @guoqzuo/vue-chart
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://zuoblog.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  zuo-blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="http://www.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/zuoxiaobai" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/daily/" aria-current="page" class="sidebar-link">技术日常记录</a></li><li><a href="/daily/2021-05.html" class="sidebar-link">2021年05月技术日常</a></li><li><a href="/daily/2021-04.html" class="sidebar-link">2021年04月技术日常</a></li><li><a href="/daily/2021-03.html" class="sidebar-link">2021年03月技术日常</a></li><li><a href="/daily/2021-02.html" class="sidebar-link">2021年02月技术日常</a></li><li><a href="/daily/2020-12.html" class="sidebar-link">2020年12月技术日常</a></li><li><a href="/daily/2020-11.html" class="sidebar-link">2020年11月技术日常</a></li><li><a href="/daily/2020-10.html" class="sidebar-link">2020年10月技术日常</a></li><li><a href="/daily/2020-09.html" class="sidebar-link">2020年09月技术日常</a></li><li><a href="/daily/2020-08.html" class="sidebar-link">2020年08月技术日常</a></li><li><a href="/daily/2020-07.html" class="sidebar-link">2020年07月技术日常</a></li><li><a href="/daily/2020-06.html" class="sidebar-link">2020年06月技术日常</a></li><li><a href="/daily/2020-05.html" class="sidebar-link">2020年05月技术日常</a></li><li><a href="/daily/2020-04.html" aria-current="page" class="active sidebar-link">2020年04月技术日常</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_2020-04-29-周三" class="sidebar-link">2020/04/29 周三</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#ui设计视觉差问题-总感觉没有居中对齐时怎么办" class="sidebar-link">UI设计视觉差问题，总感觉没有居中对齐时怎么办</a></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#关于商品价格有小数点时精度异常的问题" class="sidebar-link">关于商品价格有小数点时精度异常的问题</a></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_0-9数字中-每个数字的宽度是多少" class="sidebar-link">0-9数字中，每个数字的宽度是多少</a></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#使用ssh方式提交或拉取代码的步骤" class="sidebar-link">使用ssh方式提交或拉取代码的步骤</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_2020-04-27-周一" class="sidebar-link">2020/04/27 周一</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#git删除远程分支与本地分支" class="sidebar-link">git删除远程分支与本地分支</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_2020-04-26-周日" class="sidebar-link">2020/04/26 周日</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#object-observe-与proxy" class="sidebar-link">Object.observe()与Proxy</a></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#vscode-eslint插件新版本保存自动fix配置变更" class="sidebar-link">vscode ESLint插件新版本保存自动fix配置变更</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_2020-04-24-周五" class="sidebar-link">2020/04/24 周五</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#v-model的理解" class="sidebar-link">v-model的理解</a></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#腾讯云慧眼架构相关设计" class="sidebar-link">腾讯云慧眼架构相关设计</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_2020-04-22-周三" class="sidebar-link">2020/04/22 周三</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#箭头函数和普通的函数指向问题" class="sidebar-link">箭头函数和普通的函数指向问题</a></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#element-最多只能选择一个月范围" class="sidebar-link">element 最多只能选择一个月范围</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_2020-04-20-周一" class="sidebar-link">2020/04/20 周一</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#nginx配置二级域名解析目录" class="sidebar-link">nginx配置二级域名解析目录</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_2020-04-19-周日" class="sidebar-link">2020/04/19 周日</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#向百度站长主动推送站点url" class="sidebar-link">向百度站长主动推送站点url</a></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#uni-app跨域问题接口代理配置" class="sidebar-link">uni-app跨域问题接口代理配置</a></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#uni-request封装为类似axios的请求对象" class="sidebar-link">uni.request封装为类似axios的请求对象</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_2020-04-17-周五" class="sidebar-link">2020/04/17 周五</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#text-align-justify-两端对齐不生效的问题" class="sidebar-link">text-align: justify 两端对齐不生效的问题</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_2020-04-16-周四" class="sidebar-link">2020/04/16 周四</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#vue-router-跳转的问题" class="sidebar-link">vue-router 跳转的问题</a></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#element-时间选择器限制选中日期" class="sidebar-link">element 时间选择器限制选中日期</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_2020-04-14-周二" class="sidebar-link">2020/04/14 周二</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#css-利用-perspective-画梯形" class="sidebar-link">css 利用 perspective 画梯形</a></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#git无法检测到文件名大小写的更改" class="sidebar-link">git无法检测到文件名大小写的更改</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_2020-04-12-周日" class="sidebar-link">2020/04/12 周日</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#vue页面中监听路由改变的几种方法" class="sidebar-link">vue页面中监听路由改变的几种方法</a></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#全局引入组件vue-use-与vue-component" class="sidebar-link">全局引入组件Vue.use()与Vue.component()</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_2020-04-11-周六" class="sidebar-link">2020/04/11 周六</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#iconfont通过设置class来显示图标内部做了那些操作" class="sidebar-link">iconfont通过设置class来显示图标内部做了那些操作</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_2020-04-10-周五" class="sidebar-link">2020/04/10 周五</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#json-stringify的非常规用法以及内部执行顺序" class="sidebar-link">JSON.stringify的非常规用法以及内部执行顺序</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_2020-04-09-周四" class="sidebar-link">2020/04/09 周四</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#array-prototype-fill-填充引用类型值时的坑" class="sidebar-link">Array.prototype.fill()填充引用类型值时的坑</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_2020-04-08-周三" class="sidebar-link">2020/04/08 周三</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#failed-to-resolve-directive-infinite-scroll" class="sidebar-link">Failed to resolve directive: infinite-scroll</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_2020-04-07-周二" class="sidebar-link">2020/04/07 周二</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#怎么将date数据转为tz格式的字符串" class="sidebar-link">怎么将Date数据转为TZ格式的字符串</a></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#date-prototype-tolocalestring-的坑" class="sidebar-link">Date.prototype.toLocaleString()的坑</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_2020-04-06-周一" class="sidebar-link">2020/04/06 周一</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#xx-com重定向到www-xx-com方式" class="sidebar-link">xx.com重定向到www.xx.com方式</a></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#什么是bfc" class="sidebar-link">什么是BFC</a></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#怎么用一行css代码将整个站点变灰" class="sidebar-link">怎么用一行css代码将整个站点变灰</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_2020-04-05-周日" class="sidebar-link">2020/04/05 周日</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#uni-app开发体验怎么样" class="sidebar-link">uni-app开发体验怎么样？</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_2020-04-04-周六" class="sidebar-link">2020/04/04 周六</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#uni-设置tabbar后没显示" class="sidebar-link">uni 设置tabbar后没显示</a></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#uni-app开发需要了解的事情" class="sidebar-link">uni-app开发需要了解的事情</a></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#常用的-gitignore-配置" class="sidebar-link">常用的.gitignore 配置</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_2020-04-03-周五" class="sidebar-link">2020/04/03 周五</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#vue-cli项目使用-开头的路径" class="sidebar-link">vue-cli项目使用@开头的路径</a></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#mac-pro-retina屏两倍图" class="sidebar-link">mac pro retina屏两倍图</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#_2020-04-01-周三" class="sidebar-link">2020/04/01 周三</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-04.html#grid布局问题" class="sidebar-link">grid布局问题</a></li><li class="sidebar-sub-header"><a href="/daily/2020-04.html#canvas怎么绘制环形进度条" class="sidebar-link">canvas怎么绘制环形进度条</a></li></ul></li></ul></li><li><a href="/daily/2020-03.html" class="sidebar-link">2020年03月技术日常</a></li><li><a href="/daily/2020-02.html" class="sidebar-link">2020年02月技术日常</a></li><li><a href="/daily/2020-01.html" class="sidebar-link">2020年01月技术日常</a></li><li><a href="/daily/2019-12.html" class="sidebar-link">2019年12月技术日常</a></li><li><a href="/daily/2019-11.html" class="sidebar-link">2019年11月技术日常</a></li><li><a href="/daily/2019-10.html" class="sidebar-link">2019年10月技术日常</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2020年04月技术日常"><a href="#_2020年04月技术日常" class="header-anchor">#</a> 2020年04月技术日常</h1> <h2 id="_2020-04-29-周三"><a href="#_2020-04-29-周三" class="header-anchor">#</a> 2020/04/29 周三</h2> <h3 id="ui设计视觉差问题-总感觉没有居中对齐时怎么办"><a href="#ui设计视觉差问题-总感觉没有居中对齐时怎么办" class="header-anchor">#</a> UI设计视觉差问题，总感觉没有居中对齐时怎么办</h3> <p>放大n倍，截图画框，看是否在一条水平线上。</p> <p>关于UI设计视觉差相关知识点</p> <p><strong>测量面积和视觉面积</strong></p> <ul><li>视觉体量是人眼如何察觉物体的大小和感觉，不需要等同于物体的实际像素值</li> <li>圆、菱形、三角形和其他非方形形状为了与方形形状保持一样的视觉大小，应适当放大</li> <li>图标区域应为视觉平衡保留一定的空间，这一点对保持同系列图标视觉平衡很重要。(这也是iconfont上为什么有的图标周围有留白，而有的图标没有留白的原因)</li></ul> <p><strong>不同形状之间的对齐</strong></p> <ul><li>具有锐利边缘的形状应该更大，以便于其相邻的矩形对象保持视觉平衡</li> <li>大写字母对齐是一种有效且被广泛运用的方法，用于文本和按钮背景对齐</li> <li>将三角型图标正确放置按钮中的一种有效办法是，将其圈住并使此圈与背景对齐。</li></ul> <p><strong>视觉圆角</strong></p> <ul><li>几何圆角看起来假是因为人眼可以清楚地看到直线突然变成曲线的点</li> <li>视觉正确的圆角需要一些特殊的算法或手动调整形状</li></ul> <p>参考：<a href="https://www.sohu.com/a/328932717_612419" target="_blank" rel="noopener noreferrer">设计师必须知道，什么是视觉差对比？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="关于商品价格有小数点时精度异常的问题"><a href="#关于商品价格有小数点时精度异常的问题" class="header-anchor">#</a> 关于商品价格有小数点时精度异常的问题</h3> <p>在价格显示时，如果有小数位，由于js浮点数的缺陷，累加的价格可能会有经度差，我们直接 toFixed(2) 即可。一般不会超过3位小数点，且精度异常一般都是小数点很多位以后，注意js小数点运算时一定要注意这个问题，确定要保留几位小数点</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">37998.91</span> <span class="token operator">+</span> <span class="token number">0.01</span>
<span class="token comment">// 37998.920000000006</span>

<span class="token number">0.1</span><span class="token operator">+</span><span class="token number">0.2</span>
<span class="token number">0.30000000000000004</span>
</code></pre></div><h3 id="_0-9数字中-每个数字的宽度是多少"><a href="#_0-9数字中-每个数字的宽度是多少" class="header-anchor">#</a> 0-9数字中，每个数字的宽度是多少</h3> <p>什么数字最宽，以字体PingFangSC-Regular，大小12px为例</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">10</span>个0 <span class="token number">72</span>
<span class="token number">10</span>个1 <span class="token number">48.13</span>
<span class="token number">10</span>个2 <span class="token number">72</span>
<span class="token number">10</span>个3 <span class="token number">72</span>
<span class="token number">10</span>个4 <span class="token number">72</span>
<span class="token number">10</span>个5 <span class="token number">72</span>
<span class="token number">10</span>个6 <span class="token number">72</span>
<span class="token number">10</span>个7 <span class="token number">65.64</span>
<span class="token number">10</span>个8 <span class="token number">72</span>
<span class="token number">10</span>个9 <span class="token number">72</span>
</code></pre></div><p>总结，一般宽度 1 &lt; 7 &lt; 0,2,3,4,5,6,8,9  但不排除其他字体没有差异，同理我们可以使用这种方法看26个字母里每个字母的占用宽度为多少</p> <h3 id="使用ssh方式提交或拉取代码的步骤"><a href="#使用ssh方式提交或拉取代码的步骤" class="header-anchor">#</a> 使用ssh方式提交或拉取代码的步骤</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 使用git平台邮箱账号生成公钥和私钥，全部默认、回车</span>
ssh-keygen -t rsa -C <span class="token string">&quot;xxx@qq.com&quot;</span>

<span class="token comment"># 执行成功过后会在 ~/.ssh 目录下生成 id_rsa.pub 和 id_rsa 两个文件，一个公钥、一个私钥</span>

<span class="token comment"># 查看公钥，并配置到对应的git平台里</span>
<span class="token function">cat</span> ~/.ssh/id_rsa.pub

<span class="token comment"># 测试配置是否成功</span>
<span class="token function">ssh</span> -T git@xxx.com 

<span class="token comment"># 拉取 </span>
<span class="token function">git</span> clone git@xxx.com/xxxproject
</code></pre></div><p>参考：<a href="https://blog.csdn.net/u013778905/article/details/83501204" target="_blank" rel="noopener noreferrer">GitHub如何配置SSH Key<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2020-04-27-周一"><a href="#_2020-04-27-周一" class="header-anchor">#</a> 2020/04/27 周一</h2> <h3 id="git删除远程分支与本地分支"><a href="#git删除远程分支与本地分支" class="header-anchor">#</a> git删除远程分支与本地分支</h3> <p>删除远程仓库的分支，可以先查看当前所有分支</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> branch -a <span class="token comment"># 查看当前分</span>
<span class="token comment"># file_backup</span>
<span class="token comment"># master</span>
<span class="token comment"># remotes/origin/HEAD -&gt; origin/master</span>
<span class="token comment"># remotes/origin/file_backup</span>
</code></pre></div><p>删除远程的file_backup分支</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> push origin --delete file_backup
</code></pre></div><p>删除本地分支</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> branch -d file_backup
</code></pre></div><p>参考：<a href="https://www.cnblogs.com/luosongchao/p/3408365.html" target="_blank" rel="noopener noreferrer">git删除远程分支和本地分支<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2020-04-26-周日"><a href="#_2020-04-26-周日" class="header-anchor">#</a> 2020/04/26 周日</h2> <h3 id="object-observe-与proxy"><a href="#object-observe-与proxy" class="header-anchor">#</a> Object.observe()与Proxy</h3> <p>Object.observe()是js实现观察者设计模式的一个API，现在已废弃，由Proxy取代，但Proxy不支持IE。</p> <p>它用于异步地监视一个对象的修改。当对象属性被修改时，方法的回调函数会提供一个有序的修改流。</p> <p>在vue2.0的双向绑定的实现里，会遍历data对象，通过建立对应的getter/setter访问器属性来追踪属性变化。Vue 3.0里已使用Proxy来追踪属性变化</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 截取至vue 3.0相关代码</span>
<span class="token comment">// https://github.com/vuejs/vue-next/blob/40bdd51bf5ec24b8e3faab3e1cb4d91b076e456a/packages/reactivity/src/reactive.ts#L99</span>
<span class="token keyword">function</span> <span class="token function">createReactiveObject</span><span class="token punctuation">(</span>
  <span class="token parameter">target<span class="token operator">:</span> unknown<span class="token punctuation">,</span>
  toProxy<span class="token operator">:</span> WeakMap<span class="token operator">&lt;</span>any<span class="token punctuation">,</span> any<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  toRaw<span class="token operator">:</span> WeakMap<span class="token operator">&lt;</span>any<span class="token punctuation">,</span> any<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  baseHandlers<span class="token operator">:</span> ProxyHandler<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  collectionHandlers<span class="token operator">:</span> ProxyHandler<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span></span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isObject</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>__DEV__<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">value cannot be made reactive: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">String</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> target
  <span class="token punctuation">}</span>
  <span class="token comment">// target already has corresponding Proxy</span>
  <span class="token keyword">let</span> observed <span class="token operator">=</span> toProxy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>observed <span class="token operator">!==</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> observed
  <span class="token punctuation">}</span>
  <span class="token comment">// target is already a Proxy</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>toRaw<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> target
  <span class="token punctuation">}</span>
  <span class="token comment">// only a whitelist of value types can be observed.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">canObserve</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> target
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> handlers <span class="token operator">=</span> collectionTypes<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span>
    <span class="token operator">?</span> collectionHandlers
    <span class="token operator">:</span> baseHandlers
  observed <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handlers<span class="token punctuation">)</span>
  toProxy<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> observed<span class="token punctuation">)</span>
  toRaw<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>observed<span class="token punctuation">,</span> target<span class="token punctuation">)</span>
  <span class="token keyword">return</span> observed
<span class="token punctuation">}</span>
</code></pre></div><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/observe" target="_blank" rel="noopener noreferrer">Object.observe() | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank" rel="noopener noreferrer">Proxy | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://cn.vuejs.org/v2/guide/reactivity.html" target="_blank" rel="noopener noreferrer">vue2.0 深入响应式原理 | vue官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/vuejs/vue-next/tree/40bdd51bf5ec24b8e3faab3e1cb4d91b076e456a/packages/reactivity" target="_blank" rel="noopener noreferrer">vue3.0 数据响应式相关源码 | github <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="vscode-eslint插件新版本保存自动fix配置变更"><a href="#vscode-eslint插件新版本保存自动fix配置变更" class="header-anchor">#</a> vscode ESLint插件新版本保存自动fix配置变更</h3> <p>最近换了个办公电脑，重装了vscode，发现eslint的配置和以前不一样了，新版本废弃了原先的一些配置，配置更简洁了，先来看看老的配置</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;edit.formatOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>   <span class="token comment">// 取消自带fix，使用eslint自动保存fix</span>
  <span class="token string">&quot;eslint.autoFixOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 每次保存的时候将代码按eslint格式进行修复</span>
  <span class="token string">&quot;eslint.validate&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;javascript&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;javascriptreact&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token string">&quot;language&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;autoFix&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;html&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span> 
</code></pre></div><p>最新配置vscode自动fix</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;editor.codeActionsOnSave&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;source.fixAll&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The old <code>eslint.autoFixOnSave</code> setting is now deprecated and can safely be removed</p> <p>ESLint插件检测、自动修复机制，依赖当前目录下的package.json对应的eslint配置，vue项目、node项目、react项目、ts支持都对应不同的npm依赖包，比较难以理解，我打算研究一下这一块的内容，题目已取好：&quot;彻底理解ESLint在vscode中的检测机制/自动fix机制&quot;，待有时间好好研究下</p> <p>当我们从远程仓库拉取vue项目代码后，在没有npm install的情况下，vscode的eslint插件不会起任何作用，需要npm install 安装必要的插件后，重启vscode，才会生效</p> <h2 id="_2020-04-24-周五"><a href="#_2020-04-24-周五" class="header-anchor">#</a> 2020/04/24 周五</h2> <h3 id="v-model的理解"><a href="#v-model的理解" class="header-anchor">#</a> v-model的理解</h3> <p>在前面讨论过，使用v-model的场景，来看一个实例，假如我们需要封装一个弹窗组件需要引入el-dialog组件</p> <p>首先，我们来看看我们写好这个组件后应该怎么调用，通过show这个参数来控制dialog显示或隐藏</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-dialog</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showDialog<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showDialog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">MyDialog</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/components/my-dialog'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      showDialog<span class="token operator">:</span> flase
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>来看看实现，这里看element官方demo里在visible属性上用了.sync修饰符，有什么用呢？</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- https://element.eleme.cn/#/zh-CN/component/dialog --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-dialog</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>提示<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:visible.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialogVisible<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      内容
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog-footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialogVisible = false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>取 消<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialogVisible = false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>确 定<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-dialog</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>看来看源码</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- https://github.com/ElemeFE/element/blob/dev/packages/dialog/src/component.vue --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog-fade<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@after-enter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>afterEnter<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@after-leave</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>afterLeave<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
      <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>visible<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>el-dialog__wrapper<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@click.self</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleWrapperClick<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- .... --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// ...</span>
<span class="token function">hide</span><span class="token punctuation">(</span><span class="token parameter">cancel</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>cancel <span class="token operator">!==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'update:visible'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>closed <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//... </span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>可以看到关闭弹窗时，使用了</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'update:visible'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>修改了父组件传入的visible的值，没有使用v-model, 所以在el-dialog传入visible属性的时候加了.sync修饰符</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-dialog</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>提示<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:visible.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialogVisible<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>vue里面有介绍这种方法可以使子组件可以修改父组件的值，而不用多加一个事件参数，参见文档 <a href="https://cn.vuejs.org/v2/guide/components-custom-events.html#sync-%E4%BF%AE%E9%A5%B0%E7%AC%A6" target="_blank" rel="noopener noreferrer">.sync修饰符<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>但感觉这个接口设计的有点鸡肋，v-model不香吗？</p> <p>子组件封装dialog的特殊之处在于，通过showDialog显示子组件的dialog后，子组件点击关闭后会自己关闭弹窗，这时 父组件的showDialog还是true，因此并不能通过show参数来控制显示，我们需要在子组件点击dialog关闭时，触发一个事件给父组件，从而修改对应的值</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-dialog</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showDialog<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showDialog<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showDialog = false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这里当子组件关闭dialog时$emit一个close事件来手动将showDialog设置为false，以到达父组件可以通过showDialog来打开或关闭dialog的目的，我们可以来看看子组件的实现</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-dialog</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>提示<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:visible.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialogVisible<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      内容
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog-footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialogVisible = false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>取 消<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialogVisible = false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>确 定<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-dialog</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 注意如果我们把show直接设置给el-dialog的visible属性，</span>
<span class="token comment">// el-dialog内部在关闭dialog时会触发一次 this.show = false操作</span>
<span class="token comment">// 而show是父组件通过props单向传递的值，改动会提示错误，我们需要使用computed属性来中转</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    show<span class="token operator">:</span> <span class="token punctuation">{</span> 
      type<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
      required<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    dialogVisible<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>show <span class="token comment">// 父组件向下传递show的值时通过计算属性赋值到dialogVisible</span>
      <span class="token punctuation">}</span>
      <span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 当dialog关闭时，会触发this.dialogVisible = false，从而来到这个方法，我们在这里将关闭事件同步给父组件</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>上面的例子已经实现了功能，但缺点是，要使用两个参数，一个show属性，一个close事件。v-model就是一种简化参数的语法糖</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-dialog</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showDialog<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showDialog<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showDialog = false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 等价于 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-dialog</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showDialog<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showDialog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  model<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 新增了model属性，用来指定v-model赋值的属性名，以及改动父组件对应值需要$emit的事件名称</span>
    prop<span class="token operator">:</span> <span class="token string">'show'</span><span class="token punctuation">,</span>
    event<span class="token operator">:</span> <span class="token string">'close'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 其他后面的逻辑不变</span>
  props
    show<span class="token operator">:</span> <span class="token punctuation">{</span> 
      type<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
      required<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ....</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>关于v-model的文档，参考 <a href="https://cn.vuejs.org/v2/api/#model" target="_blank" rel="noopener noreferrer">v-model | Vue API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>综上，v-model比.async更优雅，而在vue的refs里，也有建议使用v-model代替.async修饰符，且已经merge到了vue 3.0版本，相关文档 <a href="https://github.com/vuejs/rfcs/pull/8" target="_blank" rel="noopener noreferrer">Replace v-bind's .sync with a v-model argument<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="腾讯云慧眼架构相关设计"><a href="#腾讯云慧眼架构相关设计" class="header-anchor">#</a> 腾讯云慧眼架构相关设计</h3> <p>昨晚看了一个关于腾讯云慧眼架构相关的分享，由于之前参与过该项目的一些开发，对业务比较了解。结合业务场景再来看构架设计，会有一种豁然开朗的感觉，下面对一些构架方面比较好的点做一个总结</p> <ul><li>高可用，两地三中心、异常监控上报、弹性伸缩</li> <li>资源有限时服务降级来提高QPS：例如，常规情况会抽取视频的10个帧图片，QPS的瓶颈在这，如果资源有限，通过服务降级，减少抽取的帧，每次抽取3-4帧，极大提高QPS</li> <li>单个客户流量暴增时，分配独立资源池，不影响其他客户服务
<ul><li>客户提前告知，提前分配独立资源池</li> <li>未提前告知，就需要服务具备自动告警功能，怎么检测流量异常，什么时候提前通知，需要根据情况使用特定的策略。客户流量激增时，告警邮件、短信通知相关负责人，找客户确定是正常流量还是异常流量，如果异常流量，限制QPS，拒绝大部分服务。如果是正常流程，分配资源、快速扩容</li></ul></li> <li>高扩展，可配置化服务，满足各种差异化需求</li> <li>低耦合，服务拆分。新增功能特性时，减少各个服务需要做的改动；发布某个模块的功能时，对其他模块不会有干扰</li> <li>低成本方式，服务兜底，便宜的证照库可能缺少一些用户身份信息，当出现这种情况会兜底去查询价格高一点的证照库，节约成本的情况下，保证了体验</li> <li>提高成功率，多引擎融合策略，多个验证引擎识别成功率不一样，取多个引擎综合结果成功率会上升4-5个点</li> <li>引擎服务接口hang，怎么保证服务ok，监测引擎异常次数，切换处理引擎</li></ul> <p>新引擎功能接入线上前怎么测试？</p> <ul><li>灰度策略，为某个客户灰度5%的流量，看识别结果</li> <li>旁路策略，比灰度更好，直接copy一份某个用户的流量请求新引擎版本的服务，得出结果，就是用户请求发送到后台后，后台除了正常响应当前稳定版本验证的结果外，再把请求转发一份给测试引擎，这个结果是不会给到用户的。仅用来比对成功率。</li></ul> <p>引擎自动化评测策略</p> <ul><li>正、负样本(手工标注)，多纬度评测</li> <li>引擎在不同地域样本里的表现</li></ul> <h2 id="_2020-04-22-周三"><a href="#_2020-04-22-周三" class="header-anchor">#</a> 2020/04/22 周三</h2> <h3 id="箭头函数和普通的函数指向问题"><a href="#箭头函数和普通的函数指向问题" class="header-anchor">#</a> 箭头函数和普通的函数指向问题</h3> <p>这里复习下基础知识</p> <ol><li>普通函数 <strong>在执行函数的时候</strong> 绑定this</li> <li>箭头函数 <strong>在函数定义的时候</strong> 绑定this，this继承自父执行上下文</li></ol> <h3 id="element-最多只能选择一个月范围"><a href="#element-最多只能选择一个月范围" class="header-anchor">#</a> element 最多只能选择一个月范围</h3> <p>点击某个时间后会触发 pickerOptions里的 onPick函数，获取当前点击的时间，然后计算时间disabled前后一个月的时间</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// &lt;el-date-picker v-model=&quot;date&quot; type=&quot;daterange&quot; :picker-options=&quot;pickerOptions&quot;&gt;</span>
<span class="token comment">// &lt;/el-date-picker&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> pickerOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token comment">// 选中时间时触发 element第一次选中后会赋值给minDate</span>
      <span class="token function-variable function">onPick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> maxDate<span class="token punctuation">,</span> minDate <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_curClickDate <span class="token operator">=</span> minDate<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 第二次选中后，按两次点击的时间顺序依次赋值给 minDate、maxDate</span>
        <span class="token comment">// 且面板会关闭，这时要清空_curClickDate，供下一次使用</span>
        maxDate <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_curClickDate <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">disabledDate</span><span class="token operator">:</span> <span class="token parameter">time</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> _curClickDate <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
        <span class="token keyword">const</span> gap <span class="token operator">=</span> <span class="token number">31</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">3600</span> <span class="token operator">*</span> <span class="token number">1000</span> <span class="token comment">// 一个月，按31天算</span>
        <span class="token keyword">const</span> t <span class="token operator">=</span> time<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> start <span class="token operator">=</span> _curClickDate <span class="token operator">-</span> gap
        <span class="token keyword">let</span> end <span class="token operator">=</span> _curClickDate <span class="token operator">+</span> gap
        <span class="token keyword">return</span> t <span class="token operator">&gt;</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>_curClickDate <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t <span class="token operator">&gt;</span> end <span class="token operator">||</span> t <span class="token operator">&lt;</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      date<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      pickerOptions<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>具体demo：<a href="https://zuoxiaobai.github.io/fedemo/src/DebugDemo/element%E6%97%B6%E9%97%B4%E9%80%89%E6%8B%A9/" target="_blank" rel="noopener noreferrer">在线体验<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://github.com/zuoxiaobai/fedemo/blob/master/src/DebugDemo/element%E6%97%B6%E9%97%B4%E9%80%89%E6%8B%A9/index.html" target="_blank" rel="noopener noreferrer">github demo源码地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2020-04-20-周一"><a href="#_2020-04-20-周一" class="header-anchor">#</a> 2020/04/20 周一</h2> <h3 id="nginx配置二级域名解析目录"><a href="#nginx配置二级域名解析目录" class="header-anchor">#</a> nginx配置二级域名解析目录</h3> <p>最近看百度统计，有100多个河南的新ip访问，有些异常，而且都是访问的api.zuo11.com，最近两周明细里看到的ip段很有规律</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">111.7</span><span class="token number">.100</span><span class="token number">.16</span> <span class="token operator">-</span> <span class="token number">111.7</span><span class="token number">.100</span><span class="token number">.27</span>
<span class="token number">36.99</span><span class="token number">.136</span><span class="token number">.131</span> <span class="token operator">-</span> <span class="token number">36.99</span><span class="token number">.136</span><span class="token number">.143</span>
</code></pre></div><p>百度统计有个缺点，就是仅提供两周内的访问明细，最多5000条，后面有必要做一个自己的用户行为记录系统</p> <p>之前我将 https://api.zuo11.com 解析到了一个node服务用于https接口，但发现 http://api.zuo11.com 走的80端口，会直接访问zuo11.com，我仿照zuo11.com 301重定向到 www.zuo11.com 的方式写了下面的配置，但发现不生效，当时也没管。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>$host <span class="token operator">=</span> <span class="token string">'api.zuo11.com'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  rewrite <span class="token operator">^</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">)</span>$ https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>api<span class="token punctuation">.</span>zuo11<span class="token punctuation">.</span>com<span class="token operator">/</span>$<span class="token number">1</span> permanent<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>现在暴露出问题来了，就必须解决，让 http://api.zuo11.com 指向其他目录，发了好长时间才配置ok，以下是相关具体配置，省略了https配置</p> <div class="language-js extra-class"><pre class="language-js"><code>server <span class="token punctuation">{</span>
  listen       <span class="token number">80</span><span class="token punctuation">;</span>
  server_name  zuo11<span class="token punctuation">.</span>com www<span class="token punctuation">.</span>zuo11<span class="token punctuation">.</span>com<span class="token punctuation">;</span>
  charset utf<span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>$host <span class="token operator">=</span> <span class="token string">'zuo11.com'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    rewrite <span class="token operator">^</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">)</span>$ http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>zuo11<span class="token punctuation">.</span>com<span class="token operator">/</span>$<span class="token number">1</span> permanent<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  location <span class="token operator">/</span> <span class="token punctuation">{</span>
      root   <span class="token constant">C</span><span class="token operator">:</span>\Users\Administrator\Desktop\dist<span class="token punctuation">;</span>
      index  index<span class="token punctuation">.</span>html index<span class="token punctuation">.</span>htm<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

server <span class="token punctuation">{</span>
  listen   <span class="token number">80</span><span class="token punctuation">;</span>
  server_name  demo<span class="token punctuation">.</span>zuo11<span class="token punctuation">.</span>com<span class="token punctuation">;</span>
  charset  utf<span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">;</span>
  location <span class="token operator">/</span> <span class="token punctuation">{</span>
        root  <span class="token constant">C</span><span class="token operator">:</span>\Users\Administrator\Desktop\demo_dist<span class="token punctuation">;</span>
        index  index<span class="token punctuation">.</span>html index<span class="token punctuation">.</span>htm<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

server <span class="token punctuation">{</span>
  listen   <span class="token number">80</span><span class="token punctuation">;</span>
  server_name  api<span class="token punctuation">.</span>zuo11<span class="token punctuation">.</span>com<span class="token punctuation">;</span>
  charset  utf<span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">;</span>
  location <span class="token operator">/</span> <span class="token punctuation">{</span>
        root  <span class="token constant">C</span><span class="token operator">:</span>\Users\Administrator\Desktop\api_dist<span class="token punctuation">;</span>
        index  index<span class="token punctuation">.</span>html index<span class="token punctuation">.</span>htm<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>其实就是多写一个server，把二级域名指向其他目录。中间有个坑的地方就是windows使用nginx时，关闭nginx运行的terminal后，进程不一定关闭，需要打开任务管理器，找nginx相关进程删掉，这样才彻底。</p> <h2 id="_2020-04-19-周日"><a href="#_2020-04-19-周日" class="header-anchor">#</a> 2020/04/19 周日</h2> <h3 id="向百度站长主动推送站点url"><a href="#向百度站长主动推送站点url" class="header-anchor">#</a> 向百度站长主动推送站点url</h3> <p>之前提交链接都是手动将url粘贴到输入框提交。这次试了下curl方式提交还是很方便的</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 先将要提交的url存放到 urls.txt 里</span>
<span class="token function">vi</span> urls.txt

<span class="token comment"># 查看</span>
<span class="token function">cat</span> urls.txt 
http://www.zuo11.com/blog/2019/11/v-if_filters.html
http://www.zuo11.com/blog/2019/12/web_storage.html
http://www.zuo11.com/blog/2019/12/phantomjs-prebuilt.html
http://www.zuo11.com/blog/2019/12/node_sleep_module.html
http://www.zuo11.com/blog/2019/12/git_clone_timeout.html
http://www.zuo11.com/blog/2019/11/git_push_branch.html
http://www.zuo11.com/blog/2019/12/npm_resource.html

<span class="token comment"># 确定内容没问题后提交，对应的链接在百度站长提交链接哪里会自动生成</span>
<span class="token function">curl</span> -H <span class="token string">'Content-Type:text/plain'</span> --data-binary @urls.txt <span class="token string">&quot;http://data.zz.baidu.com/urls?site=www.zuo11.com&amp;token=xxxxxxx&quot;</span>

<span class="token comment"># 执行后返回推送接口，实时推送成功</span>
<span class="token punctuation">{</span><span class="token string">&quot;remain&quot;</span>:99993,<span class="token string">&quot;success&quot;</span>:7<span class="token punctuation">}</span>
</code></pre></div><h3 id="uni-app跨域问题接口代理配置"><a href="#uni-app跨域问题接口代理配置" class="header-anchor">#</a> uni-app跨域问题接口代理配置</h3> <p>在uni-app中有一个manifest.json配置文件，里面的h5配置下有默认的devServer选项，和vue.config.js里的代理配置一致，都是使用的webpack的代理功能，默认配置为</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;h5&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;devServer&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;https&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token string">&quot;port&quot;</span> <span class="token operator">:</span> <span class="token number">80</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>根据具体情况，具体配置，下面是一个示范配置</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;h5&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;devServer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">8086</span><span class="token punctuation">,</span>
    <span class="token string">&quot;disableHostCheck&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string">&quot;proxy&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;/&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://xxxx:8086/&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;changeOrigin&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token string">&quot;secure&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这里要注意的是，<strong>要在manifest.json文件配置，而不是pages.json里，每次修改配置后记得点击重新运行到浏览器，如果不生效关闭再开启HBuildeX，多试试</strong></p> <h3 id="uni-request封装为类似axios的请求对象"><a href="#uni-request封装为类似axios的请求对象" class="header-anchor">#</a> uni.request封装为类似axios的请求对象</h3> <p>在uni-app中为了抹平各平台的差异，官方提供了uni.request方法，和微信小程序的请求方法类似，一般这类请求是比较通用的，如果直接使用会有大量的重复代码，于是做了简单的封装，来看看代码</p> <p>axios.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @description 将uni.request封装成简单的aixos 
 * @author guoqzuo
 * @example
 * axios.create(config) 根据配置，创建axios实例
 * axios.get(url[, config]) get请求
 * axios.post(url[, data[, config]]) post请求
 * config支持配置项
 * baseURL: &quot;https://some-domain.com/api/&quot;, // baseURL
 * timeout: 1000, // 超时时间 
 * headers: { &quot;X-Custom-Header&quot;: &quot;foobar&quot; }, // 请求头
 * method: '' // 请求方法
 * url: '', // 请求url
 * data: '' // post 请求的data
 * toastErrorMsg 是否用toast显示错误信息，默认为是
 * showLoading  是否显示loading，默认为是
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Axios</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 全局配置，返回一个axios实例</span>
  <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span>
  <span class="token punctuation">}</span>

  <span class="token function">get</span><span class="token punctuation">(</span>url <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">,</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 暂不支持params</span>
    Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">,</span> config<span class="token punctuation">,</span> <span class="token punctuation">{</span> url<span class="token punctuation">,</span> method<span class="token operator">:</span> <span class="token string">'GET'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_request</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">post</span><span class="token punctuation">(</span>url <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">,</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">,</span> config<span class="token punctuation">,</span> <span class="token punctuation">{</span> url<span class="token punctuation">,</span> method<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span> data <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_request</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// uni.request 封装</span>
  <span class="token function">_request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> <span class="token punctuation">{</span> baseURL<span class="token punctuation">,</span> timeout<span class="token punctuation">,</span> headers<span class="token punctuation">,</span> method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> toastErrorMsg<span class="token punctuation">,</span> showLoading<span class="token punctuation">,</span> successCode <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>config
      showLoading <span class="token operator">&amp;&amp;</span> uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        mask<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token keyword">let</span> <span class="token punctuation">[</span>error<span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        data<span class="token punctuation">,</span>
        method<span class="token punctuation">,</span>
        header<span class="token operator">:</span> headers<span class="token punctuation">,</span>
        timeout<span class="token punctuation">,</span>
        url<span class="token operator">:</span> baseURL <span class="token operator">+</span> url
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token comment">// 请求完成后做 complete 该执行的内容</span>
      showLoading <span class="token operator">&amp;&amp;</span> uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 判断请求是否成功，这里很奇怪，官方把error直接返回了，类似于node的callback</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_showToast</span><span class="token punctuation">(</span>toastErrorMsg<span class="token punctuation">,</span> error<span class="token punctuation">.</span>errMsg<span class="token punctuation">)</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>errMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// statusCode === 200</span>
      <span class="token keyword">let</span> <span class="token punctuation">{</span> statusCode<span class="token punctuation">,</span> header<span class="token punctuation">,</span> data<span class="token operator">:</span> resData <span class="token punctuation">}</span> <span class="token operator">=</span> res<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>resData <span class="token operator">||</span> <span class="token keyword">typeof</span> resData <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token string">&quot;接口异常，data数据出错&quot;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_showToast</span><span class="token punctuation">(</span>toastErrorMsg<span class="token punctuation">,</span> msg<span class="token punctuation">)</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>


      <span class="token keyword">let</span> <span class="token punctuation">{</span> code <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">,</span> msg <span class="token operator">=</span> <span class="token string">''</span> <span class="token punctuation">}</span> <span class="token operator">=</span> resData<span class="token punctuation">;</span>
      <span class="token comment">// 请求成功，且状态码ok</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span> <span class="token operator">===</span> successCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>resData<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_showToast</span><span class="token punctuation">(</span>toastErrorMsg<span class="token punctuation">,</span> msg<span class="token punctuation">)</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 根据toastErrorMsg判断是否需要显示错误信息</span>
  <span class="token function">_showToast</span><span class="token punctuation">(</span><span class="token parameter">toastErrorMsg<span class="token punctuation">,</span> msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    toastErrorMsg <span class="token operator">&amp;&amp;</span> uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token operator">:</span> msg<span class="token punctuation">,</span>
      icon<span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
      image<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      duration<span class="token operator">:</span> <span class="token number">1500</span><span class="token punctuation">,</span>
      mask<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> axios <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Axios</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> axios<span class="token punctuation">;</span>
</code></pre></div><p>配置axios service.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// service.js</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'./utils/axios'</span>

<span class="token keyword">const</span> axiosInstance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  baseURL<span class="token operator">:</span> <span class="token string">&quot;/index.php&quot;</span><span class="token punctuation">,</span>
  successCode<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 后端自己定义的成功或的错误码</span>
  toastErrorMsg<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否用toast显示错误信息，默认为是</span>
  showLoading<span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token comment">// 是否显示loading</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> axiosInstance
</code></pre></div><p>模块 modules/user.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> createServiceFromConfig <span class="token keyword">from</span> <span class="token string">'../utils/createServiceFromConfig'</span>

<span class="token comment">// 用户模块service</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createServiceFromConfig</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token string">'login'</span><span class="token punctuation">,</span> <span class="token string">'/user/login'</span><span class="token punctuation">,</span> <span class="token string">'post'</span><span class="token punctuation">]</span> <span class="token comment">// 登录</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>根据配置生成接口服务 createServiceFromConfig.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> service <span class="token keyword">from</span> <span class="token string">'../service'</span>

<span class="token keyword">function</span> <span class="token function">createServiceFromConfig</span><span class="token punctuation">(</span><span class="token parameter">configList</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> serviceObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  configList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>apiName<span class="token punctuation">,</span> url<span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">'get'</span><span class="token punctuation">]</span> <span class="token operator">=</span> item
    serviceObj<span class="token punctuation">[</span>apiName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">payload <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> url <span class="token operator">=</span> item<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// url 是第二位</span>
      <span class="token keyword">let</span> params <span class="token operator">=</span> method <span class="token operator">===</span> <span class="token string">'get'</span> <span class="token operator">?</span> <span class="token punctuation">[</span>config<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span>payload<span class="token punctuation">,</span> config<span class="token punctuation">]</span>
      <span class="token keyword">return</span> service<span class="token punctuation">[</span>method<span class="token punctuation">]</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token operator">...</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 等价于 return axios.get(..)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> serviceObj
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> createServiceFromConfig
</code></pre></div><p>调用接口</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> userService <span class="token keyword">from</span> <span class="token string">&quot;@/service/modules/user&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">async</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">await</span> userService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      mobile<span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>
      password<span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2020-04-17-周五"><a href="#_2020-04-17-周五" class="header-anchor">#</a> 2020/04/17 周五</h2> <h3 id="text-align-justify-两端对齐不生效的问题"><a href="#text-align-justify-两端对齐不生效的问题" class="header-anchor">#</a> text-align: justify 两端对齐不生效的问题</h3> <p>一般直接设置text-align: justify是不会生效的。但你改为text又会立即居中对齐。我们需要注意的是我们需要将子元素设置一个after的属性或者后面放置一个空的占位标签，设置 display: inline-block; width: 100%，当出现高度占位间隙时，设置占位元素的height没用，需要设置元素的height。css 确实有点毫无逻辑的感觉....</p> <p><img src="/images/daily/text_align_justify.png" alt="text_align_justify.png"></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">.sec,
    .sec2</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
      <span class="token property">text-align</span><span class="token punctuation">:</span> justify<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* fix 占位元素高度问题 */</span>
    <span class="token selector">.sec&gt;div,
    .sec2&gt;div</span> <span class="token punctuation">{</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.zw</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%
    <span class="token punctuation">}</span>

    <span class="token selector">.sec2&gt;div::after</span> <span class="token punctuation">{</span>
      <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
      <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sec<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      我是较长<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zw<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      我是较长的<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zw<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      我是较长的文字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zw<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sec2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>我是较长<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>我是较长的<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>我是较长的文字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>参考：<a href="https://blog.csdn.net/qq_29608143/article/details/83625318" target="_blank" rel="noopener noreferrer">使用text-align:justify，让内容两端对齐，兼容IE及主流浏览器的方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2020-04-16-周四"><a href="#_2020-04-16-周四" class="header-anchor">#</a> 2020/04/16 周四</h2> <h3 id="vue-router-跳转的问题"><a href="#vue-router-跳转的问题" class="header-anchor">#</a> vue-router 跳转的问题</h3> <p>编程方式跳转路由</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>location<span class="token punctuation">,</span> onComplete<span class="token operator">?</span><span class="token punctuation">,</span> onAbort<span class="token operator">?</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>onComplete<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>onAbort<span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>location<span class="token punctuation">,</span> onComplete<span class="token operator">?</span><span class="token punctuation">,</span> onAbort<span class="token operator">?</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>onComplete<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>onAbort<span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>push跳转页面</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 知道路由名称，跳转</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'路由name'</span><span class="token punctuation">,</span>
  params<span class="token operator">:</span> <span class="token punctuation">{</span> userId<span class="token operator">:</span> <span class="token string">'123'</span> <span class="token punctuation">}</span> <span class="token comment">// 参数，url上面不可见</span>
  query<span class="token operator">:</span> <span class="token punctuation">{</span> plan<span class="token operator">:</span> <span class="token string">'private'</span> <span class="token punctuation">}</span> <span class="token comment">// 查询参数 url上可见</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 知道路由path，跳转 /register?plan=private</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'register'</span><span class="token punctuation">,</span> query<span class="token operator">:</span> <span class="token punctuation">{</span> plan<span class="token operator">:</span> <span class="token string">'private'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 注意：如果提供了 path，params 会被忽略，只能使用query参数</span>
</code></pre></div><p>replce跳转页面，push会在history添加一条记录，而replce不会，他只会改变当前页面</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// router.replace(location, onComplete?, onAbort?)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'路由name'</span><span class="token punctuation">,</span>
  params<span class="token operator">:</span> <span class="token punctuation">{</span> userId<span class="token operator">:</span> <span class="token string">'123'</span> <span class="token punctuation">}</span> <span class="token comment">// 参数，url上面不可见</span>
  query<span class="token operator">:</span> <span class="token punctuation">{</span> plan<span class="token operator">:</span> <span class="token string">'private'</span> <span class="token punctuation">}</span> <span class="token comment">// 查询参数 url上可见</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>在新的tab页打开，可以用 this.$router.resolve() 来处理路由信息，也可以直接使用相对路径，注意hash、history跳转方式的区别</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> resolved<span class="token operator">:</span> <span class="token punctuation">{</span>
  location<span class="token operator">:</span> Location<span class="token punctuation">;</span>
  route<span class="token operator">:</span> Route<span class="token punctuation">;</span>
  href<span class="token operator">:</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> router<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>location<span class="token punctuation">,</span> current<span class="token operator">?</span><span class="token punctuation">,</span> append<span class="token operator">?</span><span class="token punctuation">)</span>
window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'#/user/info'</span><span class="token punctuation">)</span> 
<span class="token comment">// ‘_blank’为默认，在新的窗口打开，'_self' 为在当前页打开</span>
</code></pre></div><h3 id="element-时间选择器限制选中日期"><a href="#element-时间选择器限制选中日期" class="header-anchor">#</a> element 时间选择器限制选中日期</h3> <p>一般使用 picker-options 这个属性来disable某些时间段，注意 如果设置了default-time 00:00:00 - 23:59:59 会影响对应的日期判断，必要时可以去掉，逻辑可以由后端处理</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-date-picker</span>
  <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value1<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>date<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">:picker-options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pickerOptions<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>选择日期<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-date-picker</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// 时间不能选择今天之后的日期</span>
      pickerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">disabledDate</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> time<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_2020-04-14-周二"><a href="#_2020-04-14-周二" class="header-anchor">#</a> 2020/04/14 周二</h2> <h3 id="css-利用-perspective-画梯形"><a href="#css-利用-perspective-画梯形" class="header-anchor">#</a> css 利用 perspective 画梯形</h3> <p>今天看小伙伴的代码，发现有一个梯形的实现居然是css写的，我以为需要UI提供icon。这里用到了 perspective 远景这个参数</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/*  &lt;div class=&quot;tx&quot;&gt;&lt;/div&gt; */</span>
<span class="token selector">.tx</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ccc<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">perspective</span><span class="token punctuation">(</span>2em<span class="token punctuation">)</span> <span class="token function">rotateX</span><span class="token punctuation">(</span>-10deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>CSS 属性 perspective指定了观察者与 z=0 平面的距离，使具有三维位置变换的元素产生透视效果。 z&gt;0 的三维元素比正常大，而 z&lt;0 时则比正常小，大小程度由该属性的值决定。</p> <p>参考:</p> <ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/perspective" target="_blank" rel="noopener noreferrer">css perspective | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/transform" target="_blank" rel="noopener noreferrer">css transfrom | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="git无法检测到文件名大小写的更改"><a href="#git无法检测到文件名大小写的更改" class="header-anchor">#</a> git无法检测到文件名大小写的更改</h3> <p>今天把开发分支合并到月底分支后，发现之前修改过文件名没有提交上去，手动改文件名后，git status 提示没有任何改动。</p> <p>于是百度了下，发现git默认配置为忽略大小写，因此无法正确检测大小写的更改。</p> <p>解决办法在当前项目：git config core.ignorecase false，关闭git忽略大小写配置即可</p> <p>参考: <a href="https://blog.csdn.net/sqlquan/article/details/93722680" target="_blank" rel="noopener noreferrer">Git无法检测到文件名大小写的更改<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2020-04-12-周日"><a href="#_2020-04-12-周日" class="header-anchor">#</a> 2020/04/12 周日</h2> <h3 id="vue页面中监听路由改变的几种方法"><a href="#vue页面中监听路由改变的几种方法" class="header-anchor">#</a> vue页面中监听路由改变的几种方法</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1.单页面组件中，使用 beforeRouteEnter</span>
<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">beforeRouteEnter</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">next</span><span class="token punctuation">(</span><span class="token parameter">vm</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token comment">// vm就是this了</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token comment">// 2.使用watch监听$route</span>
watch<span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token function">$route</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// xxx</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>更多详情参数之前的笔记：<a href="https://www.yuque.com/guoqzuo/yyxr05/brzgg7" target="_blank" rel="noopener noreferrer">vue-router 笔记<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="全局引入组件vue-use-与vue-component"><a href="#全局引入组件vue-use-与vue-component" class="header-anchor">#</a> 全局引入组件Vue.use()与Vue.component()</h3> <p>之前的笔记里有将Vue.use()全局引入组件的方法，其实用 Vue.compoennt()也可以全局引入组件。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>alert
├── src
│   └── main.vue  <span class="token comment"># 组件实现</span>
└── index.js <span class="token comment"># install方法，供全局引入</span>
index.js 提供install方法，供Vue.use<span class="token punctuation">(</span><span class="token punctuation">)</span>使用
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Alert <span class="token keyword">from</span> <span class="token string">'./src/main'</span><span class="token punctuation">;</span>

<span class="token comment">/* istanbul ignore next */</span>
Alert<span class="token punctuation">.</span><span class="token function-variable function">install</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>Alert<span class="token punctuation">.</span>name<span class="token punctuation">,</span> Alert<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Alert<span class="token punctuation">;</span>
</code></pre></div><p>main.js全局引入组件的两种方式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1. Vue.use()</span>
<span class="token keyword">import</span> Alert <span class="token keyword">from</span> <span class="token string">'@/components/alert/index.js'</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Alert<span class="token punctuation">)</span>

<span class="token comment">// 2. Vue.component()</span>
<span class="token keyword">import</span> Alert <span class="token keyword">from</span> <span class="token string">&quot;@/components/alert/src/main.vue&quot;</span>
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'alert'</span><span class="token punctuation">,</span> Alert<span class="token punctuation">)</span>
</code></pre></div><p>Vue.use 和Vue.component 全局引入组件之间的区别：</p> <ol><li>Vue.component 只是单纯的引入组件、不需要额外写支持的js文件</li> <li>Vuew.use 除组件外，需要写额外的js实现install方法，但它不仅可以注入组件，还可以注入很多其他东西，比如全局实例属性等。</li></ol> <h2 id="_2020-04-11-周六"><a href="#_2020-04-11-周六" class="header-anchor">#</a> 2020/04/11 周六</h2> <h3 id="iconfont通过设置class来显示图标内部做了那些操作"><a href="#iconfont通过设置class来显示图标内部做了那些操作" class="header-anchor">#</a> iconfont通过设置class来显示图标内部做了那些操作</h3> <p>注意我们在用class使用iconfont图标时，为什么可以使用，主要是iconfont.css里面做了三步操作:</p> <ol><li>定义iconfont的 font-familay</li> <li>为.iconfont设置默认样式，指定为font-family字体</li> <li>为每个图标的class设置before的content</li></ol> <p>来看具体的demo，示例</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">&quot;iconfont&quot;</span><span class="token punctuation">;</span>
  <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'iconfont.eot?t=1586579952536'</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span> <span class="token comment">/* IE9 */</span>
  <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'iconfont.eot?t=1586579952536#iefix'</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'embedded-opentype'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">/* IE6-IE8 */</span>
  <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'data:application/x-font-woff2;charset=utf-8;base64,省略...'</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'woff2'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'iconfont.woff?t=1586579952536'</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'woff'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'iconfont.ttf?t=1586579952536'</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'truetype'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">/* chrome, firefox, opera, Safari, Android, iOS 4.2+ */</span>
  <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'iconfont.svg?t=1586579952536#iconfont'</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'svg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* iOS 4.1- */</span>
<span class="token punctuation">}</span>

<span class="token selector">.iconfont</span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">&quot;iconfont&quot;</span> <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
  <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
  <span class="token property">-webkit-font-smoothing</span><span class="token punctuation">:</span> antialiased<span class="token punctuation">;</span>
  <span class="token property">-moz-osx-font-smoothing</span><span class="token punctuation">:</span> grayscale<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.iconok:before</span> <span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e63c&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.iconerror1:before</span> <span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;\e651&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2020-04-10-周五"><a href="#_2020-04-10-周五" class="header-anchor">#</a> 2020/04/10 周五</h2> <h3 id="json-stringify的非常规用法以及内部执行顺序"><a href="#json-stringify的非常规用法以及内部执行顺序" class="header-anchor">#</a> JSON.stringify的非常规用法以及内部执行顺序</h3> <p>JSON.stringify我们一般用于将JSON对象转为字符串，但他不仅仅只有一个参数，而是三个，除最常用的用法外，还可以用来做三种实用功能</p> <ol><li>利用第三参数在console里更好的展示对象</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1. 对于像这种多层级的数据，console到控制台时，会不好查看需要一层层点击，很麻烦</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> list<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> total<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

<span class="token comment">// 更好的展现，第三参数可以在转JSON字符串时，在json对象的缩进位置填充字符并加上换行符</span>
<span class="token comment">// 缩进位置填充的内容，根据第三参数的类型决定：</span>
<span class="token comment">// 如果是整数，填充对应的空格数(最大为10)，如果是字符串，填充充对应的字符串</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> 
</code></pre></div><p><img src="/images/daily/json_stringify.png" alt="json_stringify.png"></p> <ol start="2"><li>有选择性的过滤字段</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> list<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> total<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span>
<span class="token comment">// 如果我们想深拷贝obj，但只深拷贝其total字段，其他的字段不需要，就可以用第二个参数</span>
<span class="token keyword">let</span> newObj <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'total'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// newObj 值为 { total: 100 }</span>

<span class="token comment">// 实例：在vue项目中，用js删除当前url query参数中的id参数</span>
<span class="token keyword">let</span> query <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
  path<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>path<span class="token punctuation">,</span> 
  query<span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">!==</span> <span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ol start="3"><li>详细处理没有字段序列化的值</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> list<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> total<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token keyword">new</span> <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> key <span class="token operator">===</span> <span class="token string">'list'</span> <span class="token operator">?</span> <span class="token string">'改写list序列化的值'</span> <span class="token operator">:</span> value
<span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token comment">// new 的值为 {&quot;list&quot;:&quot;改写list序列化的值&quot;,&quot;total&quot;:100}</span>
</code></pre></div><p>JSON.stringify(obj)时，其实内部调用的是 obj 的 toJSON()方法，如果我们重写该方法，就可以改变序列化后返回的值</p> <p>JSON.stringify()执行顺序</p> <ol><li>如果对象中存在toJSON方法，且能通过它获取有效的值，则调用该方法，返回对应的值用于下一步，否则返回对象本身。</li> <li>如果提供了第二个参数，根据对应的参数过滤第(1)步得到的值</li> <li>对第(2)步返回的每个值进行进行相应的序列化</li> <li>如果提供了第三个参数，执行相应的格式化</li></ol> <p>详情参考之前的笔记: <a href="https://www.yuque.com/guoqzuo/js_es6/strtxi#8960b7f6" target="_blank" rel="noopener noreferrer">JSON.stringify() - JS高程3笔记<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2020-04-09-周四"><a href="#_2020-04-09-周四" class="header-anchor">#</a> 2020/04/09 周四</h2> <h3 id="array-prototype-fill-填充引用类型值时的坑"><a href="#array-prototype-fill-填充引用类型值时的坑" class="header-anchor">#</a> Array.prototype.fill()填充引用类型值时的坑</h3> <p>在mock表格list数据时，我一般为了简洁会先创建一个对象info，然后new Array(10).fill(info) 来生成10条数据的数组</p> <p>但这次发现一个问题，由于表格有一个字段是状态值0 - 5，我想随机设置下值，发现修改后的值都一样，来看看例子</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token comment">// {a: 1}</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token comment">// {a: 1}</span>
b<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment">// 尝试修改值，看看a和c是否修改，发现只有b修改了，a,c没变说明地址不一样</span>

<span class="token comment">// 来看看fill</span>
<span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 乍一看，貌似每个填充的地址都不一样，我们修改数组中的一个元素试试</span>
list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">2</span>
</code></pre></div><p>再打印list，发现list所有数组对象的值都变了，因此<strong>fill填充的对象都指向同一个地址</strong></p> <p>用 Array.prototype.fill() mdn查权威文档，发现里面确实有这一块的描述</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Objects by reference.</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// [{}, {}, {}];</span>
<span class="token comment">// 需要注意如果fill的参数为引用类型，会导致都执行都一个引用类型</span>
<span class="token comment">// 如 arr[0] === arr[1] 为true</span>
arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>hi <span class="token operator">=</span> <span class="token string">&quot;hi&quot;</span><span class="token punctuation">;</span> <span class="token comment">// [{ hi: &quot;hi&quot; }, { hi: &quot;hi&quot; }, { hi: &quot;hi&quot; }]</span>
</code></pre></div><p>那么遇到这种情况不能用fill要怎么处理呢</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span>
<span class="token comment">// 这里还是用了fill 如果不fill内容到数组，map遍历时会忽略所有空的元素</span>
<span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  item <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>
  item<span class="token punctuation">.</span>xxx <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>Matn<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> item
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>参考: <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/fill" target="_blank" rel="noopener noreferrer">Array.prototype.fill() - MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2020-04-08-周三"><a href="#_2020-04-08-周三" class="header-anchor">#</a> 2020/04/08 周三</h2> <h3 id="failed-to-resolve-directive-infinite-scroll"><a href="#failed-to-resolve-directive-infinite-scroll" class="header-anchor">#</a> Failed to resolve directive: infinite-scroll</h3> <p>在element InfiniteScroll无限滚动功能里，使用了v-infinite-scroll指令，但直接使用会发现提示 Failed to resolve directive: infinite-scroll，后面查了下，发现<strong>要使用该指令需要安装一个vue-infinite-scroll npm包，并且在main.js里引入才行</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 安装vue-infinite-scroll</span>
<span class="token comment">// npm install vue-infinite-scroll --save</span>

<span class="token comment">// 在main.js里引入</span>
<span class="token keyword">import</span> infiniteScroll <span class="token keyword">from</span> <span class="token string">&quot;vue-infinite-scroll&quot;</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>infiniteScroll<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这样就能正常使用了，注意加载数据 v-infinite-scroll=&quot;load&quot; 指定的load函数里，获取数据后，每次push到列表list即可。首次进入会自动加载一次，无需在created钩子里手动请求一次数据，注意当在load里要加个判断，如果获取数据长度为0，或超出数据页数时，就不再继续load了</p> <p>参考：</p> <ul><li><a href="https://blog.csdn.net/qq_38502227/article/details/103891962" target="_blank" rel="noopener noreferrer">[Vue warn]: Failed to resolve directive: infinite-scroll<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://element.eleme.cn/#/zh-CN/component/infiniteScroll" target="_blank" rel="noopener noreferrer">无限滚动指令 v-infinite-scroll - Element<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="_2020-04-07-周二"><a href="#_2020-04-07-周二" class="header-anchor">#</a> 2020/04/07 周二</h2> <h3 id="怎么将date数据转为tz格式的字符串"><a href="#怎么将date数据转为tz格式的字符串" class="header-anchor">#</a> 怎么将Date数据转为TZ格式的字符串</h3> <p>后台要求的数据格式 &quot;2020-04-10T04:01:00.000Z&quot; 为TZ格式的字符串。Date对象toString为 &quot;Fri Apr 10 2020 12:00:00 GMT+0800 (中国标准时间)&quot; 这种格式，那怎么转TZ字符串格式呢？用 Date.prototype.toJSON() 方法即可</p> <div class="language-js extra-class"><pre class="language-js"><code>a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2020/04/10 12:00:00'</span><span class="token punctuation">)</span> 
Fri Apr <span class="token number">10</span> <span class="token number">2020</span> <span class="token number">12</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span> <span class="token constant">GMT</span><span class="token operator">+</span><span class="token number">0800</span> <span class="token punctuation">(</span>中国标准时间<span class="token punctuation">)</span>

a<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//&quot;2020-04-10T04:01:00.000Z&quot;</span>
</code></pre></div><p>参考：<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Date/toJSON" target="_blank" rel="noopener noreferrer">Date.prototype.toJSON() - MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="date-prototype-tolocalestring-的坑"><a href="#date-prototype-tolocalestring-的坑" class="header-anchor">#</a> Date.prototype.toLocaleString()的坑</h3> <p>注意在把Date转为字符串时，需要额外注意时间为 '00:00:00' 的情况，会被转为 上午12:00:00</p> <div class="language-js extra-class"><pre class="language-js"><code>a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2020/04/10 00:00:00'</span><span class="token punctuation">)</span> 
<span class="token comment">// Fri Apr 10 2020 00:00:00 GMT+0800 (中国标准时间)</span>

a<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;2020/4/10 上午12:00:00&quot;</span>
a<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>
a<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>
a<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>
</code></pre></div><p>那我们来试试 '12:00:00' 的情况</p> <div class="language-js extra-class"><pre class="language-js"><code>a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2020/04/10 12:00:00'</span><span class="token punctuation">)</span> 
<span class="token comment">// Fri Apr 10 2020 12:00:00 GMT+0800 (中国标准时间)</span>
a<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;2020/4/10 下午12:00:00&quot;</span>
a<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 12</span>
</code></pre></div><p>？？？怎么变下午12点了，综上<strong>虽然Date对象的toLocaleString()比较好用，但还是仅用日期方面的toLocaleDateString()吧，时间方面的还是尽量不要使用</strong>，12点和00点傻傻分不清楚</p> <p>参考：<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleString" target="_blank" rel="noopener noreferrer">Date.prototype.toLocaleString() - MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2020-04-06-周一"><a href="#_2020-04-06-周一" class="header-anchor">#</a> 2020/04/06 周一</h2> <h3 id="xx-com重定向到www-xx-com方式"><a href="#xx-com重定向到www-xx-com方式" class="header-anchor">#</a> xx.com重定向到www.xx.com方式</h3> <p>今天帮一个同学测试网络，使用curl来请求百度，发现baidu.com到www.baidu.com的重定向使用的是 html 的meta元素</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">curl</span> -v baidu.com
<span class="token comment"># &lt;html&gt;</span>
<span class="token comment"># &lt;meta http-equiv=&quot;refresh&quot; content=&quot;0;url=http://www.baidu.com/&quot;&gt;</span>
<span class="token comment"># &lt;/html&gt;</span>
</code></pre></div><p>当访问 baidu.com时，0秒后刷新页面到 http://www.baidu.com，以后如果在不依赖nginx配置的情况下，可以使用这种方式。meta元素使用方法可以参考之前的笔记：<a href="https://www.yuque.com/guoqzuo/js_es6/qk5v84#edbe1211" target="_blank" rel="noopener noreferrer">http-equiv改写http标头字段<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>之前我有处理过 zuo11.com 跳转到 www.zuo11.com 的情况，配置了nginx，具体方法参见 <a href="https://www.yuque.com/guoqzuo/csm14e/hd0tdl#c1a009e0" target="_blank" rel="noopener noreferrer">nginx 访问不带www的域名，自动切到www<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>curl -v zuo11.com nginx响应内容如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">curl</span> -v zuo11.com
* Rebuilt URL to: zuo11.com/
*   Trying <span class="token number">47.107</span>.190.93<span class="token punctuation">..</span>.
* TCP_NODELAY <span class="token builtin class-name">set</span>
* Connected to zuo11.com <span class="token punctuation">(</span><span class="token number">47.107</span>.190.93<span class="token punctuation">)</span> port <span class="token number">80</span> <span class="token punctuation">(</span><span class="token comment">#0)</span>
<span class="token operator">&gt;</span> GET / HTTP/1.1
<span class="token operator">&gt;</span> Host: zuo11.com
<span class="token operator">&gt;</span> User-Agent: curl/7.54.0
<span class="token operator">&gt;</span> Accept: */*
<span class="token operator">&gt;</span> 
<span class="token operator">&lt;</span> HTTP/1.1 <span class="token number">301</span> Moved Permanently
<span class="token operator">&lt;</span> Server: nginx/1.16.1
<span class="token operator">&lt;</span> Date: Mon, 06 Apr <span class="token number">2020</span> <span class="token number">12</span>:56:22 GMT
<span class="token operator">&lt;</span> Content-Type: text/html
<span class="token operator">&lt;</span> Content-Length: <span class="token number">169</span>
<span class="token operator">&lt;</span> Connection: keep-alive
<span class="token operator">&lt;</span> Location: http://www.zuo11.com/
<span class="token operator">&lt;</span> 
<span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>title<span class="token operator">&gt;</span><span class="token number">301</span> Moved Permanently<span class="token operator">&lt;</span>/title<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>center<span class="token operator">&gt;</span><span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token number">301</span> Moved Permanently<span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token operator">&lt;</span>/center<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>hr<span class="token operator">&gt;</span><span class="token operator">&lt;</span>center<span class="token operator">&gt;</span>nginx/1.16.<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>/center<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/html<span class="token operator">&gt;</span>

</code></pre></div><p>也就是当访问zuo11.com时，nginx会用301重定向到www.zuo11.com。我们可以做一个测试，当接收到一个请求后，修改状态码为301，然后设置Location响应头为 http://www.zuo11.com 看是否可以重定向页面，来写个koa例子</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Koa <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Koa</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>url <span class="token operator">===</span> <span class="token string">'/test'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 当访问 /test 时 301重定向到 http://www.zuo11.com</span>
    ctx<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">301</span>
    ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token string">'Location'</span><span class="token operator">:</span> <span class="token string">'http://www.zuo11.com'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 非 /test 时，页面显示 welcome</span>
  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token string">'welcome'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">'9000'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'服务已开启，9000端口'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>通过测试上面的例子，发现只要响应的状态码设置为301，且响应头Location设置为要重定向的网页，就可以301跳转到对应的页面，新技能get</p> <h3 id="什么是bfc"><a href="#什么是bfc" class="header-anchor">#</a> 什么是BFC</h3> <p>虽然做前端好几年了，但只是听说个这个名词，一直不清楚具体是什么意思，今天来研究下</p> <p>BFC是 <strong>Block Formatting Context</strong> 的缩写，字面意思是 <strong>块格式化上下文</strong></p> <p>字面意思很难理解，我们先来看几个例子</p> <p><strong>1. margin塌陷问题</strong></p> <p>下面的例子中A、B两个元素的margin都为10px，理论上A、B上下间的距离为 20px，但实际却是 10px</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>elementA<span class="token punctuation">&quot;</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">margin</span><span class="token punctuation">:</span> 10px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>123<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>elementB<span class="token punctuation">&quot;</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">margin</span><span class="token punctuation">:</span> 10px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>456<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> 
</code></pre></div><p>利用BFC解决塌陷的问题，用父元素包裹并设置overflow为hidden，这样间隔就是20px了</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>elementA<span class="token punctuation">&quot;</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">margin</span><span class="token punctuation">:</span> 10px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>123<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">overflow</span><span class="token punctuation">:</span>hidden</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>elementB<span class="token punctuation">&quot;</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">margin</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>456<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> 
</code></pre></div><p><strong>2. float父级元素高度为0的问题</strong></p> <p>wrapper的子元素使用了float，其高度为100px，但他的父级元素wrapper高度为0</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">float</span><span class="token punctuation">:</span>left<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span>100px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>123<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>解决方案如下,给wrapper添加一个BFC属性，这时wrapper的高度就是子元素的高度</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrapper<span class="token punctuation">&quot;</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">overflow</span><span class="token punctuation">:</span>hidden</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">float</span><span class="token punctuation">:</span>left<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span>100px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>123<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>3. float高度超出父元素容器区域的问题</strong></p> <p>box元素为父元素，float元素高度为150，此时，float会超出父元素范围</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">background</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span><span class="token property">border</span><span class="token punctuation">:</span>1px solid red<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>float<span class="token punctuation">&quot;</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span><span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ccc<span class="token punctuation">;</span><span class="token property">background</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
    I am a floated box!
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>I am content inside the container.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>利用BFC，使浮动内容和周围的内容等高，给box元素加一个overflow:hidden即可</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">background</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span><span class="token property">border</span><span class="token punctuation">:</span>1px solid red<span class="token punctuation">;</span><span class="token property">overflow</span><span class="token punctuation">:</span>hidden</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>float<span class="token punctuation">&quot;</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span><span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ccc<span class="token punctuation">;</span><span class="token property">background</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
    I am a floated box!
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>I am content inside the container.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>通过上面两个例子，我们会很好奇，为什么加个overlfow:hidden就能解决问题，BFC 块级格式化上下文到底是什么？</p> <p><strong>BFC 块级格式化上下文主要和float、clear、margin塌陷问题有关联</strong></p> <p>一般情况下BFC只存在于根级元素(html)，但设置某些CSS属性时也会让产生BFC。但是前提是必须是块级元素。</p> <p>以下属性声明会产生BFC：</p> <ul><li>浮动元素（元素的 float 不是 none）</li> <li>绝对定位元素（元素的 position 为 absolute 或 fixed）</li> <li>行内块元素（元素的 display 为 inline-block）</li> <li>表格单元格（元素的 display为 table-cell，HTML表格单元格默认为该值）</li> <li>表格标题（元素的 display 为 table-caption，HTML表格标题默认为该值）</li> <li>匿名表格单元格元素（元素的 display为 table、table-row、 table-row-group、table-header-group、table-footer-group（分别是HTML table、row、tbody、thead、tfoot的默认属性）或 inline-table）</li> <li>overflow 值不为 visible 的块元素</li> <li>display 值为 flow-root 的元素（该属性safari不支持）</li> <li>contain 值为 layout、content或 paint 的元素</li> <li>弹性元素（display为 flex 或 inline-flex元素的直接子元素）</li> <li>网格元素（display为 grid 或 inline-grid 元素的直接子元素）</li> <li>多列容器（元素的 column-count 或 column-width 不为 auto，包括 column-count 为 1）</li> <li>column-span 为 all 的元素始终会创建一个新的BFC，即使该元素没有包裹在一个多列容器中（标准变更，Chrome bug）。</li></ul> <p>BFC布局规则</p> <ul><li>垂直方向的间隔由margin决定，同一个BFC里同级别的两个元素之间的margin会产生坍塌（问题1）</li> <li>BFC计算高度时，float元素的高度也参与计算 （问题 2/3）</li> <li>每个BFC区域是隔离的，它里面元素不会影响外层，外层的各种变化也不会影响BFC区域。</li></ul> <p>Block formatting contexts are important for the positioning (see float) and clearing (see clear) of floats. The rules for positioning and clearing of floats apply only to things within the same block formatting context. Floats don't affect the layout of the content inside other block formatting contexts, and clear only clears past floats in the same block formatting context. Margin collapsing also occurs only between blocks that belong to the same block formatting context.</p> <p>块格式化上下文对浮动定位（参见 float）与清除浮动（参见 clear）都很重要。浮动定位和清除浮动时只会应用于同一个BFC内的元素。浮动不会影响其它BFC中元素的布局，而清除浮动只能清除同一BFC中在它前面的元素的浮动。外边距折叠（Margin collapsing）也只会发生在属于同一BFC的块级元素之间。</p> <p>参考：</p> <ul><li><a href="https://www.cnblogs.com/homehtml/articles/11960651.html" target="_blank" rel="noopener noreferrer">BFC深入理解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Block_formatting_context" target="_blank" rel="noopener noreferrer">Block formatting context - MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/clear" target="_blank" rel="noopener noreferrer">css clear - MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="">css float - MDN</a></li></ul> <h3 id="怎么用一行css代码将整个站点变灰"><a href="#怎么用一行css代码将整个站点变灰" class="header-anchor">#</a> 怎么用一行css代码将整个站点变灰</h3> <p>前天4月4号全国哀悼日，各大网公司网站的风格都变灰了，是怎么实现的呢？其实很简单，一行代码就搞定。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* 将html下的所有内容置灰 grayscale为灰度 */</span>
<span class="token selector">html</span> <span class="token punctuation">{</span>
  <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">grayscale</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>css filter是什么属性？用css filter mdn关键字查了下，这里filter翻译为 <strong>滤镜</strong>，<strong>他可以将模糊或色相等图形效果应用于元素</strong>，来看一些例子</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* 模糊，类似于马赛克效果 */</span>
<span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">blur</span><span class="token punctuation">(</span>5px<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">/* 对比度 */</span>
<span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">contrast</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/* 色相 */</span>
<span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">hue-rotate</span><span class="token punctuation">(</span>90deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/* 阴影 */</span>
<span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">drop-shadow</span><span class="token punctuation">(</span>16px 16px 20px red<span class="token punctuation">)</span> <span class="token function">invert</span><span class="token punctuation">(</span>75%<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>兼容性除了IE4-9，其他基本都兼容。Internet Explorer 4 to 9 implemented a non-standard filter property. The syntax was completely different from this one.</p> <p><img src="/images/daily/css_filter.png" alt="css_filter.png"></p> <p>更多filter文档及用法，参考：<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/filter" target="_blank" rel="noopener noreferrer">css filter - MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2020-04-05-周日"><a href="#_2020-04-05-周日" class="header-anchor">#</a> 2020/04/05 周日</h2> <h3 id="uni-app开发体验怎么样"><a href="#uni-app开发体验怎么样" class="header-anchor">#</a> uni-app开发体验怎么样？</h3> <p>如果你习惯开发vue，再来写uni，你会发现有很多问题</p> <ol><li>vue-router非常不方便、使用vant组件用不了</li> <li>img标签到app上显示不了，需要使用image标签</li> <li>路由页面要在pages.json里设置，js跳转需要使用uni.navigator等内置API</li></ol> <p>感觉开发体验很差。但如果你开发过小程序，你会发现</p> <ol><li>template里UI组件部分基本类似于小程序开发</li> <li>script、style方面基本和vue开发体验保持一致，uni提供了许多类似于小程序的内置api，比如跳转路由、通用请求等</li></ol> <p>综上：<strong>uni开发就是小程序开发和vue开发的结合</strong>，碰巧我在小程序开发和vue开发方面都有一定的开发经验，所以感觉还算得心应手，但对于没有开发过小程序的开发人员来讲，刚开始会觉得不怎么习惯。另外我个人不喜欢这种开发方式，有点乱，能少碰就尽量少碰，感觉整体代码很乱，强依赖uni框架与HBuilderX开发工具。</p> <h2 id="_2020-04-04-周六"><a href="#_2020-04-04-周六" class="header-anchor">#</a> 2020/04/04 周六</h2> <h3 id="uni-设置tabbar后没显示"><a href="#uni-设置tabbar后没显示" class="header-anchor">#</a> uni 设置tabbar后没显示</h3> <p>在pages.json里设置了tabbar配置，但设置成功后，在chrome运行却没效果，需要注意两点</p> <ol><li>pages.json配置中tabBar参数设置的页面同时也需要在pages参数里设置</li> <li>pages数组中的第一项，必须是tabBar配置里的页面</li></ol> <h3 id="uni-app开发需要了解的事情"><a href="#uni-app开发需要了解的事情" class="header-anchor">#</a> uni-app开发需要了解的事情</h3> <p>uni-app 读法为 u ni ai po，官网：<a href="https://uniapp.dcloud.io/README" target="_blank" rel="noopener noreferrer">uni-app 官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol><li>uni-app开发需要下载HBuilderX开发工具</li> <li>需要注册ucloud账号，打包安卓、iOS时需要有证书。安卓的证书免费，iOS证书需要花钱</li> <li>uni开发和通常vue-cli搭的脚手架开发方式还是有一定区别的，更像是vue + 小程序开发的结合</li> <li>默认不支持 vue-router</li> <li>默认hello word打包安卓的apk包为 16M 左右</li></ol> <h3 id="常用的-gitignore-配置"><a href="#常用的-gitignore-配置" class="header-anchor">#</a> 常用的.gitignore 配置</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>.DS_Store
node_modules
/dist

<span class="token comment"># local env files</span>
.env.local
.env.*.local

<span class="token comment"># Log files</span>
npm-debug.log*
yarn-debug.log*
yarn-error.log*

<span class="token comment"># Editor directories and files</span>
.idea
.vscode
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw*

package-lock.json

</code></pre></div><h2 id="_2020-04-03-周五"><a href="#_2020-04-03-周五" class="header-anchor">#</a> 2020/04/03 周五</h2> <h3 id="vue-cli项目使用-开头的路径"><a href="#vue-cli项目使用-开头的路径" class="header-anchor">#</a> vue-cli项目使用@开头的路径</h3> <p>我们在vue-cli创建的vue项目，可以使用@ 开头的路径，表示从src目录开始，比如</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../../../components/xxx/xx'</span><span class="token punctuation">)</span>  <span class="token comment">// bad </span>
<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/components/xxx/xx'</span><span class="token punctuation">)</span>  <span class="token comment">// good 对应 src/components/xxx/xx</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../../assets/img/xxx.png'</span><span class="token punctuation">)</span> <span class="token comment">// bad</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@/assets/img/xxx.png'</span><span class="token punctuation">)</span> <span class="token comment">// good 对应 src/assets/img/xxx.png</span>
</code></pre></div><p>这样如果某个文件夹下为一个功能模块的代码，那我们将这个目录移动到src下任意层级的目录都不会有影响，更健壮</p> <h3 id="mac-pro-retina屏两倍图"><a href="#mac-pro-retina屏两倍图" class="header-anchor">#</a> mac pro retina屏两倍图</h3> <p>之前在处理canvas绘制模糊的问题时了解到，retina是两倍像素屏，50 x 50像素的图会绘制在 100 x 100 像素区域，会导致绘制模糊。同理，如果需要在retina屏上显示50 x 50的图，需要提供两倍图 100 * 100，然后设置样式宽高为50，这样才会清晰。最好的方式还是使用矢量图、iconfont等不会失真的图。这样就不会模糊。</p> <h2 id="_2020-04-01-周三"><a href="#_2020-04-01-周三" class="header-anchor">#</a> 2020/04/01 周三</h2> <h3 id="grid布局问题"><a href="#grid布局问题" class="header-anchor">#</a> grid布局问题</h3> <p>grid适用于网格化布局，对于各个模块按百分比来的情况比较好，如果多个模块有的固定宽高有的非固定宽高就不怎么好分了, IE下支持需要加前缀，详情参见之前的笔记: <a href="https://www.yuque.com/guoqzuo/js_es6/kg7660#973d6cc6" target="_blank" rel="noopener noreferrer">grid网格布局<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>2020/04/17 更新，grid的某些属性不兼容IE，最开始我使用了grid发现IE怎么都兼容不了，有几个属性加了-ms-都没用，最后为了不必要的麻烦和风险，还是换成flex布局了，改成flex后的代码居然比grid还简单...</p> <p>参考: <a href="http://www.imooc.com/wenda/detail/575101" target="_blank" rel="noopener noreferrer">CSS网格布局即使带有前缀也不能在IE11中工作<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="canvas怎么绘制环形进度条"><a href="#canvas怎么绘制环形进度条" class="header-anchor">#</a> canvas怎么绘制环形进度条</h3> <p>有4个重点:</p> <ol><li><p>怎么画圆弧, ctx.arc函数里开始角度、结束角度以PI为基准，取值范围时：0 ~ 2PI，PI就是π值约等于3.14，圆心正上方位置为1.5PI，圆心右侧为 0 或 2*PI，圆心正下方为0.5PI，选定义额开始位置和结束位置就可以绘制任意一个弧形，详情参见: <a href="https://www.yuque.com/guoqzuo/js_es6/sbx6vi#eda54f70" target="_blank" rel="noopener noreferrer">之前的canvas笔记 - 绘制路径<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>画圆环使用的是ctx.stroke，一般默认画圆大概是1px的宽度，线的宽度可以使用 <strong>ctx.lineWidth</strong> 调整，这样就成圆环了</p></li> <li><p>用ctx.arc画一个完整的圆，再画一个进度圆弧，重叠在一起，颜色设置不一样，就是一个标准的圆环进度条了。</p></li> <li><p>进度圆环怎么设置圆角，可以使用 ctx.lineCap = &quot;round&quot;;</p></li></ol> <p><img src="/images/daily/canvas_progress.png" alt="canvas_progress.png"></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>drawing<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>180<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>180<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>A draw of something.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">let</span> drawing <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'drawing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> ctx <span class="token operator">=</span> drawing<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> percent <span class="token operator">=</span> <span class="token number">80</span> <span class="token comment">// 进度百分比</span>
  <span class="token keyword">let</span> circleRadios <span class="token operator">=</span> <span class="token number">80</span> <span class="token comment">// 圆环半径</span>
  <span class="token keyword">let</span> lineWidth <span class="token operator">=</span> <span class="token number">10</span>
  <span class="token keyword">let</span> <span class="token constant">PI</span> <span class="token operator">=</span> <span class="token number">3.1415926</span>
  <span class="token keyword">let</span> long  <span class="token operator">=</span> <span class="token punctuation">(</span>percent <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token comment">// 百分比进度条长度</span>
  <span class="token keyword">let</span> start <span class="token operator">=</span> <span class="token number">1.5</span> <span class="token operator">*</span> <span class="token constant">PI</span> <span class="token comment">// 圆心正上方位置是 1.5PI</span>
  ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> lineWidth

  <span class="token comment">// 背景圆环</span>
  <span class="token keyword">let</span> x <span class="token operator">=</span> circleRadios <span class="token operator">+</span> lineWidth
  <span class="token keyword">let</span> y <span class="token operator">=</span> x
  ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'rgb(241,247,255)'</span>
  ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> circleRadios<span class="token punctuation">,</span> start <span class="token operator">+</span> long<span class="token punctuation">,</span> start<span class="token punctuation">)</span>
  ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// 进度圆环</span>
  ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> gradient <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createLinearGradient</span><span class="token punctuation">(</span>circleRadios <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> lineWidth <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span> lineWidth <span class="token operator">+</span> circleRadios<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span> circleRadios <span class="token operator">+</span> lineWidth<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 从(130,130)到(160,160)渐变</span>
  gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'#64E1FA'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 渐变的起点色</span>
  gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'#215BF7'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 渐变的结束色</span>
  ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> gradient
  ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> circleRadios<span class="token punctuation">,</span> start<span class="token punctuation">,</span> start <span class="token operator">+</span> long<span class="token punctuation">)</span>
  ctx<span class="token punctuation">.</span>lineCap <span class="token operator">=</span> <span class="token string">&quot;round&quot;</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>参考:</p> <ul><li><a href="https://juejin.im/post/5dc626125188253aec025a60#heading-10" target="_blank" rel="noopener noreferrer">用初中数学知识撸一个canvas环形进度条<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.jianshu.com/p/e0fe05210134" target="_blank" rel="noopener noreferrer">用canvas画一个进度条为圆角的环形图（圆环图）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2020/10/29 下午10:59:19</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/daily/2020-05.html" class="prev">
        2020年05月技术日常
      </a></span> <span class="next"><a href="/daily/2020-03.html">
        2020年03月技术日常
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.aea08731.js" defer></script><script src="/assets/js/2.3f8a6b0b.js" defer></script><script src="/assets/js/40.9b113905.js" defer></script><script src="/assets/js/3.018b29e2.js" defer></script>
  </body>
</html>
