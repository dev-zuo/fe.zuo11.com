<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2020å¹´06æœˆæŠ€æœ¯æ—¥å¸¸ | å·¦å°ç™½çš„å‰ç«¯ç¬”è®°</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="å·¦å°ç™½çš„å‰ç«¯ç¬”è®°ï¼Œç”¨äºè®°å½•ã€å®Œå–„ä¸ªäººå‰ç«¯çŸ¥è¯†ä½“ç³»ç»“æ„">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.594b47db.css" as="style"><link rel="preload" href="/assets/js/app.9db0a638.js" as="script"><link rel="preload" href="/assets/js/2.4b3539f1.js" as="script"><link rel="preload" href="/assets/js/39.305ba346.js" as="script"><link rel="preload" href="/assets/js/3.e6a4dd76.js" as="script"><link rel="prefetch" href="/assets/js/10.35d8cd15.js"><link rel="prefetch" href="/assets/js/100.01e41ee6.js"><link rel="prefetch" href="/assets/js/101.28f8026a.js"><link rel="prefetch" href="/assets/js/102.31d7d0e0.js"><link rel="prefetch" href="/assets/js/103.71225fe7.js"><link rel="prefetch" href="/assets/js/104.fe63eb6b.js"><link rel="prefetch" href="/assets/js/105.c0b31bc8.js"><link rel="prefetch" href="/assets/js/106.a7b64c67.js"><link rel="prefetch" href="/assets/js/107.35f43657.js"><link rel="prefetch" href="/assets/js/108.25e30499.js"><link rel="prefetch" href="/assets/js/109.865008b8.js"><link rel="prefetch" href="/assets/js/11.22ff506c.js"><link rel="prefetch" href="/assets/js/110.fb459190.js"><link rel="prefetch" href="/assets/js/111.1740bd73.js"><link rel="prefetch" href="/assets/js/112.ea5b5225.js"><link rel="prefetch" href="/assets/js/113.3e891c50.js"><link rel="prefetch" href="/assets/js/114.83254ffb.js"><link rel="prefetch" href="/assets/js/115.dcdb82ef.js"><link rel="prefetch" href="/assets/js/116.8cca1faf.js"><link rel="prefetch" href="/assets/js/117.f70c6759.js"><link rel="prefetch" href="/assets/js/118.ea15b201.js"><link rel="prefetch" href="/assets/js/119.51ac8585.js"><link rel="prefetch" href="/assets/js/12.66186d22.js"><link rel="prefetch" href="/assets/js/120.27fc9d41.js"><link rel="prefetch" href="/assets/js/121.4050195a.js"><link rel="prefetch" href="/assets/js/122.ae0aaf85.js"><link rel="prefetch" href="/assets/js/123.3412ab46.js"><link rel="prefetch" href="/assets/js/124.abd8c6d3.js"><link rel="prefetch" href="/assets/js/125.7cc27db5.js"><link rel="prefetch" href="/assets/js/126.af33ab3a.js"><link rel="prefetch" href="/assets/js/127.3170e8ab.js"><link rel="prefetch" href="/assets/js/128.c04c4bb0.js"><link rel="prefetch" href="/assets/js/129.4165d0ac.js"><link rel="prefetch" href="/assets/js/13.df602e5a.js"><link rel="prefetch" href="/assets/js/130.0d0d3cf7.js"><link rel="prefetch" href="/assets/js/131.c7db2083.js"><link rel="prefetch" href="/assets/js/132.79c11c42.js"><link rel="prefetch" href="/assets/js/133.9039bd5f.js"><link rel="prefetch" href="/assets/js/134.566c80ad.js"><link rel="prefetch" href="/assets/js/135.8d23eb58.js"><link rel="prefetch" href="/assets/js/136.f2879705.js"><link rel="prefetch" href="/assets/js/137.255c0784.js"><link rel="prefetch" href="/assets/js/138.304cbec6.js"><link rel="prefetch" href="/assets/js/139.7a7fc3e0.js"><link rel="prefetch" href="/assets/js/14.c0b1490a.js"><link rel="prefetch" href="/assets/js/140.4abf26a8.js"><link rel="prefetch" href="/assets/js/141.81d4d878.js"><link rel="prefetch" href="/assets/js/142.cd404be7.js"><link rel="prefetch" href="/assets/js/143.0e44aa20.js"><link rel="prefetch" href="/assets/js/144.237a43d9.js"><link rel="prefetch" href="/assets/js/145.cede5af9.js"><link rel="prefetch" href="/assets/js/146.c9d3967b.js"><link rel="prefetch" href="/assets/js/147.080beb71.js"><link rel="prefetch" href="/assets/js/15.540e7ea4.js"><link rel="prefetch" href="/assets/js/16.eb71a02a.js"><link rel="prefetch" href="/assets/js/17.92df7b99.js"><link rel="prefetch" href="/assets/js/18.50bc4846.js"><link rel="prefetch" href="/assets/js/19.bb9e9c88.js"><link rel="prefetch" href="/assets/js/20.e5894862.js"><link rel="prefetch" href="/assets/js/21.8dd45d89.js"><link rel="prefetch" href="/assets/js/22.aab57678.js"><link rel="prefetch" href="/assets/js/23.5456b7dc.js"><link rel="prefetch" href="/assets/js/24.68f5b54e.js"><link rel="prefetch" href="/assets/js/25.f7468bea.js"><link rel="prefetch" href="/assets/js/26.2fa477e0.js"><link rel="prefetch" href="/assets/js/27.3b27afbb.js"><link rel="prefetch" href="/assets/js/28.5e4373e8.js"><link rel="prefetch" href="/assets/js/29.3980b790.js"><link rel="prefetch" href="/assets/js/30.8385df39.js"><link rel="prefetch" href="/assets/js/31.18be5061.js"><link rel="prefetch" href="/assets/js/32.7ebc4f72.js"><link rel="prefetch" href="/assets/js/33.eab97304.js"><link rel="prefetch" href="/assets/js/34.10d3aaea.js"><link rel="prefetch" href="/assets/js/35.cf227858.js"><link rel="prefetch" href="/assets/js/36.72eb2e1b.js"><link rel="prefetch" href="/assets/js/37.76967d57.js"><link rel="prefetch" href="/assets/js/38.1b8baf1e.js"><link rel="prefetch" href="/assets/js/4.0ac4f1f6.js"><link rel="prefetch" href="/assets/js/40.2815fe02.js"><link rel="prefetch" href="/assets/js/41.2b41b172.js"><link rel="prefetch" href="/assets/js/42.1d69d4fa.js"><link rel="prefetch" href="/assets/js/43.d4971a84.js"><link rel="prefetch" href="/assets/js/44.0e04f785.js"><link rel="prefetch" href="/assets/js/45.9025c56f.js"><link rel="prefetch" href="/assets/js/46.a1ee9725.js"><link rel="prefetch" href="/assets/js/47.ee929b91.js"><link rel="prefetch" href="/assets/js/48.260b57c1.js"><link rel="prefetch" href="/assets/js/49.fc5704d5.js"><link rel="prefetch" href="/assets/js/5.5b94bff7.js"><link rel="prefetch" href="/assets/js/50.40b0ba28.js"><link rel="prefetch" href="/assets/js/51.549a6a9a.js"><link rel="prefetch" href="/assets/js/52.81153bb7.js"><link rel="prefetch" href="/assets/js/53.7fcef945.js"><link rel="prefetch" href="/assets/js/54.746a2bbd.js"><link rel="prefetch" href="/assets/js/55.29274bd7.js"><link rel="prefetch" href="/assets/js/56.1b76e54c.js"><link rel="prefetch" href="/assets/js/57.ef2bb07c.js"><link rel="prefetch" href="/assets/js/58.e2bac053.js"><link rel="prefetch" href="/assets/js/59.285e53f6.js"><link rel="prefetch" href="/assets/js/6.481b22df.js"><link rel="prefetch" href="/assets/js/60.00d6c919.js"><link rel="prefetch" href="/assets/js/61.af411822.js"><link rel="prefetch" href="/assets/js/62.a7e74f84.js"><link rel="prefetch" href="/assets/js/63.2cccfda3.js"><link rel="prefetch" href="/assets/js/64.5a4a2d69.js"><link rel="prefetch" href="/assets/js/65.6be1cbc1.js"><link rel="prefetch" href="/assets/js/66.7e93c722.js"><link rel="prefetch" href="/assets/js/67.11f563a3.js"><link rel="prefetch" href="/assets/js/68.ad75af4a.js"><link rel="prefetch" href="/assets/js/69.75221a93.js"><link rel="prefetch" href="/assets/js/7.cb937ed7.js"><link rel="prefetch" href="/assets/js/70.34f4dcf5.js"><link rel="prefetch" href="/assets/js/71.aa606e80.js"><link rel="prefetch" href="/assets/js/72.7486a2dd.js"><link rel="prefetch" href="/assets/js/73.2bbd3b87.js"><link rel="prefetch" href="/assets/js/74.3c64330c.js"><link rel="prefetch" href="/assets/js/75.b1cabeb6.js"><link rel="prefetch" href="/assets/js/76.1f563ab7.js"><link rel="prefetch" href="/assets/js/77.abb4ca5d.js"><link rel="prefetch" href="/assets/js/78.40ffda23.js"><link rel="prefetch" href="/assets/js/79.f3fe6eaa.js"><link rel="prefetch" href="/assets/js/8.f5dced20.js"><link rel="prefetch" href="/assets/js/80.3de3caa0.js"><link rel="prefetch" href="/assets/js/81.e2aa0b2b.js"><link rel="prefetch" href="/assets/js/82.d1ca99a1.js"><link rel="prefetch" href="/assets/js/83.dccf9b37.js"><link rel="prefetch" href="/assets/js/84.4dae5e5b.js"><link rel="prefetch" href="/assets/js/85.c6480fc2.js"><link rel="prefetch" href="/assets/js/86.d5480dce.js"><link rel="prefetch" href="/assets/js/87.01b022e2.js"><link rel="prefetch" href="/assets/js/88.02938c2d.js"><link rel="prefetch" href="/assets/js/89.d7e23c9c.js"><link rel="prefetch" href="/assets/js/9.e0f173ad.js"><link rel="prefetch" href="/assets/js/90.9ed16b8c.js"><link rel="prefetch" href="/assets/js/91.40909222.js"><link rel="prefetch" href="/assets/js/92.2f121267.js"><link rel="prefetch" href="/assets/js/93.80f9c1cd.js"><link rel="prefetch" href="/assets/js/94.b78709e4.js"><link rel="prefetch" href="/assets/js/95.71adfe21.js"><link rel="prefetch" href="/assets/js/96.41c9152f.js"><link rel="prefetch" href="/assets/js/97.b80c4bf0.js"><link rel="prefetch" href="/assets/js/98.e0a4d08a.js"><link rel="prefetch" href="/assets/js/99.38bc76b8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.594b47db.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">å·¦å°ç™½çš„å‰ç«¯ç¬”è®°</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æŒ‡å—" class="dropdown-title"><span class="title">æŒ‡å—</span> <span class="arrow down"></span></button> <button type="button" aria-label="æŒ‡å—" class="mobile-dropdown-title"><span class="title">æŒ‡å—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  é¦–é¡µ
</a></li><li class="dropdown-item"><!----> <a href="/nav.html" class="nav-link">
  å‰ç«¯ç½‘å€å¯¼èˆª
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯è¿›é˜¶" class="dropdown-title"><span class="title">å‰ç«¯è¿›é˜¶</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯è¿›é˜¶" class="mobile-dropdown-title"><span class="title">å‰ç«¯è¿›é˜¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daily/" class="nav-link router-link-active">
  æŠ€æœ¯æ—¥å¸¸è®°å½•
</a></li><li class="dropdown-item"><!----> <a href="/server/docker.html" class="nav-link">
  Docker åŸºç¡€
</a></li><li class="dropdown-item"><h4>
          Vue.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/base/1.html" class="nav-link">
  Vue.js ç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/vue/vue-router.html" class="nav-link">
  Vue Router ç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/vue/vuex.html" class="nav-link">
  Vuex ç¬”è®°
</a></li></ul></li><li class="dropdown-item"><h4>
          å‰ç«¯å·¥ç¨‹åŒ–
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ts/base-1.html" class="nav-link">
  TypeScript å…¥é—¨æ•™ç¨‹ç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/node/base/1.html" class="nav-link">
  Node.js ç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/webpack/base.html" class="nav-link">
  webpack åŸºç¡€
</a></li></ul></li><li class="dropdown-item"><h4>
          æ•°æ®å¯è§†åŒ–
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/visual/echarts.html" class="nav-link">
  Echarts ç¬”è®°
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯åŸºç¡€" class="dropdown-title"><span class="title">å‰ç«¯åŸºç¡€</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯åŸºç¡€" class="mobile-dropdown-title"><span class="title">å‰ç«¯åŸºç¡€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS/ES6
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/js/es6/es6-1.html" class="nav-link">
  ES6æ ‡å‡†å…¥é—¨(ç¬¬ä¸‰ç‰ˆ)ç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/js/ad3/js-ad3-1.html" class="nav-link">
  JavaScripté«˜çº§ç¨‹åºè®¾è®¡(ç¬¬ä¸‰ç‰ˆ)ç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/js/js-dom-art.html" class="nav-link">
  JavaScript DOMç¼–ç¨‹è‰ºæœ¯(ç¬¬äºŒç‰ˆ)ç¬”è®°
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS/CSS3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/css/flex-grid.html" class="nav-link">
  Flexä¸Gridå¸ƒå±€
</a></li><li class="dropdown-subitem"><a href="/css/html5-css-1.html" class="nav-link">
  HTML5æƒå¨æŒ‡å—(CSSéƒ¨åˆ†)ç¬”è®°
</a></li></ul></li><li class="dropdown-item"><h4>
          HTML/HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html5/html/1.html" class="nav-link">
  HTML5æƒå¨æŒ‡å—(HTMLéƒ¨åˆ†)ç¬”è®°
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="è®¡ç®—æœºåŸºç¡€" class="dropdown-title"><span class="title">è®¡ç®—æœºåŸºç¡€</span> <span class="arrow down"></span></button> <button type="button" aria-label="è®¡ç®—æœºåŸºç¡€" class="mobile-dropdown-title"><span class="title">è®¡ç®—æœºåŸºç¡€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/base/git.html" class="nav-link">
  Git ç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/base/markdown.html" class="nav-link">
  Markdown åŸºç¡€è¯­æ³•
</a></li><li class="dropdown-item"><!----> <a href="/base/dbtheory/1.html" class="nav-link">
  æ•°æ®åº“ç³»ç»ŸåŸç†ç¬”è®°
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å¼€æºé¡¹ç›®" class="dropdown-title"><span class="title">å¼€æºé¡¹ç›®</span> <span class="arrow down"></span></button> <button type="button" aria-label="å¼€æºé¡¹ç›®" class="mobile-dropdown-title"><span class="title">å¼€æºé¡¹ç›®</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://vuechart.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @guoqzuo/vue-chart
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://zuoblog.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  zuo-blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="http://www.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/zuoxiaobai/fenote" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æŒ‡å—" class="dropdown-title"><span class="title">æŒ‡å—</span> <span class="arrow down"></span></button> <button type="button" aria-label="æŒ‡å—" class="mobile-dropdown-title"><span class="title">æŒ‡å—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  é¦–é¡µ
</a></li><li class="dropdown-item"><!----> <a href="/nav.html" class="nav-link">
  å‰ç«¯ç½‘å€å¯¼èˆª
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯è¿›é˜¶" class="dropdown-title"><span class="title">å‰ç«¯è¿›é˜¶</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯è¿›é˜¶" class="mobile-dropdown-title"><span class="title">å‰ç«¯è¿›é˜¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daily/" class="nav-link router-link-active">
  æŠ€æœ¯æ—¥å¸¸è®°å½•
</a></li><li class="dropdown-item"><!----> <a href="/server/docker.html" class="nav-link">
  Docker åŸºç¡€
</a></li><li class="dropdown-item"><h4>
          Vue.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/base/1.html" class="nav-link">
  Vue.js ç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/vue/vue-router.html" class="nav-link">
  Vue Router ç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/vue/vuex.html" class="nav-link">
  Vuex ç¬”è®°
</a></li></ul></li><li class="dropdown-item"><h4>
          å‰ç«¯å·¥ç¨‹åŒ–
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ts/base-1.html" class="nav-link">
  TypeScript å…¥é—¨æ•™ç¨‹ç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/node/base/1.html" class="nav-link">
  Node.js ç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/webpack/base.html" class="nav-link">
  webpack åŸºç¡€
</a></li></ul></li><li class="dropdown-item"><h4>
          æ•°æ®å¯è§†åŒ–
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/visual/echarts.html" class="nav-link">
  Echarts ç¬”è®°
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯åŸºç¡€" class="dropdown-title"><span class="title">å‰ç«¯åŸºç¡€</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯åŸºç¡€" class="mobile-dropdown-title"><span class="title">å‰ç«¯åŸºç¡€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS/ES6
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/js/es6/es6-1.html" class="nav-link">
  ES6æ ‡å‡†å…¥é—¨(ç¬¬ä¸‰ç‰ˆ)ç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/js/ad3/js-ad3-1.html" class="nav-link">
  JavaScripté«˜çº§ç¨‹åºè®¾è®¡(ç¬¬ä¸‰ç‰ˆ)ç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/js/js-dom-art.html" class="nav-link">
  JavaScript DOMç¼–ç¨‹è‰ºæœ¯(ç¬¬äºŒç‰ˆ)ç¬”è®°
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS/CSS3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/css/flex-grid.html" class="nav-link">
  Flexä¸Gridå¸ƒå±€
</a></li><li class="dropdown-subitem"><a href="/css/html5-css-1.html" class="nav-link">
  HTML5æƒå¨æŒ‡å—(CSSéƒ¨åˆ†)ç¬”è®°
</a></li></ul></li><li class="dropdown-item"><h4>
          HTML/HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html5/html/1.html" class="nav-link">
  HTML5æƒå¨æŒ‡å—(HTMLéƒ¨åˆ†)ç¬”è®°
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="è®¡ç®—æœºåŸºç¡€" class="dropdown-title"><span class="title">è®¡ç®—æœºåŸºç¡€</span> <span class="arrow down"></span></button> <button type="button" aria-label="è®¡ç®—æœºåŸºç¡€" class="mobile-dropdown-title"><span class="title">è®¡ç®—æœºåŸºç¡€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/base/git.html" class="nav-link">
  Git ç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/base/markdown.html" class="nav-link">
  Markdown åŸºç¡€è¯­æ³•
</a></li><li class="dropdown-item"><!----> <a href="/base/dbtheory/1.html" class="nav-link">
  æ•°æ®åº“ç³»ç»ŸåŸç†ç¬”è®°
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å¼€æºé¡¹ç›®" class="dropdown-title"><span class="title">å¼€æºé¡¹ç›®</span> <span class="arrow down"></span></button> <button type="button" aria-label="å¼€æºé¡¹ç›®" class="mobile-dropdown-title"><span class="title">å¼€æºé¡¹ç›®</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://vuechart.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @guoqzuo/vue-chart
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://zuoblog.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  zuo-blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="http://www.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/zuoxiaobai/fenote" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>æŒ‡å—</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/daily/" aria-current="page" class="sidebar-link">æŠ€æœ¯æ—¥å¸¸è®°å½•</a></li><li><a href="/daily/2020-10.html" class="sidebar-link">2020å¹´10æœˆæŠ€æœ¯æ—¥å¸¸</a></li><li><a href="/daily/2020-09.html" class="sidebar-link">2020å¹´09æœˆæŠ€æœ¯æ—¥å¸¸</a></li><li><a href="/daily/2020-08.html" class="sidebar-link">2020å¹´08æœˆæŠ€æœ¯æ—¥å¸¸</a></li><li><a href="/daily/2020-07.html" class="sidebar-link">2020å¹´07æœˆæŠ€æœ¯æ—¥å¸¸</a></li><li><a href="/daily/2020-06.html" aria-current="page" class="active sidebar-link">2020å¹´06æœˆæŠ€æœ¯æ—¥å¸¸</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-06.html#_2020-06-30-å‘¨äºŒ" class="sidebar-link">2020/06/30 å‘¨äºŒ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-06.html#ä¸ºä»€ä¹ˆæœ‰æ•ˆçš„uriä¸èƒ½åŒ…å«ç©ºæ ¼ç­‰å…¶ä»–å­—ç¬¦-uriç¼–ç æ–¹æ³•è¯¦è§£" class="sidebar-link">ä¸ºä»€ä¹ˆæœ‰æ•ˆçš„URIä¸èƒ½åŒ…å«ç©ºæ ¼ç­‰å…¶ä»–å­—ç¬¦ï¼ŒURIç¼–ç æ–¹æ³•è¯¦è§£</a></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#ä¸ºä»€ä¹ˆæœ‰æ•ˆçš„uriä¸èƒ½åŒ…å«ç©ºæ ¼ç­‰å…¶ä»–å­—ç¬¦" class="sidebar-link">ä¸ºä»€ä¹ˆæœ‰æ•ˆçš„URIä¸èƒ½åŒ…å«ç©ºæ ¼ç­‰å…¶ä»–å­—ç¬¦ï¼Ÿ</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#_2020-06-28-å‘¨å¤©" class="sidebar-link">2020/06/28 å‘¨å¤©</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-06.html#è¾“å…¥æ³•ç»„åˆæ–‡å­—äº‹ä»¶compositionstartç­‰ä¸èƒ½ç”¨onç›‘å¬" class="sidebar-link">è¾“å…¥æ³•ç»„åˆæ–‡å­—äº‹ä»¶compositionstartç­‰ä¸èƒ½ç”¨onç›‘å¬</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#_2020-06-26-å‘¨äº”" class="sidebar-link">2020/06/26 å‘¨äº”</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-06.html#ä¸ºä»€ä¹ˆvconsoleç›´æ¥newä¸€ä¸‹å°±èƒ½å¼•å…¥-è€Œä¸”å¯ä»¥æ˜¾ç¤ºç½‘ç»œè¯·æ±‚-consoleä¿¡æ¯" class="sidebar-link">ä¸ºä»€ä¹ˆvconsoleç›´æ¥newä¸€ä¸‹å°±èƒ½å¼•å…¥ï¼Œè€Œä¸”å¯ä»¥æ˜¾ç¤ºç½‘ç»œè¯·æ±‚ï¼Œconsoleä¿¡æ¯</a></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#obså½•åˆ¶è§†é¢‘ä¸æ˜¯å…¨å±çš„é—®é¢˜" class="sidebar-link">obså½•åˆ¶è§†é¢‘ä¸æ˜¯å…¨å±çš„é—®é¢˜</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#_2020-06-21-å‘¨æ—¥" class="sidebar-link">2020/06/21 å‘¨æ—¥</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-06.html#è§†é¢‘æ‹–åŠ¨åˆ°imovieæ—¶é—´è½´å-å±å¹•ä¸Šæ–¹å’Œä¸‹æ–¹è¢«æˆªæ–­äº†" class="sidebar-link">è§†é¢‘æ‹–åŠ¨åˆ°imovieæ—¶é—´è½´å,å±å¹•ä¸Šæ–¹å’Œä¸‹æ–¹è¢«æˆªæ–­äº†</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#_2020-06-19-å‘¨äº”" class="sidebar-link">2020/06/19 å‘¨äº”</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-06.html#æ•°ç»„å»é‡-å»æ‰idé‡å¤çš„å…ƒç´ " class="sidebar-link">æ•°ç»„å»é‡ï¼Œå»æ‰idé‡å¤çš„å…ƒç´ </a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#_2020-06-17-å‘¨ä¸‰" class="sidebar-link">2020/06/17 å‘¨ä¸‰</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-06.html#axioså–æ¶ˆè¯·æ±‚-ä»¥åŠå…·ä½“ä½¿ç”¨åœºæ™¯" class="sidebar-link">axioså–æ¶ˆè¯·æ±‚ï¼Œä»¥åŠå…·ä½“ä½¿ç”¨åœºæ™¯</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#_2020-06-16-å‘¨äºŒ" class="sidebar-link">2020/06/16 å‘¨äºŒ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-06.html#vueå†™ä¸€ä¸ªjså¯ä»¥è°ƒç”¨çš„toastç»„ä»¶" class="sidebar-link">vueå†™ä¸€ä¸ªjså¯ä»¥è°ƒç”¨çš„toastç»„ä»¶</a></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#å‰ç«¯æ€§èƒ½ä¼˜åŒ–-ç¼“å­˜" class="sidebar-link">å‰ç«¯æ€§èƒ½ä¼˜åŒ– - ç¼“å­˜</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#_2020-06-15-å‘¨ä¸€" class="sidebar-link">2020/06/15 å‘¨ä¸€</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-06.html#macoså¤§å°å†™ä¸æ•æ„Ÿ-ä¿®æ”¹æ–‡ä»¶åå¤§å°å†™ågitä¼šå¼‚å¸¸" class="sidebar-link">macoså¤§å°å†™ä¸æ•æ„Ÿï¼Œä¿®æ”¹æ–‡ä»¶åå¤§å°å†™ågitä¼šå¼‚å¸¸</a></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#echartsç”»é«˜è‡ªå®šä¹‰ä»ªè¡¨ç›˜-echartæœ¬è´¨æ˜¯å›¾çš„å †å " class="sidebar-link">echartsç”»é«˜è‡ªå®šä¹‰ä»ªè¡¨ç›˜ï¼Œechartæœ¬è´¨æ˜¯å›¾çš„å †å </a></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#è¾“å…¥è¿‡ç¨‹ä¸­-æ€ä¹ˆå®æ—¶é«˜äº®éƒ¨åˆ†æ–‡å­—-xxxé«˜äº®å®ç°" class="sidebar-link">è¾“å…¥è¿‡ç¨‹ä¸­ï¼Œæ€ä¹ˆå®æ—¶é«˜äº®éƒ¨åˆ†æ–‡å­—(@xxxé«˜äº®å®ç°)</a></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#v-loadingæŒ‡ä»¤çš„å®ç°-æ€ä¹ˆé€šè¿‡ä¸€ä¸ªæŒ‡ä»¤è‡ªåŠ¨åŠ éª¨æ¶å±" class="sidebar-link">v-loadingæŒ‡ä»¤çš„å®ç°ï¼Œæ€ä¹ˆé€šè¿‡ä¸€ä¸ªæŒ‡ä»¤è‡ªåŠ¨åŠ éª¨æ¶å±</a></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#element-v-loadingåœ¨ieä¸‹å¯èƒ½ä¼šæº¢å‡ºåˆ°å…¨å±çš„é—®é¢˜" class="sidebar-link">element v-loadingåœ¨IEä¸‹å¯èƒ½ä¼šæº¢å‡ºåˆ°å…¨å±çš„é—®é¢˜</a></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#element-v-loadingåœ¨ieä¸‹å¯èƒ½ä¼šå…³ä¸æ‰çš„é—®é¢˜" class="sidebar-link">element v-loadingåœ¨IEä¸‹å¯èƒ½ä¼šå…³ä¸æ‰çš„é—®é¢˜</a></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#macosä¸‹æ€ä¹ˆå°†mp4å’Œm4aæ–‡ä»¶åˆå¹¶" class="sidebar-link">macOSä¸‹æ€ä¹ˆå°†mp4å’Œm4aæ–‡ä»¶åˆå¹¶</a></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²å‡ºç°æ¬¡æ•°æœ€å¤šçš„å­—ç¬¦-å¹¶è¾“å‡ºå…¶æ¬¡æ•°" class="sidebar-link">åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²å‡ºç°æ¬¡æ•°æœ€å¤šçš„å­—ç¬¦ï¼Œå¹¶è¾“å‡ºå…¶æ¬¡æ•°</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#_2020-06-13-å‘¨å…­" class="sidebar-link">2020/06/13 å‘¨å…­</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-06.html#symbolå’Œarray-prototype-includesä¸å…¼å®¹ie-æœ‰babelå°±å¯ä»¥-ä»–çš„åŸç†æ˜¯ä»€ä¹ˆ" class="sidebar-link">Symbolå’ŒArray.prototype.includesä¸å…¼å®¹IEï¼Œæœ‰babelå°±å¯ä»¥ï¼Œä»–çš„åŸç†æ˜¯ä»€ä¹ˆ</a></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#ç”¨koa-mockæ¥å£æ—¶router-allowedmethods-è¿™ä¸ªä¸­é—´ä»¶æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„" class="sidebar-link">ç”¨koa mockæ¥å£æ—¶router.allowedMethods()è¿™ä¸ªä¸­é—´ä»¶æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„ï¼Ÿ</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#_2020-06-12-å‘¨äº”" class="sidebar-link">2020/06/12 å‘¨äº”</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-06.html#componentç”¨isè¿›è¡Œç»„ä»¶åˆ‡æ¢æ—¶ä¼šè§¦å‘å“ªäº›é’©å­å‡½æ•°-åŠ äº†keep-aliveåå‘¢" class="sidebar-link">componentç”¨isè¿›è¡Œç»„ä»¶åˆ‡æ¢æ—¶ä¼šè§¦å‘å“ªäº›é’©å­å‡½æ•°ï¼ŒåŠ äº†keep-aliveåå‘¢ï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#componentåŠ¨æ€ç»„ä»¶ä¸ä½¿ç”¨v-ifæ§åˆ¶ç»„ä»¶æ˜¾ç¤ºæœ‰ä»€ä¹ˆåŒºåˆ«" class="sidebar-link">componentåŠ¨æ€ç»„ä»¶ä¸ä½¿ç”¨v-ifæ§åˆ¶ç»„ä»¶æ˜¾ç¤ºæœ‰ä»€ä¹ˆåŒºåˆ«</a></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#element-tabsç»„ä»¶åˆ‡æ¢é¡µé¢æ—¶-æ˜¾ç¤ºæˆ–éšè—çš„ç»„ä»¶ä¼šè§¦å‘å“ªäº›é’©å­å‡½æ•°" class="sidebar-link">element tabsç»„ä»¶åˆ‡æ¢é¡µé¢æ—¶ï¼Œæ˜¾ç¤ºæˆ–éšè—çš„ç»„ä»¶ä¼šè§¦å‘å“ªäº›é’©å­å‡½æ•°</a></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#keep-aliveç»„ä»¶åˆ‡æ¢æ˜¾ç¤ºæ—¶-avtivatedå’ŒcreatedåŒæ—¶è§¦å‘çš„é—®é¢˜" class="sidebar-link">keep-aliveç»„ä»¶åˆ‡æ¢æ˜¾ç¤ºæ—¶ï¼Œavtivatedå’ŒcreatedåŒæ—¶è§¦å‘çš„é—®é¢˜</a></li></ul></li><li class="sidebar-sub-header"><a href="/daily/2020-06.html#_2020-06-11-å‘¨å››" class="sidebar-link">2020/06/11 å‘¨å››</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daily/2020-06.html#æ‰‹åŠ¨è§¦å‘window-resizeäº‹ä»¶-fixæ”¹å˜çª—å£å¤§å°åå…¶ä»–tabé¡µechartå›¾è¡¨æ˜¾ç¤ºå¼‚å¸¸çš„é—®é¢˜" class="sidebar-link">æ‰‹åŠ¨è§¦å‘window resizeäº‹ä»¶ï¼Œfixæ”¹å˜çª—å£å¤§å°åå…¶ä»–tabé¡µechartå›¾è¡¨æ˜¾ç¤ºå¼‚å¸¸çš„é—®é¢˜</a></li></ul></li></ul></li><li><a href="/daily/2020-05.html" class="sidebar-link">2020å¹´05æœˆæŠ€æœ¯æ—¥å¸¸</a></li><li><a href="/daily/2020-04.html" class="sidebar-link">2020å¹´04æœˆæŠ€æœ¯æ—¥å¸¸</a></li><li><a href="/daily/2020-03.html" class="sidebar-link">2020å¹´03æœˆæŠ€æœ¯æ—¥å¸¸</a></li><li><a href="/daily/2020-02.html" class="sidebar-link">2020å¹´02æœˆæŠ€æœ¯æ—¥å¸¸</a></li><li><a href="/daily/2020-01.html" class="sidebar-link">2020å¹´01æœˆæŠ€æœ¯æ—¥å¸¸</a></li><li><a href="/daily/2019-12.html" class="sidebar-link">2019å¹´12æœˆæŠ€æœ¯æ—¥å¸¸</a></li><li><a href="/daily/2019-11.html" class="sidebar-link">2019å¹´11æœˆæŠ€æœ¯æ—¥å¸¸</a></li><li><a href="/daily/2019-10.html" class="sidebar-link">2019å¹´10æœˆæŠ€æœ¯æ—¥å¸¸</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2020å¹´06æœˆæŠ€æœ¯æ—¥å¸¸"><a href="#_2020å¹´06æœˆæŠ€æœ¯æ—¥å¸¸" class="header-anchor">#</a> 2020å¹´06æœˆæŠ€æœ¯æ—¥å¸¸</h1> <h2 id="_2020-06-30-å‘¨äºŒ"><a href="#_2020-06-30-å‘¨äºŒ" class="header-anchor">#</a> 2020/06/30 å‘¨äºŒ</h2> <h3 id="ä¸ºä»€ä¹ˆæœ‰æ•ˆçš„uriä¸èƒ½åŒ…å«ç©ºæ ¼ç­‰å…¶ä»–å­—ç¬¦-uriç¼–ç æ–¹æ³•è¯¦è§£"><a href="#ä¸ºä»€ä¹ˆæœ‰æ•ˆçš„uriä¸èƒ½åŒ…å«ç©ºæ ¼ç­‰å…¶ä»–å­—ç¬¦-uriç¼–ç æ–¹æ³•è¯¦è§£" class="header-anchor">#</a> ä¸ºä»€ä¹ˆæœ‰æ•ˆçš„URIä¸èƒ½åŒ…å«ç©ºæ ¼ç­‰å…¶ä»–å­—ç¬¦ï¼ŒURIç¼–ç æ–¹æ³•è¯¦è§£</h3> <p>åœ¨JSé«˜ç¨‹3é‡Œä»‹ç»URIç¼–ç æ–¹æ³•æ—¶ï¼Œæœ‰è¿™æ ·ä¸€ä¸ªæè¿°ï¼š<strong>æœ‰æ•ˆçš„URIä¸­ä¸èƒ½åŒ…å«æŸäº›å­—ç¬¦ï¼Œæ¯”å¦‚ç©ºæ ¼ã€‚ä½¿ç”¨URIç¼–ç æ–¹æ³•å¯ä»¥æŠŠæ‰€æœ‰æ— æ•ˆçš„å­—ç¬¦æ›¿æ¢ä¸ºç‰¹æ®Šçš„utf-8ç¼–ç ï¼Œä»è€Œè®©æµè§ˆå™¨èƒ½å¤Ÿæ¥å—å’Œç†è§£</strong></p> <h3 id="ä¸ºä»€ä¹ˆæœ‰æ•ˆçš„uriä¸èƒ½åŒ…å«ç©ºæ ¼ç­‰å…¶ä»–å­—ç¬¦"><a href="#ä¸ºä»€ä¹ˆæœ‰æ•ˆçš„uriä¸èƒ½åŒ…å«ç©ºæ ¼ç­‰å…¶ä»–å­—ç¬¦" class="header-anchor">#</a> ä¸ºä»€ä¹ˆæœ‰æ•ˆçš„URIä¸èƒ½åŒ…å«ç©ºæ ¼ç­‰å…¶ä»–å­—ç¬¦ï¼Ÿ</h3> <p>åœ¨ã€ŠHTTPæƒå¨æŒ‡å—ã€‹ç¬¬2ç« URLä¸èµ„æº - å„ç§ä»¤äººå¤´ç–¼çš„å­—ç¬¦(p38)é‡Œæœ‰ä»‹ç»åŸå› ï¼š</p> <p>URLæ˜¯å¯ç§»æ¤çš„(portable)ï¼Œå®ƒè¦ç»Ÿä¸€çš„å‘½åç½‘ä¸Šæ‰€æœ‰çš„èµ„æºï¼Œæ„å‘³ç€è¦é€šè¿‡å„ç§ä¸åŒçš„åè®®æ¥ä¼ é€è¿™äº›èµ„æºï¼Œè¿™äº›åè®®åœ¨ä¼ è¾“æ•°æ®æ—¶éƒ½ä¼šä½¿ç”¨ä¸åŒçš„æœºåˆ¶ï¼Œåœ¨è®¾è®¡URLæ—¶ï¼Œéœ€è¦æ»¡è¶³ä»¥ä¸‹ç‰¹æ€§ï¼š</p> <ol><li>å¯ä»¥é€šè¿‡ä»»æ„åè®®è¿›è¡Œ<strong>å®‰å…¨çš„ä¼ è¾“</strong>ï¼šå®Œæ•´/ä¸ä¸¢å¤±ä¿¡æ¯ï¼Œä»¥SMTPç”µå­é‚®ä»¶çš„ç®€å•é‚®ä»¶ä¼ è¾“åè®®ä¸ºä¾‹ï¼Œå®ƒä½¿ç”¨çš„ä¼ è¾“æ–¹æ³•ä¼šå‰¥å»ä¸€äº›ç‰¹å®šå­—ç¬¦ï¼Œä¸ºäº†é¿å¼€è¿™äº›é—®é¢˜ï¼ŒURLåªèƒ½ä½¿ç”¨ä¸€äº›ç›¸å¯¹è¾ƒå°çš„ã€é€šç”¨çš„å®‰å…¨å­—æ¯è¡¨ä¸­çš„å­—ç¬¦ã€‚</li> <li><strong>URLå…·æœ‰å¯è¯»æ€§</strong>ï¼šå³ä½¿æ˜¯çœ‹ä¸è§ï¼Œä¸å¯æ‰“å°çš„å­—ç¬¦ä¹Ÿèƒ½åœ¨URLä¸­ä½¿ç”¨ï¼Œæ¯”å¦‚ç©ºæ ¼</li> <li><strong>å®Œæ•´æ€§</strong>ï¼šäººä»¬å¯èƒ½ä¼šå¸Œæœ›URLä¸­å¯ä»¥åŒ…å«é™¤é€šç”¨å®‰å…¨å­—æ¯è¡¨ä¹‹å¤–çš„äºŒè¿›åˆ¶æ•°æ®æˆ–å­—ç¬¦ï¼Œå› æ­¤éœ€è¦ä¸€ç§è½¬ä¹‰æœºåˆ¶ï¼Œèƒ½å¤Ÿå°†ä¸å®‰å…¨çš„å­—ç¬¦ç¼–ç è½¬ä¸ºå®‰å…¨å­—ç¬¦å†è¿›è¡Œä¼ è¾“</li></ol> <h4 id="jsä¸­ä¸¤ç§uriç¼–ç æ–¹æ³•çš„åŒºåˆ«"><a href="#jsä¸­ä¸¤ç§uriç¼–ç æ–¹æ³•çš„åŒºåˆ«" class="header-anchor">#</a> jsä¸­ä¸¤ç§URIç¼–ç æ–¹æ³•çš„åŒºåˆ«</h4> <p>ä¹‹å‰æœ‰ç®€å•è¯´æ˜encodeURIComponentä¸encodeURIçš„åŒºåˆ«ï¼š<s>encodeURIåªè½¬ä¹‰ç©ºæ ¼ï¼ŒencodeURIComponentä¼šè½¬ä¹‰æ‰€æœ‰çš„éå­—æ¯æ•°å­—å­—ç¬¦</s></p> <p>å…¶å®ä¸Šé¢çš„è¯´æ³•æ˜¯é”™è¯¯çš„ï¼Œåœ¨mdnçš„ä¸€ä¸ªç¤ºä¾‹ä¸­ï¼Œæœ‰æ›´åŠ è¯¦ç»†è¯´æ˜ä¸¤è€…çš„åŒºåˆ«</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// encodeURI vs encodeURIComponent</span>
<span class="token comment">// encodeURI() differs from encodeURIComponent() as follows:</span>
<span class="token keyword">var</span> set1 <span class="token operator">=</span> <span class="token string">&quot;;,/?:@&amp;=+$#&quot;</span><span class="token punctuation">;</span> <span class="token comment">// Reserved Characters</span>
<span class="token keyword">var</span> set2 <span class="token operator">=</span> <span class="token string">&quot;-_.!~*'()&quot;</span><span class="token punctuation">;</span>   <span class="token comment">// Unreserved Marks</span>
<span class="token keyword">var</span> set3 <span class="token operator">=</span> <span class="token string">&quot;ABC abc 123&quot;</span><span class="token punctuation">;</span> <span class="token comment">// Alphanumeric Characters + Space  [ËŒÃ¦lfÉ™njuËËˆmerÉªk] å­—æ¯æ•°å­— + ç©ºæ ¼</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">encodeURI</span><span class="token punctuation">(</span>set1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ;,/?:@&amp;=+$#</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">encodeURI</span><span class="token punctuation">(</span>set2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -_.!~*'()</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">encodeURI</span><span class="token punctuation">(</span>set3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ABC%20abc%20123 (the space gets encoded as %20)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>set1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// %3B%2C%2F%3F%3A%40%26%3D%2B%24%23</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>set2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -_.!~*'()</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>set3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ABC%20abc%20123 (the space gets encoded as %20)</span>
</code></pre></div><p>ä¸Šé¢çš„ä¾‹å­ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒURIç¼–ç æ–¹æ³•ä¸€èˆ¬æœ‰3ç§ç±»å‹çš„å­—ç¬¦</p> <table><thead><tr><th>å­—ç¬¦ç±»å‹(ä¸­)</th> <th>å­—ç¬¦ç±»å‹(è‹±)</th> <th>åŒ…å«</th> <th>encodeURI</th> <th>encodeURIComponent</th></tr></thead> <tbody><tr><td>URIä¿ç•™å­—ç¬¦</td> <td>Reserved Characters</td> <td>&quot;;,/?ğŸ˜¡&amp;=+$#&quot;</td> <td>ä¸è½¬ä¹‰</td> <td>è½¬ä¹‰(escaped)</td></tr> <tr><td>éè½¬ä¹‰å­—ç¬¦</td> <td>Unreserved Marks or Alphanumeric Characters</td> <td>&quot;-_.!~*'()&quot;ä»¥åŠæ•°å­—(0-9)ã€å­—æ¯(a-zA-Z)</td> <td>ä¸è½¬ä¹‰</td> <td>ä¸è½¬ä¹‰</td></tr> <tr><td>ç©ºæ ¼ç­‰å…¶ä»–å­—ç¬¦/ä¸­æ–‡ç­‰</td> <td>space or other character etc</td> <td>&quot; ä¸­æ–‡ï¼Ÿ&quot;ç­‰å…¶ä»–å­—ç¬¦</td> <td>è½¬ä¹‰</td> <td>è½¬ä¹‰</td></tr></tbody></table> <p>é€šè¿‡ä¸Šé¢çš„è¡¨æ ¼æˆ‘ä»¬å¯ä»¥çœ‹åˆ°</p> <ul><li><strong>encodeURIä¸ä¼šç¼–ç URIä¿ç•™å­—ç¬¦/éè½¬ä¹‰å­—ç¬¦ï¼Œåªä¼šå¯¹ç©ºæ ¼ç­‰å…¶ä»–å­—ç¬¦(å¦‚ä¸­æ–‡å­—ç¬¦ï¼Œä¸­æ–‡ç­‰)è¿›è¡Œç¼–ç </strong></li> <li><strong>encodeURIComponentä¸ä¼šç¼–ç éè½¬ä¹‰å­—ç¬¦ï¼ŒURIä¿ç•™å­—ç¬¦å’Œå…¶ä»–å­—ç¬¦éƒ½ä¼šç¼–ç </strong></li></ul> <p>ç»¼ä¸Šï¼ŒencodeURIä¸encodeURIComponentçš„åŒºåˆ«æ˜¯ï¼š<strong>encodeURIComponentä¼šå¯¹URIä¿ç•™å­—ç¬¦è¿›è¡Œç¼–ç ï¼Œè€ŒencodeURIåˆ™ä¸ä¼šï¼Œå…¶ä»–é€»è¾‘åŸºæœ¬ä¸€è‡´</strong>ã€‚</p> <h4 id="æ ‡å‡†"><a href="#æ ‡å‡†" class="header-anchor">#</a> æ ‡å‡†</h4> <p>ä¸‹é¢æ¥çœ‹çœ‹ECMA262æ ‡å‡†/è§„èŒƒ(specification)å¯¹encodeURI()çš„å®šä¹‰(definition)</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">18.2</span><span class="token number">.6</span><span class="token number">.4</span> <span class="token function">encodeURI</span> <span class="token punctuation">(</span> uri <span class="token punctuation">)</span>
The encodeURI <span class="token keyword">function</span> computes a <span class="token keyword">new</span> <span class="token class-name">version</span> <span class="token keyword">of</span> a <span class="token constant">UTF</span><span class="token operator">-</span><span class="token number">16</span> <span class="token function">encoded</span> <span class="token punctuation">(</span><span class="token number">6.1</span><span class="token number">.4</span><span class="token punctuation">)</span> <span class="token constant">URI</span> <span class="token keyword">in</span> which each instance <span class="token keyword">of</span> certain code points is replaced by one<span class="token punctuation">,</span> two<span class="token punctuation">,</span> three<span class="token punctuation">,</span> or four escape sequences representing the <span class="token constant">UTF</span><span class="token operator">-</span><span class="token number">8</span> encoding <span class="token keyword">of</span> the code points<span class="token punctuation">.</span>

The encodeURI <span class="token keyword">function</span> is the <span class="token operator">%</span>encodeURI<span class="token operator">%</span> intrinsic object<span class="token punctuation">.</span> When the encodeURI <span class="token keyword">function</span> is called <span class="token keyword">with</span> one argument uri<span class="token punctuation">,</span> the following steps are taken<span class="token operator">:</span>

  <span class="token number">1.</span> Let uriString be <span class="token operator">?</span> <span class="token function">ToString</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">.</span>
  <span class="token number">2.</span> Let unescapedURISet be a String containing one instance <span class="token keyword">of</span> each code unit valid <span class="token keyword">in</span> uriReserved and uriUnescaped  
     plus <span class="token string">&quot;#&quot;</span><span class="token punctuation">.</span>
  <span class="token number">3.</span> Return <span class="token operator">?</span> <span class="token function">Encode</span><span class="token punctuation">(</span>uriString<span class="token punctuation">,</span> unescapedURISet<span class="token punctuation">)</span><span class="token punctuation">.</span>

<span class="token constant">NOTE</span>
The code point # is not encoded to an escape sequence even though it is not a reserved or unescaped <span class="token constant">URI</span> code point<span class="token punctuation">.</span>
</code></pre></div><p>Runtime Semantics: Encode(string, unescapedSet)</p> <div class="language-js extra-class"><pre class="language-js"><code>The abstract operation Encode takes arguments <span class="token function">string</span> <span class="token punctuation">(</span>a String<span class="token punctuation">)</span> and <span class="token function">unescapedSet</span> <span class="token punctuation">(</span>a String<span class="token punctuation">)</span><span class="token punctuation">.</span> It performs <span class="token constant">URI</span> encoding and escaping<span class="token punctuation">.</span> It performs the following steps when called<span class="token operator">:</span>

<span class="token number">1.</span> Let strLen be the number <span class="token keyword">of</span> code units <span class="token keyword">in</span> string<span class="token punctuation">.</span>
<span class="token number">2.</span> Let <span class="token constant">R</span> be the empty String<span class="token punctuation">.</span>
<span class="token number">3.</span> Let k be <span class="token number">0.</span>
<span class="token number">4.</span> Repeat<span class="token punctuation">,</span>
     a<span class="token punctuation">.</span> If k equals strLen<span class="token punctuation">,</span> <span class="token keyword">return</span> <span class="token constant">R</span><span class="token punctuation">.</span>
     b<span class="token punctuation">.</span> Let <span class="token constant">C</span> be the code unit at index k within string<span class="token punctuation">.</span>
     c<span class="token punctuation">.</span> If <span class="token constant">C</span> is <span class="token keyword">in</span> unescapedSet<span class="token punctuation">,</span> then
          i<span class="token punctuation">.</span> Set k to k <span class="token operator">+</span> <span class="token number">1.</span>
          ii<span class="token punctuation">.</span> Set <span class="token constant">R</span> to the string<span class="token operator">-</span>concatenation <span class="token keyword">of</span> the previous value <span class="token keyword">of</span> <span class="token constant">R</span> and <span class="token constant">C</span><span class="token punctuation">.</span>
     d<span class="token punctuation">.</span> Else<span class="token punctuation">,</span>
          i<span class="token punctuation">.</span> Let cp be <span class="token operator">!</span> <span class="token function">CodePointAt</span><span class="token punctuation">(</span>string<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">.</span>
          ii<span class="token punctuation">.</span> If cp<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token punctuation">[</span>IsUnpairedSurrogate<span class="token punctuation">]</span><span class="token punctuation">]</span> is <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">throw</span> a URIError exception<span class="token punctuation">.</span>
          iii<span class="token punctuation">.</span> Set k to k <span class="token operator">+</span> cp<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token punctuation">[</span>CodeUnitCount<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>
          iv<span class="token punctuation">.</span> Let Octets be the List <span class="token keyword">of</span> octets resulting by applying the <span class="token constant">UTF</span><span class="token operator">-</span><span class="token number">8</span> transformation to cp<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token punctuation">[</span>CodePoint<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>
          v<span class="token punctuation">.</span> For each element octet <span class="token keyword">of</span> Octets <span class="token keyword">in</span> List order<span class="token punctuation">,</span> <span class="token keyword">do</span>
               <span class="token number">1.</span> Set <span class="token constant">R</span> to the string<span class="token operator">-</span>concatenation <span class="token keyword">of</span><span class="token operator">:</span>
                   <span class="token operator">-</span> the previous value <span class="token keyword">of</span> <span class="token constant">R</span>
                   <span class="token operator">-</span> <span class="token string">&quot;%&quot;</span>
                   <span class="token operator">-</span> the String representation <span class="token keyword">of</span> octet<span class="token punctuation">,</span> formatted <span class="token keyword">as</span> a two<span class="token operator">-</span>digit uppercase hexadecimal number<span class="token punctuation">,</span> padded to the left <span class="token keyword">with</span> a zero <span class="token keyword">if</span> necessary
</code></pre></div><p>ä»¥ä¸Šï¼Œåœ¨æ€»ç»“æŸä¸ªçŸ¥è¯†ç‚¹çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ä»‹ç»jsç›¸å…³çŸ¥è¯†ç‚¹çš„å¹³å°å¾ˆå¤šï¼Œæˆ‘ä»¬å¯ä»¥å¤§è‡´çš„åˆ¤æ–­å‡ºæ–‡æ¡£çš„è¯¦ç»†ç¨‹åº¦å¦‚ä¸‹ï¼š</p> <p>èœé¸Ÿæ•™ç¨‹/w3schoolç­‰ &lt;= JSé«˜ç¨‹3ç­‰æŠ€æœ¯ç±»ä¹¦ç± &lt;= MDN &lt;= tc39 ECMAæ ‡å‡†æ–‡æ¡£</p> <p>jsç›¸å…³çŸ¥è¯†åŸºæœ¬éƒ½æ˜¯å¯¹APIã€tc39 ECMAæ ‡å‡†æ–‡æ¡£çš„æ€»ç»“ã€æ¢³ç†ã€‚åŒºåˆ«åœ¨äºï¼š</p> <ol><li>æ•´ç†çš„æ„å›¾ï¼šæ˜¯ä»…ä»…å±•ç¤ºAPIè°ƒç”¨ï¼Œè¿˜æ˜¯ä»‹ç»åŸç†ï¼ˆç®€å•è¯´æ˜/è¯¦ç»†ä»‹ç»ï¼‰</li> <li>ç¤ºä¾‹demoæ˜¯å¦ä¸°å¯Œï¼Ÿdemoæ˜¯å¦å¯ä»¥è®©äººå¾ˆå¥½çš„ç†è§£çŸ¥è¯†ç‚¹ï¼Ÿ</li></ol> <p>å‚è€ƒ</p> <ul><li><a href="https://tc39.es/ecma262/#sec-uri-handling-functions" target="_blank" rel="noopener noreferrer">URI Handling Functions | ECMA-262 Specifications<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI" target="_blank" rel="noopener noreferrer">encodeURI() | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://www.zuo11.com/blog/2020/6/content-dispositon.html" target="_blank" rel="noopener noreferrer">encodeURIComponentä¸encodeURIçš„åŒºåˆ«<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.yuque.com/guoqzuo/js_es6/ep07nf#841dc4e5" target="_blank" rel="noopener noreferrer">jsé«˜ç¨‹3çš„å¼•ç”¨ç±»å‹ - å•ä½“å†…ç½®å¯¹è±¡ - globalå¯¹è±¡ - URIç¼–ç æ–¹æ³•ç¬”è®°<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://www.ruanyifeng.com/blog/2010/02/url_encoding.html" target="_blank" rel="noopener noreferrer">å…³äºURLç¼–ç  | é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="_2020-06-28-å‘¨å¤©"><a href="#_2020-06-28-å‘¨å¤©" class="header-anchor">#</a> 2020/06/28 å‘¨å¤©</h2> <h3 id="è¾“å…¥æ³•ç»„åˆæ–‡å­—äº‹ä»¶compositionstartç­‰ä¸èƒ½ç”¨onç›‘å¬"><a href="#è¾“å…¥æ³•ç»„åˆæ–‡å­—äº‹ä»¶compositionstartç­‰ä¸èƒ½ç”¨onç›‘å¬" class="header-anchor">#</a> è¾“å…¥æ³•ç»„åˆæ–‡å­—äº‹ä»¶compositionstartç­‰ä¸èƒ½ç”¨onç›‘å¬</h3> <p>ä»Šå¤©ç”¨åŸç”Ÿçš„jsæ¥å†™demoæ—¶å‘ç°ä½¿ç”¨oncompositoinstartæ— æ³•ç›‘å¬åˆ°è¾“å…¥æ³•ç»„åˆæ–‡ä»¶çš„è¿‡ç¨‹ï¼Œåé¢æ›¿æ¢ä¸ºaddEventListenerå°±å¯ä»¥äº†ã€‚å› æ­¤å¯¹äºè¾“å…¥æ³•ç»„åˆæ–‡å­—è¿‡ç¨‹äº‹ä»¶å¿…é¡»è¦ä½¿ç”¨DOM2çº§äº‹ä»¶ç›‘å¬</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">let</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#input'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> input<span class="token punctuation">)</span>
    <span class="token keyword">let</span> composition <span class="token operator">=</span> <span class="token boolean">false</span>

    <span class="token comment">// input.addEventListener('compositionstart', (e) =&gt; {</span>
    <span class="token comment">//   console.log('oncompositionstart')</span>
    <span class="token comment">//   composition = true</span>
    <span class="token comment">// });</span>
    <span class="token comment">// input.addEventListener('compositionend', (e) =&gt; {</span>
    <span class="token comment">//   console.log('oncompositionend')</span>
    <span class="token comment">//   composition = false</span>
    <span class="token comment">// });</span>

    input<span class="token punctuation">.</span><span class="token function-variable function">oncompositionstart</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'oncompositionstart'</span><span class="token punctuation">,</span> composition<span class="token punctuation">)</span>
      composition <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>

    input<span class="token punctuation">.</span><span class="token function-variable function">oncompositionend</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'oncompositionend'</span><span class="token punctuation">,</span> composition<span class="token punctuation">)</span>
      composition <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_2020-06-26-å‘¨äº”"><a href="#_2020-06-26-å‘¨äº”" class="header-anchor">#</a> 2020/06/26 å‘¨äº”</h2> <h3 id="ä¸ºä»€ä¹ˆvconsoleç›´æ¥newä¸€ä¸‹å°±èƒ½å¼•å…¥-è€Œä¸”å¯ä»¥æ˜¾ç¤ºç½‘ç»œè¯·æ±‚-consoleä¿¡æ¯"><a href="#ä¸ºä»€ä¹ˆvconsoleç›´æ¥newä¸€ä¸‹å°±èƒ½å¼•å…¥-è€Œä¸”å¯ä»¥æ˜¾ç¤ºç½‘ç»œè¯·æ±‚-consoleä¿¡æ¯" class="header-anchor">#</a> ä¸ºä»€ä¹ˆvconsoleç›´æ¥newä¸€ä¸‹å°±èƒ½å¼•å…¥ï¼Œè€Œä¸”å¯ä»¥æ˜¾ç¤ºç½‘ç»œè¯·æ±‚ï¼Œconsoleä¿¡æ¯</h3> <p>åœ¨ç§»åŠ¨ç«¯çœŸæœºè°ƒè¯•æ—¶ï¼Œä¸€èˆ¬ä¼šç”¨åˆ°vconsoleï¼Œé‚£ä½ ä¼šå‘ç°åœ¨vueä¸­vconsoleçš„å¼•å…¥éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨main.jsé‡Œé¢å¼•å…¥ï¼Œå¹¶newä¸€ä¸‹ã€‚ç›¸æ¯”å…¶ä»–ç»„ä»¶éœ€è¦Vue.useå¼•å…¥æ¥è¯´ï¼Œä¼šå¾ˆè¿·æƒ‘ï¼Œè¿™ä¸ªæ˜¯æ€ä¹ˆå¼•å…¥åˆ°é¡¹ç›®çš„ï¼Ÿé¡µé¢åº•éƒ¨æ—¶æ€ä¹ˆæ˜¾ç¤ºvconsoleçš„domçš„ï¼Ÿ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// main.js</span>
<span class="token keyword">import</span> VConsole <span class="token keyword">from</span> <span class="token string">&quot;vconsole&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">VConsole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹vconsoleçš„æºç ï¼Œçœ‹çœ‹åˆ°åº•æ˜¯æ€ä¹ˆå®ç°çš„ï¼š</p> <p>å…¥å£åœ¨ src/core/core.jsï¼Œæœ‰ä¸€ä¸ªVConsoleçš„classï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œç”¨äº†å•ä¾‹æ¨¡å¼ï¼Œåªå…è®¸æœ‰ä¸€ä¸ªvconsole</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/core/core.js</span>
<span class="token comment">// ...</span>
<span class="token keyword">class</span> <span class="token class-name">VConsole</span> <span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">opt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>$<span class="token punctuation">.</span><span class="token function">one</span><span class="token punctuation">(</span><span class="token constant">VCONSOLE_ID</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'vConsole is already exists.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ....</span>
<span class="token comment">// ...</span>
</code></pre></div><p>Logã€Systemã€Networkã€Elementã€Storageéƒ½æ˜¯å•ç‹¬çš„æ¨¡å—</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/core/core.js</span>
<span class="token comment">// ...</span>
<span class="token comment">// built-in plugins</span>
<span class="token keyword">import</span> VConsolePlugin <span class="token keyword">from</span> <span class="token string">'../lib/plugin.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> VConsoleLogPlugin <span class="token keyword">from</span> <span class="token string">'../log/log.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> VConsoleDefaultPlugin <span class="token keyword">from</span> <span class="token string">'../log/default.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> VConsoleSystemPlugin <span class="token keyword">from</span> <span class="token string">'../log/system.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> VConsoleNetworkPlugin <span class="token keyword">from</span> <span class="token string">'../network/network.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> VConsoleElementPlugin <span class="token keyword">from</span> <span class="token string">'../element/element.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> VConsoleStoragePlugin <span class="token keyword">from</span> <span class="token string">'../storage/storage.js'</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
</code></pre></div><p>constructor é‡Œé¢æŒ‚è½½domçš„æ–¹æ³•å¦‚ä¸‹ï¼Œç›´æ¥ç›‘å¬windowçš„äº‹ä»¶ï¼Œå½“ç¡®å®šé¡µé¢åŠ è½½okåï¼Œå†å°†vconsoleç›¸å…³domæŒ‚è½½ä¸Šå»</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/core/core.js</span>
<span class="token comment">// ...</span>
<span class="token comment">// try to init</span>
<span class="token keyword">let</span> <span class="token function-variable function">_onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>that<span class="token punctuation">.</span>isInited<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  that<span class="token punctuation">.</span><span class="token function">_render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  that<span class="token punctuation">.</span><span class="token function">_mockTap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  that<span class="token punctuation">.</span><span class="token function">_bindEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  that<span class="token punctuation">.</span><span class="token function">_autoRun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>document <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token string">'loading'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">$</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> _onload<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">_onload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// if document does not exist, wait for it</span>
  <span class="token keyword">let</span> _timer<span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token function-variable function">_pollingDocument</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>document <span class="token operator">&amp;&amp;</span> document<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token string">'complete'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      _timer <span class="token operator">&amp;&amp;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>_timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">_onload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      _timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>_pollingDocument<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  _timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>_pollingDocument<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸‹é¢çœ‹çœ‹consoleæ˜¯æ€ä¹ˆæ‹¦æˆªçš„ï¼Œé€šè¿‡ä¸‹é¢çš„ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡å†™äº†window.console.log/info/warnç­‰æ–¹æ³•ï¼Œæ”¹ä¸ºæ‰§è¡Œè‡ªå·±çš„printLogæ–¹æ³•ï¼Œç”¨äºè®°å½•logï¼Œå¹¶æ¸²æŸ“åˆ°vconsoleé¢æ¿é‡Œ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/log/log.js</span>
<span class="token comment">// ...</span>
<span class="token comment">/**
 * replace window.console with vConsole method
 * @private
 */</span>
<span class="token function">mockConsole</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> methodList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'log'</span><span class="token punctuation">,</span> <span class="token string">'info'</span><span class="token punctuation">,</span> <span class="token string">'warn'</span><span class="token punctuation">,</span> <span class="token string">'debug'</span><span class="token punctuation">,</span> <span class="token string">'error'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>console<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span>console <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    methodList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">method</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      that<span class="token punctuation">.</span>console<span class="token punctuation">[</span>method<span class="token punctuation">]</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>console<span class="token punctuation">[</span>method<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    that<span class="token punctuation">.</span>console<span class="token punctuation">.</span>time <span class="token operator">=</span> window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>time<span class="token punctuation">;</span>
    that<span class="token punctuation">.</span>console<span class="token punctuation">.</span>timeEnd <span class="token operator">=</span> window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>timeEnd<span class="token punctuation">;</span>
    that<span class="token punctuation">.</span>console<span class="token punctuation">.</span>clear <span class="token operator">=</span> window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>clear<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  methodList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">method</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span>console<span class="token punctuation">[</span>method<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">printLog</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        logType<span class="token operator">:</span> method<span class="token punctuation">,</span>
        logs<span class="token operator">:</span> args<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å½“vconsole removeåï¼Œè¿˜åŸç°åœº</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/log/log.js</span>
<span class="token comment">// ...</span>
<span class="token comment">/**
 * before remove
 * @public
 */</span>
<span class="token function">onRemove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>log <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>console<span class="token punctuation">.</span>log<span class="token punctuation">;</span>
  window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>info <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>console<span class="token punctuation">.</span>info<span class="token punctuation">;</span>
  window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>warn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>console<span class="token punctuation">.</span>warn<span class="token punctuation">;</span>
  window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>debug <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>console<span class="token punctuation">.</span>debug<span class="token punctuation">;</span>
  window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>error <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>console<span class="token punctuation">.</span>error<span class="token punctuation">;</span>
  window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>time <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>console<span class="token punctuation">.</span>time<span class="token punctuation">;</span>
  window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>timeEnd <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>console<span class="token punctuation">.</span>timeEnd<span class="token punctuation">;</span>
  window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>clear <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>console<span class="token punctuation">.</span>clear<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>console <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> idx <span class="token operator">=</span> <span class="token constant">ADDED_LOG_TAB_ID</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>idx <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token constant">ADDED_LOG_TAB_ID</span><span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>idx<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹Networkç›¸å…³ï¼Œä¹Ÿæ˜¯é‡å†™äº†åŸç”Ÿçš„window.XMLHttpRequest.prototype.open/sendç­‰æ–¹æ³•ï¼Œåœ¨é‡Œé¢åŠ å…¥äº†æ‹¦æˆªé€»è¾‘</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/network/network.js</span>
<span class="token comment">/**
 * mock ajax request
 * @private
 */</span>
<span class="token function">mockAjax</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> _XMLHttpRequest <span class="token operator">=</span> window<span class="token punctuation">.</span>XMLHttpRequest<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>_XMLHttpRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

  <span class="token keyword">let</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> _open <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token class-name">XMLHttpRequest</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>open<span class="token punctuation">,</span>
      _send <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token class-name">XMLHttpRequest</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>send<span class="token punctuation">;</span>
  that<span class="token punctuation">.</span>_open <span class="token operator">=</span> _open<span class="token punctuation">;</span>
  that<span class="token punctuation">.</span>_send <span class="token operator">=</span> _send<span class="token punctuation">;</span>

  <span class="token comment">// mock open()</span>
  window<span class="token punctuation">.</span><span class="token class-name">XMLHttpRequest</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">open</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> XMLReq <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// mock send()</span>
  window<span class="token punctuation">.</span><span class="token class-name">XMLHttpRequest</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">send</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> XMLReq <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">,</span>
        data <span class="token operator">=</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>ç»¼ä¸Šï¼Œæˆ‘ä»¬å¤§è‡´çŸ¥é“vconsoleçš„å¥—è·¯äº†</p> <ol><li>é€šè¿‡windowç›‘å¬é¡µé¢åŠ è½½ï¼ŒåŠ è½½okåå‘é¡µé¢è¿½åŠ vconsleç›¸å…³çš„dom</li> <li>åƒlogã€networkç­‰ç›¸å…³çš„æ¸²æŸ“æ˜¾ç¤ºï¼Œéƒ½æ˜¯é€šè¿‡é‡å†™windowä¸‹å¯¹åº”çš„ç³»ç»Ÿæ–¹æ³•æ¥åŠ å…¥ä¸€äº›è‡ªå®šä¹‰æ“ä½œ</li></ol> <p>å®Œæ•´æºç å¯ä»¥å…ˆnpm install vconsoleåå†åœ¨node_modulesé‡Œé¢æŸ¥çœ‹ï¼Œæˆ–è€…åœ¨githubä¸Šçœ‹ <a href="https://github.com/Tencent/vConsole" target="_blank" rel="noopener noreferrer">vconsole - github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="obså½•åˆ¶è§†é¢‘ä¸æ˜¯å…¨å±çš„é—®é¢˜"><a href="#obså½•åˆ¶è§†é¢‘ä¸æ˜¯å…¨å±çš„é—®é¢˜" class="header-anchor">#</a> obså½•åˆ¶è§†é¢‘ä¸æ˜¯å…¨å±çš„é—®é¢˜</h3> <p>è§£å†³æ–¹æ³•ï¼šæ‰“å¼€OBS =&gt; ç‚¹å‡»é¡¶éƒ¨ &quot;ç¼–è¾‘&quot; æŒ‰é’® =&gt; é€‰æ‹© &quot;å˜æ¢&quot; =&gt; ç‚¹å‡»æ¯”ä¾‹é€‚é…å±å¹•</p> <h2 id="_2020-06-21-å‘¨æ—¥"><a href="#_2020-06-21-å‘¨æ—¥" class="header-anchor">#</a> 2020/06/21 å‘¨æ—¥</h2> <h3 id="è§†é¢‘æ‹–åŠ¨åˆ°imovieæ—¶é—´è½´å-å±å¹•ä¸Šæ–¹å’Œä¸‹æ–¹è¢«æˆªæ–­äº†"><a href="#è§†é¢‘æ‹–åŠ¨åˆ°imovieæ—¶é—´è½´å-å±å¹•ä¸Šæ–¹å’Œä¸‹æ–¹è¢«æˆªæ–­äº†" class="header-anchor">#</a> è§†é¢‘æ‹–åŠ¨åˆ°imovieæ—¶é—´è½´å,å±å¹•ä¸Šæ–¹å’Œä¸‹æ–¹è¢«æˆªæ–­äº†</h3> <p>æ³¨æ„è¿™ç§æƒ…å†µï¼Œéœ€è¦åœ¨æ—¶é—´è½´ï¼Œé€‰ä¸­è§†é¢‘ï¼Œç„¶ååœ¨é¢„è§ˆå™¨ï¼Œç‚¹å‡» &quot;å…¨éƒ¨è¿˜åŸ&quot;ï¼Œå°±å¯ä»¥äº†ã€‚</p> <h2 id="_2020-06-19-å‘¨äº”"><a href="#_2020-06-19-å‘¨äº”" class="header-anchor">#</a> 2020/06/19 å‘¨äº”</h2> <h3 id="æ•°ç»„å»é‡-å»æ‰idé‡å¤çš„å…ƒç´ "><a href="#æ•°ç»„å»é‡-å»æ‰idé‡å¤çš„å…ƒç´ " class="header-anchor">#</a> æ•°ç»„å»é‡ï¼Œå»æ‰idé‡å¤çš„å…ƒç´ </h3> <p>æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œå®¢æˆ·ä¿¡æ¯åˆ—è¡¨ï¼Œéœ€è¦å»é™¤é‡å¤çš„å®¢æˆ·ã€‚äºæ˜¯æƒ³ç€æ€ä¹ˆå†™å»é‡çš„é€»è¾‘ï¼Œå¯ä»¥æ€è€ƒä¸‹</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> customerList <span class="token operator">=</span> <span class="token punctuation">[</span> 
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span> info<span class="token operator">:</span> <span class="token string">'xxx'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'3'</span><span class="token punctuation">,</span> info<span class="token operator">:</span> <span class="token string">'xxx'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span> info<span class="token operator">:</span> <span class="token string">'xxx'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span> info<span class="token operator">:</span> <span class="token string">'xxx'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'3'</span><span class="token punctuation">,</span> info<span class="token operator">:</span> <span class="token string">'xxx'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token comment">// å»é‡</span>
<span class="token keyword">let</span> tempSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> newList <span class="token operator">=</span> customerList<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>tempSet<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
  tempSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newList<span class="token punctuation">)</span>
<span class="token comment">// [</span>
<span class="token comment">//   { id: '1', info: 'xxx' },</span>
<span class="token comment">//   { id: '3', info: 'xxx' },</span>
<span class="token comment">//   { id: '2', info: 'xxx' },</span>
<span class="token comment">// ]</span>
</code></pre></div><h2 id="_2020-06-17-å‘¨ä¸‰"><a href="#_2020-06-17-å‘¨ä¸‰" class="header-anchor">#</a> 2020/06/17 å‘¨ä¸‰</h2> <h3 id="axioså–æ¶ˆè¯·æ±‚-ä»¥åŠå…·ä½“ä½¿ç”¨åœºæ™¯"><a href="#axioså–æ¶ˆè¯·æ±‚-ä»¥åŠå…·ä½“ä½¿ç”¨åœºæ™¯" class="header-anchor">#</a> axioså–æ¶ˆè¯·æ±‚ï¼Œä»¥åŠå…·ä½“ä½¿ç”¨åœºæ™¯</h3> <p>ä»¥ä¸‹æ˜¯ä¸¤ä¸ªä¼šç”¨åˆ°å–æ¶ˆå½“å‰è¯·æ±‚çš„åœºæ™¯</p> <ol><li>tabåˆ‡æ¢åˆ·æ–°æŸä¸ªåˆ—è¡¨æ•°æ®æ•°æ®å¯¼è‡´æ•°æ®é”™ä¹±çš„é—®é¢˜</li> <li>å¯¼å‡ºæ–‡ä»¶æˆ–ä¸‹è½½æ–‡ä»¶æ—¶ï¼Œä¸­é€”å–æ¶ˆ</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> CancelToken <span class="token operator">=</span> axios<span class="token punctuation">.</span>CancelToken<span class="token punctuation">;</span>
<span class="token keyword">const</span> source <span class="token operator">=</span> CancelToken<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// get æ–¹æ³• å‡è®¾è¿™ä¸ªæ¥å£éœ€è¦50sæ‰è¿”å›</span>
axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user/12345'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  cancelToken<span class="token operator">:</span> source<span class="token punctuation">.</span>token
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">thrown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>axios<span class="token punctuation">.</span><span class="token function">isCancel</span><span class="token punctuation">(</span>thrown<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Request canceled'</span><span class="token punctuation">,</span> thrown<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// handle error</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// post æ–¹æ³•æ—¶ å‡è®¾è¿™ä¸ªæ¥å£éœ€è¦50sæ‰è¿”å›</span>
<span class="token comment">// axios.post('/user/12345', {</span>
<span class="token comment">//   name: 'new name'</span>
<span class="token comment">// }, {</span>
<span class="token comment">//   cancelToken: source.token</span>
<span class="token comment">// })</span>

<span class="token comment">// 3åº™åå–æ¶ˆè¯·æ±‚</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// cancel the request (the message parameter is optional)</span>
  source<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token string">'Operation canceled by the user.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
</code></pre></div><p>å‚è€ƒï¼š<a href="https://github.com/axios/axios#cancellation" target="_blank" rel="noopener noreferrer">axios cancellation | github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2020-06-16-å‘¨äºŒ"><a href="#_2020-06-16-å‘¨äºŒ" class="header-anchor">#</a> 2020/06/16 å‘¨äºŒ</h2> <h3 id="vueå†™ä¸€ä¸ªjså¯ä»¥è°ƒç”¨çš„toastç»„ä»¶"><a href="#vueå†™ä¸€ä¸ªjså¯ä»¥è°ƒç”¨çš„toastç»„ä»¶" class="header-anchor">#</a> vueå†™ä¸€ä¸ªjså¯ä»¥è°ƒç”¨çš„toastç»„ä»¶</h3> <p>ä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨componentå±æ€§æ¥å¼•å…¥vueå•æ–‡ä»¶ç»„ä»¶ï¼Œä¸‹é¢æ¥ä»‹ç»ä¸€ç§ç”¨jsæ¥æŒ‚è½½å•æ–‡ä»¶ç»„ä»¶çš„æ–¹æ³•ã€‚è¿™é‡Œä»¥ä¸€ä¸ªç®€å•çš„toastç»„ä»¶æ¥è¯•è¯•æ•ˆæœ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å°†vueå•æ–‡ä»¶ç»„ä»¶æŒ‚è½½åˆ°domçš„æ ¸å¿ƒæ–¹æ³• create.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">Component<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å…ˆåˆ›å»ºå®ä¾‹</span>
  <span class="token keyword">const</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">h</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// hå°±æ˜¯createElementï¼Œå®ƒè¿”å›VNode</span>
      <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span>Component<span class="token punctuation">,</span> <span class="token punctuation">{</span> props <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// æ‰‹åŠ¨æŒ‚è½½</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$el<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// é”€æ¯æ–¹æ³•</span>
  <span class="token keyword">const</span> comp <span class="token operator">=</span> vm<span class="token punctuation">.</span>$children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  comp<span class="token punctuation">.</span><span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$el<span class="token punctuation">)</span><span class="token punctuation">;</span>
    vm<span class="token punctuation">.</span><span class="token function">$destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> comp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è°ƒç”¨ç¤ºä¾‹</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showToast<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æ‰“å¼€toast<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> Toast <span class="token keyword">from</span> <span class="token string">&quot;./Toast.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> create <span class="token keyword">from</span> <span class="token string">&quot;./create&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;show toast&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> toast <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span>Toast<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        show<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        message<span class="token operator">:</span> <span class="token string">&quot;æˆ‘æ˜¯é”™è¯¯ä¿¡æ¯&quot;</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&quot;error&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>toast<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        toast<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ç®€å•çš„Toast.vue</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-toast<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>type<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ message }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    message<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> String<span class="token punctuation">,</span>
      required<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    type<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.my-toast</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ccc<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token selector">;
  .error</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.success</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="å‰ç«¯æ€§èƒ½ä¼˜åŒ–-ç¼“å­˜"><a href="#å‰ç«¯æ€§èƒ½ä¼˜åŒ–-ç¼“å­˜" class="header-anchor">#</a> å‰ç«¯æ€§èƒ½ä¼˜åŒ– - ç¼“å­˜</h3> <p>åœ¨å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¸­ï¼Œæœ‰ä¸€ä¸ªæ–¹æ³•æ˜¯ä½¿ç”¨ç¼“å­˜ã€‚å‰ç«¯ç¼“å­˜å¯ä»¥å‡å°‘ç½‘ç»œè¯·æ±‚æ¬¡æ•°ï¼Œå‡å°‘æµé‡æ¶ˆè€—ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼Œé™ä½æœåŠ¡å™¨è´Ÿè½½ã€‚</p> <p>å‰ç«¯ç¼“å­˜åˆ†ä¸ºä¸¤ç§ï¼šhttpç¼“å­˜ã€æµè§ˆå™¨ç¼“å­˜</p> <h4 id="httpç¼“å­˜"><a href="#httpç¼“å­˜" class="header-anchor">#</a> httpç¼“å­˜</h4> <blockquote><p>ç›¸å…³æ–‡æ¡£å¯ä»¥æœç´¢å¯¹åº”è¯·æ±‚å¤´çš„MDNæ–‡æ¡£ã€å¦å¤–å¯ä»¥å‚è€ƒã€Šhttpæƒå¨æŒ‡å—ã€‹ç¬¬7ç«  ç¼“å­˜</p></blockquote> <p>httpç¼“å­˜ç­–ç•¥çš„æ ¸å¿ƒåœ¨äº<strong>æ–°é²œåº¦æ£€æµ‹</strong>ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§ç­–ç•¥æ¥ä¿æŒå·²ç¼“å­˜æ•°æ®ä¸æœåŠ¡å™¨æ•°æ®ä¹‹é—´çš„å……åˆ†ä¸€è‡´</p> <ol><li>å¼ºç¼“å­˜ - è®¾ç½®æ–‡æ¡£è¿‡æœŸæ—¶é—´(document expiration)ï¼šç»™å½“å‰è¯·æ±‚è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œè¿™æ®µæ—¶é—´å†…å¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜æ•°æ®ï¼Œä¸å¿…å†å»è¯·æ±‚æœåŠ¡å™¨æ‹¿æ•°æ®</li> <li>å¼±ç¼“å­˜/åå•†ç¼“å­˜ - æœåŠ¡å™¨å†éªŒè¯(server revalidation)ï¼šæœåŠ¡å™¨å“åº”æŸä¸ªè¯·æ±‚æ—¶ï¼Œåœ¨å“åº”å¤´åŠ ä¸€ä¸ªç‰ˆæœ¬ä¿¡æ¯æˆ–æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´çš„æ ‡è®°ï¼Œå½“ä¸‹æ¬¡è¯¥è¯·æ±‚å‘ç”Ÿæ—¶ï¼Œè¯·æ±‚å¤´ä¼šæºå¸¦è¿™ä¸ªæ ‡è®°ä¿¡æ¯ï¼ŒæœåŠ¡å™¨ä¼šé€šè¿‡æ ‡è®°å€¼æ¥åˆ¤æ–­æ˜¯å¦ä½¿ç”¨ç¼“å­˜å†…å®¹</li></ol> <h5 id="å¼ºç¼“å­˜-document-expiration"><a href="#å¼ºç¼“å­˜-document-expiration" class="header-anchor">#</a> å¼ºç¼“å­˜ document expiration</h5> <p>å½“ç¬¬ä¸€æ¬¡å‘é€æŸä¸ªhttpè¯·æ±‚åï¼Œä¼šæŠŠå†…å®¹ç¼“å­˜ä¸€æ®µæ—¶é—´ã€‚åœ¨è¿™æ®µæ—¶é—´é‡Œï¼Œéƒ½è®¤ä¸ºå†…å®¹æ˜¯ &quot;æ–°é²œçš„&quot;ï¼Œå¯ä»¥åœ¨ä¸è”ç³»æœåŠ¡å™¨çš„æƒ…å†µä¸‹ï¼Œç›´æ¥å“åº”è¯¥æ–‡æ¡£ã€‚</p> <p><strong>Expires(ç›¸å¯¹æ—¶é—´)</strong></p> <p>Expires [Éªk'spaÉªÉ™z] å“åº”å¤´åŒ…å«æ—¥æœŸ/æ—¶é—´ï¼Œ å³åœ¨æ­¤æ—¶å€™ä¹‹åï¼Œå“åº”è¿‡æœŸã€‚æ— æ•ˆçš„æ—¥æœŸï¼Œæ¯”å¦‚ 0, ä»£è¡¨ç€è¿‡å»çš„æ—¥æœŸï¼Œå³è¯¥èµ„æºå·²ç»è¿‡æœŸã€‚å¦‚æœåœ¨Cache-Controlå“åº”å¤´è®¾ç½®äº† &quot;max-age&quot; æˆ–è€… &quot;s-max-age&quot; æŒ‡ä»¤ï¼Œé‚£ä¹ˆ Expires å¤´ä¼šè¢«å¿½ç•¥ã€‚</p> <p>æˆ‘ä»¬æ¥å†™ä¸ªdemoè¯•è¯•ï¼Œæˆ‘ä»¬ç”¨koaæ¥å†™ä¸ªlistDataæ¥å£ï¼Œå°†æ¥å£çš„Expiresæ—¶é—´è®¾ç½®ä¸ºå½“å‰æ—¶é—´+1å°æ—¶ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå°æ—¶åå¤±æ•ˆï¼Œkoaä»£ç å¦‚ä¸‹</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Koa <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> Router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa-router'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Koa</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa-static'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/listData'</span><span class="token punctuation">,</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ‰“å°logï¼Œç”¨æ¥çœ‹æœåŠ¡ç«¯æ˜¯å¦æ”¶åˆ°äº†è¯·æ±‚</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'recive req'</span><span class="token punctuation">,</span> ctx<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
  <span class="token comment">// å®é™…æ•ˆæœï¼šExpires: Sat Jul 04 2020 19:28:42 GMT+0800 (GMT+08:00)</span>
  ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Expires'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">3600</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// UTCæ—¶é—´</span>
  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span>
    info<span class="token operator">:</span> <span class="token string">'hello world'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">9000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server start on 9000 port'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>å‰ç«¯æµ‹è¯•demoï¼špublic/index.htmlå¦‚ä¸‹</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>å‘é€è¯·æ±‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">let</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span>
    btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">sendRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">sendRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span>  axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/listData'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å½“æˆ‘ä»¬ç‚¹å‡»ä¸¤æ¬¡å‘é€è¯·æ±‚ï¼Œæµ‹è¯•ç»“æœå¦‚ä¸‹ï¼šç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶æ­£å¸¸æ¥æ”¶è¯·æ±‚ï¼Œç”±äºæˆ‘ä»¬è®¾ç½®äº†Expireså“åº”å¤´ï¼Œå‰ç«¯å†æ¬¡è¯·æ±‚æ—¶ï¼ŒæœåŠ¡ç«¯æ²¡æœ‰æ¥æ”¶åˆ°è¯·æ±‚ï¼Œæµè§ˆå™¨ç›´æ¥ä»ç¡¬ç›˜è¯»çš„ç¼“å­˜(from disk cache)ï¼Œå“åº”å¤´å¯¹æ¯”å›¾å¦‚ä¸‹</p> <p><img src="/images/daily/expires_header.png" alt="expires_header.png"></p> <p>å‚è€ƒï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Expires" target="_blank" rel="noopener noreferrer">Expires - HTTP | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>Cache-Control</strong></p> <p>Expriesæ˜¯http1.0çš„æ ‡å‡†ï¼Œåœ¨HTTP/1.1ç‰ˆæœ¬é‡Œï¼ŒExpireå·²ç»è¢«Cache-Controlæ›¿ä»£ï¼Œé™¤äº†å¯ä»¥è®¾ç½®æ—¶é—´å¤–ï¼Œè¿˜åŠ äº†æ›´å¤šæ§åˆ¶ï¼ŒCache-Controlå¯ä»¥è®¾ç½®å¾ˆå¤šå€¼</p> <p>å¯ç¼“å­˜æ€§ç›¸å…³å€¼</p> <ul><li>publicï¼šæ‰€æœ‰å†…å®¹éƒ½å°†è¢«ç¼“å­˜ï¼ˆå®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½å¯ç¼“å­˜ï¼‰</li> <li>privateï¼šæ‰€æœ‰å†…å®¹åªæœ‰å®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜ï¼Œï¼ˆå³ä»£ç†æœåŠ¡å™¨ä¸èƒ½ç¼“å­˜å®ƒï¼‰Cache-Controlçš„é»˜è®¤å–å€¼</li> <li>no-cacheï¼šå®¢æˆ·ç«¯ç¼“å­˜å†…å®¹ï¼Œä½†æ˜¯æ˜¯å¦ä½¿ç”¨ç¼“å­˜åˆ™éœ€è¦ç»è¿‡åå•†ç¼“å­˜æ¥éªŒè¯å†³å®šï¼ˆé™¤éèµ„æºè¿›è¡Œäº†å†éªŒè¯(åå•†ç¼“å­˜éªŒè¯)ï¼Œå¦åˆ™å®¢æˆ·ç«¯ä¸ä¼šä½¿ç”¨å·²æ¢æˆçš„èµ„æºï¼‰</li> <li>no-storeï¼šæ‰€æœ‰å†…å®¹éƒ½ä¸ä¼šè¢«ç¼“å­˜ï¼Œå³ä¸ä½¿ç”¨å¼ºåˆ¶ç¼“å­˜ï¼Œä¹Ÿä¸ä½¿ç”¨åå•†ç¼“å­˜ï¼ˆç¼“å­˜åº”å½“å°½å¿«ä»æœåŠ¡å™¨ä¸­åˆ é™¤æ–‡æ¡£çš„æ‰€æœ‰ç—•è¿¹ï¼Œå› ä¸ºå…¶ä¸­å¯èƒ½åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼‰</li></ul> <p>åˆ°æœŸç›¸å…³å€¼</p> <ul><li>max-age=seconds è®¾ç½®ç¼“å­˜å­˜å‚¨çš„æœ€å¤§å‘¨æœŸï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´ç¼“å­˜è¢«è®¤ä¸ºè¿‡æœŸ(å•ä½ç§’)ã€‚ä¸Expiresç›¸åï¼Œæ—¶é—´æ˜¯ç›¸å¯¹äºè¯·æ±‚çš„æ—¶é—´ã€‚</li> <li>s-maxage=seconds è¦†ç›–max-ageæˆ–è€…Expireså¤´ï¼Œä½†æ˜¯ä»…é€‚ç”¨äºå…±äº«ç¼“å­˜(æ¯”å¦‚å„ä¸ªä»£ç†)ï¼Œç§æœ‰ç¼“å­˜ä¼šå¿½ç•¥å®ƒã€‚</li></ul> <p>æˆ‘ä»¬å°†ä¸Šä¸ªä¾‹å­ä¸­è®¾ç½®Expiresæ›¿æ¢ä¸ºCache-Controlçš„å†™æ³•</p> <div class="language-js extra-class"><pre class="language-js"><code>ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;Cache-control&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;max-age=3600&quot;</span><span class="token punctuation">)</span>  <span class="token comment">// è®¾ç½®ç¼“å­˜æœ‰æ•ˆæ—¶é—´ä¸º3600sï¼Œ1ä¸ªå°æ—¶</span>
</code></pre></div><p>æ‰§è¡Œç»“æœå’Œä¹‹å‰çš„åŸºæœ¬ä¸€è‡´ï¼Œåªæ˜¯å“åº”å¤´æœ‰ç‚¹å˜åŒ–ï¼Œå¦‚ä¸‹å›¾</p> <p><img src="/images/daily/cachecontrol_max-age.png" alt="cachecontrol_max-age.png"></p> <p>è¿™é‡Œè¦ç‰¹åˆ«æ³¨æ„ï¼ŒCatch-Controlä¸æ­¢å“åº”å¤´å¯ä»¥è®¾ç½®ï¼Œå‰ç«¯åœ¨è¯·æ±‚å¤´ä¹Ÿæ˜¯å¯ä»¥è®¾ç½®çš„</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Cache-Control: max-age<span class="token operator">=</span><span class="token operator">&lt;</span>seconds<span class="token operator">&gt;</span> <span class="token comment"># å¦‚æœåç«¯ä¸è®¾ç½®æ”¹å€¼ï¼Œå‰ç«¯æ— æ•ˆ</span>
Cache-Control: max-stale<span class="token punctuation">[</span><span class="token operator">=</span><span class="token operator">&lt;</span>seconds<span class="token operator">&gt;</span><span class="token punctuation">]</span>
Cache-Control: min-fresh<span class="token operator">=</span><span class="token operator">&lt;</span>seconds<span class="token operator">&gt;</span>
Cache-control: no-cache  <span class="token comment"># å¯ä»¥ä½¿ç”¨ï¼Œç­‰ä»·äº Pragma: no-cache</span>
Cache-control: no-store
Cache-control: no-transform
Cache-control: only-if-cached
</code></pre></div><p>æˆ‘ä»¬å¯ä»¥åœ¨axiosè¯·æ±‚æ—¶åŠ è¯·æ±‚å¤´å‚æ•°</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span>  axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/listData'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  headers<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">'Cache-Control'</span><span class="token operator">:</span> <span class="token string">'no-cache'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// å¦‚æœå‰ç«¯ä½¿ç”¨è¿™ä¸ªè¯·æ±‚å¤´ï¼Œé‚£ä¹ˆåç«¯è®¾ç½®çš„max-ageæˆ–Expireså°±ä¼šè¢«å¿½ç•¥</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å‚è€ƒï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control" target="_blank" rel="noopener noreferrer">Cache-Control - HTTP | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h5 id="å¼±ç¼“å­˜-åå•†ç¼“å­˜-server-revalidation"><a href="#å¼±ç¼“å­˜-åå•†ç¼“å­˜-server-revalidation" class="header-anchor">#</a> å¼±ç¼“å­˜/åå•†ç¼“å­˜ server revalidation</h5> <p>ç›´æ¥ç»™æŸä¸ªè¯·æ±‚è®¾ç½®ç¼“å­˜æœ‰æ•ˆæœŸæ˜¯ç®€å•ç²—æš´çš„æ–¹æ³•ï¼Œå› ä¸ºä¸€èˆ¬æˆ‘ä»¬æ— æ³•å‡†ç¡®çš„çŸ¥é“éœ€è¦ç¼“å­˜çš„èµ„æºå…·ä½“å¯èƒ½ä¼šå˜åŠ¨çš„æ—¶é—´ã€‚äºæ˜¯å°±æœ‰äº†æœåŠ¡å™¨å†éªŒè¯çš„è¿™ç§ç­–ç•¥ï¼Œæ³¨æ„ä¸‹é¢è®¨è®ºçš„æ˜¯getè¯·æ±‚ï¼Œæ¶‰åŠåˆ°304çŠ¶æ€ç ï¼Œå¯¹äº412ç›¸å…³çš„postå‚è§å…·ä½“çš„mdnæ–‡æ¡£</p> <p><img src="/images/daily/week_cache.png" alt="week_cache.png"></p> <p><strong>Last-Modified/If-Modified-Since</strong>
åœ¨å“åº”æŸä¸ªè¯·æ±‚æ—¶ï¼Œå“åº”å¤´åŠ ä¸€ä¸ªLast-Modifiedï¼Œå€¼è®¾ç½®ä¸ºæŸä¸ªèµ„æºçš„æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´ã€‚æ³¨æ„ï¼šè¿™é‡Œä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼ŒåŠ äº†Last-Modifiedåï¼Œä¸‹æ¬¡è¯·æ±‚æµè§ˆå™¨ç›´æ¥ä½¿ç”¨äº†å¼ºç¼“å­˜ï¼Œç›´æ¥è¯»disk cacheï¼Œæ²¡æœ‰è¯·æ±‚æœåŠ¡å™¨ï¼Œé‚£æˆ‘ä»¬æœåŠ¡å™¨å†éªŒè¯å°±éªŒè¯ä¸äº†ï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®ä¸€ä¸ªno-cacheçš„è¯·æ±‚å¤´ï¼Œä¸ä½¿ç”¨å¼ºç¼“å­˜ï¼Œä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> fileInfo <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span><span class="token string">'./public/index.html'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> mtime <span class="token operator">=</span> fileInfo<span class="token punctuation">.</span>mtime
ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;Cache-control&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;no-cache&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;Last-Modified&quot;</span><span class="token punctuation">,</span> mtime<span class="token punctuation">)</span>
</code></pre></div><p>è¿™æ ·è®¾ç½®åï¼Œä¸‹æ¬¡è¯·æ±‚æ—¶ï¼Œè¯·æ±‚å¤´ä¼šè‡ªåŠ¨æºå¸¦If-Modified-Sinceï¼Œå€¼ä¸ºä¹‹å‰å“åº”å¤´è®¾ç½®çš„Last-Modifiedçš„å€¼ï¼Œç„¶åæˆ‘ä»¬æ ¹æ®If-Modified-Sinceè¯·æ±‚å¤´çš„æ—¶é—´ï¼Œä¸æŸä¸ªæ–‡ä»¶ä¿®æ”¹çš„æ—¶é—´è¿›è¡Œæ¯”å¯¹ï¼Œå¦‚æœç›¸ç­‰ï¼Œç›´æ¥è¿”å›304çŠ¶æ€ç ï¼Œæµè§ˆå™¨ä¼šä½¿ç”¨è¯¥æ¥å£ä¸Šä¸€æ¬¡æ¥å£çš„ç¼“å­˜çš„æ•°æ®</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å®Œæ•´æ¥å£å¦‚ä¸‹</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/listData'</span><span class="token punctuation">,</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'recive req'</span><span class="token punctuation">,</span> ctx<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
  <span class="token keyword">let</span> fileInfo <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span><span class="token string">'./public/index.html'</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> mtime <span class="token operator">=</span> fileInfo<span class="token punctuation">.</span>mtime
  <span class="token comment">// console.log(fileInfo, fileInfo.mtime)</span>
  <span class="token comment">// å“åº”å¤´è®¾ç½®åï¼Œä¸‹æ¬¡è¿™ä¸ªè¯·æ±‚ä¼šåœ¨è¯·æ±‚å¤´è‡ªåŠ¨åŠ ä¸Š If-Modified-Since: Sat Jul 04 2020 21:19:30 GMT+0800 (GMT+08:00) å­—æ®µ</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>headers<span class="token punctuation">)</span>
  ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;Cache-control&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;no-cache&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;Last-Modified&quot;</span><span class="token punctuation">,</span> mtime<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'if-modified-since'</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> ctx<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'if-modified-since'</span><span class="token punctuation">]</span> <span class="token operator">==</span> mtime<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;304&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">304</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span>
      info<span class="token operator">:</span> <span class="token string">'hello world'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>æ³¨æ„ï¼š<strong>å½“ä¸ If-None-Match ä¸€åŒå‡ºç°æ—¶ï¼Œå®ƒï¼ˆIf-Modified-Sinceï¼‰ä¼šè¢«å¿½ç•¥æ‰ï¼Œé™¤éæœåŠ¡å™¨ä¸æ”¯æŒ If-None-Matchã€‚</strong></p> <p>å‚è€ƒï¼š</p> <ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Last-Modified" target="_blank" rel="noopener noreferrer">Last-Modified - HTTP | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/If-Modified-Since" target="_blank" rel="noopener noreferrer">If-Modified-Since - HTTP | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p><strong>ETag/if-None-Macth</strong></p> <p>æœ‰äº›è¯·æ±‚éªŒè¯æœ€åä¿®æ”¹æ—¶é—´æ˜¯ä¸å¤Ÿçš„ï¼Œæ¯”å¦‚ï¼š</p> <ul><li>æŸäº›æ–‡ä»¶ä¼šè¢«å‘¨æœŸæ€§çš„é‡å†™ï¼Œä½†æ–‡ä»¶å†…å®¹æ˜¯ä¸€æ ·çš„ï¼Œå¯æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´å˜äº†</li> <li>æœ‰äº›æ–‡æ¡£è¢«æ”¹äº†ï¼Œä½†æ”¹åŠ¨å¹¶ä¸é‡è¦ï¼Œæ¯”å¦‚æ‹¼å†™æˆ–æ³¨é‡Šçš„ä¿®æ”¹ï¼Œä¸éœ€è¦è®©æ‰€æœ‰ç¼“å­˜éƒ½æ›´æ–°</li> <li>æœ‰äº›æ–‡æ¡£ä¼šåœ¨äºšç§’é—´å‘ç”Ÿå˜åŒ–ï¼Œå¯¹è®¾ç½®æœåŠ¡å™¨æ¥è¯´ï¼Œ1sçš„ç²’åº¦ä¼šä¸å¤Ÿç”¨</li></ul> <p>å› æ­¤ï¼ŒLast-Modifiedç”±äºç²¾ç¡®åº¦æ¯”ETag(å®ä½“æ ‡ç­¾)è¦ä½ï¼Œæ‰€ä»¥Last-Modifiedåªæ˜¯ä¸€ä¸ªå¤‡ç”¨æœºåˆ¶ã€‚ä¸€èˆ¬Last-Modifiedè®¾ç½®çš„æ˜¯ä¿®æ”¹æ—¶é—´ï¼Œè€ŒETagè®¾ç½®çš„ä¸€èˆ¬æ˜¯æŸä¸ªèµ„æºçš„æ ‡è¯†ç¬¦(ç‰ˆæœ¬å·æˆ–è€…md5ï¼Œè¡¨ç¤ºä¸€ä¸ªæ–‡ä»¶çš„æŒ‡çº¹fingerprints)ï¼Œæ¥çœ‹ä»£ç </p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> calcMd5 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./md5'</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/listData'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'recive req'</span><span class="token punctuation">,</span> ctx<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
  <span class="token keyword">let</span> md5 <span class="token operator">=</span>  <span class="token function">calcMd5</span><span class="token punctuation">(</span><span class="token string">'./public/index.html'</span><span class="token punctuation">)</span>
  ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;Cache-control&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;no-cache&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'ETag'</span><span class="token punctuation">,</span> md5<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'if-none-match'</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> ctx<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'if-none-match'</span><span class="token punctuation">]</span> <span class="token operator">===</span> md5<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;304&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">304</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span>
      info<span class="token operator">:</span> <span class="token string">'hello world'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>md5.js è®¡ç®—æ–‡ä»¶md5</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> crypto <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'crypto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">filePath</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token comment">//è¯»å–ä¸€ä¸ªBuffer</span>
	<span class="token keyword">let</span> buffer <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> fsHash <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createHash</span><span class="token punctuation">(</span><span class="token string">'md5'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	fsHash<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> fsHash<span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token string">'hex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å‚è€ƒ:</p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/ETag" target="_blank" rel="noopener noreferrer">ETag - HTTP | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-None-Match" target="_blank" rel="noopener noreferrer">If-None-Match - HTTP| MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h5 id="chromeä¸‹æ³¨æ„äº‹é¡¹"><a href="#chromeä¸‹æ³¨æ„äº‹é¡¹" class="header-anchor">#</a> Chromeä¸‹æ³¨æ„äº‹é¡¹</h5> <p>åœ¨è¿›è¡Œç¼“å­˜æµ‹è¯•æ—¶ï¼Œä½ ä¼šå‘ç°æµè§ˆå™¨çš„çœŸå®æƒ…å†µå’Œä¹¦ä¸Šæˆ–æ–‡æ¡£é‡Œçš„ä¼šæœ‰ä¸€ç‚¹ä¸ä¸€æ ·çš„åœ°æ–¹ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ï¼š</p> <ol><li><strong>å¦‚æœETagå’ŒIf-None-Matchçš„å€¼ä¸€è‡´ï¼Œä¸”koaè¿”å›äº†304ï¼Œä½†å‰ç«¯ä¸€ç›´æ˜¯200æ—¶ï¼Œå¯èƒ½æ˜¯æµè§ˆå™¨çš„é—®é¢˜ï¼Œå…³æ‰æµè§ˆå™¨å½“å‰é¡µé¢ï¼Œå†æ‰“å¼€å¯èƒ½å°±å¥½äº†</strong>ã€‚è¿™ä¸€å—è°ƒçš„æˆ‘å·®ç‚¹æ€€ç–‘äººç”Ÿ</li> <li><strong>ä¹¦ä¸Šæˆ–æ–‡æ¡£é‡Œè¯´ï¼Œno-cacheåªæ˜¯ä¸ä½¿ç”¨å¼ºç¼“å­˜ï¼Œéœ€è¦æœåŠ¡å™¨äºŒæ¬¡éªŒè¯ã€è€Œno-storeæ˜¯æ—¢ä¸ä½¿ç”¨å¼ºç¼“å­˜ä¹Ÿä¸ä½¿ç”¨åå•†ç¼“å­˜ï¼Œä½†æ˜¯åœ¨chromeæµè§ˆå™¨é‡Œï¼Œå¦‚æœä½ çš„è¯·æ±‚å¤´é‡Œæœ‰Cache-Control': 'no-cache'ï¼Œä¸ç®¡æ˜¯å¼ºç¼“å­˜è¿˜æ˜¯åå•†ç¼“å­˜éƒ½ä¸ä¼šç”Ÿæ•ˆï¼›</strong></li> <li><strong>åœ¨F12 chromeè°ƒè¯•é¢æ¿ï¼Œå‹¾é€‰disable cacheï¼Œè¯·æ±‚å¤´ä¼šè‡ªåŠ¨æºå¸¦Pragma: no-cacheï¼Œç­‰ä»·äºè¯·æ±‚å¤´é‡Œè®¾ç½®cache-controlï¼š no-cache</strong></li> <li><strong>åœ¨chromeæµè§ˆå™¨ä¸‹ï¼Œè¯·æ±‚å¤´é‡Œä½¿ç”¨Cache-Control': 'no-store'ï¼Œæ²¡æœ‰ä»»ä½•ç”¨å¤„</strong></li></ol> <p>å…³äºä»¥ä¸Šå®Œæ•´çš„HTTPç¼“å­˜æµ‹è¯•demoï¼Œå‚è§ <a href="https://github.com/zuoxiaobai/fedemo/tree/master/src/DebugDemo/%E5%89%8D%E7%AB%AF%E7%BC%93%E5%AD%98" target="_blank" rel="noopener noreferrer">httpç¼“å­˜æµ‹è¯• | github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>å‚è€ƒ:</p> <ul><li><a href="https://developer.mozilla.org/zh-TW/docs/Web/HTTP/Headers/Pragma" target="_blank" rel="noopener noreferrer">Pragma - HTTP | MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="æµè§ˆå™¨ç¼“å­˜"><a href="#æµè§ˆå™¨ç¼“å­˜" class="header-anchor">#</a> æµè§ˆå™¨ç¼“å­˜</h4> <p>cookieæˆ–storage</p> <h2 id="_2020-06-15-å‘¨ä¸€"><a href="#_2020-06-15-å‘¨ä¸€" class="header-anchor">#</a> 2020/06/15 å‘¨ä¸€</h2> <h3 id="macoså¤§å°å†™ä¸æ•æ„Ÿ-ä¿®æ”¹æ–‡ä»¶åå¤§å°å†™ågitä¼šå¼‚å¸¸"><a href="#macoså¤§å°å†™ä¸æ•æ„Ÿ-ä¿®æ”¹æ–‡ä»¶åå¤§å°å†™ågitä¼šå¼‚å¸¸" class="header-anchor">#</a> macoså¤§å°å†™ä¸æ•æ„Ÿï¼Œä¿®æ”¹æ–‡ä»¶åå¤§å°å†™ågitä¼šå¼‚å¸¸</h3> <p>macosæ˜¯æ–‡ä»¶å¤§å°å†™ä¸æ•æ„Ÿçš„ç³»ç»Ÿï¼Œè€Œwidonws/linuxæ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼Œå‡è®¾æŠŠgitä¸Šä¹‹å‰æäº¤è¿‡çš„æ–‡ä»¶ï¼Œä¿®æ”¹å¤§å°å†™ï¼Œå†æ¬¡æäº¤åï¼Œgitä¸Šä¼šå‡ºç°ä¸¤ä¸ªå¤§å°å†™ä¸ä¸€æ ·çš„æ–‡ä»¶ï¼Ÿä¸ºä»€ä¹ˆå‘¢</p> <p>macosæ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„æ–‡ä»¶ç³»ç»Ÿï¼Œä¹Ÿå°±æ˜¯åœ¨macosä¸Šä½ æ— æ³•åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹åŒæ—¶åˆ›å»ºtest.vueå’ŒTest.vueï¼Œå¦‚æœå‡ºç°è¿™ç§æƒ…å†µï¼Œæœ¬åœ°æ„ŸçŸ¥ä¸åˆ°æ–‡ä»¶çš„æ”¹åŠ¨ï¼Œä½†gitæœåŠ¡å™¨å´æœ‰è®°å½•è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚</p> <p>æœ€å¥½çš„è§£å†³æ–¹æ³•æ˜¯å°†æ•´ä¸ªæ–‡ä»¶åéƒ½å˜æ›´ã€‚è€Œä¸æ˜¯ä»…æ”¹å˜å¤§å°å†™</p> <h3 id="echartsç”»é«˜è‡ªå®šä¹‰ä»ªè¡¨ç›˜-echartæœ¬è´¨æ˜¯å›¾çš„å †å "><a href="#echartsç”»é«˜è‡ªå®šä¹‰ä»ªè¡¨ç›˜-echartæœ¬è´¨æ˜¯å›¾çš„å †å " class="header-anchor">#</a> echartsç”»é«˜è‡ªå®šä¹‰ä»ªè¡¨ç›˜ï¼Œechartæœ¬è´¨æ˜¯å›¾çš„å †å </h3> <p>æœ€è¿‘æœ‰ä¸ªUIéœ€æ±‚ï¼Œç”»ä¸€ä¸ªè‡ªå®šä¹‰çš„ä»ªè¡¨ç›˜ï¼Œçœ‹èµ·æ¥å¾ˆä¸å¥½å®ç°ï¼Œåé¢åœ¨çœ‹äº†echartsç¤¾åŒºçš„ä¸€äº›ä¾‹å­ï¼Œç»è¿‡å†™demoæµ‹è¯•åï¼Œæ‰¾åˆ°äº†è§„å¾‹ï¼Œ<strong>æ ¸å¿ƒæ˜¯åŒ–ç¹ä¸ºç®€ï¼Œå¯¹äºå¤æ‚çš„UIï¼Œå¯ä»¥æ‹†åˆ†ä¸ºå¤šä¸ªå°çš„æ¨¡å—ï¼Œä¸€ä¸ªä¸ªå®ç°</strong></p> <p><img src="/images/daily/echarts_round.png" alt="echarts_round.png"></p> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¾ˆç²—ç³™çš„æµ‹è¯•demoï¼Œoptionå¦‚ä¸‹ï¼Œå®Œæ•´demoå‚è§: <a href="https://github.com/zuoxiaobai/fedemo/tree/master/src/vuecli-demo/src/views/echarts" target="_blank" rel="noopener noreferrer">è‡ªå®šä¹‰ä»ªè¡¨ç›˜ | github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> placeHolderStyle <span class="token operator">=</span> <span class="token punctuation">{</span>
  normal<span class="token operator">:</span> <span class="token punctuation">{</span>
    label<span class="token operator">:</span> <span class="token punctuation">{</span>
      show<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    labelLine<span class="token operator">:</span> <span class="token punctuation">{</span>
      show<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    color<span class="token operator">:</span> <span class="token string">&quot;rgba(0,0,0,0)&quot;</span><span class="token punctuation">,</span>
    borderWidth<span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  emphasis<span class="token operator">:</span> <span class="token punctuation">{</span>
    color<span class="token operator">:</span> <span class="token string">&quot;rgba(0,0,0,0)&quot;</span><span class="token punctuation">,</span>
    borderWidth<span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> bg <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&quot;pie&quot;</span><span class="token punctuation">,</span>
    radius<span class="token operator">:</span> <span class="token string">&quot;53%&quot;</span><span class="token punctuation">,</span> <span class="token comment">// åŠå¾„</span>
    center<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// åœ†å¿ƒ</span>
      <span class="token string">&quot;40%&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;50%&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    z<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    itemStyle<span class="token operator">:</span> <span class="token punctuation">{</span>
      normal<span class="token operator">:</span> <span class="token punctuation">{</span>
        color<span class="token operator">:</span> <span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">&quot;linear&quot;</span><span class="token punctuation">,</span>
          x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          y<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          x2<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          y2<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          colorStops<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
              offset<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
              color<span class="token operator">:</span> <span class="token string">&quot;#ffffff&quot;</span> <span class="token comment">// 0% å¤„çš„é¢œè‰²</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              offset<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
              color<span class="token operator">:</span> <span class="token string">&quot;#f3f4f9&quot;</span> <span class="token comment">// 100% å¤„çš„é¢œè‰²</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          global<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// ç¼ºçœä¸º false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        label<span class="token operator">:</span> <span class="token punctuation">{</span>
          show<span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        labelLine<span class="token operator">:</span> <span class="token punctuation">{</span>
          show<span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    hoverAnimation<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    label<span class="token operator">:</span> <span class="token punctuation">{</span>
      show<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    tooltip<span class="token operator">:</span> <span class="token punctuation">{</span>
      show<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        value<span class="token operator">:</span> <span class="token number">70</span> <span class="token comment">// èƒŒæ™¯éƒ¨åˆ†</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        value<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token comment">// ç©ºç¼ºéƒ¨åˆ†</span>
        itemStyle<span class="token operator">:</span> <span class="token punctuation">{</span>
          color<span class="token operator">:</span> <span class="token string">&quot;transparent&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    startAngle<span class="token operator">:</span> <span class="token number">216</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// ä»ªè¡¨ç›˜å¤–å±‚</span>
<span class="token keyword">var</span> roundList <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&quot;pie&quot;</span><span class="token punctuation">,</span>
    hoverAnimation<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//é¼ æ ‡ç»è¿‡çš„ç‰¹æ•ˆ</span>
    radius<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;50%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;55%&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    center<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;40%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;50%&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    startAngle<span class="token operator">:</span> <span class="token number">180</span><span class="token punctuation">,</span>
    labelLine<span class="token operator">:</span> <span class="token punctuation">{</span>
      normal<span class="token operator">:</span> <span class="token punctuation">{</span>
        show<span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    label<span class="token operator">:</span> <span class="token punctuation">{</span>
      normal<span class="token operator">:</span> <span class="token punctuation">{</span>
        position<span class="token operator">:</span> <span class="token string">&quot;center&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        value<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token comment">// æ˜¾ç¤ºé•¿åº¦</span>
        itemStyle<span class="token operator">:</span> <span class="token punctuation">{</span>
          normal<span class="token operator">:</span> <span class="token punctuation">{</span>
            color<span class="token operator">:</span> <span class="token string">&quot;rgba(236,172,112, 1.0)&quot;</span> <span class="token comment">// æ©™è‰² 1</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        value<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token comment">// æ€»é•¿åº¦</span>
        itemStyle<span class="token operator">:</span> placeHolderStyle
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&quot;pie&quot;</span><span class="token punctuation">,</span>
    hoverAnimation<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//é¼ æ ‡ç»è¿‡çš„ç‰¹æ•ˆ</span>
    radius<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;50%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;55%&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// å†…åŠå¾„ã€å¤–åŠå¾„</span>
    center<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;40%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;50%&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// åœ†å¿ƒåæ ‡, è·ç¦»å·¦ä¾§ã€é¡¶éƒ¨</span>
    startAngle<span class="token operator">:</span> <span class="token number">180</span><span class="token punctuation">,</span> <span class="token comment">// 0 ä¸ºåœ†å¿ƒå·¦ä¾§å¼€å§‹ï¼Œèµ·å§‹è§’åº¦ï¼Œæ”¯æŒèŒƒå›´[0, 360]ã€‚</span>
    labelLine<span class="token operator">:</span> <span class="token punctuation">{</span>
      normal<span class="token operator">:</span> <span class="token punctuation">{</span>
        show<span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    label<span class="token operator">:</span> <span class="token punctuation">{</span>
      normal<span class="token operator">:</span> <span class="token punctuation">{</span>
        position<span class="token operator">:</span> <span class="token string">&quot;center&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        value<span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
        itemStyle<span class="token operator">:</span> <span class="token punctuation">{</span>
          normal<span class="token operator">:</span> <span class="token punctuation">{</span>
            color<span class="token operator">:</span> <span class="token string">&quot;white&quot;</span> <span class="token comment">// 3 ç´«è‰²</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// label: dataStyle, æ˜¾ç¤ºæ ‡ç­¾</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        value<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        itemStyle<span class="token operator">:</span> placeHolderStyle
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">//ä¸Šå±‚ç¯å½¢é…ç½®</span>
  <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&quot;pie&quot;</span><span class="token punctuation">,</span>
    hoverAnimation<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//é¼ æ ‡ç»è¿‡çš„ç‰¹æ•ˆ</span>
    radius<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;50%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;55%&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// å†…åŠå¾„ã€å¤–åŠå¾„</span>
    center<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;40%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;50%&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// åœ†å¿ƒåæ ‡, è·ç¦»å·¦ä¾§ã€é¡¶éƒ¨</span>
    startAngle<span class="token operator">:</span> <span class="token number">180</span><span class="token punctuation">,</span> <span class="token comment">// 0 ä¸ºåœ†å¿ƒå·¦ä¾§å¼€å§‹ï¼Œèµ·å§‹è§’åº¦ï¼Œæ”¯æŒèŒƒå›´[0, 360]ã€‚</span>
    labelLine<span class="token operator">:</span> <span class="token punctuation">{</span>
      normal<span class="token operator">:</span> <span class="token punctuation">{</span>
        show<span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    label<span class="token operator">:</span> <span class="token punctuation">{</span>
      normal<span class="token operator">:</span> <span class="token punctuation">{</span>
        position<span class="token operator">:</span> <span class="token string">&quot;center&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        value<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
        itemStyle<span class="token operator">:</span> <span class="token punctuation">{</span>
          normal<span class="token operator">:</span> <span class="token punctuation">{</span>
            color<span class="token operator">:</span> <span class="token string">&quot;rgba(170,185,227,1.0)&quot;</span> <span class="token comment">// 3 ç´«è‰²</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// label: dataStyle,  // label: dataStyle, æ˜¾ç¤ºæ ‡ç­¾</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        value<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        itemStyle<span class="token operator">:</span> placeHolderStyle
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> pointer <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;æŒ‡é’ˆ&quot;</span><span class="token punctuation">,</span>
    type<span class="token operator">:</span> <span class="token string">&quot;gauge&quot;</span><span class="token punctuation">,</span>
    title<span class="token operator">:</span> <span class="token punctuation">{</span>
      show<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    detail<span class="token operator">:</span> <span class="token punctuation">{</span>
      show<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        value<span class="token operator">:</span> <span class="token number">29</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    radius<span class="token operator">:</span> <span class="token string">&quot;55%&quot;</span><span class="token punctuation">,</span> <span class="token comment">// å†…åŠå¾„ã€å¤–åŠå¾„</span>
    center<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;40%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;50%&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// åœ†å¿ƒåæ ‡, è·ç¦»å·¦ä¾§ã€é¡¶éƒ¨</span>
    itemStyle<span class="token operator">:</span> <span class="token punctuation">{</span>
      color<span class="token operator">:</span> <span class="token string">&quot;#000&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    axisLine<span class="token operator">:</span> <span class="token punctuation">{</span>
      lineStyle<span class="token operator">:</span> <span class="token punctuation">{</span>
        show<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        width<span class="token operator">:</span> <span class="token number">0</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    axisLabel<span class="token operator">:</span> <span class="token punctuation">{</span>
      show<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    axisTick<span class="token operator">:</span> <span class="token punctuation">{</span>
      show<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    splitLine<span class="token operator">:</span> <span class="token punctuation">{</span>
      show<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    pointer<span class="token operator">:</span> <span class="token punctuation">{</span>
      show<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      length<span class="token operator">:</span> <span class="token string">&quot;80%&quot;</span><span class="token punctuation">,</span>
      width<span class="token operator">:</span> <span class="token number">40</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> circles <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&quot;pie&quot;</span><span class="token punctuation">,</span>
    radius<span class="token operator">:</span> <span class="token string">&quot;80&quot;</span><span class="token punctuation">,</span> <span class="token comment">// åŠå¾„</span>
    center<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// åœ†å¿ƒ</span>
      <span class="token string">&quot;40%&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;50%&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    z<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    itemStyle<span class="token operator">:</span> <span class="token punctuation">{</span>
      normal<span class="token operator">:</span> <span class="token punctuation">{</span>
        color<span class="token operator">:</span> <span class="token string">&quot;#fff&quot;</span><span class="token punctuation">,</span>
        label<span class="token operator">:</span> <span class="token punctuation">{</span>
          show<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        labelLine<span class="token operator">:</span> <span class="token punctuation">{</span>
          show<span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        shadowColor<span class="token operator">:</span> <span class="token string">&quot;rgba(122, 122, 122, 0.21)&quot;</span><span class="token punctuation">,</span>
        shadowBlur<span class="token operator">:</span> <span class="token number">30</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    animation<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    tooltip<span class="token operator">:</span> <span class="token punctuation">{</span>
      show<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        value<span class="token operator">:</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token comment">// èƒŒæ™¯éƒ¨åˆ†</span>
        label<span class="token operator">:</span> <span class="token punctuation">{</span>
          normal<span class="token operator">:</span> <span class="token punctuation">{</span>
            formatter<span class="token operator">:</span> <span class="token string">&quot;{c}%&quot;</span><span class="token punctuation">,</span>
            position<span class="token operator">:</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span>
            show<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            textStyle<span class="token operator">:</span> <span class="token punctuation">{</span>
              fontSize<span class="token operator">:</span> <span class="token string">&quot;40&quot;</span><span class="token punctuation">,</span>
              fontFamily<span class="token operator">:</span> <span class="token string">&quot;Impact&quot;</span><span class="token punctuation">,</span>
              fontWeight<span class="token operator">:</span> <span class="token string">&quot;normal&quot;</span><span class="token punctuation">,</span>
              color<span class="token operator">:</span> <span class="token string">&quot;#4a4a4a&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    startAngle<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    text<span class="token operator">:</span> <span class="token string">&quot;36%&quot;</span><span class="token punctuation">,</span>
    textStyle<span class="token operator">:</span> <span class="token punctuation">{</span>
      color<span class="token operator">:</span> <span class="token string">&quot;red&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Line&quot;</span><span class="token punctuation">,</span>
    type<span class="token operator">:</span> <span class="token string">&quot;pie&quot;</span><span class="token punctuation">,</span> <span class="token comment">// åœ†åœˆ</span>
    clockWise<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    radius<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;28%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;28.5%&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    center<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// åœ†å¿ƒ</span>
      <span class="token string">&quot;40%&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;50%&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    z<span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
    tooltip<span class="token operator">:</span> <span class="token punctuation">{</span>
      show<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    label<span class="token operator">:</span> <span class="token punctuation">{</span>
      show<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    animation<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        value<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        itemStyle<span class="token operator">:</span> <span class="token punctuation">{</span>
          color<span class="token operator">:</span> <span class="token string">&quot;#ececec&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> texts <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> option <span class="token operator">=</span> <span class="token punctuation">{</span>
  backgroundColor<span class="token operator">:</span> <span class="token string">&quot;#fff&quot;</span><span class="token punctuation">,</span>
  title<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      text<span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
      left<span class="token operator">:</span> <span class="token string">&quot;13%&quot;</span><span class="token punctuation">,</span>
      top<span class="token operator">:</span> <span class="token string">&quot;51%&quot;</span><span class="token punctuation">,</span>
      textAlign<span class="token operator">:</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span>
      textStyle<span class="token operator">:</span> <span class="token punctuation">{</span>
        fontWeight<span class="token operator">:</span> <span class="token string">&quot;normal&quot;</span><span class="token punctuation">,</span>
        fontFamily<span class="token operator">:</span> <span class="token string">&quot;PingFangSC-Semibold&quot;</span><span class="token punctuation">,</span>
        fontSize<span class="token operator">:</span> <span class="token string">&quot;16&quot;</span><span class="token punctuation">,</span>
        color<span class="token operator">:</span> <span class="token string">&quot;#4a4a4a&quot;</span><span class="token punctuation">,</span>
        textAlign<span class="token operator">:</span> <span class="token string">&quot;center&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      text<span class="token operator">:</span> <span class="token string">&quot;48ä¸‡&quot;</span><span class="token punctuation">,</span>
      left<span class="token operator">:</span> <span class="token string">&quot;65%&quot;</span><span class="token punctuation">,</span>
      top<span class="token operator">:</span> <span class="token string">&quot;51%&quot;</span><span class="token punctuation">,</span>
      textAlign<span class="token operator">:</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span>
      textStyle<span class="token operator">:</span> <span class="token punctuation">{</span>
        color<span class="token operator">:</span> <span class="token string">&quot;#4a4a4a&quot;</span><span class="token punctuation">,</span>
        fontFamily<span class="token operator">:</span> <span class="token string">&quot;PingFangSC-Semibold&quot;</span><span class="token punctuation">,</span>
        fontWeight<span class="token operator">:</span> <span class="token string">&quot;normal&quot;</span><span class="token punctuation">,</span>
        fontSize<span class="token operator">:</span> <span class="token string">&quot;16&quot;</span><span class="token punctuation">,</span>
        textAlign<span class="token operator">:</span> <span class="token string">&quot;center&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  series<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token operator">...</span>bg<span class="token punctuation">,</span> <span class="token comment">// èƒŒæ™¯</span>
    <span class="token operator">...</span>roundList<span class="token punctuation">,</span> <span class="token comment">// æœ€å¤–é¢é¡¶éƒ¨æ ·å¼</span>
    <span class="token operator">...</span>pointer<span class="token punctuation">,</span> <span class="token comment">// æŒ‡é’ˆ</span>
    <span class="token operator">...</span>circles<span class="token punctuation">,</span> <span class="token comment">// ä¸­é—´åœ†åœˆéƒ¨åˆ†</span>
    <span class="token operator">...</span>texts <span class="token comment">// å·¦å³ä¾§æ–‡å­—</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="è¾“å…¥è¿‡ç¨‹ä¸­-æ€ä¹ˆå®æ—¶é«˜äº®éƒ¨åˆ†æ–‡å­—-xxxé«˜äº®å®ç°"><a href="#è¾“å…¥è¿‡ç¨‹ä¸­-æ€ä¹ˆå®æ—¶é«˜äº®éƒ¨åˆ†æ–‡å­—-xxxé«˜äº®å®ç°" class="header-anchor">#</a> è¾“å…¥è¿‡ç¨‹ä¸­ï¼Œæ€ä¹ˆå®æ—¶é«˜äº®éƒ¨åˆ†æ–‡å­—(@xxxé«˜äº®å®ç°)</h3> <p><img src="/images/daily/input_highlight_key.gif" alt="input_highlight_key.gif"></p> <p>å®ç°æ€è·¯æ˜¯ï¼Œä½¿ç”¨å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå½“ç›‘å¬åˆ°è¾“å…¥çš„æ–‡ä»¶åŒ…å«å…³é”®å­—æ—¶ï¼Œä½¿ç”¨replaceå¯¹å½“å‰çš„è¾“å…¥å†…å®¹è¿›è¡Œæ›¿æ¢ï¼Œç»™å…³é”®å­—åŠ ä¸Šspanç»™ä¸ªhighlightçš„classï¼Œä»£ç å¦‚ä¸‹</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>editdiv<span class="token punctuation">&quot;</span></span> <span class="token attr-name">contenteditable</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">let</span> editdiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#editdiv'</span><span class="token punctuation">)</span>
  <span class="token comment">// è¾“å…¥å†…å®¹æ”¹å˜</span>
  editdiv<span class="token punctuation">.</span><span class="token function-variable function">oninput</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> curValue <span class="token operator">=</span> editdiv<span class="token punctuation">.</span>innerHTML
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å½“å‰å¯Œæ–‡æœ¬è¾“å…¥å†…å®¹'</span><span class="token punctuation">,</span> curValue<span class="token punctuation">)</span>
    <span class="token keyword">let</span> needHighlightArr <span class="token operator">=</span> keyArr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> curValue<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// å¼€å§‹é«˜äº®</span>
    needHighlightArr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> curValue<span class="token punctuation">)</span>
      <span class="token comment">// å¦‚æœä¹‹å‰å·²ç»è®¾ç½®äº†highlightï¼Œå°±ä¸è®¾ç½®äº†</span>
      <span class="token keyword">let</span> nextText <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;span class=&quot;highlight&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span&gt;</span><span class="token template-punctuation string">`</span></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>curValue<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>nextText<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        curValue <span class="token operator">=</span> curValue<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> nextText<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    editdiv<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> curValue
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol><li>replaceåï¼Œå…‰æ ‡ç§»åŠ¨åˆ°äº†è¾“å…¥æ¡†æœ€å‰é¢</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// è§£å†³æ–¹æ³•ï¼šreplaceåï¼ŒæŠŠè¾“å…¥å…‰æ ‡ç§»åŠ¨åˆ°æœ€åé¢</span>
<span class="token comment">// set å…‰æ ‡åˆ°æœ«å°¾</span>
<span class="token comment">// https://www.cnblogs.com/jonie-wong/p/5519822.html</span>
<span class="token comment">// divè¾“å…¥@å…‰æ ‡å®šä½</span>
<span class="token comment">// çŸ¥ä¹divç¼–è¾‘å™¨ï¼Œ@åŠŸèƒ½çš„å…‰æ ‡å®šä½é—®é¢˜</span>
<span class="token comment">// https://segmentfault.com/q/1010000005617160</span>
<span class="token keyword">function</span> <span class="token function">focusToElementEnd</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>getSelection<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> range <span class="token operator">=</span> document<span class="token punctuation">.</span>selection<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>last <span class="token operator">=</span> range<span class="token punctuation">;</span>
    range<span class="token punctuation">.</span><span class="token function">moveToElementText</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
    range<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>selection<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å–æ¶ˆé€‰ä¸­</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> range <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    range<span class="token punctuation">.</span><span class="token function">selectNodeContents</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
    range<span class="token punctuation">.</span><span class="token function">collapse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> sel <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sel<span class="token punctuation">.</span><span class="token function">removeAllRanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sel<span class="token punctuation">.</span><span class="token function">addRange</span><span class="token punctuation">(</span>range<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>æ›¿æ¢åè™½ç„¶é«˜äº®äº†ï¼Œä½†å†æ¬¡è¾“å…¥çš„æ–‡å­—ï¼Œä¹Ÿä¼šä¸€ç›´æ˜¯é«˜äº®çš„ï¼Œæ³¨æ„ï¼Œåé¢è¾“å…¥çš„å­—æ¯æ²¡æœ‰æ”¾åˆ°replace spanåé¢</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// [Log] å½“å‰å¯Œæ–‡æœ¬è¾“å…¥å†…å®¹  &quot;123zuo&quot; </span>
<span class="token comment">// [Log] zuo &quot;123zuo&quot;</span>
<span class="token comment">// [Log] æ›¿æ¢åï¼Œå†æ¬¡è·å–å¯Œæ–‡æœ¬è¾“å…¥å†…å®¹ &quot;123&lt;span class=&quot;highlight&quot;&gt;zuo&lt;/span&gt;&quot;</span>

<span class="token comment">// [Log] å½“å‰å¯Œæ–‡æœ¬è¾“å…¥å†…å®¹ â€“ &quot;123&lt;span class=\&quot;highlight\&quot;&gt;zuok&lt;/span&gt;&quot;</span>
<span class="token comment">// [Log] zuo â€“ &quot;123&lt;span class=\&quot;highlight\&quot;&gt;zuok&lt;/span&gt;&quot;</span>
</code></pre></div><p>ç½‘ä¸Šæ‰¾äº†ä¸‹ï¼Œæœ€ç›¸ä¼¼çš„ç­”æ¡ˆæ˜¯ <a href="https://www.jianshu.com/p/b419a695d11b" target="_blank" rel="noopener noreferrer">å®ç°åŠ¨æ€è¾“å…¥å…³é”®å­—æ—¶å…³é”®å­—é«˜äº®<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œä»è¿™é‡Œæ•æ‰åˆ°ä¸€ä¸ªå¾ˆé‡è¦çš„ä¿¡æ¯ï¼Œå°±æ˜¯é‡Œé¢æåˆ°çš„æ˜¯æ›¿æ¢textè€Œä¸æ˜¯htmlï¼Œè€Œæˆ‘æ›¿æ¢çš„æ˜¯innerHTMLï¼Œæ‰€ä»¥æˆ‘æ¢äº†ä¸‹æ€è·¯</p> <p>åœ¨onkeyupé”®ç›˜æŠ¬èµ·æ—¶å¯¹textContentè¿›è¡Œreplaceï¼Œè§£å†³äº†è¿™ä¸ªé—®é¢˜</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> keyArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'ä»Šå¤©'</span><span class="token punctuation">,</span> <span class="token string">'æ˜å¤©'</span><span class="token punctuation">,</span> <span class="token string">'ä¸Šåˆ'</span><span class="token punctuation">,</span> <span class="token string">'ä¸‹åˆ'</span><span class="token punctuation">,</span> <span class="token string">'11ç‚¹'</span><span class="token punctuation">,</span> <span class="token string">'12ç‚¹'</span><span class="token punctuation">,</span> <span class="token string">'zuo'</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> editdiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#editdiv'</span><span class="token punctuation">)</span>
editdiv<span class="token punctuation">.</span><span class="token function-variable function">onkeyup</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onkeyup'</span><span class="token punctuation">,</span> e<span class="token punctuation">,</span> editdiv<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span>
  <span class="token comment">// document.execCommand('forecolor', false, 'black')</span>
  <span class="token keyword">let</span> curValue <span class="token operator">=</span> editdiv<span class="token punctuation">.</span>textContent
  <span class="token keyword">let</span> needHighlightArr <span class="token operator">=</span> keyArr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> curValue<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token comment">// å¼€å§‹é«˜äº®</span>
  needHighlightArr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> curValue<span class="token punctuation">)</span>
    <span class="token comment">// å¦‚æœä¹‹å‰å·²ç»è®¾ç½®äº†highlightï¼Œå°±ä¸è®¾ç½®äº† class=&quot;highlight&quot;</span>
    <span class="token keyword">let</span> nextText <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;span class=&quot;highlight&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span&gt;</span><span class="token template-punctuation string">`</span></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>curValue<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>nextText<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      curValue <span class="token operator">=</span> curValue<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> nextText<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  editdiv<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> curValue
  <span class="token function">focusToElementEnd</span><span class="token punctuation">(</span>editdiv<span class="token punctuation">)</span> <span class="token comment">// å°†å…‰æ ‡ç§»åŠ¨åˆ°æœ«å°¾</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>ä¸Šé¢çš„demoè¿˜å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨è¾“å…¥æ³•ç»„åˆæ–‡ä»¶çš„è¿‡ç¨‹ä¸­ä¹Ÿä¼šè¿›è¡Œreplaceï¼Œå¯¼è‡´ä¸­æ–‡æ— æ³•è¾“å…¥ï¼Œè¿™é‡Œæˆ‘ä»¬ç»“åˆä¹‹å‰ç ”ç©¶<a href="http://www.zuo11.com/blog/2019/12/v_model_text.html" target="_blank" rel="noopener noreferrer">v-modelæ— æ³•å®æ—¶ç›‘å¬è¾“å…¥æ³•ç»„åˆæ–‡å­—è¿‡ç¨‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>çš„ç»éªŒã€‚å½“ç»„åˆæ–‡å­—æ—¶ï¼Œä¸è¿›è¡Œæ›¿æ¢</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>editdiv<span class="token punctuation">&quot;</span></span> <span class="token attr-name">contenteditable</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>alert(document.querySelector(<span class="token punctuation">'</span>#editdiv<span class="token punctuation">'</span>).textContent)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>è·å–textContent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>alert(document.querySelector(<span class="token punctuation">'</span>#editdiv<span class="token punctuation">'</span>).innerHTML)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>è·å–innerHTML<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> keyArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'ä»Šå¤©'</span><span class="token punctuation">,</span> <span class="token string">'æ˜å¤©'</span><span class="token punctuation">,</span> <span class="token string">'ä¸Šåˆ'</span><span class="token punctuation">,</span> <span class="token string">'ä¸‹åˆ'</span><span class="token punctuation">,</span> <span class="token string">'11ç‚¹'</span><span class="token punctuation">,</span> <span class="token string">'12ç‚¹'</span><span class="token punctuation">,</span> <span class="token string">'zuo'</span><span class="token punctuation">]</span>
  <span class="token keyword">let</span> composition <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">// æ˜¯å¦æ˜¯åœ¨è¾“å…¥æ³•ç»„åˆæ–‡å­—çš„è¿‡ç¨‹ä¸­</span>
  <span class="token keyword">let</span> editdiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#editdiv'</span><span class="token punctuation">)</span>

  editdiv<span class="token punctuation">.</span><span class="token function-variable function">onkeyup</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¾“å…¥æ³•ç»„åˆæ–‡å­—è¿‡ç¨‹,composition: '</span><span class="token punctuation">,</span> composition<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>composition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> 
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onkeyup'</span><span class="token punctuation">,</span> e<span class="token punctuation">,</span> editdiv<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span>
    
    <span class="token keyword">let</span> curValue <span class="token operator">=</span> editdiv<span class="token punctuation">.</span>textContent
    <span class="token keyword">let</span> needHighlightArr <span class="token operator">=</span> keyArr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> curValue<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// å¼€å§‹é«˜äº®</span>
    needHighlightArr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> curValue<span class="token punctuation">)</span>
      <span class="token comment">// å¦‚æœä¹‹å‰å·²ç»è®¾ç½®äº†highlightï¼Œå°±ä¸è®¾ç½®äº† class=&quot;highlight&quot;</span>
      <span class="token keyword">let</span> nextText <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;span class=&quot;highlight&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span&gt;</span><span class="token template-punctuation string">`</span></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>curValue<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>nextText<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        curValue <span class="token operator">=</span> curValue<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> nextText<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    editdiv<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> curValue
    <span class="token function">focusToElementEnd</span><span class="token punctuation">(</span>editdiv<span class="token punctuation">)</span> <span class="token comment">// å°†å…‰æ ‡ç§»åŠ¨åˆ°æœ«å°¾</span>
  <span class="token punctuation">}</span>

  editdiv<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'compositionstart'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'oncompositionstart'</span><span class="token punctuation">)</span>
    composition <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  editdiv<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'compositionend'</span><span class="token punctuation">,</span>  <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'oncompositionend'</span><span class="token punctuation">)</span>
    composition <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä»¥ä¸Šï¼Œæˆ‘ä»¬åŸºæœ¬å®ç°äº†è¾“å…¥è¿‡ç¨‹ä¸­å®æ—¶é«˜äº®å…³é”®å­—çš„åŠŸèƒ½ï¼Œæ›¿æ¢çš„ç»†èŠ‚è¿˜éœ€è¦ä¼˜åŒ–ï¼Œè¿™é‡Œåªæ˜¯ä¸€ä¸ªå®ç°æ€è·¯ã€‚å®Œæ•´demoå‚è§: <a href="https://github.com/zuoxiaobai/fedemo/blob/master/src/DebugDemo/%E8%BE%93%E5%85%A5%E5%86%85%E5%AE%B9%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%AB%98%E4%BA%AE%E5%85%B3%E9%94%AE%E5%AD%97/index.html" target="_blank" rel="noopener noreferrer">è¾“å…¥å†…å®¹è¿‡ç¨‹ä¸­é«˜äº®å…³é”®å­— | github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="v-loadingæŒ‡ä»¤çš„å®ç°-æ€ä¹ˆé€šè¿‡ä¸€ä¸ªæŒ‡ä»¤è‡ªåŠ¨åŠ éª¨æ¶å±"><a href="#v-loadingæŒ‡ä»¤çš„å®ç°-æ€ä¹ˆé€šè¿‡ä¸€ä¸ªæŒ‡ä»¤è‡ªåŠ¨åŠ éª¨æ¶å±" class="header-anchor">#</a> v-loadingæŒ‡ä»¤çš„å®ç°ï¼Œæ€ä¹ˆé€šè¿‡ä¸€ä¸ªæŒ‡ä»¤è‡ªåŠ¨åŠ éª¨æ¶å±</h3> <p>è¿™é‡Œéœ€è¦ç”¨åˆ°vueè‡ªå®šä¹‰æŒ‡ä»¤ï¼Œæˆ‘ä»¬å…ˆå†™ä¸ªv-zloadingæ¥å®ç°loadingï¼Œåœ¨loadingè¿‡ç¨‹ä¸­åŠ éª¨æ¶å±</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-zloading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loading<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>div<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  æµ‹è¯•
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="/images/daily/v_loading.gif" alt="v_loading.gif"></p> <p>ç”±äºæ˜¯å…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œæ‰€ä»¥åœ¨main.jsé‡Œå†™</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æŒ‚è½½dom</span>
<span class="token keyword">function</span> <span class="token function">mountDom</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">&quot;relative&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">&quot;absolute&quot;</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>bottom <span class="token operator">=</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;zloading&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> htmlStr <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;div style=&quot;positon:absolute;top:0;left:0;z-index:999;width: 100%;margin: 10 auto;&quot;&gt;
      &lt;div class=&quot;fast-loading&quot;&gt;&lt;/div&gt;
      &lt;div class=&quot;fast-loading w40&quot;&gt;&lt;/div&gt;
      &lt;div class=&quot;fast-loading w80&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> htmlStr<span class="token punctuation">;</span>
  el<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">&quot;zloading&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">bind</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log(&quot;v-zloading bind&quot;);</span>
    <span class="token comment">// console.log(binding, vnode);</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>binding<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">mountDom</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log(&quot;v-zloading update&quot;);</span>
    <span class="token comment">// console.log(el, binding, vnode);</span>
    <span class="token keyword">let</span> zloadingDom <span class="token operator">=</span> el<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.zloading&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// console.log(&quot;zloading dom&quot;, zloadingDom);</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>zloadingDom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      zloadingDom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> binding<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token string">&quot;block&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      binding<span class="token punctuation">.</span>value <span class="token operator">&amp;&amp;</span> <span class="token function">mountDom</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>éª¨æ¶å±çš„æ ·å¼common.cssï¼Œç„¶ååœ¨App.vueé‡Œå¼•å…¥</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.fast-loading</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 10px 0<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>245<span class="token punctuation">,</span> 245<span class="token punctuation">,</span> 245<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">repeating-linear-gradient</span><span class="token punctuation">(</span>90deg<span class="token punctuation">,</span> #eee<span class="token punctuation">,</span> #f5f5f5 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token property">animation-name</span><span class="token punctuation">:</span> fastLoading<span class="token punctuation">;</span>
    <span class="token property">animation-timing-function</span><span class="token punctuation">:</span> linear<span class="token punctuation">;</span>
    <span class="token property">animation-duration</span><span class="token punctuation">:</span> 1s<span class="token punctuation">;</span>
    <span class="token property">animation-iteration-count</span><span class="token punctuation">:</span> infinite<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@keyframes</span> fastLoading</span> <span class="token punctuation">{</span>
    <span class="token selector">from</span> <span class="token punctuation">{</span>
    <span class="token property">background-position</span><span class="token punctuation">:</span> 0 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">to</span> <span class="token punctuation">{</span>
    <span class="token property">background-position</span><span class="token punctuation">:</span> 100px 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">.w100</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> 100% <span class="token punctuation">}</span>
<span class="token selector">.w80</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> 80% <span class="token punctuation">}</span>
<span class="token selector">.w60</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> 60% <span class="token punctuation">}</span>
<span class="token selector">.w40</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> 50% <span class="token punctuation">}</span>
<span class="token selector">.w30</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> 30% <span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ ·å°±æ¨¡æ‹Ÿå®ç°äº†ä¸€ä¸ªv-loading, å®Œæ•´demoå‚è§<a href="https://github.com/zuoxiaobai/fedemo/blob/master/src/vuecli-demo/src/views/vloading/index.vue" target="_blank" rel="noopener noreferrer">v-zloading å®ç° | github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>  æ³¨æ„ï¼ŒæŒ‡ä»¤çš„å®ç°æ˜¯æ”¾åœ¨main.jsé‡Œé¢çš„</p> <p>æˆ‘ä»¬è‡ªå·±ç®€å•å®ç°v-loaidngçš„åŠŸèƒ½åï¼Œå†æ¥çœ‹çœ‹v-loadingçš„æºç </p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æˆªå–è‡³element v-loadingéƒ¨åˆ†æºç  </span>
<span class="token comment">// https://github.com/ElemeFE/element/blob/dev/packages/loading/src/directive.js</span>
Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'loading'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">bind</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//....</span>
      <span class="token keyword">const</span> mask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mask</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        el<span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span>
          text<span class="token operator">:</span> vm <span class="token operator">&amp;&amp;</span> vm<span class="token punctuation">[</span>textExr<span class="token punctuation">]</span> <span class="token operator">||</span> textExr<span class="token punctuation">,</span>
          spinner<span class="token operator">:</span> vm <span class="token operator">&amp;&amp;</span> vm<span class="token punctuation">[</span>spinnerExr<span class="token punctuation">]</span> <span class="token operator">||</span> spinnerExr<span class="token punctuation">,</span>
          background<span class="token operator">:</span> vm <span class="token operator">&amp;&amp;</span> vm<span class="token punctuation">[</span>backgroundExr<span class="token punctuation">]</span> <span class="token operator">||</span> backgroundExr<span class="token punctuation">,</span>
          customClass<span class="token operator">:</span> vm <span class="token operator">&amp;&amp;</span> vm<span class="token punctuation">[</span>customClassExr<span class="token punctuation">]</span> <span class="token operator">||</span> customClassExr<span class="token punctuation">,</span>
          fullscreen<span class="token operator">:</span> <span class="token operator">!</span><span class="token operator">!</span>binding<span class="token punctuation">.</span>modifiers<span class="token punctuation">.</span>fullscreen
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      el<span class="token punctuation">.</span>instance <span class="token operator">=</span> mask<span class="token punctuation">;</span>
      el<span class="token punctuation">.</span>mask <span class="token operator">=</span> mask<span class="token punctuation">.</span>$el<span class="token punctuation">;</span>
      el<span class="token punctuation">.</span>maskStyle <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token comment">// å¦‚æœv-loadingè®¾ç½®çš„å€¼ä¸ºtrueï¼ŒæŒ‚è½½maskdom(toggleLoadingæ–¹æ³•)</span>
      binding<span class="token punctuation">.</span>value <span class="token operator">&amp;&amp;</span> <span class="token function">toggleLoading</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> binding<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      el<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'element-loading-text'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>binding<span class="token punctuation">.</span>oldValue <span class="token operator">!==</span> binding<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">toggleLoading</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> binding<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function-variable function">unbind</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>domInserted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        el<span class="token punctuation">.</span>mask <span class="token operator">&amp;&amp;</span>
        el<span class="token punctuation">.</span>mask<span class="token punctuation">.</span>parentNode <span class="token operator">&amp;&amp;</span>
        el<span class="token punctuation">.</span>mask<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>mask<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">toggleLoading</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> modifiers<span class="token operator">:</span> binding<span class="token punctuation">.</span>modifiers <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      el<span class="token punctuation">.</span>instance <span class="token operator">&amp;&amp;</span> el<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">$destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å›è¿‡å¤´æ¥çœ‹çœ‹ä¹‹å‰element UIåœ¨IEä¸‹å¯èƒ½ä¼šå‡ºç°çš„ä¸¤ä¸ªbug</p> <ol><li>element v-loadingåœ¨IEä¸‹å¯èƒ½ä¼šæº¢å‡ºåˆ°å…¨å±çš„é—®é¢˜ï¼Œæˆ‘çš„ç†è§£æ˜¯ï¼Œæˆ‘è§‰å¾—ä¸»è¦çš„æ ¸å¿ƒåœ¨äºåœ¨v-loadingä½œç”¨çš„å…ƒç´ ä¸Šæ·»åŠ position:relativeæ²¡æœ‰æˆåŠŸ</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ...</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>originalPosition <span class="token operator">!==</span> <span class="token string">'absolute'</span> <span class="token operator">&amp;&amp;</span> el<span class="token punctuation">.</span>originalPosition <span class="token operator">!==</span> <span class="token string">'fixed'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">addClass</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> <span class="token string">'el-loading-parent--relative'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ...</span>
</code></pre></div><ol start="2"><li>element v-loadingåœ¨IEä¸‹å¯èƒ½ä¼šå…³ä¸æ‰çš„é—®é¢˜ï¼Œæˆ‘çš„ç†è§£æ˜¯ï¼Œå½“binding.valueæœ‰å€¼æ—¶ï¼Œå®ƒæ˜¯åœ¨Vue.nextTickä¸‹æ¬¡æ¸²æŸ“å‘¨æœŸæ‰æŒ‚è½½loadingçš„domï¼Œå¦‚æœè®¾ç½®true,falseé—´éš”éå¸¸å¿«ï¼Œè¿˜æ²¡åœ¨ä¸‹ä¸ªæ¸²æŸ“å‘¨æœŸï¼Œé‚£ä¹ˆå…¶å®loadingå·²ç»æ˜¯falseäº†ï¼Œä½†å®ƒæ‰å¼€å§‹æŒ‚è½½ï¼Œå¯¼è‡´å…³é—­ä¸äº†</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ...</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>binding<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Vue<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>binding<span class="token punctuation">.</span>modifiers<span class="token punctuation">.</span>fullscreen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        el<span class="token punctuation">.</span>originalPosition <span class="token operator">=</span> <span class="token function">getStyle</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">,</span> <span class="token string">'position'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        el<span class="token punctuation">.</span>originalOverflow <span class="token operator">=</span> <span class="token function">getStyle</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">,</span> <span class="token string">'overflow'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        el<span class="token punctuation">.</span>maskStyle<span class="token punctuation">.</span>zIndex <span class="token operator">=</span> PopupManager<span class="token punctuation">.</span><span class="token function">nextZIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">addClass</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>mask<span class="token punctuation">,</span> <span class="token string">'is-fullscreen'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">insertDom</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">,</span> el<span class="token punctuation">,</span> binding<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">removeClass</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>mask<span class="token punctuation">,</span> <span class="token string">'is-fullscreen'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
</code></pre></div><p>åé¢æœ‰æœºä¼šåœ¨ node_modules ä¸‹ä¿®æ”¹æºç åŠ ä¸Šconsoleï¼Œç„¶ååœ¨IEä¸‹è°ƒè¯•çœ‹çœ‹ï¼Œè¿™ä¸ªæ˜¯ç›®å‰æ¥è¯´æœ€å¥½çš„æ–¹æ³•ã€‚</p> <p>å‚è€ƒï¼š</p> <ul><li><a href="https://cn.vuejs.org/v2/guide/custom-directive.html" target="_blank" rel="noopener noreferrer">vueè‡ªå®šä¹‰æŒ‡ä»¤ | Vue.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.yuque.com/guoqzuo/yyxr05/hp742n" target="_blank" rel="noopener noreferrer">vueè‡ªå®šä¹‰æŒ‡ä»¤ç¬”è®° | è¯­é›€<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="element-v-loadingåœ¨ieä¸‹å¯èƒ½ä¼šæº¢å‡ºåˆ°å…¨å±çš„é—®é¢˜"><a href="#element-v-loadingåœ¨ieä¸‹å¯èƒ½ä¼šæº¢å‡ºåˆ°å…¨å±çš„é—®é¢˜" class="header-anchor">#</a> element v-loadingåœ¨IEä¸‹å¯èƒ½ä¼šæº¢å‡ºåˆ°å…¨å±çš„é—®é¢˜</h3> <p>åœ¨IEä¸‹ï¼Œæœ‰å¯èƒ½å‡ºç°v-loadingæŒ‡ä»¤åœ¨loadingæ—¶ä¸æ˜¯ä½œç”¨åœ¨æ·»åŠ  v-loading æŒ‡ä»¤çš„å…ƒç´ åŒºåŸŸé‡Œï¼Œè€Œæ˜¯æº¢å‡ºåˆ°å…¨å±äº†ã€‚</p> <p>è¿™ç§æƒ…å†µæˆ‘æŸ¥äº†ä¸‹domï¼Œäº†è§£åˆ°v-loadingæ˜¯position: absoluteå¸ƒå±€ï¼Œè€Œv-loading positionä¸æ˜¯relatvie å¯¼è‡´æº¢å‡ºåˆ°å…¨å±äº†ã€‚è¿™ç§æƒ…å†µç»™ä½¿ç”¨v-loadingæŒ‡ä»¤çš„å…ƒç´ æ‰‹åŠ¨åŠ ä¸€ä¸ª position: relativeå°±å¯ä»¥äº†ã€‚</p> <h3 id="element-v-loadingåœ¨ieä¸‹å¯èƒ½ä¼šå…³ä¸æ‰çš„é—®é¢˜"><a href="#element-v-loadingåœ¨ieä¸‹å¯èƒ½ä¼šå…³ä¸æ‰çš„é—®é¢˜" class="header-anchor">#</a> element v-loadingåœ¨IEä¸‹å¯èƒ½ä¼šå…³ä¸æ‰çš„é—®é¢˜</h3> <p>å¯¹äºè¯·æ±‚éå¸¸å¿«çš„æƒ…å†µï¼Œloadingä¸€åŠ è½½å¾ˆå¿«å°±å…³é—­ã€‚åœ¨IEä¸‹ï¼Œå¯èƒ½å‡ºç° v-loadingè®¾ç½®çš„å€¼å·²ç»æ˜¯ falseï¼Œä½†loadingè¿˜æ˜¯ä¸€ç›´æ˜¾ç¤ºï¼Œå…³é—­ä¸äº†çš„æƒ…å†µï¼Œè§£å†³æ–¹æ³•æ˜¯ï¼šåœ¨å…³é—­loadingå‰ï¼ŒåŠ ä¸€ä¸ª500msçš„å»¶æ—¶ï¼Œå°±æ²¡é—®é¢˜äº†ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="macosä¸‹æ€ä¹ˆå°†mp4å’Œm4aæ–‡ä»¶åˆå¹¶"><a href="#macosä¸‹æ€ä¹ˆå°†mp4å’Œm4aæ–‡ä»¶åˆå¹¶" class="header-anchor">#</a> macOSä¸‹æ€ä¹ˆå°†mp4å’Œm4aæ–‡ä»¶åˆå¹¶</h3> <p>å¯ä»¥ä½¿ç”¨ffmpegå‘½ä»¤è¡Œå·¥å…·ï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤è¿›è¡Œåˆå¹¶ï¼Œæ³¨æ„è¿™ä¸ªåˆå¹¶æ—¶é—´éå¸¸é•¿ï¼Œè¦ç­‰å¾ˆä¹…</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># ä¸‹è½½ffmpegè§£å‹åä¼šæœ‰ä¸€ä¸ªffmpeg-4.2.3-macos64-staticæ–‡ä»¶å¤¹ï¼Œç„¶åè¿›å…¥è¿™ä¸ªç›®å½•çš„binç›®å½•ä¸‹ï¼Œæ‰§è¡Œ</span>
./ffmpeg -i /Users/kevin/Desktop/17ä¸‹.mp4 -i /Users/kevin/Desktop/17ä¸‹.m4a out2.mp4
</code></pre></div><p>å…¶å®åˆå¹¶è§†é¢‘å’ŒéŸ³é¢‘å¯ä»¥ä½¿ç”¨macä¸‹çš„imovieæˆ–è€…ä¸€äº›å…¶ä»–çš„è§†é¢‘å‰ªè¾‘è½¯ä»¶ï¼Œæ¯”è¿™ä¸ªè¦å¿«å¾ˆå¤š</p> <h3 id="åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²å‡ºç°æ¬¡æ•°æœ€å¤šçš„å­—ç¬¦-å¹¶è¾“å‡ºå…¶æ¬¡æ•°"><a href="#åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²å‡ºç°æ¬¡æ•°æœ€å¤šçš„å­—ç¬¦-å¹¶è¾“å‡ºå…¶æ¬¡æ•°" class="header-anchor">#</a> åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²å‡ºç°æ¬¡æ•°æœ€å¤šçš„å­—ç¬¦ï¼Œå¹¶è¾“å‡ºå…¶æ¬¡æ•°</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;ababadectwestsfdadsfb&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getMostChar</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">getMostChar</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><p>æ€è·¯ï¼šæˆ‘ä»¬å…ˆå®ç°è·å–å­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getCharCount</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å…ˆæŠŠå­—ç¬¦ä¸²åˆ‡åˆ†ä¸ºæ•°ç»„</span>
  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token operator">++</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä½¿ç”¨äº†Array.prototype.reduceï¼Œå¦‚æœä¸çŸ¥é“reduceæ‰§è¡Œæƒ…å†µï¼Œå°±éœ€è¦å¥½å¥½çœ‹ä¸‹<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce" target="_blank" rel="noopener noreferrer">mdn<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>çš„æ–‡æ¡£äº†ï¼Œä¸Šé¢çš„ä»£ç å…¶å®ç­‰ä»·äºä¸‹é¢çš„ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°reduceä½¿ç”¨ç¬¬äºŒå‚æ•°æ—¶ï¼Œ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getCharCount</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å…ˆæŠŠå­—ç¬¦ä¸²åˆ‡åˆ†ä¸ºæ•°ç»„</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token operator">++</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
</code></pre></div><p>æ‰§è¡Œä¸‹è¿™ä¸ªå‡½æ•°</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ¯ä¸ªå­—ç¬¦ä¸²å‡ºç°çš„æ¬¡æ•°'</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token function">getCharCount</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// {&quot;a&quot;:4,&quot;b&quot;:3,&quot;d&quot;:3,&quot;e&quot;:2,&quot;c&quot;:1,&quot;t&quot;:2,&quot;w&quot;:1,&quot;s&quot;:3,&quot;f&quot;:2}</span>
</code></pre></div><p>æ ¹æ®ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å†æ¥æ€è€ƒæ€ä¹ˆè·å–å‡ºç°æ¬¡æ•°æœ€å¤šçš„å­—ç¬¦ï¼Œ<strong>å…¶å®åœ¨reduceé‡Œé¢æ¯æ¬¡çš„resultæˆ‘ä»¬å¯ä»¥è·å–åˆ°å½“å‰å­—ç¬¦ã€ä»¥åŠå…¶å‡ºç°çš„æ¬¡æ•°ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå˜é‡æ¥å­˜å‚¨å‡ºç°æ¬¡æ•°æœ€å¤šçš„å­—ç¬¦ï¼Œæ¯æ¬¡éå†æ˜¯éƒ½ä¸è¿™ä¸ªå˜é‡è¿›è¡Œæ¯”è¾ƒå°±å¯ä»¥äº†</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;ababadectwestsfdadsfb&quot;</span>
<span class="token keyword">function</span> <span class="token function">getMostChar</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å…ˆæŠŠå­—ç¬¦ä¸²åˆ‡åˆ†ä¸ºæ•°ç»„</span>
  <span class="token keyword">let</span> mostChar <span class="token operator">=</span> <span class="token punctuation">{</span>
    count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    char<span class="token operator">:</span> <span class="token string">''</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> charCountObj <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token operator">++</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">&gt;</span> mostChar<span class="token punctuation">.</span>count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      mostChar<span class="token punctuation">.</span>count <span class="token operator">=</span> result<span class="token punctuation">[</span>item<span class="token punctuation">]</span>
      mostChar<span class="token punctuation">.</span>char <span class="token operator">=</span> item
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> result
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    mostChar<span class="token punctuation">,</span> <span class="token comment">// å‡ºç°æ¬¡æ•°æœ€å¤šçš„å­—ç¬¦</span>
    charCountObj<span class="token punctuation">,</span> <span class="token comment">// å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—ç¬¦å‡ºç°çš„æ¬¡æ•°</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸Šé¢çš„ä¾‹å­ä¸­mostCharè¾“å‡ºäº†å‡ºç°æ¬¡æ•°æœ€å¤šçš„å­—ç¬¦ä»¥åŠå…¶æ¬¡æ•°ï¼Œé‚£é—®é¢˜æ¥äº†ï¼Œå¦‚æœå­—ç¬¦ä¸²æ˜¯ &quot;aabbcc&quot;ï¼Œé‚£å‡ºç°æœ€å¤šæ¬¡æ•°çš„å­—ç¬¦å°±ä¸åªä¸€ä¸ªäº†ï¼Œå¯èƒ½ä¼šæ˜¯æ•°ç»„ã€‚æˆ‘ä»¬éœ€è¦å¯¹ä¸Šé¢çš„ä¾‹å­å†è¿›è¡Œä¸€äº›å¢å¼ºï¼Œå¦‚ä¸‹</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ä¸»è¦æ˜¯ä¿®æ”¹å½“å‰å­—ç¬¦å’Œå‡ºç°æ¬¡æ•°æœ€å¤šçš„å­—ç¬¦ç›¸ç­‰çš„æƒ…å†µ</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">&gt;</span> mostChar<span class="token punctuation">.</span>count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  mostChar<span class="token punctuation">.</span>count <span class="token operator">=</span> result<span class="token punctuation">[</span>item<span class="token punctuation">]</span>
  mostChar<span class="token punctuation">.</span>char <span class="token operator">=</span> item
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">===</span> mostChar<span class="token punctuation">.</span>count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> mostChar<span class="token punctuation">.</span>char <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    mostChar<span class="token punctuation">.</span>char <span class="token operator">=</span> <span class="token punctuation">[</span>mostChar<span class="token punctuation">.</span>char<span class="token punctuation">,</span> item<span class="token punctuation">]</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    mostChar<span class="token punctuation">.</span>char<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä»¥ä¸Šå°±æ˜¯å®Œæ•´å®ç°äº†ï¼Œå®Œæ•´demoå‚è§ï¼š<a href="https://github.com/zuoxiaobai/fedemo/blob/master/src/DebugDemo/%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BA%E7%8E%B0%E6%9C%80%E5%A4%9A%E7%9A%84%E5%AD%97%E7%AC%A6/index.html" target="_blank" rel="noopener noreferrer">åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²å‡ºç°æœ€å¤šçš„å­—ç¬¦ | github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2020-06-13-å‘¨å…­"><a href="#_2020-06-13-å‘¨å…­" class="header-anchor">#</a> 2020/06/13 å‘¨å…­</h2> <h3 id="symbolå’Œarray-prototype-includesä¸å…¼å®¹ie-æœ‰babelå°±å¯ä»¥-ä»–çš„åŸç†æ˜¯ä»€ä¹ˆ"><a href="#symbolå’Œarray-prototype-includesä¸å…¼å®¹ie-æœ‰babelå°±å¯ä»¥-ä»–çš„åŸç†æ˜¯ä»€ä¹ˆ" class="header-anchor">#</a> Symbolå’ŒArray.prototype.includesä¸å…¼å®¹IEï¼Œæœ‰babelå°±å¯ä»¥ï¼Œä»–çš„åŸç†æ˜¯ä»€ä¹ˆ</h3> <p>åœ¨mdnä¸Šå¯ä»¥æŸ¥ç›¸å…³APIçš„å…¼å®¹æ€§,å¯ä»¥çœ‹åˆ°Symbolå’ŒArray.prototype.includesæ˜¯ä¸æ”¯æŒIEçš„ï¼Œä½†æˆ‘ä»¬åœ¨vue-cliçš„é¡¹ç›®ä¸­ï¼Œå‘ç°ä½¿ç”¨äº†è¿™äº›apiï¼Œåœ¨IEä¸‹ä¹Ÿå¯ä»¥è¿è¡Œï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p> <p>ä¸»è¦æ˜¯å®‰è£…äº†babelï¼Œbabelæœ‰è¿›è¡Œè½¬æ¢ï¼Œå½“IEä¸æ”¯æŒæŸä¸ªæ–¹æ³•æ—¶ï¼Œä¼šä½¿ç”¨æ›¿ä»£çš„pollyfillï¼Œé‚£å®ƒæ˜¯æ€ä¹ˆæ‰“åŒ…è¿›é¡¹ç›®çš„ï¼Ÿ</p> <h4 id="ä»€ä¹ˆæ˜¯babel"><a href="#ä»€ä¹ˆæ˜¯babel" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯babelï¼Ÿ</h4> <p>ä¸ºä»€ä¹ˆä¼šæœ‰babelï¼Œbabelå‡ºç°çš„åŸå› æ˜¯JSçš„ä¸€äº›å¾ˆå¥½çš„æ–°ç‰¹æ€§åœ¨ä¸€äº›ä½æµè§ˆå™¨ç‰ˆæœ¬æˆ–è€…IEä¸‹æ— æ³•ä½¿ç”¨ã€‚ä¸ºäº†ç”¨æœ€æ–°çš„JSè¯­æ³•ç‰¹æ€§å†™çš„ä»£ç åœ¨æŸäº›ä¸å…¼å®¹çš„ç¯å¢ƒä¸‹ä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œbabelåº”è¿è€Œç”Ÿã€‚</p> <blockquote><p>Babel is a JavaScript compilerï¼ŒBabel is a toolchain that is mainly used to convert ECMAScript 2015+ code into a backwards compatible version of JavaScript in current and older browsers or environments. Here are the main things Babel can do for you:</p></blockquote> <p>babelæ˜¯ä¸€ä¸ªjsç¼–è¯‘å™¨ï¼Œä»–æ˜¯ä¸€ä¸ªå·¥å…·é“¾(toolchain)ï¼Œå®ƒä¸»è¦ç”¨äºå°† ES6(ES2015)+ çš„ä»£ç è½¬æ¢ä¸ºåœ¨ä½ç‰ˆæœ¬æµè§ˆå™¨æˆ–æ‰§è¡Œç¯å¢ƒå¯ä»¥è·‘èµ·æ¥çš„ä»£ç ã€‚ä»–ä¸»è¦åšäº†ä»¥ä¸‹äº‹æƒ…ï¼š</p> <ol><li>Transform syntax(è¯­æ³•è½¬æ¢)</li> <li>Polyfill features that are missing in your target environment (through @babel/polyfill) (å½“æµè§ˆå™¨ä¼šè¿è¡Œç¯å¢ƒä¸æ”¯æŒæŸäº›APIæ—¶ï¼Œé€šè¿‡ä½¿ç”¨@babel/polyfillè¡¥å……ä¸Šå¯¹åº”çš„APIå®ç°å†…å®¹(polyfill features))</li> <li>Source coude transformationsï¼ˆcodemodsï¼‰ æºç è½¬æ¢</li> <li>And moreï¼ï¼ˆcheck out these videos for inspirationï¼‰ï¼ˆæ›´å¤šï¼ŒæŸ¥çœ‹è¿™äº›<a href="https://babeljs.io/videos.html" target="_blank" rel="noopener noreferrer">è§†é¢‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ä»¥è·å–çµæ„Ÿï¼‰</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Babel Input: ES2015 arrow function</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Babel Output: ES5 equivalent</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="å…³äº-babel-polyfillä¸core-js"><a href="#å…³äº-babel-polyfillä¸core-js" class="header-anchor">#</a> å…³äº@babel/polyfillä¸core-js</h4> <p>ä¸€èˆ¬polyfillåªä¼šæä¾›es2015+ç›¸å…³çš„å†…å®¹ï¼Œä¸”å½“æŸäº›æ–°ç‰¹æ€§è¿˜æ²¡åˆ° Stage 4 proposals(ç¬¬4é˜¶æ®µçš„æè®®)ä¹‹å‰ï¼Œæ˜¯ä¸æ”¯æŒçš„</p> <p>As of Babel 7.4.0, this package has been deprecated in favor of directly including core-js/stable (to polyfill ECMAScript features) and regenerator-runtime/runtime (needed to use transpiled generator functions):</p> <p>åœ¨ Babel 7.4.0 ä¸­ï¼Œ@babel/polyfillè¿™ä¸ªåŒ…è¢«åºŸå¼ƒäº†ï¼Œç°åœ¨ç”± <a href="https://github.com/zloirock/core-js" target="_blank" rel="noopener noreferrer"><code>core-js/stable</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ¥polyfill features</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">&quot;core-js/stable&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;regenerator-runtime/runtime&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>å‚è€ƒ <a href="https://babeljs.io/docs/en/babel-polyfill#tc39-proposals" target="_blank" rel="noopener noreferrer">@babel/polyfill<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>æˆ‘ä»¬åœ¨core-jsçš„æºç ä¸­æ‰¾æ‰¾ symbol å’Œincludesçš„å®ç°ï¼Œä¸€èˆ¬æºç ç›®å½•åœ¨ core-js/internals ç›®å½•ä¸‹ï¼Œä¸‹é¢æ˜¯ include polyfillçš„å®ç°</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// /core-js/internals/array-includes.js</span>
<span class="token keyword">var</span> toIndexedObject <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../internals/to-indexed-object'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> toLength <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../internals/to-length'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> toAbsoluteIndex <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../internals/to-absolute-index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// `Array.prototype.{ indexOf, includes }` methods implementation</span>
<span class="token keyword">var</span> <span class="token function-variable function">createMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token constant">IS_INCLUDES</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">$<span class="token keyword">this</span><span class="token punctuation">,</span> el<span class="token punctuation">,</span> fromIndex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> <span class="token constant">O</span> <span class="token operator">=</span> <span class="token function">toIndexedObject</span><span class="token punctuation">(</span>$<span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> length <span class="token operator">=</span> <span class="token function">toLength</span><span class="token punctuation">(</span><span class="token constant">O</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> index <span class="token operator">=</span> <span class="token function">toAbsoluteIndex</span><span class="token punctuation">(</span>fromIndex<span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> value<span class="token punctuation">;</span>
    <span class="token comment">// Array#includes uses SameValueZero equality algorithm</span>
    <span class="token comment">// eslint-disable-next-line no-self-compare</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">IS_INCLUDES</span> <span class="token operator">&amp;&amp;</span> el <span class="token operator">!=</span> el<span class="token punctuation">)</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>length <span class="token operator">&gt;</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      value <span class="token operator">=</span> <span class="token constant">O</span><span class="token punctuation">[</span>index<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token comment">// eslint-disable-next-line no-self-compare</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!=</span> value<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token comment">// ??????</span>
    <span class="token comment">// Array#indexOf ignores holes, Array#includes - not</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span>length <span class="token operator">&gt;</span> index<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">IS_INCLUDES</span> <span class="token operator">||</span> index <span class="token keyword">in</span> <span class="token constant">O</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token constant">O</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">===</span> el<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token constant">IS_INCLUDES</span> <span class="token operator">||</span> index <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">return</span> <span class="token operator">!</span><span class="token constant">IS_INCLUDES</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// `Array.prototype.includes` method</span>
  <span class="token comment">// https://tc39.github.io/ecma262/#sec-array.prototype.includes</span>
  includes<span class="token operator">:</span> <span class="token function">createMethod</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// `Array.prototype.indexOf` method</span>
  <span class="token comment">// https://tc39.github.io/ecma262/#sec-array.prototype.indexof</span>
  indexOf<span class="token operator">:</span> <span class="token function">createMethod</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>tc39å®˜ç½‘ä»‹ç»ï¼šWhen the includes method is called, the following steps are taken:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// https://tc39.github.io/ecma262/#sec-array.prototype.includes</span>
<span class="token number">1.</span> Let <span class="token constant">O</span> be <span class="token operator">?</span> <span class="token function">ToObject</span><span class="token punctuation">(</span><span class="token keyword">this</span> value<span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token number">2.</span> Let len be <span class="token operator">?</span> <span class="token function">LengthOfArrayLike</span><span class="token punctuation">(</span><span class="token constant">O</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token number">3.</span> If len is <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">.</span>
<span class="token number">4.</span> Let n be <span class="token operator">?</span> <span class="token function">ToInteger</span><span class="token punctuation">(</span>fromIndex<span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token number">5.</span> Assert<span class="token operator">:</span> If fromIndex is <span class="token keyword">undefined</span><span class="token punctuation">,</span> then n is <span class="token number">0.</span>
<span class="token number">6.</span> If n â‰¥ <span class="token number">0</span><span class="token punctuation">,</span> then
     Let k be n<span class="token punctuation">.</span>
   Else<span class="token punctuation">,</span>
     Let k be len <span class="token operator">+</span> n<span class="token punctuation">.</span>
     If k <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">set</span> k to <span class="token number">0.</span>
<span class="token number">8.</span> Repeat<span class="token punctuation">,</span> <span class="token keyword">while</span> k <span class="token operator">&lt;</span> len<span class="token punctuation">,</span>
     Let elementK be the result <span class="token keyword">of</span> <span class="token operator">?</span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token constant">O</span><span class="token punctuation">,</span> <span class="token operator">!</span> <span class="token function">ToString</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
     If <span class="token function">SameValueZero</span><span class="token punctuation">(</span>searchElement<span class="token punctuation">,</span> elementK<span class="token punctuation">)</span> is <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">.</span>
     Set k to k <span class="token operator">+</span> <span class="token number">1.</span>
<span class="token number">9.</span> Return <span class="token boolean">false</span><span class="token punctuation">.</span>
</code></pre></div><p>å…³äº sameValueZeroç®—æ³•ï¼Œå‚è§ <a href="https://tc39.es/ecma262/#sec-samevaluezero" target="_blank" rel="noopener noreferrer">samevaluezero tc39<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="symbol-polyfillå®ç°"><a href="#symbol-polyfillå®ç°" class="header-anchor">#</a> symbol polyfillå®ç°</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// `Symbol.prototype.description` getter</span>
<span class="token comment">// https://tc39.github.io/ecma262/#sec-symbol.prototype.description</span>
<span class="token comment">// /core-js/modules/es.symbol.description.js</span>
<span class="token keyword">var</span> NativeSymbol <span class="token operator">=</span> global<span class="token punctuation">.</span>Symbol<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">DESCRIPTORS</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> NativeSymbol <span class="token operator">==</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">'description'</span> <span class="token keyword">in</span> <span class="token class-name">NativeSymbol</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token operator">||</span>
  <span class="token comment">// Safari 12 bug</span>
  <span class="token function">NativeSymbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>description <span class="token operator">!==</span> <span class="token keyword">undefined</span>
<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> EmptyStringDescriptionStore <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// wrap Symbol constructor for correct work with undefined description</span>
  <span class="token keyword">var</span> <span class="token function-variable function">SymbolWrapper</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> description <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">||</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> <span class="token function">String</span><span class="token punctuation">(</span>arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">SymbolWrapper</span>
      <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">NativeSymbol</span><span class="token punctuation">(</span>description<span class="token punctuation">)</span>
      <span class="token comment">// in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'</span>
      <span class="token operator">:</span> description <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token function">NativeSymbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">NativeSymbol</span><span class="token punctuation">(</span>description<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>description <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> EmptyStringDescriptionStore<span class="token punctuation">[</span>result<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">copyConstructorProperties</span><span class="token punctuation">(</span>SymbolWrapper<span class="token punctuation">,</span> NativeSymbol<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> symbolPrototype <span class="token operator">=</span> <span class="token class-name">SymbolWrapper</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token class-name">NativeSymbol</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
  symbolPrototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> SymbolWrapper<span class="token punctuation">;</span>

  <span class="token keyword">var</span> symbolToString <span class="token operator">=</span> symbolPrototype<span class="token punctuation">.</span>toString<span class="token punctuation">;</span>
  <span class="token keyword">var</span> native <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token function">NativeSymbol</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'Symbol(test)'</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> regexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^Symbol\((.*)\)[^)]+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
  <span class="token function">defineProperty</span><span class="token punctuation">(</span>symbolPrototype<span class="token punctuation">,</span> <span class="token string">'description'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">description</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> symbol <span class="token operator">=</span> <span class="token function">isObject</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token function">symbolToString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>symbol<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">has</span><span class="token punctuation">(</span>EmptyStringDescriptionStore<span class="token punctuation">,</span> symbol<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> desc <span class="token operator">=</span> native <span class="token operator">?</span> string<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span> string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regexp<span class="token punctuation">,</span> <span class="token string">'$1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> desc <span class="token operator">===</span> <span class="token string">''</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="babelæ˜¯æ€ä¹ˆè‡ªåŠ¨æ‰“åŒ…è¿›vue-clié¡¹ç›®é‡Œçš„"><a href="#babelæ˜¯æ€ä¹ˆè‡ªåŠ¨æ‰“åŒ…è¿›vue-clié¡¹ç›®é‡Œçš„" class="header-anchor">#</a> babelæ˜¯æ€ä¹ˆè‡ªåŠ¨æ‰“åŒ…è¿›vue-clié¡¹ç›®é‡Œçš„</h4> <p>åœ¨babel githubå®˜æ–¹ä»“åº“é‡Œé¢æœ‰ä¸€ä¸ª <code>babel-loader</code> é¡¹ç›®ï¼Œä¸»è¦æ˜¯Babel loader for webpackï¼Œå¦å¤–vue-cliçš„package.jsoné‡Œä¹Ÿå¼•å…¥äº† <code>@vue/cli-plugin-babel</code>ï¼Œåé¢æœ‰æ—¶é—´å†æ·±å…¥ç ”ç©¶</p> <h3 id="ç”¨koa-mockæ¥å£æ—¶router-allowedmethods-è¿™ä¸ªä¸­é—´ä»¶æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„"><a href="#ç”¨koa-mockæ¥å£æ—¶router-allowedmethods-è¿™ä¸ªä¸­é—´ä»¶æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„" class="header-anchor">#</a> ç”¨koa mockæ¥å£æ—¶router.allowedMethods()è¿™ä¸ªä¸­é—´ä»¶æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„ï¼Ÿ</h3> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>ä¸ºä»€ä¹ˆè¦åŠ router.allowedMethods()ä¸­é—´ä»¶å‘¢ï¼Ÿæˆ‘ä»¬å†™ä¸ªdemoæ¥æµ‹è¯•ä¸‹</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> koa <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> Router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa-router'</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">koa</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token operator">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// app.use(router.routes()).use(router.allowedMethods())</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">'9000'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server listen on 9000 port'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª /user æ¥å£ï¼Œä»–éœ€è¦ä½¿ç”¨postè¯·æ±‚æ–¹æ³•ã€‚è¿™é‡Œæˆ‘ä»¬å…ˆé€šè¿‡getæ–¹æ³•æ¥è¯·æ±‚è¿™ä¸ªæ¥å£è¯•è¯•</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">curl</span> -v http://127.0.0.1:9000/user
<span class="token comment"># ä»¥ä¸‹æ˜¯è¯·æ±‚å“åº”çš„å†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°æ¥å£ä¼šè¿”å›404ï¼Œå› ä¸ºæˆ‘ä»¬æ¥å£ç°åœ¨åªèƒ½æ˜¯postè¯·æ±‚çš„</span>
* Connected to <span class="token number">127.0</span>.0.1 <span class="token punctuation">(</span><span class="token number">127.0</span>.0.1<span class="token punctuation">)</span> port <span class="token number">9000</span> <span class="token punctuation">(</span><span class="token comment">#0)</span>
<span class="token operator">&gt;</span> GET /user HTTP/1.1
<span class="token operator">&gt;</span> Host: <span class="token number">127.0</span>.0.1:9000
<span class="token operator">&gt;</span> User-Agent: curl/7.64.1
<span class="token operator">&gt;</span> Accept: */*
<span class="token operator">&gt;</span> 
<span class="token operator">&lt;</span> HTTP/1.1 <span class="token number">404</span> Not Found
<span class="token operator">&lt;</span> Content-Type: text/plain<span class="token punctuation">;</span> <span class="token assign-left variable">charset</span><span class="token operator">=</span>utf-8
<span class="token operator">&lt;</span> Content-Length: <span class="token number">9</span>
<span class="token operator">&lt;</span> Date: Thu, <span class="token number">25</span> Jun <span class="token number">2020</span> 09:13:14 GMT
<span class="token operator">&lt;</span> Connection: keep-alive
<span class="token operator">&lt;</span> 
</code></pre></div><p>æˆ‘ä»¬å†è°ƒæ•´ä¸‹ä¸Šé¢çš„demoï¼Œä½¿ç”¨ router.allowedMethods() ä¸­é—´ä»¶</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// app.use(router.routes())</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>å†å‘ä¸€égetè¯·æ±‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">curl</span> -v http://127.0.0.1:9000/user
<span class="token comment"># ä»¥ä¸‹æ˜¯è¿”å›ç»“æœ</span>
* TCP_NODELAY <span class="token builtin class-name">set</span>
* Connected to <span class="token number">127.0</span>.0.1 <span class="token punctuation">(</span><span class="token number">127.0</span>.0.1<span class="token punctuation">)</span> port <span class="token number">9000</span> <span class="token punctuation">(</span><span class="token comment">#0)</span>
<span class="token operator">&gt;</span> GET /user HTTP/1.1
<span class="token operator">&gt;</span> Host: <span class="token number">127.0</span>.0.1:9000
<span class="token operator">&gt;</span> User-Agent: curl/7.64.1
<span class="token operator">&gt;</span> Accept: */*
<span class="token operator">&gt;</span> 
<span class="token operator">&lt;</span> HTTP/1.1 <span class="token number">405</span> Method Not Allowed
<span class="token operator">&lt;</span> Allow: POST
<span class="token operator">&lt;</span> Content-Type: text/plain<span class="token punctuation">;</span> <span class="token assign-left variable">charset</span><span class="token operator">=</span>utf-8
<span class="token operator">&lt;</span> Content-Length: <span class="token number">18</span>
<span class="token operator">&lt;</span> Date: Thu, <span class="token number">25</span> Jun <span class="token number">2020</span> 09:13:55 GMT
<span class="token operator">&lt;</span> Connection: keep-alive
<span class="token operator">&lt;</span> 
</code></pre></div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åŠ router.allowedMethods()ä¸­é—´ä»¶å’Œä¸åŠ è¿™ä¸ªä¸­é—´ä»¶çš„åŒºåˆ«ï¼Œå½“æˆ‘ä»¬å®šä¹‰äº†postæ–¹æ³•æ¥å£å´å‘é€å¯¹åº”çš„getè¯·æ±‚æ—¶ï¼Œæ‰§è¡Œç»“æœå¯¹æ¯”</p> <table><thead><tr><th>ç±»å‹</th> <th>å“åº”çŠ¶æ€ç </th> <th>å“åº”å¤´å˜åŒ–</th></tr></thead> <tbody><tr><td>é»˜è®¤æƒ…å†µ</td> <td>404 Not Found</td> <td>æ— </td></tr> <tr><td>router.allowedMethods()</td> <td>405 Method Not Allowed</td> <td>æ–°å¢å“åº”å¤´ Allow: POST</td></tr></tbody></table> <p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹å¯¹åº”çš„æºç ï¼š<a href="https://github.com/koajs/router/blob/master/" target="_blank" rel="noopener noreferrer">koa-routeræºç  | github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>ç”±äºå®ƒæ˜¯ä¸€ä¸ªnpmåŒ…ï¼Œæˆ‘ä»¬å…ˆåœ¨package.jsoné‡Œé¢çœ‹çœ‹ä»–çš„å…¥å£</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># package.jsoné‡Œé¢çš„mainå°±æ˜¯æˆ‘ä»¬ requireå¯¹åº”npmåŒ…åï¼Œå¼•å…¥çš„å®é™…æ–‡ä»¶åœ°å€</span>
<span class="token string">&quot;main&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;lib/router.js&quot;</span>,
</code></pre></div><p>ä¹Ÿå°±æ˜¯æºç å…¥å£åœ¨lib/router.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æºç æˆªå–è‡³https://github.com/koajs/router/blob/master/lib/router.js</span>
<span class="token comment">/**
 * Returns separate middleware for responding to `OPTIONS` requests with
 * an `Allow` header containing the allowed methods, as well as responding
 * with `405 Method Not Allowed` and `501 Not Implemented` as appropriate.
 * @param {Object=} options
 * @param {Boolean=} options.throw throw error instead of setting status and header
 * @param {Function=} options.notImplemented throw the returned value in place of the default NotImplemented error
 * @param {Function=} options.methodNotAllowed throw the returned value in place of the default MethodNotAllowed error
 * @returns {Function}
 */</span>
<span class="token class-name">Router</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">allowedMethods</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  options <span class="token operator">=</span> options <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> implemented <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>methods<span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> allowed <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ctx<span class="token punctuation">.</span>status <span class="token operator">||</span> ctx<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">404</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ctx<span class="token punctuation">.</span>matched<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> route <span class="token operator">=</span> ctx<span class="token punctuation">.</span>matched<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> route<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> method <span class="token operator">=</span> route<span class="token punctuation">.</span>methods<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
            allowed<span class="token punctuation">[</span>method<span class="token punctuation">]</span> <span class="token operator">=</span> method<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">const</span> allowedArr <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>allowed<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">~</span>implemented<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>throw<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> notImplementedThrowable <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> options<span class="token punctuation">.</span>notImplemented <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span>
            <span class="token operator">?</span> options<span class="token punctuation">.</span><span class="token function">notImplemented</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// set whatever the user returns from their function</span>
            <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">HttpError<span class="token punctuation">.</span>NotImplemented</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token keyword">throw</span> notImplementedThrowable<span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            ctx<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">501</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Allow'</span><span class="token punctuation">,</span> allowedArr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">', '</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>allowedArr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">'OPTIONS'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ctx<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Allow'</span><span class="token punctuation">,</span> allowedArr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">', '</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>allowed<span class="token punctuation">[</span>ctx<span class="token punctuation">.</span>method<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>throw<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">let</span> notAllowedThrowable <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> options<span class="token punctuation">.</span>methodNotAllowed <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> 
              <span class="token operator">?</span> options<span class="token punctuation">.</span><span class="token function">methodNotAllowed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// set whatever the user returns from their function</span>
              <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">HttpError<span class="token punctuation">.</span>MethodNotAllowed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

              <span class="token keyword">throw</span> notAllowedThrowable<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              ctx<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">405</span><span class="token punctuation">;</span>
              ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Allow'</span><span class="token punctuation">,</span> allowedArr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">', '</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>æ€ä¹ˆå¼„æ¸…æ¥šæºç çš„æ‰§è¡Œå‘¢ï¼Ÿä¸€èˆ¬æˆ‘ä»¬å¯ä»¥åœ¨æºç é‡ŒåŠ å…¥ä¸€äº›console.logï¼Œæ¥æ‰“å°ä¸€äº›å…³é”®çš„ä¿¡æ¯ï¼Œæ³¨æ„:</p> <ol><li>ä¸€èˆ¬npm install koa-router --saveåï¼Œå½“å‰ç›®å½•ä¸‹çš„node_modulesé‡Œé¢ä¼šæœ‰å¯¹åº”çš„æºç ï¼Œå¯ä»¥åœ¨é‡Œé¢ä¿®æ”¹æºç </li> <li>ä¿®æ”¹æºç åï¼Œéœ€è¦ctrl+sä¸€ä¸‹index.jsè§¦å‘nodemoné‡å¯æœåŠ¡ï¼Œè¿™æ ·æ‰§è¡Œçš„æ‰æ˜¯ä¿®æ”¹è¿‡æºç åçš„ä»£ç </li></ol> <p>ä»¥ä¸‹æ˜¯æˆ‘åœ¨è°ƒè¯•è¿™ä¸ªdemoæ—¶ï¼Œåœ¨æºç ä¸­åŠ çš„consoleä¿¡æ¯ï¼Œå¦‚ä¸‹</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Router</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">allowedMethods</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  options <span class="token operator">=</span> options <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> implemented <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>methods<span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'koa router log, implemented'</span><span class="token punctuation">,</span> implemented<span class="token punctuation">)</span>
  <span class="token comment">// [ 'HEAD', 'OPTIONS', 'GET', 'PUT', 'PATCH', 'POST', 'DELETE' ]</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> allowed <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ctx<span class="token punctuation">.</span>status <span class="token operator">||</span> ctx<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">404</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ctx.matched'</span><span class="token punctuation">,</span> ctx<span class="token punctuation">.</span>matched<span class="token punctuation">)</span>
        <span class="token comment">//  ctx.matched å½“å‰è¯·æ±‚åŒ¹é…åˆ°çš„è·¯ç”±ï¼Œå½“å‘é€ /user è¯·æ±‚æ—¶ï¼Œè¿™ä¸ªæ•°ç»„åªæœ‰ä¸€ä¸ªå…ƒç´ </span>
        <span class="token comment">// [ Layer {</span>
        <span class="token comment">//   opts:</span>
        <span class="token comment">//    { end: true,</span>
        <span class="token comment">//      name: null,</span>
        <span class="token comment">//      sensitive: false,</span>
        <span class="token comment">//      strict: false,</span>
        <span class="token comment">//      prefix: '',</span>
        <span class="token comment">//      ignoreCaptures: undefined },</span>
        <span class="token comment">//   name: null,</span>
        <span class="token comment">//   methods: [ 'POST' ],</span>
        <span class="token comment">//   paramNames: [],</span>
        <span class="token comment">//   stack: [ [Function] ],</span>
        <span class="token comment">//   path: '/user',</span>
        <span class="token comment">//   regexp: /^\/user[\/#\?]?$/i } ]</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ctx<span class="token punctuation">.</span>matched<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> route <span class="token operator">=</span> ctx<span class="token punctuation">.</span>matched<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token comment">// æœ‰äº›æ¥å£å¯èƒ½æ”¯æŒå¤šç§methodsè¯·æ±‚ï¼Œè¿™é‡Œéå†å½“å‰æ¥å£æ”¯æŒçš„æ‰€æœ‰æ–¹æ³•æ•°ç»„,/user åªæ”¯æŒä¸€ä¸ªpostæ–¹æ³•</span>
          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> route<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> method <span class="token operator">=</span> route<span class="token punctuation">.</span>methods<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
            allowed<span class="token punctuation">[</span>method<span class="token punctuation">]</span> <span class="token operator">=</span> method<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'allowed'</span><span class="token punctuation">,</span> allowed<span class="token punctuation">)</span> <span class="token comment">// { POST: 'POST' }</span>

        <span class="token keyword">const</span> allowedArr <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>allowed<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['POST']</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'implemented.indexOf(ctx.method)'</span><span class="token punctuation">,</span> implemented<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>

        <span class="token comment">// if (!~value) ç­‰ä»·äº if (value === -1)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">~</span>implemented<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// ctx.method  GET</span>
          <span class="token comment">// å¦‚æœå½“å‰è¯·æ±‚æ–¹æ³•ä¸æ˜¯ä¸‹é¢æ•°ç»„ä¸­çš„æŸä¸€ç§</span>
          <span class="token comment">// [ 'HEAD', 'OPTIONS', 'GET', 'PUT', 'PATCH', 'POST', 'DELETE' ]</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>throw<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> notImplementedThrowable <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> options<span class="token punctuation">.</span>notImplemented <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span>
            <span class="token operator">?</span> options<span class="token punctuation">.</span><span class="token function">notImplemented</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// set whatever the user returns from their function</span>
            <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">HttpError<span class="token punctuation">.</span>NotImplemented</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token keyword">throw</span> notImplementedThrowable<span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            ctx<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">501</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Allow'</span><span class="token punctuation">,</span> allowedArr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">', '</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>allowedArr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// å½“å‰è·¯ç”±404ï¼Œä½†å¯¹åº”çš„æ¥å£å¯ä»¥ä½¿ç”¨å…¶ä»–çš„methodè¿›è¡Œè¯·æ±‚</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">'OPTIONS'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ctx<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
            ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Allow'</span><span class="token punctuation">,</span> allowedArr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">', '</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>allowed<span class="token punctuation">[</span>ctx<span class="token punctuation">.</span>method<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// allowed: { POST: 'POST' } ctx.method: GET</span>
            <span class="token comment">// å½“å‰è¯·æ±‚æ–¹æ³•ï¼Œå¹¶ä¸åœ¨æ¥å£å…è®¸çš„æ–¹æ³•(allowed)é‡Œé¢</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>throw<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token comment">// throw error instead of setting status and header</span>
              <span class="token keyword">let</span> notAllowedThrowable <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> options<span class="token punctuation">.</span>methodNotAllowed <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> 
              <span class="token operator">?</span> options<span class="token punctuation">.</span><span class="token function">methodNotAllowed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// set whatever the user returns from their function</span>
              <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">HttpError<span class="token punctuation">.</span>MethodNotAllowed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

              <span class="token keyword">throw</span> notAllowedThrowable<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token comment">// é»˜è®¤è¯·æ±‚ï¼Œå¦‚æœä¸ä¼  throwæ–¹æ³•çš„æƒ…å†µ</span>
              ctx<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">405</span><span class="token punctuation">;</span>
              ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Allow'</span><span class="token punctuation">,</span> allowedArr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">', '</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>æ€»ç»“ï¼Œrouter.allowedMethods() çš„æ‰§è¡Œé€»è¾‘å¤§è‡´å¦‚ä¸‹</p> <ol><li>å¦‚æœå½“å‰æ¥å£ä¸º404æ—¶(!ctx.statusçš„æƒ…å†µè²Œä¼¼æ²¡é‡åˆ°è¿‡)ï¼Œæ‰æ‰§è¡Œè¯¥ä¸­é—´ä»¶çš„é€»è¾‘</li> <li>éå†å½“å‰è¯·æ±‚åŒ¹é…åˆ°çš„è·¯ç”±ä¿¡æ¯æ•°ç»„ ctx.matchedï¼Œå°†åŒ¹é…åˆ°çš„è·¯ç”±å…è®¸çš„methodså­˜å…¥ allowed å¯¹è±¡</li> <li>åˆ¤æ–­å½“å‰è¯·æ±‚æ–¹æ³•ctx.methodæ˜¯å¦æ˜¯æ­£å¸¸çš„è¯·æ±‚æ–¹æ³•ï¼Œå¦‚æœä¸æ˜¯ï¼ŒæŠ›å¼‚å¸¸ï¼Œæ³¨æ„æŠ›å¼‚å¸¸æ—¶ï¼Œå¦‚æœè°ƒç”¨è¯¥ä¸­é—´ä»¶æ—¶æœ‰ä¼ å…¥throwå‚æ•°ï¼Œåˆ™è¡¨ç¤ºè‡ªå·±å¤„ç†å¼‚å¸¸ï¼Œè¿™ç§æƒ…å†µé»˜è®¤è¿”å›501ï¼Œæç¤ºæœåŠ¡å¼‚å¸¸</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æ³¨æ„è¿™é‡Œç”¨åˆ°äº† !~ æ¥åˆ¤æ–­æ˜¯å¦ === -1ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨ES2016æ–°å‡ºçš„Array.prototype.includesæ¥åˆ¤æ–­</span>
<span class="token comment">// if (!~value) ç­‰ä»·äº if (value === -1)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">~</span>implemented<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//</span>
</code></pre></div><ol start="4"><li>å¦‚æœå½“å‰è·¯ç”±404ï¼Œä½†å¯¹åº”çš„æ¥å£å¯ä»¥ä½¿ç”¨å…¶ä»–çš„methodè¿›è¡Œè¯·æ±‚ï¼Œå¦‚æœæ˜¯ options(æˆ–é¢„æ£€è¯·æ±‚)ï¼Œä¸è¿”å›404ï¼Œè¿”å›200ï¼Œå¹¶è®¾ç½®allowå“åº”å¤´</li> <li>å¦‚æœå½“å‰è¯·æ±‚æ–¹æ³•ä¸åœ¨å…è®¸çš„æ–¹æ³•é‡Œé¢ï¼Œå¦‚æœä¼ å…¥äº†throwè‡ªå·±å¤„ç†å¼‚å¸¸ï¼Œå¦åˆ™è¿”å› 405 method not allowedï¼Œä¸”è®¾ç½®allowå“åº”å¤´</li></ol> <h2 id="_2020-06-12-å‘¨äº”"><a href="#_2020-06-12-å‘¨äº”" class="header-anchor">#</a> 2020/06/12 å‘¨äº”</h2> <h3 id="componentç”¨isè¿›è¡Œç»„ä»¶åˆ‡æ¢æ—¶ä¼šè§¦å‘å“ªäº›é’©å­å‡½æ•°-åŠ äº†keep-aliveåå‘¢"><a href="#componentç”¨isè¿›è¡Œç»„ä»¶åˆ‡æ¢æ—¶ä¼šè§¦å‘å“ªäº›é’©å­å‡½æ•°-åŠ äº†keep-aliveåå‘¢" class="header-anchor">#</a> componentç”¨isè¿›è¡Œç»„ä»¶åˆ‡æ¢æ—¶ä¼šè§¦å‘å“ªäº›é’©å­å‡½æ•°ï¼ŒåŠ äº†keep-aliveåå‘¢ï¼Ÿ</h3> <p>å‡è®¾åŠ¨æ€ç»„ä»¶componentä½¿ç”¨isæ§åˆ¶ç»„ä»¶æ˜¾ç¤ºï¼Œé»˜è®¤æ˜¾ç¤ºä¸ºAç»„ä»¶ï¼Œå¯ä»¥åˆ‡æ¢åˆ°Bç»„ä»¶ã€‚é—®ï¼š</p> <p><strong>é¦–æ¬¡è¿›å…¥é¡µé¢ä»¥åŠç”¨isåˆ‡æ¢ç»„ä»¶æ—¶ï¼Œä¼šè§¦å‘A/Bç»„ä»¶çš„å“ªäº›é’©å­å‡½æ•°ï¼ŒåŠ äº†keep-aliveåå‘¢ï¼Ÿ</strong></p> <p>å…ˆç»™å‡ºç»“è®º</p> <ol><li><p>å¦‚æœä¸åŠ keep-aliveï¼Œå’Œæ­£å¸¸çš„è¿›å…¥é¡µé¢å’Œç¦»å¼€é¡µé¢è§¦å‘çš„é’©å­å‡½æ•°ä¸€è‡´ã€‚</p></li> <li><p>å¦‚æœåŠ äº†keep-aliveï¼Œç»„ä»¶é¦–æ¬¡åŠ è½½æ‰ä¼šè§¦å‘ created,mountedç­‰é’©å­å‡½æ•°ï¼Œåˆ‡æ¢æ—¶å°±ä¸ä¼šè§¦å‘created,mounted,beforedestroyedç­‰ï¼Œæ‰€ä»¥é¢å¤–åŠ ä¸€ä¸ªactivatedå’Œdeactivatedé’©å­æ¥æç¤ºé¡µé¢å·²åˆ‡æ¢ï¼Œç¦»å¼€å½“å‰é¡µé¢ï¼Œæ‰ä¼šé”€æ¯A/Bä¸¤ä¸ªç»„ä»¶è§¦å‘beforeDestroyedå’Œdestroyedä¸¤ä¸ªé’©å­</p></li></ol> <p>è¿™é‡Œé¢æ¶‰åŠåˆ°ä¸€äº›é’©å­å‡½æ•°çš„è§¦å‘é¡ºåºé—®é¢˜ï¼Œæˆ‘ä»¬æ¥å†™è¯¦ç»†çš„demoæ¥éªŒè¯ä¸‹</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- index.vue ä¸»é¡µé¢ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>å½“å‰ç»„ä»¶{{ curComp }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-radio</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>curComp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>compA<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç»„ä»¶A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-radio</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-radio</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>curComp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>compB<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç»„ä»¶B<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-radio</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gotoOtherPage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mini<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç¦»å¼€å½“å‰é¡µé¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- è¿™é‡Œç”¨æ¥æ‰“å¼€æˆ–å…³é—­keep-alive --&gt;</span>
      <span class="token comment">&lt;!-- &lt;keep-alive&gt; --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>curComp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- &lt;/keep-alive&gt; --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">compA</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">compB</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./B&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      curComp<span class="token operator">:</span> <span class="token string">&quot;compA&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">gotoOtherPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;/echarts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;index beforeCreate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;index created&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;index beforeMount&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;index mounted&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;index beforeUpdate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;index updated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">activated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;index activated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">deactivated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;index deactivated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;index beforeDestroy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">destroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;index destroyed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">errorCaptured</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;index errorCaptured&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ç»„ä»¶A.vueå’ŒB.vueä»£ç åŸºæœ¬ä¸€è‡´ï¼Œä¸‹é¢æ˜¯A.vueç¤ºä¾‹ï¼ŒB.vueåªæ˜¯å°†Aæ”¹ä¸ºäº†B</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- A.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    æˆ‘æ˜¯Aç»„ä»¶å†…å®¹
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;A beforeCreate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;A created&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;A beforeMount&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;A mounted&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;A beforeUpdate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;A updated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">activated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;A activated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">deactivated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;A deactivated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;A beforeDestroy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">destroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;A destroyed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">errorCaptured</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;A errorCaptured&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>keep-aliveå’Œékeep-aliveé’©å­å‡½æ•°æ‰§è¡Œå¯¹æ¯”å›¾</p> <table><thead><tr><th>ç±»åˆ«</th> <th>ékeep-alive</th> <th>keep-alive</th></tr></thead> <tbody><tr><td>é¦–æ¬¡è¿›å…¥</td> <td>index beforeCreate<br>index created<br>index beforeMount<br>index mounted<br>index beforeUpdate<br>A beforeCreate<br>A created<br>A beforeMount<br>A mounted<br>index updated<br></td> <td>index beforeCreate<br>index created<br>index beforeMount<br>index mounted<br>index beforeUpdate<br>A beforeCreate<br>A created<br>A beforeMount<br>A mounted<br>A activated<br>index updated</td></tr> <tr><td>åˆ‡æ¢åˆ°Bç»„ä»¶</td> <td>index beforeUpdate<br>A beforeDestroy<br>A destroyed<br>index updated<br>index beforeUpdate<br>B beforeCreate<br>B created<br>B beforeMount<br>B mounted<br>index updated</td> <td>A deactivated<br>index updated<br>index beforeUpdate<br>B beforeCreate<br>B created<br>B beforeMount<br>B mounted<br>B activated<br>index updated</td></tr> <tr><td>å†åˆ‡å›åˆ°Aç»„ä»¶</td> <td>index beforeUpdate<br>A beforeCreate<br>A created<br>A beforeMount<br>B beforeDestroy<br>B destroyed<br>A mounted<br>index updated</td> <td>index beforeUpdate<br>B deactivated<br>A activated<br>index updated</td></tr> <tr><td>å†åˆ‡å›Bç»„ä»¶</td> <td>index beforeUpdate<br>B beforeCreate<br>B created<br>B beforeMount<br>A beforeDestroy<br>A destroyed<br>B mounted<br>index updated</td> <td>index beforeUpdate<br>A deactivated<br>B activated<br>index updated</td></tr> <tr><td>ç‚¹å‡»ç¦»å¼€å½“å‰é¡µé¢</td> <td>index beforeDestroy<br>B beforeDestroy<br>B destroyed<br>index destroyed</td> <td>index beforeDestroy<br>B deactivated<br>A beforeDestroy<br>A destroyed<br>B beforeDestroy<br>B destroyed<br>index destroyed</td></tr></tbody></table> <p>å®Œæ•´demoåœ°å€ï¼Œå‚è§ <a href="https://github.com/zuoxiaobai/fedemo/tree/master/src/vuecli-demo/src/views/vuehooks/" target="_blank" rel="noopener noreferrer">vue hooks demo | github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="componentåŠ¨æ€ç»„ä»¶ä¸ä½¿ç”¨v-ifæ§åˆ¶ç»„ä»¶æ˜¾ç¤ºæœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#componentåŠ¨æ€ç»„ä»¶ä¸ä½¿ç”¨v-ifæ§åˆ¶ç»„ä»¶æ˜¾ç¤ºæœ‰ä»€ä¹ˆåŒºåˆ«" class="header-anchor">#</a> componentåŠ¨æ€ç»„ä»¶ä¸ä½¿ç”¨v-ifæ§åˆ¶ç»„ä»¶æ˜¾ç¤ºæœ‰ä»€ä¹ˆåŒºåˆ«</h3> <p>componentåŠ¨æ€ç»„ä»¶å¯ä»¥ç†è§£ä¸ºå®ƒå°±æ˜¯v-ifæ§åˆ¶ç»„ä»¶æ˜¾ç¤ºçš„è¯­æ³•ç³–ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­æ¥æµ‹è¯•ï¼Œä¹‹å‰æˆ‘ä»¬å†™è¿‡compoenntç”¨isåˆ‡æ¢æ—¶çš„é’©å­å‡½æ•°demoï¼Œæˆ‘ä»¬æŠŠdemoæ”¹å†™ä¸‹ï¼Œä½¿ç”¨ v-ifæ¥æ›¿æ¢componentï¼Œå¯¹æ¯”é¡µé¢æ¸²æŸ“ä»¥åŠé’©å­å‡½æ•°çš„æ‰§è¡Œæƒ…å†µã€‚æ”¹å†™å¦‚ä¸‹ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- è¿™é‡Œç”¨æ¥æ‰“å¼€æˆ–å…³é—­keep-alive --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- &lt;component :is=&quot;curComp&quot;&gt;&lt;/component&gt; --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>comp-a</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>curComp === <span class="token punctuation">'</span>compA<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>comp-a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>comp-b</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>comp-b</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å®éªŒè¯æ˜ï¼Œcomponentå’Œv-ifçš„é¡µé¢æ˜¾ç¤ºæ•ˆæœï¼Œé’©å­å‡½æ•°æ‰§è¡Œæƒ…å†µä¸€æ¨¡ä¸€æ ·ï¼Œä¸ç®¡æ˜¯å¦åŠ keep-aliveï¼Œå®Œæ•´demoå‚è§ <a href="https://github.com/zuoxiaobai/fedemo/tree/master/src/vuecli-demo/src/views/componentAndIs/" target="_blank" rel="noopener noreferrer">component vs v-if | github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="element-tabsç»„ä»¶åˆ‡æ¢é¡µé¢æ—¶-æ˜¾ç¤ºæˆ–éšè—çš„ç»„ä»¶ä¼šè§¦å‘å“ªäº›é’©å­å‡½æ•°"><a href="#element-tabsç»„ä»¶åˆ‡æ¢é¡µé¢æ—¶-æ˜¾ç¤ºæˆ–éšè—çš„ç»„ä»¶ä¼šè§¦å‘å“ªäº›é’©å­å‡½æ•°" class="header-anchor">#</a> element tabsç»„ä»¶åˆ‡æ¢é¡µé¢æ—¶ï¼Œæ˜¾ç¤ºæˆ–éšè—çš„ç»„ä»¶ä¼šè§¦å‘å“ªäº›é’©å­å‡½æ•°</h3> <p>è¿™é‡Œä¸»è¦æ˜¯è¦å¼„æ¸…æ¥šel-tabsæ˜¯æ€ä¹ˆå®ç°ç»„ä»¶åˆ‡æ¢çš„ï¼Œä½¿ç”¨el-tab-pane slotå’Œä¸ç”¨è¿™ä¸ªæ’æ§½è§¦å‘çš„é’©å­å‡½æ•°ä¼šç›¸åŒå—ï¼Ÿ</p> <p>å¦‚æœä¸ä½¿ç”¨el-tab-paneçš„slotï¼Œåªä½¿ç”¨tabçš„å¯¼èˆªï¼Œä¸‹é¢çš„å†…å®¹è‡ªå·±æ§åˆ¶ï¼Œå°±çœ‹æ˜¯ä½¿ç”¨componentè¿˜æ˜¯v-ifæ¥æ§åˆ¶äº†ï¼Œè¿™ç§æƒ…å†µel-tabsç»„ä»¶ä¸ä¼šå¹²æ‰°åˆ‡æ¢çš„é€»è¾‘ã€‚</p> <p>é—®é¢˜æ¥äº†ï¼Œå¦‚æœå†…å®¹æ”¾åˆ°äº†el-tab-paneçš„slotå‘¢ï¼Ÿä»–æœ‰ä¸€ä¸ªlazyå±æ€§ï¼Œç”¨æ¥è®¾ç½®æŸä¸ªtabæ ‡ç­¾é¡µæ˜¯å¦å»¶è¿Ÿæ¸²æŸ“ï¼Œè¿™ä¸ªä¼šå¯¹é’©å­å‡½æ•°æœ‰ä»€ä¹ˆå½±å“å‘¢ï¼Ÿæˆ‘ä»¬æ”¹å†™ä¸Šé¢çš„ä¾‹å­ï¼Œé€šè¿‡demoæ¥çœ‹çœ‹</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>å½“å‰ç»„ä»¶{{ activeName }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gotoOtherPage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mini<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç¦»å¼€å½“å‰é¡µé¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- ä¸ä½¿ç”¨el-tab-pane slotçš„é€»è¾‘ï¼Œä»…ç”¨tabæ§åˆ¶é¡¶éƒ¨tabæ  --&gt;</span>
    <span class="token comment">&lt;!-- &lt;el-tabs v-model=&quot;activeName&quot; @tab-click=&quot;handleClick&quot;&gt;
      &lt;el-tab-pane label=&quot;ç»„ä»¶A&quot; name=&quot;compA&quot;&gt;&lt;/el-tab-pane&gt;
      &lt;el-tab-pane label=&quot;ç»„ä»¶B&quot; name=&quot;compB&quot;&gt;&lt;/el-tab-pane&gt;
    &lt;/el-tabs&gt;
    &lt;div&gt;
      &lt;keep-alive&gt;
        &lt;component :is=&quot;activeName&quot;&gt;&lt;/component&gt;
      &lt;/keep-alive&gt;
    &lt;/div&gt; --&gt;</span>

    <span class="token comment">&lt;!-- ä½¿ç”¨el-tab-pane slot --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-tabs</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>activeName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@tab-click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleClick<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-tab-pane</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ç»„ä»¶A<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>compA<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:lazy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- &lt;keep-alive&gt; --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>comp-a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>comp-a</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- &lt;comp-a v-if=&quot;activeName === 'compA'&quot;&gt;&lt;/comp-a&gt; --&gt;</span>
        <span class="token comment">&lt;!-- &lt;/keep-alive&gt; --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-tab-pane</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-tab-pane</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ç»„ä»¶B<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>compB<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:lazy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- &lt;keep-alive&gt; --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>comp-b</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>comp-b</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- &lt;comp-b v-if=&quot;activeName === 'compB'&quot;&gt;&lt;/comp-b&gt; --&gt;</span>
        <span class="token comment">&lt;!-- &lt;/keep-alive&gt; --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-tab-pane</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-tabs</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol><li>å¦‚æœé»˜è®¤lazyä¸ºfalseï¼Œä¸”slotç›´æ¥å†™å¯¹åº”çš„ç»„ä»¶
é¦–æ¬¡è¿›å…¥ä¼šè§¦å‘A/B/indexä¸‰ä¸ªç»„ä»¶çš„æ–°è¿›å…¥é¡µé¢ç›¸å…³é’©å­ï¼Œ<strong>å†åˆ‡æ¢åˆ°Bï¼Œä¸ä¼šè§¦å‘A/Bçš„ä»»ä½•é’©å­</strong>ï¼Œä»…è§¦å‘indexçš„updatedç›¸å…³é’©å­, å†åˆ‡æ¢åˆ°Aæˆ–æ¥å›åˆ‡æ¢ï¼ŒåŒä¸Šä¸ä¼šè§¦å‘A/Bä»»ä½•é’©å­ï¼Œç¦»å¼€é¡µé¢ï¼Œè§¦å‘A/B/indexçš„destroyç›¸å…³é’©å­</li> <li>å¦‚æœlazyè®¾ç½®ä¸ºtureï¼Œä¸”slotç›´æ¥å†™å¯¹åº”çš„ç»„ä»¶
é¦–æ¬¡è¿›å…¥ä¼šè§¦å‘A/indexä¸¤ä¸ªç»„ä»¶çš„æ–°è¿›å…¥é¡µé¢ç›¸å…³é’©å­ï¼Œ<strong>å†åˆ‡æ¢åˆ°Bï¼Œä¸ä¼šè§¦å‘Açš„ä»»ä½•é’©å­</strong>ï¼Œä»…è§¦å‘indexçš„updatedç›¸å…³é’©å­ä»¥åŠæ–°è¿›å…¥é¡µé¢Bçš„é’©å­, å†åˆ‡æ¢åˆ°Aæˆ–æ¥å›åˆ‡æ¢ï¼Œä¸ä¼šè§¦å‘A/Bä»»ä½•é’©å­ï¼Œç¦»å¼€é¡µé¢ï¼Œè§¦å‘A/B/indexçš„destroyç›¸å…³é’©å­</li> <li>å¦‚æœlazyä¸ºfalseï¼Œsloté‡Œå¯¹åº”çš„ç»„ä»¶ç”¨keep-aliveåŒ…è£¹
é¦–æ¬¡è¿›å…¥ä¼šè§¦å‘A/B/indexä¸‰ä¸ªç»„ä»¶çš„æ–°è¿›å…¥é¡µé¢ç›¸å…³é’©å­ï¼Œå¤–åŠ A/Bçš„activatedé’©å­ï¼›å†åˆ‡æ¢åˆ°Bï¼Œä¸ä¼šè§¦å‘A/Bçš„ä»»ä½•é’©å­ï¼Œä»…è§¦å‘indexçš„updatedç›¸å…³é’©å­, å†åˆ‡æ¢åˆ°Aæˆ–æ¥å›åˆ‡æ¢ï¼ŒåŒä¸Šä¸ä¼šè§¦å‘A/Bä»»ä½•é’©å­ï¼Œç¦»å¼€é¡µé¢ï¼Œè§¦å‘A/B/indexçš„destroyç›¸å…³é’©å­ä»¥åŠA/Bçš„deactivatedç›¸å…³é’©å­</li> <li>å¦‚æœlazyä¸ºtrueï¼Œsloté‡Œå¯¹åº”çš„ç»„ä»¶ç”¨keep-aliveåŒ…è£¹
é¦–æ¬¡è¿›å…¥ä¼šè§¦å‘A/indexä¸¤ä¸ªç»„ä»¶çš„æ–°è¿›å…¥é¡µé¢ç›¸å…³é’©å­ï¼Œå¤–åŠ Açš„activatedé’©å­ï¼›å†åˆ‡æ¢åˆ°Bï¼Œä¸ä¼šè§¦å‘Açš„ä»»ä½•é’©å­ï¼Œä»…è§¦å‘indexçš„updatedç›¸å…³é’©å­ä»¥åŠæ–°è¿›å…¥é¡µé¢Bçš„é’©å­å¤–åŠ Bçš„activatedé’©å­, å†åˆ‡æ¢åˆ°Aæˆ–æ¥å›åˆ‡æ¢ï¼Œä¸ä¼šè§¦å‘A/Bä»»ä½•é’©å­ï¼Œç¦»å¼€é¡µé¢ï¼Œè§¦å‘A/B/indexçš„destroyç›¸å…³é’©å­</li> <li>å¦‚æœlazyé»˜è®¤ä¸ºfalseæˆ–è€…trueï¼Œç»™ç»„ä»¶åŠ ä¸Šv-ifï¼ˆæˆ–è€…component)æ¥æ§åˆ¶ç»„ä»¶æ˜¾ç¤º
å’Œä¸ä½¿ç”¨slotï¼Œå•ç‹¬åœ¨å¤–éƒ¨ç”¨v-ifæ—¶çš„é’©å­ä¿æŒä¸€è‡´</li> <li>å¦‚æœlazyé»˜è®¤ä¸ºfalseæˆ–trueï¼Œç»™ç»„ä»¶åŠ ä¸Šv-ifï¼ˆæˆ–è€…component)æ¥æ§åˆ¶ç»„ä»¶æ˜¾ç¤ºï¼Œå†åŠ ä¸Škeep-alive
å’Œä¸ä½¿ç”¨slotï¼Œå•ç‹¬åœ¨å¤–éƒ¨ç”¨v-ifæ—¶çš„é’©å­å¹¶åŠ ä¸Škeep-avlieä¿æŒä¸€è‡´</li></ol> <p><strong>ç»¼ä¸Šï¼Œel-tabsç»„ä»¶el-tab-paneçš„slotæœ‰å¥½å¤šç§æƒ…å†µï¼Œä¼šæ¯”è¾ƒæ··ä¹±ï¼Œå¯¹äºéœ€è¦ç²¾å‡†æ§åˆ¶tabsç»„ä»¶åˆ‡æ¢é€»è¾‘çš„åœºæ™¯ï¼Œä¸ªäººå»ºè®®ä¸è¦ä½¿ç”¨ä»–çš„slotï¼Œé™¤éä½ èƒ½å¾ˆæ˜ç¡®çš„çŸ¥é“å…¶é’©å­å‡½æ•°çš„æ‰§è¡Œé¡ºåºä¸é€»è¾‘ï¼Œæœ€å¥½è¿˜æ˜¯ä»…ä½¿ç”¨å…¶é¡¶éƒ¨tabï¼Œä¸‹é¢çš„ä¸»å†…å®¹å†™åœ¨å¤–éƒ¨ï¼Œä¸è¦å†™åœ¨el-tab-paneå†…éƒ¨</strong>ã€‚å…¶å®ä¸»è¦åŒºåˆ«æ˜¯ï¼Œå¦‚æœsloté‡Œä¸ç”¨v-ifæ§åˆ¶ï¼Œé¦–æ¬¡åŠ è½½åï¼ŒA/Bæ¥å›åˆ‡æ¢ä¸ä¼šè§¦å‘A/Bçš„ä»»ä½•é’©å­å‡½æ•°ã€‚å®Œæ•´demoå‚è§ <a href="https://github.com/zuoxiaobai/fedemo/tree/master/src/vuecli-demo/src/views/elementTabs/" target="_blank" rel="noopener noreferrer">el-tabs åˆ‡æ¢é€»è¾‘demo| github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="keep-aliveç»„ä»¶åˆ‡æ¢æ˜¾ç¤ºæ—¶-avtivatedå’ŒcreatedåŒæ—¶è§¦å‘çš„é—®é¢˜"><a href="#keep-aliveç»„ä»¶åˆ‡æ¢æ˜¾ç¤ºæ—¶-avtivatedå’ŒcreatedåŒæ—¶è§¦å‘çš„é—®é¢˜" class="header-anchor">#</a> keep-aliveç»„ä»¶åˆ‡æ¢æ˜¾ç¤ºæ—¶ï¼Œavtivatedå’ŒcreatedåŒæ—¶è§¦å‘çš„é—®é¢˜</h3> <p>è¿™é‡Œåˆ†ä¸¤ç§æƒ…å†µ</p> <h4 id="æ¯æ¬¡è¿›å…¥é¡µé¢éƒ½éœ€è¦åˆ·æ–°æ‰€æœ‰æ•°æ®"><a href="#æ¯æ¬¡è¿›å…¥é¡µé¢éƒ½éœ€è¦åˆ·æ–°æ‰€æœ‰æ•°æ®" class="header-anchor">#</a> æ¯æ¬¡è¿›å…¥é¡µé¢éƒ½éœ€è¦åˆ·æ–°æ‰€æœ‰æ•°æ®</h4> <p>è¦ä¹ˆå»æ‰è¯¥ç»„ä»¶çš„keep-aliveï¼Œè¦ä¹ˆå°†è¿›å…¥é¡µé¢è¯·æ±‚æ•°æ®çš„æ“ä½œï¼Œå…¨éƒ¨æ”¾åˆ°activatedï¼Œåœ¨createdæˆ–mountedå°±ä¸è¯·æ±‚æ•°æ®äº†ã€‚</p> <h4 id="é¦–æ¬¡è¿›å…¥é¡µé¢è¯·æ±‚æ‰€æœ‰æ•°æ®-å†æ¬¡åˆ‡æ¢åˆ°è¯¥é¡µé¢æ—¶åˆ·æ–°éƒ¨åˆ†æ•°æ®"><a href="#é¦–æ¬¡è¿›å…¥é¡µé¢è¯·æ±‚æ‰€æœ‰æ•°æ®-å†æ¬¡åˆ‡æ¢åˆ°è¯¥é¡µé¢æ—¶åˆ·æ–°éƒ¨åˆ†æ•°æ®" class="header-anchor">#</a> é¦–æ¬¡è¿›å…¥é¡µé¢è¯·æ±‚æ‰€æœ‰æ•°æ®ï¼Œå†æ¬¡åˆ‡æ¢åˆ°è¯¥é¡µé¢æ—¶åˆ·æ–°éƒ¨åˆ†æ•°æ®</h4> <p>é¦–æ¬¡è¿›å…¥created,activatedé’©å­å‡½æ•°éƒ½ä¼šè§¦å‘ï¼Œå†æ¬¡åˆ‡æ¢åˆ°è¯¥é¡µé¢æ—¶åªä¼šè§¦å‘activatedé’©å­ï¼Œä¸”ä¸€èˆ¬å…ˆè§¦å‘createdé’©å­ï¼Œç„¶åå†è§¦å‘activatedé’©å­</p> <p>æ‰€ä»¥ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<strong>å¯ä»¥æŠŠé¦–æ¬¡è¿›å…¥æ‰éœ€è¦è¯·æ±‚çš„æ•°æ®æ”¾åˆ°createdé‡Œæ‰§è¡Œï¼ŒæŠŠé¦–æ¬¡è¿›å…¥å’Œå†æ¬¡åˆ‡å›é¡µé¢éƒ½éœ€è¦è¯·æ±‚çš„æ•°æ®æ”¾åˆ°activatedé‡Œæ‰§è¡Œ</strong>ã€‚</p> <p>å¦å¤–ä¹Ÿå¯ä»¥æŠŠæ‰€æœ‰è¯·æ±‚æ“ä½œéƒ½æ”¾åˆ°createdï¼Œç„¶ååœ¨activatedé‡Œå†™å†æ¬¡è¿›å…¥é¡µé¢æ—¶åˆ·æ–°éƒ¨åˆ†æ•°æ®çš„é€»è¾‘ã€‚è¿™ç§æƒ…å†µï¼Œä¼šå‡ºç°æœ‰äº›æ¥å£åœ¨é¦–æ¬¡åŠ è½½è¯·æ±‚ä¸¤æ¬¡çš„é—®é¢˜ï¼Œæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿä½ å¯ä»¥åœ¨createdé‡Œè®¾ç½®æ ‡è®°å€¼ alreadyCreated ä¸ºtrueï¼Œå½“è¿›å…¥activatedé’©å­æ—¶ï¼Œåªæœ‰alreadyCreatedä¸ºfalseæ‰æ‰§è¡Œåˆ·æ–°æ•°æ®æ“ä½œã€‚trueå°±ä¸æ‰§è¡Œï¼Œå¹¶å°†alreadyCreatedè®¾ç½®ä¸ºfalse</p> <p>å‚è€ƒï¼š<a href="https://cn.vuejs.org/v2/api/#activated" target="_blank" rel="noopener noreferrer">é€‰é¡¹ / ç”Ÿå‘½å‘¨æœŸé’©å­ activated | Vue.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2020-06-11-å‘¨å››"><a href="#_2020-06-11-å‘¨å››" class="header-anchor">#</a> 2020/06/11 å‘¨å››</h2> <h3 id="æ‰‹åŠ¨è§¦å‘window-resizeäº‹ä»¶-fixæ”¹å˜çª—å£å¤§å°åå…¶ä»–tabé¡µechartå›¾è¡¨æ˜¾ç¤ºå¼‚å¸¸çš„é—®é¢˜"><a href="#æ‰‹åŠ¨è§¦å‘window-resizeäº‹ä»¶-fixæ”¹å˜çª—å£å¤§å°åå…¶ä»–tabé¡µechartå›¾è¡¨æ˜¾ç¤ºå¼‚å¸¸çš„é—®é¢˜" class="header-anchor">#</a> æ‰‹åŠ¨è§¦å‘window resizeäº‹ä»¶ï¼Œfixæ”¹å˜çª—å£å¤§å°åå…¶ä»–tabé¡µechartå›¾è¡¨æ˜¾ç¤ºå¼‚å¸¸çš„é—®é¢˜</h3> <p>åœ¨echartså›¾è¡¨ç»„ä»¶é‡Œï¼Œæœ‰æ—¶å€™éœ€è¦å›¾è¡¨å¤§å°è‡ªé€‚åº”æµè§ˆå™¨çª—å£å¤§å°ã€‚è¿™ç§æƒ…å†µechartå®½é«˜éƒ½ä¼šè®¾å®šä¸º100%ï¼Œä¾èµ–çˆ¶å…ƒç´ çš„å®½é«˜ã€‚ç„¶åå†ç›‘å¬windowçš„resizeäº‹ä»¶ï¼Œå½“çª—å£å¤§å°æ”¹å˜åï¼Œé‡ç»˜å›¾è¡¨ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†</p> <p>åœ¨å•ä¸ªé¡µé¢é‡Œæ²¡æœ‰é—®é¢˜ï¼Œä½†åœ¨tabç»„ä»¶åˆ‡æ¢æ—¶ï¼Œå„ä¸ªtabé¡µæ˜¯æ‡’åŠ è½½(keep-alive)çš„çŠ¶æ€ï¼Œtabåˆ‡æ¢æ—¶ï¼Œä¼šæœ‰é¡µé¢ç»„ä»¶è¢«éšè—ï¼Œä½†ç”±äºæ˜¯keep-aliveçš„ï¼Œæ‰€ä»¥ä¸ä¼šè§¦å‘beforeDesotryäº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰é”€æ¯ç»„ä»¶åªæ˜¯éšè—äº†ã€‚</p> <p>domè¢«éšè—åï¼Œwindowçš„resizeäº‹ä»¶æ²¡æœ‰è¢«ç§»é™¤ã€‚å¯¼è‡´åœ¨å…¶ä»–é¡µé¢è°ƒæ•´çª—å£å¤§å°ï¼Œè¢«éšè—çš„é¡µé¢ä¹Ÿä¼šæ‰§è¡Œé‡ç»˜æ“ä½œï¼Œå®½é«˜éƒ½æ˜¯ç™¾åˆ†æ¯”çš„ï¼Œè¢«éšè—åï¼Œå®½é«˜ä¼šå¼‚å¸¸ï¼Œå¯¼è‡´å›¾è¡¨æ˜¾ç¤ºå¼‚å¸¸</p> <p>é™¤éæ¯æ¬¡åˆ‡tabéƒ½é‡ç»˜å›¾è¡¨æˆ–è€…ä¸ä½¿ç”¨keep-aliveæ¯æ¬¡éƒ½åˆ·æ–°é¡µé¢ï¼Œæ‰ä¸ä¼šæœ‰é—®é¢˜ã€‚æœ€åæƒ³äº†ä¸ªæ–¹æ³•ï¼Œæ¯æ¬¡ç‚¹å‡»tabæ‰‹åŠ¨è§¦å‘windowçš„resizeäº‹ä»¶è¿›è¡Œé‡ç»˜ï¼Œä¸‹é¢æ˜¯æ‰‹åŠ¨è§¦å‘window resizeäº‹ä»¶çš„æ–¹æ³•</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">tabClick</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'tab click'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
  <span class="token comment">// è§¦å‘windowçš„resizeäº‹ä»¶</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> resizeEvent <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createEvent</span><span class="token punctuation">(</span><span class="token string">'Event'</span><span class="token punctuation">)</span>
    resizeEvent<span class="token punctuation">.</span><span class="token function">initEvent</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    window<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>resizeEvent<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸ºä»€ä¹ˆä¸åœ¨tabåˆ‡æ¢åçš„activatedé‡Œé‡ç»˜å›¾è¡¨å‘¢ï¼Ÿç”±äºæœ‰åå‡ ä¸ªå›¾è¡¨ï¼Œè¿™å°±éœ€è¦å†™åå‡ ä¸ªæ‰‹åŠ¨é‡ç»˜çš„å‡½æ•°ï¼Œåœ¨tabclickçš„äº‹ä»¶é‡Œå†™æ˜¯æ”¹åŠ¨æœ€å°çš„</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">10/29/2020, 10:59:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/daily/2020-07.html" class="prev">
        2020å¹´07æœˆæŠ€æœ¯æ—¥å¸¸
      </a></span> <span class="next"><a href="/daily/2020-05.html">
        2020å¹´05æœˆæŠ€æœ¯æ—¥å¸¸
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.9db0a638.js" defer></script><script src="/assets/js/2.4b3539f1.js" defer></script><script src="/assets/js/39.305ba346.js" defer></script><script src="/assets/js/3.e6a4dd76.js" defer></script>
  </body>
</html>
