<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>数据库安全与保护 | 左小白的前端笔记</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="左小白的前端笔记，归纳整理自己在前端工作、学习中的一些心得笔记，有利于前端知识系统化。包括 Vue.js、前端工程化（TypeScript、Node.js、webpack）、Docker、JS/ES6、CSS/CSS3、HTML/HTML5、数据可视化、计算机基础、英语等笔记。">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.594b47db.css" as="style"><link rel="preload" href="/assets/js/app.46527dc9.js" as="script"><link rel="preload" href="/assets/js/2.4b3539f1.js" as="script"><link rel="preload" href="/assets/js/15.6d52c5f9.js" as="script"><link rel="preload" href="/assets/js/3.e6a4dd76.js" as="script"><link rel="prefetch" href="/assets/js/10.35d8cd15.js"><link rel="prefetch" href="/assets/js/100.e83ab653.js"><link rel="prefetch" href="/assets/js/101.95d44dea.js"><link rel="prefetch" href="/assets/js/102.2f2f2a57.js"><link rel="prefetch" href="/assets/js/103.d0302a16.js"><link rel="prefetch" href="/assets/js/104.8ed98df3.js"><link rel="prefetch" href="/assets/js/105.f630f4d0.js"><link rel="prefetch" href="/assets/js/106.ccff4e18.js"><link rel="prefetch" href="/assets/js/107.98a6402f.js"><link rel="prefetch" href="/assets/js/108.d9a31571.js"><link rel="prefetch" href="/assets/js/109.cd3ec475.js"><link rel="prefetch" href="/assets/js/11.26cf8fbc.js"><link rel="prefetch" href="/assets/js/110.bc3c279a.js"><link rel="prefetch" href="/assets/js/111.1893973e.js"><link rel="prefetch" href="/assets/js/112.922df617.js"><link rel="prefetch" href="/assets/js/113.ef68bfb9.js"><link rel="prefetch" href="/assets/js/114.a9c60c48.js"><link rel="prefetch" href="/assets/js/115.d80bc2ad.js"><link rel="prefetch" href="/assets/js/116.5b821540.js"><link rel="prefetch" href="/assets/js/117.6be7f264.js"><link rel="prefetch" href="/assets/js/118.0a44346e.js"><link rel="prefetch" href="/assets/js/119.6917fa5a.js"><link rel="prefetch" href="/assets/js/12.f288e29d.js"><link rel="prefetch" href="/assets/js/120.bc52589f.js"><link rel="prefetch" href="/assets/js/121.e9908901.js"><link rel="prefetch" href="/assets/js/122.28b8dab2.js"><link rel="prefetch" href="/assets/js/123.02f86128.js"><link rel="prefetch" href="/assets/js/124.ede64f08.js"><link rel="prefetch" href="/assets/js/125.92bfe4ac.js"><link rel="prefetch" href="/assets/js/126.5bde8c26.js"><link rel="prefetch" href="/assets/js/127.61e73300.js"><link rel="prefetch" href="/assets/js/128.8c08ecf5.js"><link rel="prefetch" href="/assets/js/129.7f7fbd5f.js"><link rel="prefetch" href="/assets/js/13.a8b44eb9.js"><link rel="prefetch" href="/assets/js/130.5e40bde2.js"><link rel="prefetch" href="/assets/js/131.5a322aeb.js"><link rel="prefetch" href="/assets/js/132.a6fb1b05.js"><link rel="prefetch" href="/assets/js/133.e53ea4a2.js"><link rel="prefetch" href="/assets/js/134.20b7cd06.js"><link rel="prefetch" href="/assets/js/135.cf018cc3.js"><link rel="prefetch" href="/assets/js/136.f895ab3f.js"><link rel="prefetch" href="/assets/js/137.e8eff4ca.js"><link rel="prefetch" href="/assets/js/138.04825041.js"><link rel="prefetch" href="/assets/js/139.068501ab.js"><link rel="prefetch" href="/assets/js/14.63576ad2.js"><link rel="prefetch" href="/assets/js/140.68f5fa88.js"><link rel="prefetch" href="/assets/js/141.516a2007.js"><link rel="prefetch" href="/assets/js/142.c61087d7.js"><link rel="prefetch" href="/assets/js/143.145902b7.js"><link rel="prefetch" href="/assets/js/144.660ab86e.js"><link rel="prefetch" href="/assets/js/145.13a7d58a.js"><link rel="prefetch" href="/assets/js/146.c9f2d3d7.js"><link rel="prefetch" href="/assets/js/147.b6fefe21.js"><link rel="prefetch" href="/assets/js/148.ef130e5d.js"><link rel="prefetch" href="/assets/js/149.3c7b1581.js"><link rel="prefetch" href="/assets/js/150.573f9e0a.js"><link rel="prefetch" href="/assets/js/151.f351aca7.js"><link rel="prefetch" href="/assets/js/152.4677e214.js"><link rel="prefetch" href="/assets/js/153.8ae4408a.js"><link rel="prefetch" href="/assets/js/154.af82a6fb.js"><link rel="prefetch" href="/assets/js/16.6a143e09.js"><link rel="prefetch" href="/assets/js/17.92df7b99.js"><link rel="prefetch" href="/assets/js/18.50bc4846.js"><link rel="prefetch" href="/assets/js/19.310fceff.js"><link rel="prefetch" href="/assets/js/20.e5894862.js"><link rel="prefetch" href="/assets/js/21.8dd45d89.js"><link rel="prefetch" href="/assets/js/22.f96f7f7f.js"><link rel="prefetch" href="/assets/js/23.9670a582.js"><link rel="prefetch" href="/assets/js/24.9b6f6c0e.js"><link rel="prefetch" href="/assets/js/25.f7468bea.js"><link rel="prefetch" href="/assets/js/26.2fa477e0.js"><link rel="prefetch" href="/assets/js/27.4dc6c393.js"><link rel="prefetch" href="/assets/js/28.4a449035.js"><link rel="prefetch" href="/assets/js/29.0039a6c5.js"><link rel="prefetch" href="/assets/js/30.8385df39.js"><link rel="prefetch" href="/assets/js/31.6ccde381.js"><link rel="prefetch" href="/assets/js/32.e0ed3466.js"><link rel="prefetch" href="/assets/js/33.9f453fac.js"><link rel="prefetch" href="/assets/js/34.8a330d88.js"><link rel="prefetch" href="/assets/js/35.435e5855.js"><link rel="prefetch" href="/assets/js/36.14151663.js"><link rel="prefetch" href="/assets/js/37.82e1f9ac.js"><link rel="prefetch" href="/assets/js/38.364b23d5.js"><link rel="prefetch" href="/assets/js/39.6a1a3c7c.js"><link rel="prefetch" href="/assets/js/4.d41439b8.js"><link rel="prefetch" href="/assets/js/40.f78c3047.js"><link rel="prefetch" href="/assets/js/41.1a99a0b3.js"><link rel="prefetch" href="/assets/js/42.3ed9f527.js"><link rel="prefetch" href="/assets/js/43.d4e22844.js"><link rel="prefetch" href="/assets/js/44.7abec7b3.js"><link rel="prefetch" href="/assets/js/45.8db46c8a.js"><link rel="prefetch" href="/assets/js/46.8a7c7a2b.js"><link rel="prefetch" href="/assets/js/47.ef2ed3a2.js"><link rel="prefetch" href="/assets/js/48.0012f1c2.js"><link rel="prefetch" href="/assets/js/49.0f70b6c6.js"><link rel="prefetch" href="/assets/js/5.5b94bff7.js"><link rel="prefetch" href="/assets/js/50.9181b3d3.js"><link rel="prefetch" href="/assets/js/51.8288a90c.js"><link rel="prefetch" href="/assets/js/52.e9a6be2c.js"><link rel="prefetch" href="/assets/js/53.45e39d2d.js"><link rel="prefetch" href="/assets/js/54.1a2522ad.js"><link rel="prefetch" href="/assets/js/55.693fd64f.js"><link rel="prefetch" href="/assets/js/56.4906c543.js"><link rel="prefetch" href="/assets/js/57.fb863d5e.js"><link rel="prefetch" href="/assets/js/58.03e95bc5.js"><link rel="prefetch" href="/assets/js/59.a1dfee48.js"><link rel="prefetch" href="/assets/js/6.481b22df.js"><link rel="prefetch" href="/assets/js/60.4e1b36a2.js"><link rel="prefetch" href="/assets/js/61.d120ffeb.js"><link rel="prefetch" href="/assets/js/62.4be78565.js"><link rel="prefetch" href="/assets/js/63.952814e6.js"><link rel="prefetch" href="/assets/js/64.597a069e.js"><link rel="prefetch" href="/assets/js/65.3c7fd61d.js"><link rel="prefetch" href="/assets/js/66.cefe07e3.js"><link rel="prefetch" href="/assets/js/67.706da51f.js"><link rel="prefetch" href="/assets/js/68.59d375fa.js"><link rel="prefetch" href="/assets/js/69.e5a8f871.js"><link rel="prefetch" href="/assets/js/7.cb937ed7.js"><link rel="prefetch" href="/assets/js/70.0054d020.js"><link rel="prefetch" href="/assets/js/71.08d280b0.js"><link rel="prefetch" href="/assets/js/72.2a4a1d18.js"><link rel="prefetch" href="/assets/js/73.9f611ee9.js"><link rel="prefetch" href="/assets/js/74.30f800b1.js"><link rel="prefetch" href="/assets/js/75.4d02f412.js"><link rel="prefetch" href="/assets/js/76.f9f0945f.js"><link rel="prefetch" href="/assets/js/77.8da40f73.js"><link rel="prefetch" href="/assets/js/78.595e6fa6.js"><link rel="prefetch" href="/assets/js/79.94da2805.js"><link rel="prefetch" href="/assets/js/8.9b412011.js"><link rel="prefetch" href="/assets/js/80.b5af450e.js"><link rel="prefetch" href="/assets/js/81.27dd00be.js"><link rel="prefetch" href="/assets/js/82.9b5c191c.js"><link rel="prefetch" href="/assets/js/83.75e64090.js"><link rel="prefetch" href="/assets/js/84.264654f5.js"><link rel="prefetch" href="/assets/js/85.9c6fcee8.js"><link rel="prefetch" href="/assets/js/86.aae01ace.js"><link rel="prefetch" href="/assets/js/87.8d07435b.js"><link rel="prefetch" href="/assets/js/88.2033edab.js"><link rel="prefetch" href="/assets/js/89.d270861d.js"><link rel="prefetch" href="/assets/js/9.6344b9c3.js"><link rel="prefetch" href="/assets/js/90.484c940e.js"><link rel="prefetch" href="/assets/js/91.c6bd7d17.js"><link rel="prefetch" href="/assets/js/92.1385ce40.js"><link rel="prefetch" href="/assets/js/93.47d40d05.js"><link rel="prefetch" href="/assets/js/94.01709d43.js"><link rel="prefetch" href="/assets/js/95.f3613e75.js"><link rel="prefetch" href="/assets/js/96.1e28b733.js"><link rel="prefetch" href="/assets/js/97.68393b7c.js"><link rel="prefetch" href="/assets/js/98.2b2ef528.js"><link rel="prefetch" href="/assets/js/99.072e3728.js">
    <link rel="stylesheet" href="/assets/css/0.styles.594b47db.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">左小白的前端笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南" class="dropdown-title"><span class="title">指南</span> <span class="arrow down"></span></button> <button type="button" aria-label="指南" class="mobile-dropdown-title"><span class="title">指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  首页
</a></li><li class="dropdown-item"><!----> <a href="/nav.html" class="nav-link">
  前端网址导航
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><span class="title">前端进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端进阶" class="mobile-dropdown-title"><span class="title">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daily/" class="nav-link">
  技术日常记录
</a></li><li class="dropdown-item"><!----> <a href="/server/docker.html" class="nav-link">
  Docker 基础
</a></li><li class="dropdown-item"><h4>
          Vue.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/base/1.html" class="nav-link">
  Vue.js 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vue-router.html" class="nav-link">
  Vue Router 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vuex.html" class="nav-link">
  Vuex 笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          前端工程化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ts/base-1.html" class="nav-link">
  TypeScript 入门教程笔记
</a></li><li class="dropdown-subitem"><a href="/node/base/1.html" class="nav-link">
  Node.js 笔记
</a></li><li class="dropdown-subitem"><a href="/webpack/base.html" class="nav-link">
  webpack 基础
</a></li></ul></li><li class="dropdown-item"><h4>
          数据可视化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/visual/echarts.html" class="nav-link">
  Echarts 笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS/ES6
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/js/es6/es6-1.html" class="nav-link">
  ES6标准入门(第三版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/ad3/js-ad3-1.html" class="nav-link">
  JavaScript高级程序设计(第四版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/js-dom-art.html" class="nav-link">
  JavaScript DOM编程艺术(第二版)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS/CSS3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/css/less.html" class="nav-link">
  CSS 预处理器 Less.js
</a></li><li class="dropdown-subitem"><a href="/css/flex-grid.html" class="nav-link">
  Flex与Grid布局
</a></li><li class="dropdown-subitem"><a href="/css/html5-css-1.html" class="nav-link">
  HTML5权威指南(CSS部分)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          HTML/HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html5/html/1.html" class="nav-link">
  HTML5权威指南(HTML部分)笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/base/git.html" class="nav-link">
  Git 笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/markdown.html" class="nav-link">
  Markdown 基础语法
</a></li><li class="dropdown-item"><!----> <a href="/base/dbtheory/1.html" class="nav-link">
  数据库系统原理笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开源项目" class="dropdown-title"><span class="title">开源项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="开源项目" class="mobile-dropdown-title"><span class="title">开源项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://vuechart.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @guoqzuo/vue-chart
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://zuoblog.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  zuo-blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="http://www.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/zuoxiaobai" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南" class="dropdown-title"><span class="title">指南</span> <span class="arrow down"></span></button> <button type="button" aria-label="指南" class="mobile-dropdown-title"><span class="title">指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  首页
</a></li><li class="dropdown-item"><!----> <a href="/nav.html" class="nav-link">
  前端网址导航
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><span class="title">前端进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端进阶" class="mobile-dropdown-title"><span class="title">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daily/" class="nav-link">
  技术日常记录
</a></li><li class="dropdown-item"><!----> <a href="/server/docker.html" class="nav-link">
  Docker 基础
</a></li><li class="dropdown-item"><h4>
          Vue.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/base/1.html" class="nav-link">
  Vue.js 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vue-router.html" class="nav-link">
  Vue Router 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vuex.html" class="nav-link">
  Vuex 笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          前端工程化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ts/base-1.html" class="nav-link">
  TypeScript 入门教程笔记
</a></li><li class="dropdown-subitem"><a href="/node/base/1.html" class="nav-link">
  Node.js 笔记
</a></li><li class="dropdown-subitem"><a href="/webpack/base.html" class="nav-link">
  webpack 基础
</a></li></ul></li><li class="dropdown-item"><h4>
          数据可视化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/visual/echarts.html" class="nav-link">
  Echarts 笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS/ES6
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/js/es6/es6-1.html" class="nav-link">
  ES6标准入门(第三版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/ad3/js-ad3-1.html" class="nav-link">
  JavaScript高级程序设计(第四版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/js-dom-art.html" class="nav-link">
  JavaScript DOM编程艺术(第二版)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS/CSS3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/css/less.html" class="nav-link">
  CSS 预处理器 Less.js
</a></li><li class="dropdown-subitem"><a href="/css/flex-grid.html" class="nav-link">
  Flex与Grid布局
</a></li><li class="dropdown-subitem"><a href="/css/html5-css-1.html" class="nav-link">
  HTML5权威指南(CSS部分)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          HTML/HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html5/html/1.html" class="nav-link">
  HTML5权威指南(HTML部分)笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/base/git.html" class="nav-link">
  Git 笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/markdown.html" class="nav-link">
  Markdown 基础语法
</a></li><li class="dropdown-item"><!----> <a href="/base/dbtheory/1.html" class="nav-link">
  数据库系统原理笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开源项目" class="dropdown-title"><span class="title">开源项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="开源项目" class="mobile-dropdown-title"><span class="title">开源项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://vuechart.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @guoqzuo/vue-chart
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://zuoblog.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  zuo-blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="http://www.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/zuoxiaobai" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>数据库系统原理笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/base/dbtheory/1.html" class="sidebar-link">前言</a></li><li><a href="/base/dbtheory/2.html" class="sidebar-link">数据库系统概述</a></li><li><a href="/base/dbtheory/3.html" class="sidebar-link">关系数据库</a></li><li><a href="/base/dbtheory/4.html" class="sidebar-link">数据库设计</a></li><li><a href="/base/dbtheory/5.html" class="sidebar-link">SQL与关系数据库基本操作</a></li><li><a href="/base/dbtheory/6.html" class="sidebar-link">数据库编程</a></li><li><a href="/base/dbtheory/7.html" aria-current="page" class="active sidebar-link">数据库安全与保护</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#数据库完整性" class="sidebar-link">数据库完整性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#什么是数据库完整性-领会" class="sidebar-link">什么是数据库完整性(领会)</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#完整性约束条件的作用对象-领会" class="sidebar-link">完整性约束条件的作用对象(领会)</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#定义与实现完整性约束-综合应用" class="sidebar-link">定义与实现完整性约束(综合应用)</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#命名完整性约束-简单应用" class="sidebar-link">命名完整性约束(简单应用)</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#更新完整性约束-简单应用" class="sidebar-link">更新完整性约束(简单应用)</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#练习题" class="sidebar-link">练习题</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#触发器" class="sidebar-link">触发器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#创建触发器-综合应用" class="sidebar-link">创建触发器(综合应用)</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#删除触发器-简单应用" class="sidebar-link">删除触发器(简单应用)</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#使用触发器-综合应用" class="sidebar-link">使用触发器(综合应用)</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#练习题-2" class="sidebar-link">练习题</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#安全性与访问控制" class="sidebar-link">安全性与访问控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#用户账号管理-简单应用" class="sidebar-link">用户账号管理(简单应用)</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#账号权限管理-简单应用" class="sidebar-link">账号权限管理(简单应用)</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#事务与并发控制-领会" class="sidebar-link">事务与并发控制(领会)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#事务的概念" class="sidebar-link">事务的概念</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#事务的特征" class="sidebar-link">事务的特征</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#并发操作问题" class="sidebar-link">并发操作问题</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#封锁" class="sidebar-link">封锁</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#练习题-5" class="sidebar-link">练习题</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#备份与恢复" class="sidebar-link">备份与恢复</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#数据库备份与恢复的概念-识记" class="sidebar-link">数据库备份与恢复的概念(识记)</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#备份数据的方法-简单应用" class="sidebar-link">备份数据的方法(简单应用)</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#恢复数据的方法-简单应用" class="sidebar-link">恢复数据的方法(简单应用)</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#练习题-6" class="sidebar-link">练习题</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/7.html#使用mysqldump备份恢复数据" class="sidebar-link">使用mysqldump备份恢复数据</a></li></ul></li></ul></li><li><a href="/base/dbtheory/8.html" class="sidebar-link">数据库应设计与开发实例</a></li><li><a href="/base/dbtheory/9.html" class="sidebar-link">数据管理技术的发展</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="数据库安全与保护"><a href="#数据库安全与保护" class="header-anchor">#</a> 数据库安全与保护</h1> <h2 id="数据库完整性"><a href="#数据库完整性" class="header-anchor">#</a> 数据库完整性</h2> <h3 id="什么是数据库完整性-领会"><a href="#什么是数据库完整性-领会" class="header-anchor">#</a> 什么是数据库完整性(领会)</h3> <p>数据库完整性是指数据库中数据的<strong>正确性</strong>、<strong>相容性</strong>、<strong>一致性</strong>。</p> <p>比如：性别一般只有男和女，身份证号是唯一的，年龄在0-150之间</p> <h3 id="完整性约束条件的作用对象-领会"><a href="#完整性约束条件的作用对象-领会" class="header-anchor">#</a> 完整性约束条件的作用对象(领会)</h3> <ul><li>列级约束：包括对列的类型、取值范围、精度等约束</li> <li>元组约束：指元组中各个字段之间的相互约束</li> <li>表级约束：指若干元组、关系之间的联系的约束</li></ul> <h3 id="定义与实现完整性约束-综合应用"><a href="#定义与实现完整性约束-综合应用" class="header-anchor">#</a> 定义与实现完整性约束(综合应用)</h3> <p>完整性约束的三个部分：</p> <h4 id="实体完整性约束"><a href="#实体完整性约束" class="header-anchor">#</a> 实体完整性约束</h4> <p>实体完整性主要是通过<strong>主键约束</strong>和<strong>候选键约束</strong>实现的。必须有一个主键，主键不能为空。候选码是可以标识一行数据的，比如身份证号、学号，候选码中指定一个就是主键。</p> <p>主键列必须遵守的规则：</p> <ol><li>每一个表只能定义一个主键</li> <li>主键的值必须能够唯一标识表中的每一行数据，且不能为NULL</li> <li>复合主键不嫩包含不必要的多余列</li></ol> <table><thead><tr><th>约束方式</th> <th>语句</th> <th>关键字</th></tr></thead> <tbody><tr><td>主键约束</td> <td>CREATE TABLE或ALTER TABLE</td> <td>PRIMARY KEY</td></tr> <tr><td>候选键约束</td> <td>CREATE TABLE或ALTER TABLE</td> <td>UNIQUE</td></tr></tbody></table> <h4 id="参照完整性约束"><a href="#参照完整性约束" class="header-anchor">#</a> 参照完整性约束</h4> <p>外键的值如果不为NULL，那其值必须是被参照关系里的主键</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
REFERENCES tbl_name<span class="token punctuation">(</span>index_col_name,<span class="token punctuation">..</span>.<span class="token punctuation">)</span>
<span class="token punctuation">[</span>ON DELETE reference_option<span class="token punctuation">]</span>
<span class="token punctuation">[</span>ON UPDATE reference_option<span class="token punctuation">]</span>
<span class="token comment"># references 参照</span>
<span class="token comment"># tbl_name 指定外键所参照的表名</span>
<span class="token comment"># index_col_name col_name[(length)][ASC|DESC]</span>
<span class="token comment"># ON xxx 指定参照动作相关的SQL语句</span>
<span class="token comment"># reference_option 指定参照完整性约束的实现策略, 包括 RESTRICT | CASCADE | SET NULL | NO ACTION</span>
<span class="token comment"># restrict 限制策略，cascade 级联策略，set null 置空策略，no action 不采取实施策略</span>
</code></pre></div><p>示例：在数据库mysql_test中创建一个商品订单表orders，该表包含订单号order_id，商品名order_product，商品类型order_product_type，客户id号cust_id，订购时间order_date，价格order_price，数量order_amount。要求商品订单表orders中的所有订购客户信息均已在customers中记录在册。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>CREATE TABLE orders <span class="token punctuation">(</span>
  order_id INT NOT NULL AUTO_INCREMENT COMMENT <span class="token string">'订单号'</span>,
  order_product VARCHAR<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> NOT NULL COMMENT <span class="token string">'商品名'</span>,
  order_product_type VARCHAR<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> NOT NULL COMMENT <span class="token string">'商品类型'</span>,
  cust_id INT NOT NULL COMMENT <span class="token string">'客户ID号'</span>,
  order_date DATETIME NOT NULL COMMENT <span class="token string">'订购时间'</span>,
  order_price DOUBLE NOT NULL COMMENT <span class="token string">'订购价格'</span>,
  order_amount INT NOT NULL COMMENT <span class="token string">'订购数量'</span>,
  PRIMARY KEY<span class="token punctuation">(</span>order_id<span class="token punctuation">)</span>,
  FOREIGN KEY<span class="token punctuation">(</span>cust_id<span class="token punctuation">)</span> REFERENCES customers<span class="token punctuation">(</span>cust_id<span class="token punctuation">)</span> ON DELETE RESTRICT ON UPDATE RESTRICT
<span class="token punctuation">)</span> COMMENT <span class="token string">'商品订单表'</span><span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; DESC ORDERS;</span>
+--------------------+--------------+------+-----+---------+----------------+
<span class="token operator">|</span> Field              <span class="token operator">|</span> Type         <span class="token operator">|</span> Null <span class="token operator">|</span> Key <span class="token operator">|</span> Default <span class="token operator">|</span> Extra          <span class="token operator">|</span>
+--------------------+--------------+------+-----+---------+----------------+
<span class="token operator">|</span> order_id           <span class="token operator">|</span> int<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>      <span class="token operator">|</span> NO   <span class="token operator">|</span> PRI <span class="token operator">|</span> NULL    <span class="token operator">|</span> auto_increment <span class="token operator">|</span>
<span class="token operator">|</span> order_product      <span class="token operator">|</span> varchar<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">|</span> NO   <span class="token operator">|</span>     <span class="token operator">|</span> NULL    <span class="token operator">|</span>                <span class="token operator">|</span>
<span class="token operator">|</span> order_product_type <span class="token operator">|</span> varchar<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">|</span> NO   <span class="token operator">|</span>     <span class="token operator">|</span> NULL    <span class="token operator">|</span>                <span class="token operator">|</span>
<span class="token operator">|</span> cust_id            <span class="token operator">|</span> int<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>      <span class="token operator">|</span> NO   <span class="token operator">|</span> MUL <span class="token operator">|</span> NULL    <span class="token operator">|</span>                <span class="token operator">|</span>
<span class="token operator">|</span> order_date         <span class="token operator">|</span> datetime     <span class="token operator">|</span> NO   <span class="token operator">|</span>     <span class="token operator">|</span> NULL    <span class="token operator">|</span>                <span class="token operator">|</span>
<span class="token operator">|</span> order_price        <span class="token operator">|</span> double       <span class="token operator">|</span> NO   <span class="token operator">|</span>     <span class="token operator">|</span> NULL    <span class="token operator">|</span>                <span class="token operator">|</span>
<span class="token operator">|</span> order_amount       <span class="token operator">|</span> int<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>      <span class="token operator">|</span> NO   <span class="token operator">|</span>     <span class="token operator">|</span> NULL    <span class="token operator">|</span>                <span class="token operator">|</span>
+--------------------+--------------+------+-----+---------+----------------+
<span class="token number">7</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
</code></pre></div><h4 id="用户定义完整性约束"><a href="#用户定义完整性约束" class="header-anchor">#</a> 用户定义完整性约束</h4> <p>用户自定义完整性约束包含：</p> <ul><li>非空约束 NOT NULL</li> <li>CHECK 约束 CHECK(expr)</li></ul> <h3 id="命名完整性约束-简单应用"><a href="#命名完整性约束-简单应用" class="header-anchor">#</a> 命名完整性约束(简单应用)</h3> <p>命名完整性约束只能给基于表的完整性约束指定名字，无法给基于列的完整性约束指定名字</p> <div class="language-bash extra-class"><pre class="language-bash"><code>CONSTRAINT<span class="token punctuation">[</span>symbol<span class="token punctuation">]</span> 
<span class="token comment"># constraint  [kənˈstreɪnt] 约束</span>
<span class="token comment"># symbol 指定的约束名字</span>
</code></pre></div><h3 id="更新完整性约束-简单应用"><a href="#更新完整性约束-简单应用" class="header-anchor">#</a> 更新完整性约束(简单应用)</h3> <p>使用ALTER TABLE更新与列或表有关的各种约束</p> <ol><li>完整性约束不能直接被修改。（需要先删除，再增加）</li> <li>使用ALTER TABLE，可以独立地删除完整性约束，而不会删除表本身。（DROP TABLE语句删除一个表，则表中所有的完整性约束都自动删除）</li></ol> <h3 id="练习题"><a href="#练习题" class="header-anchor">#</a> 练习题</h3> <p>1.在mysql中，各种完整性约束可通过CREAT TABLE 或 （  ）TABLE 语句来定义。填空题，答案：ALTER</p> <p>2.完整性约束条件的作用对象可以是列、元组和（  ）。填空题，答案：表</p> <p>3.候选键可以在CREATE TABLE 或 ALTER TABLE语句使用关键字 （  ）来定义。填空题，答案：UNIQUE</p> <p>4.命名完整性约束的方法是在各种完整性约束的定义说明之前加上关键字（  ）和该约束的名字。填空题，答案：CONSTRAINT</p> <h2 id="触发器"><a href="#触发器" class="header-anchor">#</a> 触发器</h2> <p>什么是触发器？</p> <p>触发器是用户定义在关系表上的一类由事件驱动的数据对象，也是一种保证数据库完整性的方法。</p> <h3 id="创建触发器-综合应用"><a href="#创建触发器-综合应用" class="header-anchor">#</a> 创建触发器(综合应用)</h3> <p>使用CREATE TRIGGER创建触发器</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
CREATE TRIGGER trigger_name trigger_time trigger_event ON tbl_name FOR EACH ROW trigger_body
<span class="token comment"># trigger  [ˈtrɪɡə(r)] v 触发，n 扳机</span>
<span class="token comment"># trigger_name 指定触发器的名字</span>
<span class="token comment"># trigger_time 指定触发器被触发的时刻, 比如 AFTER、BEFORE</span>
<span class="token comment"># trigger_event 指定触发的事件，比如 INSERT、DELETE、UPDATE</span>
<span class="token comment"># tbl_name 指定与触发器相关联的表名，必须是永久性表，不能是临时表或视图</span>
<span class="token comment"># FOR EACH ROW 指定对于受触发事件影响的每一行都要激活触发器的动作</span>
<span class="token comment"># trigger_body 指定触发的动作主体</span>
</code></pre></div><p>示例：在数据库 mysql_test 的表 customers 中创建一个触发器 customers_insert_trigger，用于每次向表customers插入一行数据时，将变量str的值设置为 one customer added!</p> <div class="language-bash extra-class"><pre class="language-bash"><code>CREATE TRIGGER mysql_test.customers_insert_trigger AFTER INSERT ON mysql_test.customers FOR EACH ROW SET @str<span class="token operator">=</span><span class="token string">'one customer added!'</span><span class="token punctuation">;</span>

INSERT mysql_test.customers VALUES<span class="token punctuation">(</span>NULL, <span class="token string">'万华'</span>,<span class="token string">'F'</span>,<span class="token string">'长沙市'</span>,<span class="token string">'芙蓉区'</span>, DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; SELECT * FROM customers ORDER BY cust_id DESC LIMIT 1;</span>
+---------+-----------+----------+--------------+--------------+---------------------+
<span class="token operator">|</span> cust_id <span class="token operator">|</span> cust_name <span class="token operator">|</span> cust_sex <span class="token operator">|</span> cust_address <span class="token operator">|</span> cust_contact <span class="token operator">|</span> create_time         <span class="token operator">|</span>
+---------+-----------+----------+--------------+--------------+---------------------+
<span class="token operator">|</span>    <span class="token number">1000</span> <span class="token operator">|</span> 万华      <span class="token operator">|</span> F        <span class="token operator">|</span> 长沙市       <span class="token operator">|</span> 芙蓉区       <span class="token operator">|</span> <span class="token number">2020</span>-02-16 <span class="token number">23</span>:36:32 <span class="token operator">|</span>
+---------+-----------+----------+--------------+--------------+---------------------+
<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

<span class="token comment"># mysql&gt; select @str;</span>
+---------------------+
<span class="token operator">|</span> @str                <span class="token operator">|</span>
+---------------------+
<span class="token operator">|</span> one customer added<span class="token operator">!</span> <span class="token operator">|</span>
+---------------------+
<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> 

</code></pre></div><h3 id="删除触发器-简单应用"><a href="#删除触发器-简单应用" class="header-anchor">#</a> 删除触发器(简单应用)</h3> <p>使用DROP TRIGGER 删除触发器</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
DROP TRIGGER <span class="token punctuation">[</span>IF EXISTS<span class="token punctuation">]</span> <span class="token punctuation">[</span>schema_name.<span class="token punctuation">]</span>trigger_name
DROP TRIGGER IF EXISTS mysql_test.customers_insert_trigger<span class="token punctuation">;</span>
</code></pre></div><h3 id="使用触发器-综合应用"><a href="#使用触发器-综合应用" class="header-anchor">#</a> 使用触发器(综合应用)</h3> <p>触发器的分类：</p> <ul><li>INSERT 触发器</li> <li>DELETE 触发器</li> <li>UPDATE 触发器</li></ul> <h4 id="insert触发器"><a href="#insert触发器" class="header-anchor">#</a> INSERT触发器</h4> <p>在INSERT触发器内，可以引用一个名为<strong>NEW</strong>(不区分大小写)的虚拟表，来访问被插入的行。</p> <p>在BEFORE INSERT触发器中，NEW的值<strong>可以被更新</strong>。</p> <p>示例：在数据mysql_test的表customers中重新创建触发器customers_insert_trigger，用于每次向表customers插入一行数据时，将用户变量str的值设置为新插入客户的id号。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>CREATE TRIGGER mysql_test.customers_insert_trigger AFTER INSERT ON mysql_test.customers FOR EACH ROW SET @str<span class="token operator">=</span>NEW.cust_id<span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; INSERT mysql_test.customers VALUES(NULL, '万华2','F','长沙市','芙蓉区', DEFAULT);</span>
Query OK, <span class="token number">1</span> row affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

<span class="token comment"># mysql&gt; select @str;</span>
+------+
<span class="token operator">|</span> @str <span class="token operator">|</span>
+------+
<span class="token operator">|</span> <span class="token number">1001</span> <span class="token operator">|</span>
+------+
<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre></div><h4 id="delete触发器"><a href="#delete触发器" class="header-anchor">#</a> DELETE触发器</h4> <p>在DELETE触发器代码内，可以引用一个名为 <strong>OLD</strong>（不区分大小写）的虚拟表，来访问被删除的行。OLD中的值全部是只读的，不能被更新。</p> <h4 id="update触发器"><a href="#update触发器" class="header-anchor">#</a> UPDATE触发器</h4> <p>在UPDATE触发器代码内，可以引用一个名为 <strong>OLD</strong> 的变量来访问UPDATE语句执行前的值，也可以引用一个名为 <strong>NEW</strong> 的变量来访问更新后的值</p> <p>示例：在数据库mysql_test的表customers中创建一个触发器customers_update_trigger，用于每次更新表customers，将该表中cust_address列的值设置为cust_contact列的值。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>CREATE TRIGGER mysql_test.customers_update_trigger BEFORE UPDATE ON mysql_test.customers FOR EACH ROW SET NEW.cust_address <span class="token operator">=</span> OLD.cust_contact<span class="token punctuation">;</span>

UPDATE mysql_test.customers <span class="token builtin class-name">set</span> <span class="token assign-left variable">cust_name</span><span class="token operator">=</span><span class="token string">'曾伟'</span>,cust_address<span class="token operator">=</span><span class="token string">'武汉市'</span> where cust_id <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; SELECT * FROM customers WHERE cust_id=1000;</span>
+---------+-----------+----------+--------------+--------------+---------------------+
<span class="token operator">|</span> cust_id <span class="token operator">|</span> cust_name <span class="token operator">|</span> cust_sex <span class="token operator">|</span> cust_address <span class="token operator">|</span> cust_contact <span class="token operator">|</span> create_time         <span class="token operator">|</span>
+---------+-----------+----------+--------------+--------------+---------------------+
<span class="token operator">|</span>    <span class="token number">1000</span> <span class="token operator">|</span> 曾伟      <span class="token operator">|</span> F        <span class="token operator">|</span> 芙蓉区       <span class="token operator">|</span> 芙蓉区       <span class="token operator">|</span> <span class="token number">2020</span>-02-16 <span class="token number">23</span>:36:32 <span class="token operator">|</span>
+---------+-----------+----------+--------------+--------------+---------------------+
<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre></div><h3 id="练习题-2"><a href="#练习题-2" class="header-anchor">#</a> 练习题</h3> <p>1.将触发器从数据库中删除使用的语句是（  ）。 单选题：B</p> <ul><li>A ALTER TRIGGER</li> <li>B DROP TRIGGER</li> <li>C DELTE TRIGGER</li> <li>D CREATE TRIGGER</li></ul> <p>2.写出创建触发器的语法格式。简答题</p> <div class="language-bash extra-class"><pre class="language-bash"><code>CREATE TRIGGER trigger_name trigger_time trigger_event ON tbl_name FOR EACH ROW tigger_body
</code></pre></div><p>3.在UPDATE触发器代码内，可以引用一个名为（  ）的虚拟表访问更新的值。单选题，答案：A</p> <ul><li>A NEW</li> <li>B OLD</li> <li>C BEFORE</li> <li>D ALTER</li></ul> <p>4.MySQL支持的触发器不包括（  ）。单选题 D</p> <ul><li>A INSERT 触发器</li> <li>B DELETE 触发器</li> <li>C UPDATE 触发器</li> <li>D CREATE 触发器</li></ul> <h2 id="安全性与访问控制"><a href="#安全性与访问控制" class="header-anchor">#</a> 安全性与访问控制</h2> <h3 id="用户账号管理-简单应用"><a href="#用户账号管理-简单应用" class="header-anchor">#</a> 用户账号管理(简单应用)</h3> <p>查看当前用户，一般存在系统默认的mysql数据库的user表里</p> <div class="language-bash extra-class"><pre class="language-bash"><code>SELECT user FROM mysql.user<span class="token punctuation">;</span>
<span class="token comment"># mysql&gt; SELECT user FROM mysql.user;</span>
+------------------+
<span class="token operator">|</span> user             <span class="token operator">|</span>
+------------------+
<span class="token operator">|</span> mysql.infoschema <span class="token operator">|</span>
<span class="token operator">|</span> mysql.session    <span class="token operator">|</span>
<span class="token operator">|</span> mysql.sys        <span class="token operator">|</span>
<span class="token operator">|</span> root             <span class="token operator">|</span>
+------------------+
<span class="token number">4</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.04</span> sec<span class="token punctuation">)</span>
</code></pre></div><p>root用户，是最高级权限</p> <h4 id="使用create-user创建账户"><a href="#使用create-user创建账户" class="header-anchor">#</a> 使用CREATE USER创建账户</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
CREATE <span class="token environment constant">USER</span> user<span class="token punctuation">[</span>IDENTIFIED BY <span class="token punctuation">[</span>PASSWORD<span class="token punctuation">]</span> <span class="token string">'password'</span><span class="token punctuation">]</span>
<span class="token comment"># user 指定创建用户账号，格式: 'user_name' @ 'host_name'</span>
<span class="token comment"># IDENTIFIED BY identified 可选项，指定用户账号对应的口令</span>
<span class="token comment"># PASSWORD, 可选项，指定散列口令，加密</span>
</code></pre></div><p>示例：在MySQL服务器中添加两个新的用户，其用户名分别为zhangsan和lisi，他们的主机名均为localhost，用户张三口令为123，用户lisi口令为对明文456使用PASSWORD()函数加密返回的散列值。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>CREATE <span class="token environment constant">USER</span> zhangsan@localhost IDENTIFIED BY <span class="token string">'123'</span><span class="token punctuation">;</span>
<span class="token comment"># mysql&gt; select user from mysql.user;</span>
+------------------+
<span class="token operator">|</span> user             <span class="token operator">|</span>
+------------------+
<span class="token operator">|</span> mysql.infoschema <span class="token operator">|</span>
<span class="token operator">|</span> mysql.session    <span class="token operator">|</span>
<span class="token operator">|</span> mysql.sys        <span class="token operator">|</span>
<span class="token operator">|</span> root             <span class="token operator">|</span>
<span class="token operator">|</span> zhangsan         <span class="token operator">|</span>
+------------------+
<span class="token number">5</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

<span class="token comment"># mysql -u zhangsan -p'123'</span>
<span class="token comment"># 可以直接登录成功</span>

<span class="token comment"># 关于加密PASSWORD的问题</span>
<span class="token comment"># password函数: this function is removed in MySQL8.0.11</span>
<span class="token comment"># 可以使用md5('AAA') 或 sha('AAA') 代替</span>
<span class="token comment"># CREATE USER zhangsan@localhost IDENTIFIED BY PASSWORD 'password函数加密后的字符串'; // 理论上 mysql 5.x的版本是支持的</span>
<span class="token comment"># mysql&gt; select password('123');</span>
ERROR <span class="token number">1064</span> <span class="token punctuation">(</span><span class="token number">42000</span><span class="token punctuation">)</span>: You have an error <span class="token keyword">in</span> your SQL syntax<span class="token punctuation">;</span> check the manual that corresponds to your MySQL server version <span class="token keyword">for</span> the right syntax to use near <span class="token string">'('</span><span class="token number">123</span><span class="token string">')'</span> at line <span class="token number">1</span>
<span class="token comment"># mysql&gt; select sha('123');</span>
+------------------------------------------+
<span class="token operator">|</span> sha<span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span>                               <span class="token operator">|</span>
+------------------------------------------+
<span class="token operator">|</span> 40bd001563085fc35165329ea1ff5c5ecbdbbeef <span class="token operator">|</span>
+------------------------------------------+
<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

<span class="token comment"># mysql&gt; select md5('123');</span>
+----------------------------------+
<span class="token operator">|</span> md5<span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span>                       <span class="token operator">|</span>
+----------------------------------+
<span class="token operator">|</span> 202cb962ac59075b964b07152d234b70 <span class="token operator">|</span>
+----------------------------------+
<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> 

<span class="token comment"># 非root用户时看不到mysql.user表的信息的</span>
<span class="token comment"># mysql&gt; select user from mysql.user;</span>
ERROR <span class="token number">1142</span> <span class="token punctuation">(</span><span class="token number">42000</span><span class="token punctuation">)</span>: SELECT <span class="token builtin class-name">command</span> denied to user <span class="token string">'zhangsan'</span>@<span class="token string">'localhost'</span> <span class="token keyword">for</span> table <span class="token string">'user'</span>
mysql<span class="token operator">&gt;</span>
<span class="token comment"># mysql&gt; show databases;  # 只能看到一个数据库</span>
+--------------------+
<span class="token operator">|</span> Database           <span class="token operator">|</span>
+--------------------+
<span class="token operator">|</span> information_schema <span class="token operator">|</span>
+--------------------+
<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre></div><h4 id="使用drop-user-删除用户账号"><a href="#使用drop-user-删除用户账号" class="header-anchor">#</a> 使用DROP USER 删除用户账号</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
DROP <span class="token environment constant">USER</span> user <span class="token punctuation">[</span>,user<span class="token punctuation">]</span><span class="token punctuation">..</span>.

<span class="token comment"># 示例</span>
DROP <span class="token environment constant">USER</span> zhangsan@localhost<span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; DROP USER zhangsan@localhost;</span>
Query OK, <span class="token number">0</span> rows affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
</code></pre></div><h4 id="使用rename-user修改用户账号"><a href="#使用rename-user修改用户账号" class="header-anchor">#</a> 使用RENAME USER修改用户账号</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
RENAME <span class="token environment constant">USER</span> old_user TO new_user <span class="token punctuation">[</span>,old_user TO new_user<span class="token punctuation">]</span><span class="token punctuation">..</span>.
</code></pre></div><p>例子：将shangsan的用户名改为wangwu</p> <div class="language-bash extra-class"><pre class="language-bash"><code>CREATE <span class="token environment constant">USER</span> zhangsan@localhost IDENTIFIED BY <span class="token string">'123'</span><span class="token punctuation">;</span>

RENAME <span class="token environment constant">USER</span> <span class="token string">'zhangsan'</span>@<span class="token string">'localhost'</span> TO <span class="token string">'wangwu'</span>@<span class="token string">'localhost'</span>

<span class="token comment"># mysql -uwangwu -p123 可登录成功</span>
</code></pre></div><h4 id="使用set-password修改用户密码"><a href="#使用set-password修改用户密码" class="header-anchor">#</a> 使用SET PASSWORD修改用户密码</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
SET PASSWORD <span class="token punctuation">[</span>FOR user<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> PASSWORD<span class="token punctuation">(</span><span class="token string">'new_password'</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token string">'encrypted password'</span> <span class="token punctuation">}</span>
<span class="token comment"># FOR user 可选项，指定欲修改口令的用户</span>
<span class="token comment"># PASSWORD('new_password') 使用函数password()设置新口令new_password</span>
<span class="token comment"># encrypted password 已加密的字符串</span>
</code></pre></div><p>例子：将wangwu的密码修改为 pass</p> <div class="language-bash extra-class"><pre class="language-bash"><code>SET PASSWORD FOR <span class="token string">'wangwu'</span>@<span class="token string">'localhost'</span> <span class="token operator">=</span> PASSWORD<span class="token punctuation">(</span><span class="token string">'pass'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># mysql8.x版本不支持password()函数，就不真实调试了</span>
</code></pre></div><h4 id="练习题-3"><a href="#练习题-3" class="header-anchor">#</a> 练习题</h4> <p>1.创建用户账号的语句是（  ）。单选题，答案：D</p> <ul><li>A INSERT USER</li> <li>B DROP USER</li> <li>C RENAME USER</li> <li>D CREATE USER</li></ul> <h3 id="账号权限管理-简单应用"><a href="#账号权限管理-简单应用" class="header-anchor">#</a> 账号权限管理(简单应用)</h3> <h4 id="使用grant为用户授权"><a href="#使用grant为用户授权" class="header-anchor">#</a> 使用GRANT为用户授权</h4> <p>grant [ɡrɑːnt] 授予，允许</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
GRANT priv_type <span class="token punctuation">[</span><span class="token punctuation">(</span>column_list<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>,priv_type <span class="token punctuation">[</span><span class="token punctuation">(</span>column_list<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">..</span>.
ON <span class="token punctuation">[</span>object_type<span class="token punctuation">]</span> priv_level TO user_specification <span class="token punctuation">[</span>,user_specification<span class="token punctuation">]</span> <span class="token punctuation">..</span><span class="token punctuation">..</span>
<span class="token punctuation">[</span>WITH GRANT OPTION<span class="token punctuation">]</span> 
<span class="token comment"># priv_type 用于指定权限名称 SELECT SELECT,UPDATE ALL  CREATE USER等</span>
<span class="token comment"># column_list 用于指定权限要授予给表中的哪些具体的列</span>
<span class="token comment"># object_type 用于指定权限授予的对象和级别 mysql_test.customers、mysql_test.* 或 *.*</span>
<span class="token comment"># priv_level 用于指定权限的级别 </span>
<span class="token comment"># TO 指定被授予权限的用户user 比如：'zhangsan'@'localhost'</span>
<span class="token comment"># user_specification =&gt; user [IDENTIFIED BY [PASSWORD]'password']</span>
</code></pre></div><p>示例：授予用户wangwu在数据库mysql_test表customers上拥有对列cust_id和列cust_name的SELECT权限.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>GRANT SELECT <span class="token punctuation">(</span>cust_id,cust_name<span class="token punctuation">)</span> ON mysql_test.customers TO <span class="token string">'wangwu'</span>@<span class="token string">'localhost'</span><span class="token punctuation">;</span>

<span class="token comment"># 在root下执行上面的命令成功后，exit退出，再使用wangwu的用户登录</span>
mysql -uwangwu -p123

<span class="token comment"># mysql&gt; show databases; </span>
+--------------------+
<span class="token operator">|</span> Database           <span class="token operator">|</span>
+--------------------+
<span class="token operator">|</span> information_schema <span class="token operator">|</span>
<span class="token operator">|</span> mysql_test         <span class="token operator">|</span> 
+--------------------+
<span class="token number">2</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre></div><p>可以看到设置权限后比之前多了一个mysql_test数据库，我们再来看看表，及表结构</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># mysql&gt; use mysql_test;</span>
Reading table information <span class="token keyword">for</span> completion of table and <span class="token function">column</span> names
You can turn off this feature to get a quicker startup with -A

Database changed

<span class="token comment"># mysql&gt; show tables;</span>
+----------------------+
<span class="token operator">|</span> Tables_in_mysql_test <span class="token operator">|</span>
+----------------------+
<span class="token operator">|</span> customers            <span class="token operator">|</span>
+----------------------+
<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

<span class="token comment"># mysql&gt; desc customers;</span>
+-----------+----------+------+-----+---------+----------------+
<span class="token operator">|</span> Field     <span class="token operator">|</span> Type     <span class="token operator">|</span> Null <span class="token operator">|</span> Key <span class="token operator">|</span> Default <span class="token operator">|</span> Extra          <span class="token operator">|</span>
+-----------+----------+------+-----+---------+----------------+
<span class="token operator">|</span> cust_id   <span class="token operator">|</span> int<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>  <span class="token operator">|</span> NO   <span class="token operator">|</span> PRI <span class="token operator">|</span> NULL    <span class="token operator">|</span> auto_increment <span class="token operator">|</span>
<span class="token operator">|</span> cust_name <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">|</span> NO   <span class="token operator">|</span>     <span class="token operator">|</span> NULL    <span class="token operator">|</span>                <span class="token operator">|</span>
+-----------+----------+------+-----+---------+----------------+
<span class="token number">2</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

<span class="token comment"># mysql&gt; select * from customers;</span>
ERROR <span class="token number">1142</span> <span class="token punctuation">(</span><span class="token number">42000</span><span class="token punctuation">)</span>: SELECT <span class="token builtin class-name">command</span> denied to user <span class="token string">'wangwu'</span>@<span class="token string">'localhost'</span> <span class="token keyword">for</span> table <span class="token string">'customers'</span>
mysql<span class="token operator">&gt;</span> SELECT * from customers<span class="token punctuation">;</span>
ERROR <span class="token number">1142</span> <span class="token punctuation">(</span><span class="token number">42000</span><span class="token punctuation">)</span>: SELECT <span class="token builtin class-name">command</span> denied to user <span class="token string">'wangwu'</span>@<span class="token string">'localhost'</span> <span class="token keyword">for</span> table <span class="token string">'customers'</span>

<span class="token comment"># mysql&gt; select cust_id,cust_name from customers;</span>
+---------+-----------+
<span class="token operator">|</span> cust_id <span class="token operator">|</span> cust_name <span class="token operator">|</span>
+---------+-----------+
<span class="token operator">|</span>     <span class="token number">901</span> <span class="token operator">|</span> 张三      <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">902</span> <span class="token operator">|</span> 李四      <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">904</span> <span class="token operator">|</span> 李四      <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">909</span> <span class="token operator">|</span> 周明      <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">999</span> <span class="token operator">|</span> 王五      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">1000</span> <span class="token operator">|</span> 曾伟      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">1001</span> <span class="token operator">|</span> 万华2     <span class="token operator">|</span>
+---------+-----------+
<span class="token number">7</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

</code></pre></div><h4 id="使用grant-with子句允许权限转移"><a href="#使用grant-with子句允许权限转移" class="header-anchor">#</a> 使用GRANT...WITH子句允许权限转移</h4> <p>示例：授予当前系统中一个不存在的用户zhou在数据库mysql_test的表customers上拥有SELECT和UPDATE的权限，并允许其可以将自身的这个权限授予给其他用户。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>GRANT SELECT,UPDATE ON mysql_test.customers TO <span class="token string">'zhou'</span>@<span class="token string">'localhost'</span> IDENTIFIED BY <span class="token string">'123'</span> WITH GRANT OPTION<span class="token punctuation">;</span>
<span class="token comment"># 不试用mysql8.0+，此版本将创建账号和授权分离了。我们分开来写：</span>
CREATE <span class="token environment constant">USER</span> <span class="token string">'zhou'</span>@<span class="token string">'localhost'</span> IDENTIFIED BY <span class="token string">'123'</span><span class="token punctuation">;</span>
GRANT SELECT,UPDATE ON mysql_test.customers TO <span class="token string">'zhou'</span>@<span class="token string">'localhost'</span> WITH GRANT OPTION<span class="token punctuation">;</span>
</code></pre></div><h4 id="all所有权限"><a href="#all所有权限" class="header-anchor">#</a> ALL所有权限</h4> <p>示例：授予系统中已存在的zhangsan可以在数据库mysql_test中执行所有数据库操作的权限</p> <div class="language-bash extra-class"><pre class="language-bash"><code>mysql<span class="token operator">&gt;</span> CREATE <span class="token environment constant">USER</span> zhangsan@localhost IDENTIFIED BY <span class="token string">'123'</span><span class="token punctuation">;</span>
Query OK, <span class="token number">0</span> rows affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

GRANT ALL ON mysql_test.* TO <span class="token string">'zhangsan'</span>@<span class="token string">'localhost'</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="授予create-user权限"><a href="#授予create-user权限" class="header-anchor">#</a> 授予CREATE USER权限</h4> <p>示例：授予系统中已存在的wangwu拥有创建用户的权限</p> <div class="language-bash extra-class"><pre class="language-bash"><code>GRANT CREATE <span class="token environment constant">USER</span> ON *.* TO <span class="token string">'wangwu'</span>@<span class="token string">'localhost'</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="使用revoke撤销用户权限"><a href="#使用revoke撤销用户权限" class="header-anchor">#</a> 使用REVOKE撤销用户权限</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
REVOKE priv_type <span class="token punctuation">[</span><span class="token punctuation">(</span>column_list<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>,priv_type <span class="token punctuation">[</span><span class="token punctuation">(</span>column_list<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">..</span>.
ON <span class="token punctuation">[</span>object_type<span class="token punctuation">]</span> priv_level
FROM user <span class="token punctuation">[</span>,user<span class="token punctuation">]</span> <span class="token punctuation">..</span>.
</code></pre></div><p>示例：回收系统中已存在用户zhou在数据库mysql_test的表customers上的SELECT权限</p> <div class="language-bash extra-class"><pre class="language-bash"><code>REVOKE SELECT ON mysql_test.customers FROM <span class="token string">'zhou'</span>@<span class="token string">'localhost'</span><span class="token punctuation">;</span>

<span class="token comment"># 登录zhou这个账号执行也可以</span>
mysql<span class="token operator">&gt;</span> REVOKE SELECT ON mysql_test.customers FROM <span class="token string">'zhou'</span>@<span class="token string">'localhost'</span><span class="token punctuation">;</span>
Query OK, <span class="token number">0</span> rows affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> * from customers<span class="token punctuation">;</span>
ERROR <span class="token number">1142</span> <span class="token punctuation">(</span><span class="token number">42000</span><span class="token punctuation">)</span>: SELECT <span class="token builtin class-name">command</span> denied to user <span class="token string">'zhou'</span>@<span class="token string">'localhost'</span> <span class="token keyword">for</span> table <span class="token string">'customers'</span>
</code></pre></div><h4 id="练习题-4"><a href="#练习题-4" class="header-anchor">#</a> 练习题</h4> <p>1.新建的MySQL用户必须被授权，可以使用（  ）语句来实现。填空题，答案：GRANT</p> <p>2.权限的转移可以通过在GRANT语句中使用（  ）子句来实现。填空题，答案：WITH GRANT OPTION或WITH</p> <p>3.当需要撤销一个用户的权限，而又不希望将该用户从系统中删除时，可以使用 （  ）语句来实现。答案：REVOKE</p> <h2 id="事务与并发控制-领会"><a href="#事务与并发控制-领会" class="header-anchor">#</a> 事务与并发控制(领会)</h2> <h3 id="事务的概念"><a href="#事务的概念" class="header-anchor">#</a> 事务的概念</h3> <p>事务是用户定义的一个<strong>数据操作序列</strong>，这些操作可作为一个完整的工作单元，要么全部执行，要么全部不执行，是一个不可分割的工作单位。事务中的操作一般是对数据的更新操作，包括增、删、改。</p> <p><img src="/images/db/6_1_%E7%A8%8B%E5%BA%8F%E4%B8%8E%E4%BA%8B%E5%8A%A1.png" alt="6_1_程序与事务.png"></p> <p>事务以 <strong>BEGIN TRANSACTION</strong> 语句开始，以 <strong>COMMIT</strong> (提交)语句或 <strong>ROLLBACK</strong> (回滚)语句结束</p> <h3 id="事务的特征"><a href="#事务的特征" class="header-anchor">#</a> 事务的特征</h3> <p>ACID</p> <ul><li>原子性 atomicity [ˌætəˈmɪsəti]</li> <li>一致性 consistency [kənˈsɪstənsi]</li> <li>隔离性 isolation [ˌaɪsəˈleɪʃn]</li> <li>持续性(永久性) durative ['djuərətiv]</li></ul> <h3 id="并发操作问题"><a href="#并发操作问题" class="header-anchor">#</a> 并发操作问题</h3> <p>假设事务1与事务2并发执行，可能会存在的问题</p> <ul><li>丢失更新，事务2的提交结果会破坏事务1的提交结果</li> <li>不可重复读，事务2执行更新操作，使事务1无法再现前一次读取结果</li> <li>读&quot;脏&quot;数据，事务1修改数据后撤销，使得事务2读取的数据与数据库中不一致</li></ul> <h3 id="封锁"><a href="#封锁" class="header-anchor">#</a> 封锁</h3> <p>一个锁实质上是允许或阻止一个事务对一个数据对象的存取。</p> <ol><li>排他锁(X锁)，用于写操作</li> <li>共享锁(S锁)，用于读操作</li></ol> <p>我们通常以粒度来描述封锁的数据单元的大小</p> <p>粒度越细，并发性越大，但软件复杂性何系统开销也就越大。</p> <h4 id="封锁的级别"><a href="#封锁的级别" class="header-anchor">#</a> 封锁的级别</h4> <p>封锁的几倍又称为一致性级别或隔离度</p> <ul><li>0 级封锁：不重写其他非0级封锁事务的未提交的更新数据。（实用价值低）</li> <li>1 级封锁：不允许重写未提交的更新数据。防止了丢失更新的发生</li> <li>2 级封锁：既不重写也不读未提交的更新数据（防止读了脏数据）</li> <li>3 级封锁：不去读未提交的更新数据，不写任何（包括读操作）未提交数据</li></ul> <h4 id="死锁和活锁"><a href="#死锁和活锁" class="header-anchor">#</a> 死锁和活锁</h4> <p>或锁 --- 先来先服务</p> <p>死锁 --- 预防</p> <ol><li>一次性死锁</li> <li>锁请求排序</li> <li>序列化处理</li> <li>资源剥夺</li></ol> <h3 id="练习题-5"><a href="#练习题-5" class="header-anchor">#</a> 练习题</h3> <p>1.典型的并发操作不包括（  ）。单选题：D</p> <ul><li>A 不可重复读</li> <li>B 丢失更新</li> <li>C 读脏数据</li> <li>D 修改异常</li></ul> <p>2.事务的特征包括：一致性、隔离性、持续性、（  ）。单选题，答案：原子性 ，记住ACID</p> <h2 id="备份与恢复"><a href="#备份与恢复" class="header-anchor">#</a> 备份与恢复</h2> <h3 id="数据库备份与恢复的概念-识记"><a href="#数据库备份与恢复的概念-识记" class="header-anchor">#</a> 数据库备份与恢复的概念(识记)</h3> <p><strong>数据备份</strong>是指通过<strong>导出数据</strong>或者<strong>复制表文件</strong>的方式来制作数据库的副本，</p> <p><strong>数据库恢复</strong>是当数据库出现故障或遭到破坏时，将<strong>备份</strong>的数据加载到系统，从而使数据库从错误状态恢复到备份时的正确状态。</p> <p>数据库的恢复是以备份为基础的，它是与备份相对应的系统维护和管理操作</p> <h3 id="备份数据的方法-简单应用"><a href="#备份数据的方法-简单应用" class="header-anchor">#</a> 备份数据的方法(简单应用)</h3> <p>使用SELECT INTO OUTFILE备份</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
SELECT * INTO OUTFILE <span class="token string">'file_name'</span> export_options <span class="token operator">|</span> INTO DUMPFILE <span class="token string">'file_name'</span>

<span class="token comment"># export_options</span>
<span class="token punctuation">[</span>FIELDS 
  <span class="token punctuation">[</span>TERMINATED BY <span class="token string">'string'</span><span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token punctuation">[</span>OPTIONALLY<span class="token punctuation">]</span> ENCLOSED BY <span class="token string">'char'</span><span class="token punctuation">]</span>
  <span class="token punctuation">[</span>ESCAPED BY <span class="token string">'char'</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token environment constant">LINES</span> TERMINATED BY <span class="token string">'string'</span><span class="token punctuation">]</span>

<span class="token comment"># FIELDS 和 LINES 决定数据行在备份文件中存储的格式</span>
<span class="token comment"># TERMINATED BY 指定字段值之间的符号</span>
<span class="token comment"># ENCLOSED BY 指定包裹文件中字符值的符号</span>
<span class="token comment"># ESCAPED BY 指定转义字符</span>
<span class="token comment"># TERMINATED BY 指定一个数据行结束的标志</span>

<span class="token comment"># DUMPFILE 导出的备份文件里所有数据行都会彼此紧挨着放置</span>

</code></pre></div><h3 id="恢复数据的方法-简单应用"><a href="#恢复数据的方法-简单应用" class="header-anchor">#</a> 恢复数据的方法(简单应用)</h3> <p>使用LOAD DATA INFILE恢复数据</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
LOAD DATA INFILE <span class="token string">'file_name.txt'</span> INTO  TABLE tbl_name 
<span class="token punctuation">[</span>FIELDS 
  <span class="token punctuation">[</span>TERMINATED BY <span class="token string">'string'</span><span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token punctuation">[</span>OPTIONALLY<span class="token punctuation">]</span> ENCLOSED BY <span class="token string">'char'</span><span class="token punctuation">]</span>
  <span class="token punctuation">[</span>ESCAPED BY <span class="token string">'char'</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token environment constant">LINES</span> 
  <span class="token punctuation">[</span>STARTING BY <span class="token string">'string'</span><span class="token punctuation">]</span>
  <span class="token punctuation">[</span>TERMINATED BY <span class="token string">'string'</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>
<span class="token comment"># STARTING BY 指定一个前缀</span>
</code></pre></div><p>示例：备份数据库mysql_test中表cumstomers的全部数据到 backup/backupfile.txt 文件中，要求字段值如果是字符则用双引号标注，字段值之间用逗号隔开每行以问号为结束标志。然后，将备份后的数据导入到一个和customers表结构相同的空表customers_copy中。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 由于mysql8.x不能直接支持，需要修改配置，很麻烦就不实际操作了，感觉用mysqldump备份更快</span>
SELECT * FROM mysql_test.customers INTO OUTFILE <span class="token string">'./backupfile.txt'</span> 
FIELDS TERMINATED BY <span class="token string">','</span> OPTIONALLY ENCLOSED BY <span class="token string">''</span> <span class="token environment constant">LINES</span> TERMINATED BY <span class="token string">'?'</span><span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; SELECT * FROM mysql_test.customers INTO OUTFILE '/Users/kevin/Desktop/backup/sql.txt'  FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '' LINES TERMINATED BY '?';</span>
ERROR <span class="token number">1290</span> <span class="token punctuation">(</span>HY000<span class="token punctuation">)</span>: The MySQL server is running with the --secure-file-priv option so it cannot execute this statement

<span class="token comment">#恢复</span>
LOAD DATA INFILE <span class="token string">'/Users/kevin/Desktop/backup/sql.txt'</span> INTO TABLE mysql_test.customers_copy 
FIELDS TERMINATED BY <span class="token string">','</span> OPTIONALLY ENCLOSED BY <span class="token string">''</span> <span class="token environment constant">LINES</span> TERMINATED BY <span class="token string">'?'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="练习题-6"><a href="#练习题-6" class="header-anchor">#</a> 练习题</h3> <p>1.备份数据使用的语句是 SELECT INTO （  ）。填空题，答案：OUTFILE</p> <p>2.恢复数据使用的语句是 LOAD DATA （  ）。填空题，答案：INFILE</p> <h3 id="使用mysqldump备份恢复数据"><a href="#使用mysqldump备份恢复数据" class="header-anchor">#</a> 使用mysqldump备份恢复数据</h3> <p>备份时不需要登录mysql控制台，任意打开一个终端即可</p> <h4 id="备份数据库"><a href="#备份数据库" class="header-anchor">#</a> 备份数据库</h4> <p>如果只要数据库每个表的结构，不需要数据加-d参数</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 备份 zhongmingdb 数据库到zhongmingdb.sql文件</span>
<span class="token comment"># 备份所有表结构 + 所有数据</span>
mysqldump -uroot -p zhongmingdb <span class="token operator">&gt;</span> zhongmingdb.sql

<span class="token comment"># 如果只备份表结构，不备份数据 加-d参数 </span>
mysqldump -uroot -p -d zhongmingdb <span class="token operator">&gt;</span> zhongmingdb.sql
</code></pre></div><h4 id="备份某个表的数据"><a href="#备份某个表的数据" class="header-anchor">#</a> 备份某个表的数据</h4> <p>如果只要结构，不需要数据加-d参数</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 备份zhongmingdb数据库的sys_menu表到sys_menu.sql文件</span>
mysqldump -uroot -p zhongmingdb sys_menu <span class="token operator">&gt;</span> sys_menu.sql<span class="token punctuation">;</span>
</code></pre></div><h4 id="备份远程服务器数据库"><a href="#备份远程服务器数据库" class="header-anchor">#</a> 备份远程服务器数据库</h4> <p>加-h ip 参数即可</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 备份 192.168.9.111 服务器 zhongmingdb 数据库表内容</span>
mysqldump -h <span class="token number">192.168</span>.9.111 -uroot -p zhongmingdb sys_menu <span class="token operator">&gt;</span> sys_menu.sql<span class="token punctuation">;</span>
</code></pre></div><h4 id="恢复-备份数据导入"><a href="#恢复-备份数据导入" class="header-anchor">#</a> 恢复(备份数据导入)</h4> <ol><li>登录到mysql控制台，use 对应的database</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 登录</span>
mysql -uroot -p

<span class="token comment"># 选择数据库(如果没有需要创建)</span>
use xxxdb<span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>使用source命令导入，其实就是批量执行sql文件中的SQL语句</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># source  需要导入的数据文件</span>
<span class="token builtin class-name">source</span> sys_menu.sql
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">10/29/2020, 10:59:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/base/dbtheory/6.html" class="prev">
        数据库编程
      </a></span> <span class="next"><a href="/base/dbtheory/8.html">
        数据库应设计与开发实例
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.46527dc9.js" defer></script><script src="/assets/js/2.4b3539f1.js" defer></script><script src="/assets/js/15.6d52c5f9.js" defer></script><script src="/assets/js/3.e6a4dd76.js" defer></script>
  </body>
</html>
