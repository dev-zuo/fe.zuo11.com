<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SQL与关系数据库基本操作 | 左小白的前端笔记</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="左小白的前端笔记，用于记录、完善个人前端知识体系结构">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.594b47db.css" as="style"><link rel="preload" href="/assets/js/app.9db0a638.js" as="script"><link rel="preload" href="/assets/js/2.4b3539f1.js" as="script"><link rel="preload" href="/assets/js/13.df602e5a.js" as="script"><link rel="preload" href="/assets/js/3.e6a4dd76.js" as="script"><link rel="prefetch" href="/assets/js/10.35d8cd15.js"><link rel="prefetch" href="/assets/js/100.01e41ee6.js"><link rel="prefetch" href="/assets/js/101.28f8026a.js"><link rel="prefetch" href="/assets/js/102.31d7d0e0.js"><link rel="prefetch" href="/assets/js/103.71225fe7.js"><link rel="prefetch" href="/assets/js/104.fe63eb6b.js"><link rel="prefetch" href="/assets/js/105.c0b31bc8.js"><link rel="prefetch" href="/assets/js/106.a7b64c67.js"><link rel="prefetch" href="/assets/js/107.35f43657.js"><link rel="prefetch" href="/assets/js/108.25e30499.js"><link rel="prefetch" href="/assets/js/109.865008b8.js"><link rel="prefetch" href="/assets/js/11.22ff506c.js"><link rel="prefetch" href="/assets/js/110.fb459190.js"><link rel="prefetch" href="/assets/js/111.1740bd73.js"><link rel="prefetch" href="/assets/js/112.ea5b5225.js"><link rel="prefetch" href="/assets/js/113.3e891c50.js"><link rel="prefetch" href="/assets/js/114.83254ffb.js"><link rel="prefetch" href="/assets/js/115.dcdb82ef.js"><link rel="prefetch" href="/assets/js/116.8cca1faf.js"><link rel="prefetch" href="/assets/js/117.f70c6759.js"><link rel="prefetch" href="/assets/js/118.ea15b201.js"><link rel="prefetch" href="/assets/js/119.51ac8585.js"><link rel="prefetch" href="/assets/js/12.66186d22.js"><link rel="prefetch" href="/assets/js/120.27fc9d41.js"><link rel="prefetch" href="/assets/js/121.4050195a.js"><link rel="prefetch" href="/assets/js/122.ae0aaf85.js"><link rel="prefetch" href="/assets/js/123.3412ab46.js"><link rel="prefetch" href="/assets/js/124.abd8c6d3.js"><link rel="prefetch" href="/assets/js/125.7cc27db5.js"><link rel="prefetch" href="/assets/js/126.af33ab3a.js"><link rel="prefetch" href="/assets/js/127.3170e8ab.js"><link rel="prefetch" href="/assets/js/128.c04c4bb0.js"><link rel="prefetch" href="/assets/js/129.4165d0ac.js"><link rel="prefetch" href="/assets/js/130.0d0d3cf7.js"><link rel="prefetch" href="/assets/js/131.c7db2083.js"><link rel="prefetch" href="/assets/js/132.79c11c42.js"><link rel="prefetch" href="/assets/js/133.9039bd5f.js"><link rel="prefetch" href="/assets/js/134.566c80ad.js"><link rel="prefetch" href="/assets/js/135.8d23eb58.js"><link rel="prefetch" href="/assets/js/136.f2879705.js"><link rel="prefetch" href="/assets/js/137.255c0784.js"><link rel="prefetch" href="/assets/js/138.304cbec6.js"><link rel="prefetch" href="/assets/js/139.7a7fc3e0.js"><link rel="prefetch" href="/assets/js/14.c0b1490a.js"><link rel="prefetch" href="/assets/js/140.4abf26a8.js"><link rel="prefetch" href="/assets/js/141.81d4d878.js"><link rel="prefetch" href="/assets/js/142.cd404be7.js"><link rel="prefetch" href="/assets/js/143.0e44aa20.js"><link rel="prefetch" href="/assets/js/144.237a43d9.js"><link rel="prefetch" href="/assets/js/145.cede5af9.js"><link rel="prefetch" href="/assets/js/146.c9d3967b.js"><link rel="prefetch" href="/assets/js/147.080beb71.js"><link rel="prefetch" href="/assets/js/15.540e7ea4.js"><link rel="prefetch" href="/assets/js/16.eb71a02a.js"><link rel="prefetch" href="/assets/js/17.92df7b99.js"><link rel="prefetch" href="/assets/js/18.50bc4846.js"><link rel="prefetch" href="/assets/js/19.bb9e9c88.js"><link rel="prefetch" href="/assets/js/20.e5894862.js"><link rel="prefetch" href="/assets/js/21.8dd45d89.js"><link rel="prefetch" href="/assets/js/22.aab57678.js"><link rel="prefetch" href="/assets/js/23.5456b7dc.js"><link rel="prefetch" href="/assets/js/24.68f5b54e.js"><link rel="prefetch" href="/assets/js/25.f7468bea.js"><link rel="prefetch" href="/assets/js/26.2fa477e0.js"><link rel="prefetch" href="/assets/js/27.3b27afbb.js"><link rel="prefetch" href="/assets/js/28.5e4373e8.js"><link rel="prefetch" href="/assets/js/29.3980b790.js"><link rel="prefetch" href="/assets/js/30.8385df39.js"><link rel="prefetch" href="/assets/js/31.18be5061.js"><link rel="prefetch" href="/assets/js/32.7ebc4f72.js"><link rel="prefetch" href="/assets/js/33.eab97304.js"><link rel="prefetch" href="/assets/js/34.10d3aaea.js"><link rel="prefetch" href="/assets/js/35.cf227858.js"><link rel="prefetch" href="/assets/js/36.72eb2e1b.js"><link rel="prefetch" href="/assets/js/37.76967d57.js"><link rel="prefetch" href="/assets/js/38.1b8baf1e.js"><link rel="prefetch" href="/assets/js/39.305ba346.js"><link rel="prefetch" href="/assets/js/4.0ac4f1f6.js"><link rel="prefetch" href="/assets/js/40.2815fe02.js"><link rel="prefetch" href="/assets/js/41.2b41b172.js"><link rel="prefetch" href="/assets/js/42.1d69d4fa.js"><link rel="prefetch" href="/assets/js/43.d4971a84.js"><link rel="prefetch" href="/assets/js/44.0e04f785.js"><link rel="prefetch" href="/assets/js/45.9025c56f.js"><link rel="prefetch" href="/assets/js/46.a1ee9725.js"><link rel="prefetch" href="/assets/js/47.ee929b91.js"><link rel="prefetch" href="/assets/js/48.260b57c1.js"><link rel="prefetch" href="/assets/js/49.fc5704d5.js"><link rel="prefetch" href="/assets/js/5.5b94bff7.js"><link rel="prefetch" href="/assets/js/50.40b0ba28.js"><link rel="prefetch" href="/assets/js/51.549a6a9a.js"><link rel="prefetch" href="/assets/js/52.81153bb7.js"><link rel="prefetch" href="/assets/js/53.7fcef945.js"><link rel="prefetch" href="/assets/js/54.746a2bbd.js"><link rel="prefetch" href="/assets/js/55.29274bd7.js"><link rel="prefetch" href="/assets/js/56.1b76e54c.js"><link rel="prefetch" href="/assets/js/57.ef2bb07c.js"><link rel="prefetch" href="/assets/js/58.e2bac053.js"><link rel="prefetch" href="/assets/js/59.285e53f6.js"><link rel="prefetch" href="/assets/js/6.481b22df.js"><link rel="prefetch" href="/assets/js/60.00d6c919.js"><link rel="prefetch" href="/assets/js/61.af411822.js"><link rel="prefetch" href="/assets/js/62.a7e74f84.js"><link rel="prefetch" href="/assets/js/63.2cccfda3.js"><link rel="prefetch" href="/assets/js/64.5a4a2d69.js"><link rel="prefetch" href="/assets/js/65.6be1cbc1.js"><link rel="prefetch" href="/assets/js/66.7e93c722.js"><link rel="prefetch" href="/assets/js/67.11f563a3.js"><link rel="prefetch" href="/assets/js/68.ad75af4a.js"><link rel="prefetch" href="/assets/js/69.75221a93.js"><link rel="prefetch" href="/assets/js/7.cb937ed7.js"><link rel="prefetch" href="/assets/js/70.34f4dcf5.js"><link rel="prefetch" href="/assets/js/71.aa606e80.js"><link rel="prefetch" href="/assets/js/72.7486a2dd.js"><link rel="prefetch" href="/assets/js/73.2bbd3b87.js"><link rel="prefetch" href="/assets/js/74.3c64330c.js"><link rel="prefetch" href="/assets/js/75.b1cabeb6.js"><link rel="prefetch" href="/assets/js/76.1f563ab7.js"><link rel="prefetch" href="/assets/js/77.abb4ca5d.js"><link rel="prefetch" href="/assets/js/78.40ffda23.js"><link rel="prefetch" href="/assets/js/79.f3fe6eaa.js"><link rel="prefetch" href="/assets/js/8.f5dced20.js"><link rel="prefetch" href="/assets/js/80.3de3caa0.js"><link rel="prefetch" href="/assets/js/81.e2aa0b2b.js"><link rel="prefetch" href="/assets/js/82.d1ca99a1.js"><link rel="prefetch" href="/assets/js/83.dccf9b37.js"><link rel="prefetch" href="/assets/js/84.4dae5e5b.js"><link rel="prefetch" href="/assets/js/85.c6480fc2.js"><link rel="prefetch" href="/assets/js/86.d5480dce.js"><link rel="prefetch" href="/assets/js/87.01b022e2.js"><link rel="prefetch" href="/assets/js/88.02938c2d.js"><link rel="prefetch" href="/assets/js/89.d7e23c9c.js"><link rel="prefetch" href="/assets/js/9.e0f173ad.js"><link rel="prefetch" href="/assets/js/90.9ed16b8c.js"><link rel="prefetch" href="/assets/js/91.40909222.js"><link rel="prefetch" href="/assets/js/92.2f121267.js"><link rel="prefetch" href="/assets/js/93.80f9c1cd.js"><link rel="prefetch" href="/assets/js/94.b78709e4.js"><link rel="prefetch" href="/assets/js/95.71adfe21.js"><link rel="prefetch" href="/assets/js/96.41c9152f.js"><link rel="prefetch" href="/assets/js/97.b80c4bf0.js"><link rel="prefetch" href="/assets/js/98.e0a4d08a.js"><link rel="prefetch" href="/assets/js/99.38bc76b8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.594b47db.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">左小白的前端笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南" class="dropdown-title"><span class="title">指南</span> <span class="arrow down"></span></button> <button type="button" aria-label="指南" class="mobile-dropdown-title"><span class="title">指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  首页
</a></li><li class="dropdown-item"><!----> <a href="/nav.html" class="nav-link">
  前端网址导航
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><span class="title">前端进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端进阶" class="mobile-dropdown-title"><span class="title">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daily/" class="nav-link">
  技术日常记录
</a></li><li class="dropdown-item"><!----> <a href="/server/docker.html" class="nav-link">
  Docker 基础
</a></li><li class="dropdown-item"><h4>
          Vue.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/base/1.html" class="nav-link">
  Vue.js 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vue-router.html" class="nav-link">
  Vue Router 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vuex.html" class="nav-link">
  Vuex 笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          前端工程化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ts/base-1.html" class="nav-link">
  TypeScript 入门教程笔记
</a></li><li class="dropdown-subitem"><a href="/node/base/1.html" class="nav-link">
  Node.js 笔记
</a></li><li class="dropdown-subitem"><a href="/webpack/base.html" class="nav-link">
  webpack 基础
</a></li></ul></li><li class="dropdown-item"><h4>
          数据可视化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/visual/echarts.html" class="nav-link">
  Echarts 笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS/ES6
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/js/es6/es6-1.html" class="nav-link">
  ES6标准入门(第三版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/ad3/js-ad3-1.html" class="nav-link">
  JavaScript高级程序设计(第三版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/js-dom-art.html" class="nav-link">
  JavaScript DOM编程艺术(第二版)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS/CSS3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/css/flex-grid.html" class="nav-link">
  Flex与Grid布局
</a></li><li class="dropdown-subitem"><a href="/css/html5-css-1.html" class="nav-link">
  HTML5权威指南(CSS部分)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          HTML/HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html5/html/1.html" class="nav-link">
  HTML5权威指南(HTML部分)笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/base/git.html" class="nav-link">
  Git 笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/markdown.html" class="nav-link">
  Markdown 基础语法
</a></li><li class="dropdown-item"><!----> <a href="/base/dbtheory/1.html" class="nav-link">
  数据库系统原理笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开源项目" class="dropdown-title"><span class="title">开源项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="开源项目" class="mobile-dropdown-title"><span class="title">开源项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://vuechart.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @guoqzuo/vue-chart
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://zuoblog.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  zuo-blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="http://www.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/zuoxiaobai/fenote" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="指南" class="dropdown-title"><span class="title">指南</span> <span class="arrow down"></span></button> <button type="button" aria-label="指南" class="mobile-dropdown-title"><span class="title">指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  首页
</a></li><li class="dropdown-item"><!----> <a href="/nav.html" class="nav-link">
  前端网址导航
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><span class="title">前端进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端进阶" class="mobile-dropdown-title"><span class="title">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daily/" class="nav-link">
  技术日常记录
</a></li><li class="dropdown-item"><!----> <a href="/server/docker.html" class="nav-link">
  Docker 基础
</a></li><li class="dropdown-item"><h4>
          Vue.js
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue/base/1.html" class="nav-link">
  Vue.js 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vue-router.html" class="nav-link">
  Vue Router 笔记
</a></li><li class="dropdown-subitem"><a href="/vue/vuex.html" class="nav-link">
  Vuex 笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          前端工程化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ts/base-1.html" class="nav-link">
  TypeScript 入门教程笔记
</a></li><li class="dropdown-subitem"><a href="/node/base/1.html" class="nav-link">
  Node.js 笔记
</a></li><li class="dropdown-subitem"><a href="/webpack/base.html" class="nav-link">
  webpack 基础
</a></li></ul></li><li class="dropdown-item"><h4>
          数据可视化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/visual/echarts.html" class="nav-link">
  Echarts 笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS/ES6
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/js/es6/es6-1.html" class="nav-link">
  ES6标准入门(第三版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/ad3/js-ad3-1.html" class="nav-link">
  JavaScript高级程序设计(第三版)笔记
</a></li><li class="dropdown-subitem"><a href="/js/js-dom-art.html" class="nav-link">
  JavaScript DOM编程艺术(第二版)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS/CSS3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/css/flex-grid.html" class="nav-link">
  Flex与Grid布局
</a></li><li class="dropdown-subitem"><a href="/css/html5-css-1.html" class="nav-link">
  HTML5权威指南(CSS部分)笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          HTML/HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html5/html/1.html" class="nav-link">
  HTML5权威指南(HTML部分)笔记
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/base/git.html" class="nav-link">
  Git 笔记
</a></li><li class="dropdown-item"><!----> <a href="/base/markdown.html" class="nav-link">
  Markdown 基础语法
</a></li><li class="dropdown-item"><!----> <a href="/base/dbtheory/1.html" class="nav-link">
  数据库系统原理笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开源项目" class="dropdown-title"><span class="title">开源项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="开源项目" class="mobile-dropdown-title"><span class="title">开源项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://vuechart.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @guoqzuo/vue-chart
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://zuoblog.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  zuo-blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="http://www.zuo11.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/zuoxiaobai/fenote" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>数据库系统原理笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/base/dbtheory/1.html" class="sidebar-link">前言</a></li><li><a href="/base/dbtheory/2.html" class="sidebar-link">数据库系统概述</a></li><li><a href="/base/dbtheory/3.html" class="sidebar-link">关系数据库</a></li><li><a href="/base/dbtheory/4.html" class="sidebar-link">数据库设计</a></li><li><a href="/base/dbtheory/5.html" aria-current="page" class="active sidebar-link">SQL与关系数据库基本操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#_1-sql概述-识记" class="sidebar-link">1.SQL概述(识记)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#什么是sql" class="sidebar-link">什么是SQL</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#sql特点" class="sidebar-link">SQL特点</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#sql的组成" class="sidebar-link">SQL的组成</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#练习题" class="sidebar-link">练习题</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#_2-mysql预备知识" class="sidebar-link">2.MySQL预备知识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#mysql使用基础-识记" class="sidebar-link">MySQL使用基础(识记)</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#mysql扩展语言要素-领会" class="sidebar-link">MySQL扩展语言要素(领会)</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#mysql的安装与配置-识记" class="sidebar-link">MySQL的安装与配置(识记)</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#_3-数据定义-重要" class="sidebar-link">3.数据定义(重要)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#_3-1数据库模式定义-综合应用" class="sidebar-link">3.1数据库模式定义(综合应用)</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#_3-2表定义-综合应用" class="sidebar-link">3.2表定义(综合应用)</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#_3-3索引定义-综合应用" class="sidebar-link">3.3索引定义(综合应用)</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#_4-数据更新-重要" class="sidebar-link">4.数据更新(重要)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#insert-插入数据-综合应用" class="sidebar-link">insert 插入数据(综合应用)</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#delete-删除数据-综合应用" class="sidebar-link">delete 删除数据(综合应用)</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#update-修改数据-综合应用" class="sidebar-link">update 修改数据(综合应用)</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#练习题-6" class="sidebar-link">练习题</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#_5-数据查询-综合应用" class="sidebar-link">5.数据查询(综合应用)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#select语句" class="sidebar-link">select语句</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#列的选择与指定" class="sidebar-link">列的选择与指定</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#from子句与多表连接查询" class="sidebar-link">from子句与多表连接查询</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#where子句与条件查询" class="sidebar-link">where子句与条件查询</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#group-by子句与分组数据" class="sidebar-link">group by子句与分组数据</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#having子句-过滤分组" class="sidebar-link">having子句 过滤分组</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#order-by子句" class="sidebar-link">order by子句</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#limit子句" class="sidebar-link">limit子句</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#练习题-10" class="sidebar-link">练习题</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#_6-视图-虚表-综合应用" class="sidebar-link">6.视图(虚表，综合应用)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#什么是视图-领会" class="sidebar-link">什么是视图(领会)</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#使用视图的优点-领会" class="sidebar-link">使用视图的优点(领会)</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#创建视图-create-view" class="sidebar-link">创建视图 CREATE VIEW</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#删除视图-drop-view" class="sidebar-link">删除视图 DROP VIEW</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#修改视图定义-alter-view" class="sidebar-link">修改视图定义 ALTER VIEW</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#查看视图定义-show-create-view" class="sidebar-link">查看视图定义 SHOW CREATE VIEW</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#更新视图数据-insert" class="sidebar-link">更新视图数据 INSERT</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#查询视图数据" class="sidebar-link">查询视图数据</a></li><li class="sidebar-sub-header"><a href="/base/dbtheory/5.html#练习题-11" class="sidebar-link">练习题</a></li></ul></li></ul></li><li><a href="/base/dbtheory/6.html" class="sidebar-link">数据库编程</a></li><li><a href="/base/dbtheory/7.html" class="sidebar-link">数据库安全与保护</a></li><li><a href="/base/dbtheory/8.html" class="sidebar-link">数据库应设计与开发实例</a></li><li><a href="/base/dbtheory/9.html" class="sidebar-link">数据管理技术的发展</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="sql与关系数据库基本操作"><a href="#sql与关系数据库基本操作" class="header-anchor">#</a> SQL与关系数据库基本操作</h1> <h2 id="_1-sql概述-识记"><a href="#_1-sql概述-识记" class="header-anchor">#</a> 1.SQL概述(识记)</h2> <h3 id="什么是sql"><a href="#什么是sql" class="header-anchor">#</a> 什么是SQL</h3> <p>SQL(Structured Query Language) 结构化查询语句，是专门用来与数据库通信的语言，它可以帮助用户操作关系数据库。</p> <h3 id="sql特点"><a href="#sql特点" class="header-anchor">#</a> SQL特点</h3> <ol><li>SQL不是某个特定数据库供应商专有的语言（mysql, oracle, sql server等）</li> <li>SQL简单易学</li> <li>SQL强大、灵活，可以进行非常复杂和高级的数据操作</li></ol> <h3 id="sql的组成"><a href="#sql的组成" class="header-anchor">#</a> SQL的组成</h3> <p>数据查询、数据定义、数据操纵、数据控制</p> <ul><li><p>数据定义语言(Data Definition Language, DDL)</p> <ul><li>CREATE 创建数据库或数据库对象</li> <li>ALTER 对数据库或数据库对象进行修改</li> <li>DROP 删除数据库或数据库对象</li></ul></li> <li><p>数据操纵语言(Data Manipulation Language, DML)</p> <ul><li>SELECT 从表或视图中检索数据</li> <li>INSERT 将数据插入到表或视图中</li> <li>UPDATE 修改表或视图中的数据</li> <li>DELETE 从表或视图中删除数据</li></ul></li> <li><p>数据控制语言(Data Control Language, DCL)</p> <ul><li>GRANT 用于授予权限</li> <li>REVOKE 用于收回权限</li></ul></li> <li><p>嵌入式和动态SQL规则：规定了SQL语句在高级语言程序设计中使用的规范方法，以便适应较为复杂的应用。</p></li> <li><p>SQL调用和会话规则</p></li></ul> <p><img src="/images/db/4_1_SQL%E7%BB%84%E6%88%90.png" alt="4_1_SQL组成.png"></p> <h3 id="练习题"><a href="#练习题" class="header-anchor">#</a> 练习题</h3> <p>1.SQL又称为（  ）。单选题，答案：C</p> <ul><li>A 结构化定义语言</li> <li>B 结构化控制语言</li> <li>C 结构化查询语言</li> <li>D 结构化操纵语言</li></ul> <p>2.数据定义语言包括的主要SQL语句有CREATE、ALTER和（  ）。填空题，答案：DROP</p> <p>3.用于从表或视图中检索数据的语句是（  ）。单选题，答案：A</p> <ul><li>A SELECT语句</li> <li>B INSERT语句</li> <li>C UPDATE语句</li> <li>D DELETE语句</li></ul> <h2 id="_2-mysql预备知识"><a href="#_2-mysql预备知识" class="header-anchor">#</a> 2.MySQL预备知识</h2> <h3 id="mysql使用基础-识记"><a href="#mysql使用基础-识记" class="header-anchor">#</a> MySQL使用基础(识记)</h3> <p>关系数据库管理系统(RDBMS)</p> <ul><li>LAMP（Linux Apache MySQL PHP）</li> <li>WAMP（Windows Apache MySQL PHP）</li></ul> <h3 id="mysql扩展语言要素-领会"><a href="#mysql扩展语言要素-领会" class="header-anchor">#</a> MySQL扩展语言要素(领会)</h3> <h4 id="常量"><a href="#常量" class="header-anchor">#</a> 常量</h4> <ul><li><strong>字符串常量</strong>，也称字面值或标量值。用单引号或双引号括起来的字符序列，分为ASCII字符串常量和Unicode字符串常量。</li> <li><strong>数值常量</strong>，整数常量、浮点数常量</li> <li><strong>十六机制常量</strong>，每对16进制数字转换为一个字符，其最前面有一个字母'X'(或'x')</li> <li><strong>时间日期常量</strong>，用单引号表示日期时间的字符串括起来构成的，如：'2018-06-05'</li> <li><strong>位字段值</strong>，二进制</li> <li><strong>布尔值</strong>，1 或 0</li> <li><strong>NULL值</strong>，表示没有值，空的</li></ul> <h4 id="变量"><a href="#变量" class="header-anchor">#</a> 变量</h4> <ul><li>用户变量，用户变量前常添加一个符号：@，用于将其与列名分开。<div class="language-bash extra-class"><pre class="language-bash"><code>mysql -uroot -p <span class="token comment"># 登录数据库</span>
<span class="token builtin class-name">set</span> @sun<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment"># 设置一个用户变量</span>
</code></pre></div></li> <li>系统变量，大多数系统变量应用于其他SQL语句中时，必须在系统变量前加<strong>两个@</strong></li></ul> <h4 id="运算符"><a href="#运算符" class="header-anchor">#</a> 运算符</h4> <p><img src="/images/db/4_2_%E8%BF%90%E7%AE%97%E7%AC%A6.png" alt="4_2_运算符.png"></p> <h4 id="表达式"><a href="#表达式" class="header-anchor">#</a> 表达式</h4> <p>表达式是常量、变量、列名、复杂计算、运算符和函数的组合。例如：&quot;2018-06-05&quot;、@A、SNO、s.b=r.b、A+b</p> <ul><li>字符型表达式</li> <li>数值型表达式</li> <li>日期型表达式</li></ul> <h4 id="内置函数"><a href="#内置函数" class="header-anchor">#</a> 内置函数</h4> <ul><li>数学函数 ABS()...</li> <li>聚合函数 COUNT()...</li> <li>字符串函数 ASCII()...</li> <li>日期何时间函数 NOW()...</li> <li>加密函数 ENCODE()...</li> <li>控制流程函数 IF()...</li> <li>格式化函数 FORMAT()...</li> <li>类型转换函数 CAST()...</li> <li>系统信息函数 USER()...</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">select</span> now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 会显示当前时间 { now(): '2020-02-12 00:36:23' } </span>
<span class="token keyword">select</span> count<span class="token punctuation">(</span>*<span class="token punctuation">)</span> from tb_access<span class="token punctuation">;</span> <span class="token comment"># { count(*): 182388 }</span>
</code></pre></div><h4 id="练习题-2"><a href="#练习题-2" class="header-anchor">#</a> 练习题</h4> <p>1.布尔值包含两个可能的值，分别是 TRUE 和 （ ），填空题，答案：FALSE</p> <p>2.算术运算符有：加、减、乘、除、（  ）。填空题，答案：求模</p> <p>3.逻辑运算符&amp;&amp;表示（  ）。单选题，答案：B</p> <ul><li>A 逻辑非</li> <li>B 逻辑与</li> <li>C 逻辑或</li> <li>D 逻辑异或</li></ul> <p>4.根据表达式的值的数据类型，表达式可分为字符型表达式、数值型表达式和（  ）表达式。填空题，答案：日期型</p> <h3 id="mysql的安装与配置-识记"><a href="#mysql的安装与配置-识记" class="header-anchor">#</a> MySQL的安装与配置(识记)</h3> <p>mac下安装参考：http://www.zuo11.com/blog/2016/10/db_mysql_basecmd.html</p> <h2 id="_3-数据定义-重要"><a href="#_3-数据定义-重要" class="header-anchor">#</a> 3.数据定义(重要)</h2> <h3 id="_3-1数据库模式定义-综合应用"><a href="#_3-1数据库模式定义-综合应用" class="header-anchor">#</a> 3.1数据库模式定义(综合应用)</h3> <p>模式也可以叫做表，关系模式 =&gt; 关系表</p> <h4 id="创建数据库"><a href="#创建数据库" class="header-anchor">#</a> 创建数据库</h4> <p>使用 create database 或 create schema 语句</p> <div class="language-bash extra-class"><pre class="language-bash"><code>create <span class="token punctuation">{</span>database <span class="token operator">|</span> schema<span class="token punctuation">}</span> <span class="token punctuation">[</span>if not exists<span class="token punctuation">]</span> db_name
<span class="token punctuation">[</span>default<span class="token punctuation">]</span> character <span class="token builtin class-name">set</span> <span class="token punctuation">[</span><span class="token operator">=</span><span class="token punctuation">]</span> charset_name <span class="token comment"># 指定字符集</span>
<span class="token operator">|</span> <span class="token punctuation">[</span>default<span class="token punctuation">]</span> collate <span class="token punctuation">[</span><span class="token operator">=</span><span class="token punctuation">]</span> collation_name <span class="token comment"># 指定字符集的校对规则，可以理解为排序</span>

<span class="token comment"># collate [kəˈleɪt] 校对</span>
<span class="token comment"># []标示其内容为可选项；| 用于分隔花括号中的选择项</span>

<span class="token comment"># 示例</span>
create database mysql_test
show databases<span class="token punctuation">;</span> <span class="token comment"># 查看数据库</span>
</code></pre></div><h4 id="选择数据库"><a href="#选择数据库" class="header-anchor">#</a> 选择数据库</h4> <p>选择数据库或者从一个数据库切到另一个数据库</p> <div class="language-bash extra-class"><pre class="language-bash"><code>use database_name<span class="token punctuation">;</span>

<span class="token comment"># 示例</span>
use mysql_test<span class="token punctuation">;</span>
</code></pre></div><h4 id="修改数据库"><a href="#修改数据库" class="header-anchor">#</a> 修改数据库</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>alter <span class="token punctuation">{</span>database <span class="token operator">|</span> schema<span class="token punctuation">}</span> <span class="token punctuation">[</span>db_name<span class="token punctuation">]</span> alter_specification<span class="token punctuation">..</span>.
<span class="token comment"># specification [ˌspesɪfɪˈkeɪʃn] 规格，说明</span>

<span class="token comment"># 示例，修改数据库默认字符集</span>
alter database mysql_test default character <span class="token builtin class-name">set</span> gb2312 default collate gb2312_chinese_ci<span class="token punctuation">;</span>

<span class="token comment"># 使用status可以查看当前数据库信息，看是否修改成功</span>
status<span class="token punctuation">;</span>
show variables like <span class="token string">'%char%'</span><span class="token punctuation">;</span> <span class="token comment"># 或者这个命令也可以</span>
</code></pre></div><h4 id="删除数据库"><a href="#删除数据库" class="header-anchor">#</a> 删除数据库</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>drop <span class="token punctuation">{</span>database <span class="token operator">|</span> schema<span class="token punctuation">}</span> <span class="token punctuation">[</span>if exists<span class="token punctuation">]</span> db_name<span class="token punctuation">;</span>

<span class="token comment"># 示例</span>
 drop database <span class="token keyword">if</span> exists mysql_test<span class="token punctuation">;</span>
</code></pre></div><h4 id="查看数据库"><a href="#查看数据库" class="header-anchor">#</a> 查看数据库</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>show <span class="token punctuation">{</span>databases <span class="token operator">|</span> schemas<span class="token punctuation">}</span>
<span class="token punctuation">[</span>like <span class="token string">'pattern'</span> <span class="token operator">|</span> where expr<span class="token punctuation">]</span> 
<span class="token comment"># like关键字用于匹配指定的数据库名称</span>
<span class="token comment"># where从句用于指定数据库名称查询范围的条件</span>

<span class="token comment"># 示例</span>
show databases like <span class="token string">'%my%'</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="练习题-3"><a href="#练习题-3" class="header-anchor">#</a> 练习题</h4> <p>1.在mysql中，可以使用（  ）语句来创建数据库。单选题，答案：A</p> <ul><li>A create database</li> <li>B alter database</li> <li>C drop database</li> <li>D show database</li></ul> <p>2.在mysql中，通常用来指定一个已有数据库作为当前工作数据库的语句是（  ）。单选题，答案：D</p> <ul><li>A using</li> <li>B used</li> <li>C uses</li> <li>D use</li></ul> <p>3.建一个名为student的数据库；建一个名为teacher的数据库；选择student数据库；删除teacher数据库；</p> <div class="language-bash extra-class"><pre class="language-bash"><code>create database <span class="token keyword">if</span> not exists student<span class="token punctuation">;</span>
create database <span class="token keyword">if</span> not exists teacher<span class="token punctuation">;</span>
use student<span class="token punctuation">;</span>
drop database <span class="token keyword">if</span> exists teacher<span class="token punctuation">;</span>
</code></pre></div><h3 id="_3-2表定义-综合应用"><a href="#_3-2表定义-综合应用" class="header-anchor">#</a> 3.2表定义(综合应用)</h3> <h4 id="创建表"><a href="#创建表" class="header-anchor">#</a> 创建表</h4> <p>数据表，被定义为字段的集合，按 <strong>行</strong> 和 <strong>列</strong> 的格式来存储的，每一 <strong>行</strong> 代表一条及记录。每一<strong>列</strong>代表记录中一个字段的取值。<strong>确定表中每个字段的数据类型</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>create <span class="token punctuation">[</span>temporary<span class="token punctuation">]</span> table  tb_name <span class="token punctuation">(</span>
  字段名1 数据类型 <span class="token punctuation">[</span>列级完整性约束条件<span class="token punctuation">]</span> <span class="token punctuation">[</span>默认值<span class="token punctuation">]</span>
  <span class="token punctuation">[</span>, 字段名2 数据类型 <span class="token punctuation">[</span>列级完整性约束条件<span class="token punctuation">]</span> <span class="token punctuation">[</span>默认值<span class="token punctuation">]</span><span class="token punctuation">]</span>
  <span class="token punctuation">[</span>, <span class="token punctuation">..</span>.<span class="token punctuation">]</span>
  <span class="token punctuation">[</span>, 表级完整性约束条件<span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">[</span>engint<span class="token operator">=</span>引擎类型<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment"># temporary 是否是临时表</span>
<span class="token comment"># 例子：在一个已有数据库mysql_test中新建一个包含客户姓名、性别、地址、联系方式等内容的客户基本信息表，要求将客户的id号指定为该表的主键</span>
create table customers <span class="token punctuation">(</span>
  cust_id int not null auto_increment comment <span class="token string">'客户id'</span>,
  cust_name char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> not null comment <span class="token string">'客户姓名'</span>,
  cust_sex char<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> not null comment <span class="token string">'客户性别'</span>,
  cust_address char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> null comment <span class="token string">'客户地址'</span>,
  cust_contact char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> null comment <span class="token string">'客户联系方式'</span>,
  create_time timestamp default current_timestamp comment <span class="token string">'创建时间'</span>,
  primary key<span class="token punctuation">(</span>cust_id<span class="token punctuation">)</span>
<span class="token punctuation">)</span> comment <span class="token string">'客户基本信息表'</span><span class="token punctuation">;</span>

<span class="token comment"># cust_id int not null auto_increment primary key comment '客户id',</span>

<span class="token comment"># show tables;</span>
+----------------------+
<span class="token operator">|</span> Tables_in_mysql_test <span class="token operator">|</span>
+----------------------+
<span class="token operator">|</span> customers            <span class="token operator">|</span>
+----------------------+

<span class="token comment"># desc customers</span>
+--------------+-----------+------+-----+-------------------+-------------------+
<span class="token operator">|</span> Field        <span class="token operator">|</span> Type      <span class="token operator">|</span> Null <span class="token operator">|</span> Key <span class="token operator">|</span> Default           <span class="token operator">|</span> Extra             <span class="token operator">|</span>
+--------------+-----------+------+-----+-------------------+-------------------+
<span class="token operator">|</span> cust_id      <span class="token operator">|</span> int<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>   <span class="token operator">|</span> NO   <span class="token operator">|</span> PRI <span class="token operator">|</span> NULL              <span class="token operator">|</span> auto_increment    <span class="token operator">|</span>
<span class="token operator">|</span> cust_name    <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">|</span> NO   <span class="token operator">|</span>     <span class="token operator">|</span> NULL              <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> cust_sex     <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>   <span class="token operator">|</span> NO   <span class="token operator">|</span>     <span class="token operator">|</span> NULL              <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> cust_address <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL              <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> cust_contact <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL              <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> create_time  <span class="token operator">|</span> timestamp <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> CURRENT_TIMESTAMP <span class="token operator">|</span> DEFAULT_GENERATED <span class="token operator">|</span>
+--------------+-----------+------+-----+-------------------+-------------------+
</code></pre></div><h4 id="更新表-alter-table"><a href="#更新表-alter-table" class="header-anchor">#</a> 更新表 alter table</h4> <p>使用 <strong>alter table</strong>语句，增加或删除列，创建或取消索引，更改原有列的数据类型、重新命名列或表，更改表的评注何表的引擎类型，为表重新创建触发器、存储过程、索引和外键等。</p> <h5 id="add-column"><a href="#add-column" class="header-anchor">#</a> add [column]</h5> <p>向表里面增加一列</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 向数据库mysql_test的表customers中添加一列，并命名为cust_city，要求其不能为NULL，默认值为 &quot;Wuhan&quot;，且该列谓语原表cust_sex列之后。</span>

alter table mysql_test.customers <span class="token function">add</span> cust_city char<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> not null default <span class="token string">&quot;Wuhan&quot;</span> comment <span class="token string">&quot;客户所在城市&quot;</span> after cust_sex<span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; desc customers;</span>
+--------------+-----------+------+-----+-------------------+-------------------+
<span class="token operator">|</span> Field        <span class="token operator">|</span> Type      <span class="token operator">|</span> Null <span class="token operator">|</span> Key <span class="token operator">|</span> Default           <span class="token operator">|</span> Extra             <span class="token operator">|</span>
+--------------+-----------+------+-----+-------------------+-------------------+
<span class="token operator">|</span> cust_id      <span class="token operator">|</span> int<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>   <span class="token operator">|</span> NO   <span class="token operator">|</span> PRI <span class="token operator">|</span> NULL              <span class="token operator">|</span> auto_increment    <span class="token operator">|</span>
<span class="token operator">|</span> cust_name    <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">|</span> NO   <span class="token operator">|</span>     <span class="token operator">|</span> NULL              <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> cust_sex     <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>   <span class="token operator">|</span> NO   <span class="token operator">|</span>     <span class="token operator">|</span> NULL              <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> cust_city    <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>  <span class="token operator">|</span> NO   <span class="token operator">|</span>     <span class="token operator">|</span> Wuhan             <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> cust_address <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL              <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> cust_contact <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL              <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> create_time  <span class="token operator">|</span> timestamp <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> CURRENT_TIMESTAMP <span class="token operator">|</span> DEFAULT_GENERATED <span class="token operator">|</span>
+--------------+-----------+------+-----+-------------------+-------------------+

</code></pre></div><h5 id="change-column"><a href="#change-column" class="header-anchor">#</a> change [column]</h5> <p>修改表中列的名称或数据类型</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 示例：将cust_sex 列改为 sex</span>
alter table mysql_test.customers change <span class="token function">column</span> cust_sex sex char<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> null default <span class="token string">&quot;M&quot;</span><span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; desc customers;</span>
+--------------+-----------+------+-----+-------------------+-------------------+
<span class="token operator">|</span> Field        <span class="token operator">|</span> Type      <span class="token operator">|</span> Null <span class="token operator">|</span> Key <span class="token operator">|</span> Default           <span class="token operator">|</span> Extra             <span class="token operator">|</span>
+--------------+-----------+------+-----+-------------------+-------------------+
<span class="token operator">|</span> cust_id      <span class="token operator">|</span> int<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>   <span class="token operator">|</span> NO   <span class="token operator">|</span> PRI <span class="token operator">|</span> NULL              <span class="token operator">|</span> auto_increment    <span class="token operator">|</span>
<span class="token operator">|</span> cust_name    <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">|</span> NO   <span class="token operator">|</span>     <span class="token operator">|</span> NULL              <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> sex          <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>   <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> M                 <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> cust_city    <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>  <span class="token operator">|</span> NO   <span class="token operator">|</span>     <span class="token operator">|</span> Wuhan             <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> cust_address <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL              <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> cust_contact <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL              <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> create_time  <span class="token operator">|</span> timestamp <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> CURRENT_TIMESTAMP <span class="token operator">|</span> DEFAULT_GENERATED <span class="token operator">|</span>
+--------------+-----------+------+-----+-------------------+-------------------+
</code></pre></div><h5 id="alter-column"><a href="#alter-column" class="header-anchor">#</a> alter [column]</h5> <p>修改或删除表中指定列的默认值</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 修改列的默认值</span>
alter table mysql_test.customers alter <span class="token function">column</span> cust_city <span class="token builtin class-name">set</span> default <span class="token string">'Beijing'</span><span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; desc customers;</span>
+--------------+-----------+------+-----+-------------------+-------------------+
<span class="token operator">|</span> Field        <span class="token operator">|</span> Type      <span class="token operator">|</span> Null <span class="token operator">|</span> Key <span class="token operator">|</span> Default           <span class="token operator">|</span> Extra             <span class="token operator">|</span>
+--------------+-----------+------+-----+-------------------+-------------------+
<span class="token operator">|</span> cust_id      <span class="token operator">|</span> int<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>   <span class="token operator">|</span> NO   <span class="token operator">|</span> PRI <span class="token operator">|</span> NULL              <span class="token operator">|</span> auto_increment    <span class="token operator">|</span>
<span class="token operator">|</span> cust_name    <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">|</span> NO   <span class="token operator">|</span>     <span class="token operator">|</span> NULL              <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> sex          <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>   <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> M                 <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> cust_city    <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>  <span class="token operator">|</span> NO   <span class="token operator">|</span>     <span class="token operator">|</span> Beijing           <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> cust_address <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL              <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> cust_contact <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL              <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> create_time  <span class="token operator">|</span> timestamp <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> CURRENT_TIMESTAMP <span class="token operator">|</span> DEFAULT_GENERATED <span class="token operator">|</span>
+--------------+-----------+------+-----+-------------------+-------------------+
</code></pre></div><h5 id="modifiy-column"><a href="#modifiy-column" class="header-anchor">#</a> modifiy [column]</h5> <p>只修改指定列的数据类型，不会干涉其列名</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 修改cust_name 为第一列，改为 char(20)</span>
alter table mysql_test customers modify <span class="token function">column</span> cust_name char<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> first<span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; desc customers;</span>
+--------------+-----------+------+-----+-------------------+-------------------+
<span class="token operator">|</span> Field        <span class="token operator">|</span> Type      <span class="token operator">|</span> Null <span class="token operator">|</span> Key <span class="token operator">|</span> Default           <span class="token operator">|</span> Extra             <span class="token operator">|</span>
+--------------+-----------+------+-----+-------------------+-------------------+
<span class="token operator">|</span> cust_name    <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>  <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL              <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> cust_id      <span class="token operator">|</span> int<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>   <span class="token operator">|</span> NO   <span class="token operator">|</span> PRI <span class="token operator">|</span> NULL              <span class="token operator">|</span> auto_increment    <span class="token operator">|</span>
<span class="token operator">|</span> sex          <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>   <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> M                 <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> cust_city    <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>  <span class="token operator">|</span> NO   <span class="token operator">|</span>     <span class="token operator">|</span> Beijing           <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> cust_address <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL              <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> cust_contact <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL              <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> create_time  <span class="token operator">|</span> timestamp <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> CURRENT_TIMESTAMP <span class="token operator">|</span> DEFAULT_GENERATED <span class="token operator">|</span>
+--------------+-----------+------+-----+-------------------+-------------------+
</code></pre></div><h5 id="drop-column"><a href="#drop-column" class="header-anchor">#</a> drop [column]</h5> <p>删除列表中的列</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 删除列</span>
alter table mysql_test.customers drop <span class="token function">column</span> cust_contact<span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; desc customers;</span>
+--------------+-----------+------+-----+-------------------+-------------------+
<span class="token operator">|</span> Field        <span class="token operator">|</span> Type      <span class="token operator">|</span> Null <span class="token operator">|</span> Key <span class="token operator">|</span> Default           <span class="token operator">|</span> Extra             <span class="token operator">|</span>
+--------------+-----------+------+-----+-------------------+-------------------+
<span class="token operator">|</span> cust_name    <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>  <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL              <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> cust_id      <span class="token operator">|</span> int<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>   <span class="token operator">|</span> NO   <span class="token operator">|</span> PRI <span class="token operator">|</span> NULL              <span class="token operator">|</span> auto_increment    <span class="token operator">|</span>
<span class="token operator">|</span> sex          <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>   <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> M                 <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> cust_city    <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>  <span class="token operator">|</span> NO   <span class="token operator">|</span>     <span class="token operator">|</span> Beijing           <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> cust_address <span class="token operator">|</span> char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL              <span class="token operator">|</span>                   <span class="token operator">|</span>
<span class="token operator">|</span> create_time  <span class="token operator">|</span> timestamp <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> CURRENT_TIMESTAMP <span class="token operator">|</span> DEFAULT_GENERATED <span class="token operator">|</span>
+--------------+-----------+------+-----+-------------------+-------------------+
</code></pre></div><h5 id="rename-to"><a href="#rename-to" class="header-anchor">#</a> rename to</h5> <p>修改表名</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 修改表名</span>
alter table mysql_test.customers <span class="token function">rename</span> to mysql_test.backup_customers<span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; show tables </span>
+----------------------+
<span class="token operator">|</span> Tables_in_mysql_test <span class="token operator">|</span>
+----------------------+
<span class="token operator">|</span> backup_customers     <span class="token operator">|</span>
+----------------------+

</code></pre></div><h4 id="删除表-drop-table"><a href="#删除表-drop-table" class="header-anchor">#</a> 删除表 drop table</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>drop <span class="token punctuation">[</span>temporary<span class="token punctuation">]</span> table <span class="token punctuation">[</span>if exists<span class="token punctuation">]</span> tb_name <span class="token punctuation">[</span>, tb2_name, <span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">[</span>restrict <span class="token operator">|</span> cascade<span class="token punctuation">]</span>
<span class="token comment"># restrict [rɪˈstrɪkt] 限定、约束</span>
<span class="token comment"># cascade  [kæˈskeɪd] 串联</span>

<span class="token comment"># 删除表</span>
drop table <span class="token keyword">if</span> exists backup_customers<span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; show tables;</span>
Empty <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
</code></pre></div><h4 id="查看表-show-tables"><a href="#查看表-show-tables" class="header-anchor">#</a> 查看表 show tables</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 查看数据表</span>
show <span class="token punctuation">[</span>full<span class="token punctuation">]</span> tables <span class="token punctuation">[</span><span class="token punctuation">{</span>from <span class="token operator">|</span> in<span class="token punctuation">}</span> db_name<span class="token punctuation">]</span> <span class="token punctuation">[</span>like <span class="token string">'pattern'</span> <span class="token operator">|</span> where expr<span class="token punctuation">]</span>

show tables<span class="token punctuation">;</span>

<span class="token comment"># 查看表结构</span>
<span class="token punctuation">{</span>desc <span class="token operator">|</span> describe<span class="token punctuation">}</span> tb_name <span class="token punctuation">[</span>column <span class="token operator">|</span> wild<span class="token punctuation">]</span>

<span class="token comment"># 示例</span>
create table tb_test <span class="token punctuation">(</span>id int auto_increment, name varchar<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>, age int, primary key<span class="token punctuation">(</span>id<span class="token punctuation">))</span><span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; show tables;</span>
+----------------------+
<span class="token operator">|</span> Tables_in_mysql_test <span class="token operator">|</span>
+----------------------+
<span class="token operator">|</span> tb_test              <span class="token operator">|</span>
+----------------------+

<span class="token comment"># show columns from tb_test; 与 desc tb_test 等价</span>
<span class="token comment"># mysql&gt; describe tb_test;</span>
+-------+-------------+------+-----+---------+----------------+
<span class="token operator">|</span> Field <span class="token operator">|</span> Type        <span class="token operator">|</span> Null <span class="token operator">|</span> Key <span class="token operator">|</span> Default <span class="token operator">|</span> Extra          <span class="token operator">|</span>
+-------+-------------+------+-----+---------+----------------+
<span class="token operator">|</span> <span class="token function">id</span>    <span class="token operator">|</span> int<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>     <span class="token operator">|</span> NO   <span class="token operator">|</span> PRI <span class="token operator">|</span> NULL    <span class="token operator">|</span> auto_increment <span class="token operator">|</span>
<span class="token operator">|</span> name  <span class="token operator">|</span> varchar<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL    <span class="token operator">|</span>                <span class="token operator">|</span>
<span class="token operator">|</span> age   <span class="token operator">|</span> int<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>     <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL    <span class="token operator">|</span>                <span class="token operator">|</span>
+-------+-------------+------+-----+---------+----------------+
<span class="token number">3</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

<span class="token comment"># 只看一个字段</span>
<span class="token comment"># mysql&gt; desc tb_test name; </span>
+-------+-------------+------+-----+---------+-------+
<span class="token operator">|</span> Field <span class="token operator">|</span> Type        <span class="token operator">|</span> Null <span class="token operator">|</span> Key <span class="token operator">|</span> Default <span class="token operator">|</span> Extra <span class="token operator">|</span>
+-------+-------------+------+-----+---------+-------+
<span class="token operator">|</span> name  <span class="token operator">|</span> varchar<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> NULL    <span class="token operator">|</span>       <span class="token operator">|</span>
+-------+-------------+------+-----+---------+-------+
<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
</code></pre></div><h4 id="练习题-4"><a href="#练习题-4" class="header-anchor">#</a> 练习题</h4> <p>1.在mysql中，可以使用（  ）语句来更改原有表的结构，包括增加、删减列等操作。单选题，答案：B</p> <ul><li>A alter database</li> <li>B alter talbe</li> <li>C create table</li> <li>D create databases</li></ul> <p>2.在创建表的create table 语句中，若添加可选项 &quot;temporary&quot; 关键字，则表示使用该语句创建的表为 （  ）。填空题，答案：临时表</p> <p>3.在create table语句中，通常使用关键字 (  ) 来指定主键。填空题，答案：primary key</p> <p>4.新建一个包含客户姓名、性别、地址、联系方式等内容的客户基本信息表，要求将客户的id号指定为该表的主键，给横线处填空，SQL语句如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>mysql <span class="token operator">&gt;</span> user mysql_test<span class="token punctuation">;</span>
Database changed
mysql <span class="token operator">&gt;</span> create table customers
-<span class="token operator">&gt;</span> <span class="token punctuation">(</span>
-<span class="token operator">&gt;</span> cust_id int not null auto_increment,
-<span class="token operator">&gt;</span> cust_name char<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> not null,
-<span class="token operator">&gt;</span> cust_sec char<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> not null default <span class="token number">0</span>,
-<span class="token operator">&gt;</span> cust_address char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> null,
-<span class="token operator">&gt;</span> cust_contact char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> null,
-<span class="token operator">&gt;</span> _______<span class="token punctuation">(</span>cust_id<span class="token punctuation">)</span>
-<span class="token operator">&gt;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><p>填空题，答案：primary key</p> <p>5.将数据库mysql_test中表customers的cust_sex列重命名为sex，且将其数据类型更改为字符长度为1的字符数据类型char(1)，允许其为NULL，默认值为字符常量 'M'。写出相关的SQL语句。设计题</p> <div class="language-bash extra-class"><pre class="language-bash"><code>alter table mysql_test.customers change <span class="token function">column</span> cust_sex sex char<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> null default <span class="token string">'M'</span><span class="token punctuation">;</span>
</code></pre></div><p>6.重名表可以使用alter table语句或（  ）table 语句。填空题，答案：rename</p> <p>7.显示表结构使用的语句是（  ）。单选题，答案：B</p> <ul><li>A show tables</li> <li>B show columns</li> <li>C display tables</li> <li>D display columns</li></ul> <h3 id="_3-3索引定义-综合应用"><a href="#_3-3索引定义-综合应用" class="header-anchor">#</a> 3.3索引定义(综合应用)</h3> <p>索引是提高数据文件访问效率的有效方法</p> <p><img src="/images/db/4_3_%E7%B4%A2%E5%BC%95.png" alt="4_3_索引.png"></p> <p>索引存在的弊端：</p> <ul><li>索引是以文件的形式存储的，如果有大量的索引，索引文件可能比数据文件更快达到最大的文件尺寸。</li> <li>索引在提高查询速度的同时，会降低更新表的速度。</li></ul> <p>索引的分类:</p> <ul><li>普通索引(index或key)</li> <li>唯一性索引(unique)</li> <li>主键(primary key)</li></ul> <p>索引通常被创建成单列索引和组合索引</p> <h4 id="create-index创建索引"><a href="#create-index创建索引" class="header-anchor">#</a> create index创建索引</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># unique 创建唯一性索引</span>
<span class="token comment"># index_name 指定索引名</span>
<span class="token comment"># 在表 tb1_name 上创建索引</span>
<span class="token comment"># index_col_name 关于索引列的描述</span>
create <span class="token punctuation">[</span>unique<span class="token punctuation">]</span> index index_name on tb1_name<span class="token punctuation">(</span>index_col_name, <span class="token punctuation">..</span>.<span class="token punctuation">)</span>

<span class="token comment"># 索引列描述</span>
<span class="token comment"># ASC 升序(默认) DESC 降序</span>
col_name<span class="token punctuation">[</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span>ASC <span class="token operator">|</span> DESC<span class="token punctuation">]</span>

<span class="token comment"># 例子1：</span>
<span class="token comment"># 在数据库 mysql_test 的表 customers 上，根据客户姓名列的前三个字符创建一个升序索引index_customers。</span>
create index index_customers on mysql_test.customers<span class="token punctuation">(</span>cust_name<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> ASC<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 例子2：</span>
<span class="token comment"># 在数据库 mysql_test 的表 customers 上，根据客户姓名列和客户id号创建一个组合索引index_cust</span>
create index index_cust on mysql_test.customers<span class="token punctuation">(</span>cust_name,cust_id<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h4 id="create-table创建索引"><a href="#create-table创建索引" class="header-anchor">#</a> create table创建索引</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># constraint [kənˈstreɪnt] 约束</span>
<span class="token comment"># 1.使用主键，语法项 [constraint[symbol]] primary key(index_col_name, ...)</span>
<span class="token comment">#   用于表示在创建新表的同时创建该表的主键</span>
<span class="token comment"># 2.语法项 {index | key} [index_name](index_col_name, ...)</span>
<span class="token comment">#   用于表示在创建新表的同时创建该表的索引</span>
<span class="token comment"># 3.语法项 [constranit[symbol]] unique [index|key] [index_name](index_col_name, ...)</span>
<span class="token comment">#   用于表示在创建新表的同时创建该表的唯一性索引</span>
<span class="token comment"># 4.语法项 [constraint[symbol]] foreign key [index_name](index_col_name, ...)</span>
<span class="token comment">#   用于表示在创建新表的同时创建该表的外键</span>
</code></pre></div><p>例子: 在已有数据库mysql_test上新建一个包含产品卖家id号，姓名、地址、联系方式、售卖产品类型、当月销量等内容的产品卖家信息表seller。要求在创建的同时，为该表添加由卖家id号和售卖产品类型组成的联合主键，并在当月销量上创建索引。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>create table seller <span class="token punctuation">(</span>
  seller_id int not null auto_increment,
  seller_name char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> not null,
  seller_address char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> null,
  seller_contact char<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> null,
  product_type int<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> not null,
  sales int null comment <span class="token string">'当月销量'</span>,
  primary key<span class="token punctuation">(</span>seller_id, product_type<span class="token punctuation">)</span>,
  index index_seller<span class="token punctuation">(</span>sales<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># primary key(seller_id, product_type) 主键索引</span>
<span class="token comment"># index index_seller(sales) # 创建index_seller的索引</span>
</code></pre></div><h4 id="alter-table创建索引"><a href="#alter-table创建索引" class="header-anchor">#</a> alter table创建索引</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 1.语法项：add {index | key} [index_name](index_col_name, ...)</span>
<span class="token comment">#   用于表示在修改表的同时为该表添加索引</span>
<span class="token comment"># 2.语法项：add [constraint[symbol]] primary key (index_col_name, ...)</span>
<span class="token comment">#   用于表示在修改表的同时为该表添加主键</span>
<span class="token comment"># 3.语法项：add [constraint[symbol]] unique [index|key] [index_name](index_col_name,...)</span>
<span class="token comment">#   用于表示在修改表的同时为该表添加唯一性索引</span>
<span class="token comment"># 4.语法项: add [constraint[symbol]] foreign key (index_col_name)</span>
<span class="token comment">#   用于表示在创建新表的同时为该表添加外键</span>
</code></pre></div><p>使用alter table语句在数据库mysql_test中表seller的姓名上添加一列非唯一的索引，取名index_seller_name</p> <div class="language-bash extra-class"><pre class="language-bash"><code>alter table mysql_test.seller <span class="token function">add</span> index index_col_name<span class="token punctuation">(</span>seller_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="show-index查看索引"><a href="#show-index查看索引" class="header-anchor">#</a> show index查看索引</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>show <span class="token punctuation">{</span>index <span class="token operator">|</span> indexs <span class="token operator">|</span> keys<span class="token punctuation">}</span> <span class="token punctuation">{</span>from <span class="token operator">|</span> in<span class="token punctuation">}</span> tb_name <span class="token punctuation">[</span><span class="token punctuation">{</span>from <span class="token operator">|</span> in<span class="token punctuation">}</span> db_name<span class="token punctuation">]</span> <span class="token punctuation">[</span>where expr<span class="token punctuation">]</span>

<span class="token comment"># 示例</span>
<span class="token comment"># show index in seller; </span>
show index from seller<span class="token punctuation">;</span> 
</code></pre></div><p><img src="/images/db/4_4_%E6%9F%A5%E7%9C%8B%E7%B4%A2%E5%BC%95.png" alt="4_4_查看索引.png"></p> <h4 id="drop-index-删除索引"><a href="#drop-index-删除索引" class="header-anchor">#</a> drop index 删除索引</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>drop index index_name on tb_name<span class="token punctuation">;</span>

<span class="token comment"># 示例：删除 customers 表中的索引 index_cust</span>
drop index index_cust on customers<span class="token punctuation">;</span>
</code></pre></div><h4 id="alter-table删除索引"><a href="#alter-table删除索引" class="header-anchor">#</a> alter table删除索引</h4> <ol><li>选用drop primary key 子句用于删除表中的主键，由于一个表中只有一个主键，其也是一个索引。</li> <li>选用drop index 子句用于删除各种类型的索引</li> <li>选用drop foreign key 子句用于删除外键</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 示例：</span>
<span class="token comment"># 使用alter table语句删除数据库mysql_test中表customers的主键和索引index_customers。</span>
alter table customers drop primary key<span class="token punctuation">;</span> <span class="token comment"># mysql必须有一个主键，无法删除 Error</span>
alter table customers drop index index_customers<span class="token punctuation">;</span> 
alter table customers drop primary key, drop index index_customers<span class="token punctuation">;</span> <span class="token comment"># Error</span>
</code></pre></div><h4 id="练习题-5"><a href="#练习题-5" class="header-anchor">#</a> 练习题</h4> <p>1.所谓（  ），就是DBMS根据表中的一列或若干列按照一定顺序建立的列值与记录行之间的对应关系表。填空题，答案：索引</p> <p>2.下面哪个语句不能创建索引（  ）。单选题，答案：D</p> <ul><li>A create index</li> <li>B create table</li> <li>C alter table</li> <li>D alter index</li></ul> <p>3.使用alter table语句在数据库mysql_test中表seller的姓名列上添加一个非唯一的索引，取名为index_seller_name。设计题</p> <div class="language-bash extra-class"><pre class="language-bash"><code>alter table mysql_test.seller <span class="token function">add</span> index index_seller_name<span class="token punctuation">(</span>seller_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_4-数据更新-重要"><a href="#_4-数据更新-重要" class="header-anchor">#</a> 4.数据更新(重要)</h2> <h3 id="insert-插入数据-综合应用"><a href="#insert-插入数据-综合应用" class="header-anchor">#</a> insert 插入数据(综合应用)</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 插入数据语法:</span>
insert <span class="token punctuation">[</span>into<span class="token punctuation">]</span> tb1_name <span class="token punctuation">[</span><span class="token punctuation">(</span>col_name, <span class="token punctuation">..</span>.<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>values <span class="token operator">|</span> value<span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>expr <span class="token operator">|</span> default<span class="token punctuation">}</span>, <span class="token punctuation">..</span>.<span class="token punctuation">)</span>, <span class="token punctuation">(</span><span class="token punctuation">..</span>.<span class="token punctuation">)</span>, <span class="token punctuation">..</span>.
<span class="token comment"># expr 表示一个常量、变量或一个表达式，也可以是空值，NULL</span>
<span class="token comment"># default 指定此列值为该列的默认值</span>
</code></pre></div><h4 id="insert-values-插入单行或多行数据"><a href="#insert-values-插入单行或多行数据" class="header-anchor">#</a> insert...values 插入单行或多行数据</h4> <p>示例：使用insert...values语句向数据库mysql_test的表customers中插入这样一行完整数据：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">(</span><span class="token number">901</span>, 张三, F, 北京市, 朝阳区<span class="token punctuation">)</span>

insert mysql_test.customers values <span class="token punctuation">(</span><span class="token number">901</span>, <span class="token string">'张三'</span>, <span class="token string">'F'</span>, <span class="token string">'北京市'</span>, <span class="token string">'朝阳区'</span>, <span class="token string">'2019-05-13'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment"># mysql&gt; select * from customers;</span>
+---------+-----------+----------+--------------+--------------+---------------------+
<span class="token operator">|</span> cust_id <span class="token operator">|</span> cust_name <span class="token operator">|</span> cust_sex <span class="token operator">|</span> cust_address <span class="token operator">|</span> cust_contact <span class="token operator">|</span> create_time         <span class="token operator">|</span>
+---------+-----------+----------+--------------+--------------+---------------------+
<span class="token operator">|</span>     <span class="token number">901</span> <span class="token operator">|</span> 张三       <span class="token operator">|</span> F        <span class="token operator">|</span> 北京市        <span class="token operator">|</span> 朝阳区        <span class="token operator">|</span> <span class="token number">2019</span>-05-13 00:00:00 <span class="token operator">|</span>
+---------+-----------+----------+--------------+--------------+---------------------+
<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

insert into mysql_test.customers <span class="token punctuation">(</span>cust_id,cust_name,cust_sex,cust_address,cust_contact<span class="token punctuation">)</span> values <span class="token punctuation">(</span><span class="token number">902</span>, <span class="token string">'李四'</span>, <span class="token string">'F'</span>, <span class="token string">'北京市'</span>, <span class="token string">'朝阳区'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; select * from customers;</span>
+---------+-----------+----------+--------------+--------------+---------------------+
<span class="token operator">|</span> cust_id <span class="token operator">|</span> cust_name <span class="token operator">|</span> cust_sex <span class="token operator">|</span> cust_address <span class="token operator">|</span> cust_contact <span class="token operator">|</span> create_time         <span class="token operator">|</span>
+---------+-----------+----------+--------------+--------------+---------------------+
<span class="token operator">|</span>     <span class="token number">901</span> <span class="token operator">|</span> 张三       <span class="token operator">|</span> F        <span class="token operator">|</span> 北京市        <span class="token operator">|</span> 朝阳区        <span class="token operator">|</span> <span class="token number">2019</span>-05-13 00:00:00 <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">902</span> <span class="token operator">|</span> 李四       <span class="token operator">|</span> F        <span class="token operator">|</span> 北京市        <span class="token operator">|</span> 朝阳区        <span class="token operator">|</span> <span class="token number">2020</span>-02-12 <span class="token number">22</span>:09:10 <span class="token operator">|</span>
+---------+-----------+----------+--------------+--------------+---------------------+
<span class="token number">2</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

<span class="token comment"># 使用insert...values插入多行数据</span>
INSERT INTO table_name <span class="token punctuation">(</span>column1,column2,column3,<span class="token punctuation">..</span>.<span class="token punctuation">)</span>
VALUES <span class="token punctuation">(</span>value1,value2,value3,<span class="token punctuation">..</span>.<span class="token punctuation">)</span>,<span class="token punctuation">(</span>value1,value2,value3,<span class="token punctuation">..</span>.<span class="token punctuation">)</span>,<span class="token punctuation">(</span>value1,value2,value3,<span class="token punctuation">..</span>.<span class="token punctuation">)</span>
</code></pre></div><h4 id="insert-set插入部分列数据"><a href="#insert-set插入部分列数据" class="header-anchor">#</a> insert...set插入部分列数据</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
insert <span class="token punctuation">[</span>into<span class="token punctuation">]</span> tb1_name <span class="token builtin class-name">set</span> <span class="token assign-left variable">col_name</span><span class="token operator">=</span><span class="token punctuation">{</span>expr <span class="token operator">|</span> default<span class="token punctuation">}</span>,<span class="token punctuation">..</span>.
</code></pre></div><p>示例：使用insert...set语句向数据库mysql_test的表customers中插入数据：名为李四，地址为武汉，性别默认</p> <div class="language-bash extra-class"><pre class="language-bash"><code>alter table customers change cust_sex cust_sex char<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> default <span class="token string">'M'</span> not null<span class="token punctuation">;</span>
insert mysql_test.customers <span class="token builtin class-name">set</span> <span class="token assign-left variable">cust_name</span><span class="token operator">=</span><span class="token string">'李四'</span>,cust_address<span class="token operator">=</span><span class="token string">'武汉'</span><span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; select * from customers;</span>
+---------+-----------+----------+--------------+--------------+---------------------+
<span class="token operator">|</span> cust_id <span class="token operator">|</span> cust_name <span class="token operator">|</span> cust_sex <span class="token operator">|</span> cust_address <span class="token operator">|</span> cust_contact <span class="token operator">|</span> create_time         <span class="token operator">|</span>
+---------+-----------+----------+--------------+--------------+---------------------+
<span class="token operator">|</span>     <span class="token number">901</span> <span class="token operator">|</span> 张三       <span class="token operator">|</span> F        <span class="token operator">|</span> 北京市        <span class="token operator">|</span> 朝阳区        <span class="token operator">|</span> <span class="token number">2019</span>-05-13 00:00:00 <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">902</span> <span class="token operator">|</span> 李四       <span class="token operator">|</span> F        <span class="token operator">|</span> 北京市        <span class="token operator">|</span> 朝阳区        <span class="token operator">|</span> <span class="token number">2020</span>-02-12 <span class="token number">22</span>:09:10 <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">903</span> <span class="token operator">|</span> 李四       <span class="token operator">|</span> M        <span class="token operator">|</span> 武汉          <span class="token operator">|</span> NULL         <span class="token operator">|</span> <span class="token number">2020</span>-02-12 <span class="token number">22</span>:19:03 <span class="token operator">|</span>
+---------+-----------+----------+--------------+--------------+---------------------+
<span class="token number">3</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre></div><h4 id="insert-select插入子查询数据"><a href="#insert-select插入子查询数据" class="header-anchor">#</a> insert...select插入子查询数据</h4> <p>将从一个表中 select 查询到的一行数据，直接插入到另一个表中，注意：列名要相对应，否则会报错</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法：</span>
insert <span class="token punctuation">[</span>into<span class="token punctuation">]</span> tb1_name <span class="token punctuation">[</span><span class="token punctuation">{</span>col_name, <span class="token punctuation">..</span>.<span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token keyword">select</span> <span class="token punctuation">..</span>.
</code></pre></div><h3 id="delete-删除数据-综合应用"><a href="#delete-删除数据-综合应用" class="header-anchor">#</a> delete 删除数据(综合应用)</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法：</span>
delete from tb1_name <span class="token punctuation">[</span>where where_condition<span class="token punctuation">]</span> <span class="token punctuation">[</span>order by <span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">[</span>limit row_count<span class="token punctuation">]</span>

<span class="token comment"># 示例：</span>
delete from customers where cust_id <span class="token operator">&gt;</span> <span class="token number">902</span><span class="token punctuation">;</span> <span class="token comment"># 删除cust_id &gt; 902的数据 </span>
delete from customers<span class="token punctuation">;</span> <span class="token comment"># 删除表里的所有数据</span>
</code></pre></div><h3 id="update-修改数据-综合应用"><a href="#update-修改数据-综合应用" class="header-anchor">#</a> update 修改数据(综合应用)</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法：</span>
update tb1_name <span class="token builtin class-name">set</span> <span class="token assign-left variable">col_name1</span><span class="token operator">=</span><span class="token punctuation">{</span>expr1 <span class="token operator">|</span> default<span class="token punctuation">}</span> <span class="token punctuation">[</span>, col_name2 <span class="token operator">=</span> <span class="token punctuation">{</span>expr1 <span class="token operator">|</span> default<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">..</span>.
<span class="token punctuation">[</span>where where_condition<span class="token punctuation">]</span> <span class="token punctuation">[</span>order by <span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">[</span>limit row_count<span class="token punctuation">]</span>
</code></pre></div><p>示例：使用update语句将数据库mysql_test的表customers中姓名为&quot;张三&quot;的客户的地址更新为&quot;武汉&quot;</p> <div class="language-bash extra-class"><pre class="language-bash"><code>update mysql_test.customers <span class="token builtin class-name">set</span> <span class="token assign-left variable">cust_address</span><span class="token operator">=</span><span class="token string">'武汉'</span> where <span class="token assign-left variable">cust_name</span><span class="token operator">=</span><span class="token string">'张三'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="练习题-6"><a href="#练习题-6" class="header-anchor">#</a> 练习题</h3> <p>1.使用（  ）语句可以插入单行或多行元组数据。填空题，答案：insert...values</p> <p>2.使用delete语句删除数据库mysql_test的表customers中客户名为&quot;李四&quot;的客户信息。设计题</p> <div class="language-bash extra-class"><pre class="language-bash"><code>delete from mysql_test.customers where <span class="token assign-left variable">cust_name</span><span class="token operator">=</span><span class="token string">'李四'</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_5-数据查询-综合应用"><a href="#_5-数据查询-综合应用" class="header-anchor">#</a> 5.数据查询(综合应用)</h2> <h3 id="select语句"><a href="#select语句" class="header-anchor">#</a> select语句</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语句</span>
<span class="token keyword">select</span> <span class="token punctuation">[</span>all <span class="token operator">|</span> distinct <span class="token operator">|</span> distinctrow<span class="token punctuation">]</span> <span class="token comment"># distinctrow [dɪˈstɪŋkt] 不同的，明显的</span>
select_expr <span class="token punctuation">[</span>, select_expr<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
from table_references <span class="token comment"># 数据来源</span>
<span class="token punctuation">[</span>where where_condition<span class="token punctuation">]</span> <span class="token comment"># 条件</span>
<span class="token punctuation">[</span>group by <span class="token punctuation">{</span>col_name <span class="token operator">|</span> <span class="token function">expr</span> <span class="token operator">|</span> position<span class="token punctuation">}</span> <span class="token punctuation">[</span>asc <span class="token operator">|</span> desc<span class="token punctuation">]</span>, <span class="token punctuation">..</span>. <span class="token punctuation">[</span>with rollup<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment"># 对检索到的数据进行分组</span>
<span class="token punctuation">[</span>having where_condition<span class="token punctuation">]</span> <span class="token comment"># 指定组的选择条件</span>
<span class="token punctuation">[</span>order by <span class="token punctuation">{</span>col_name <span class="token operator">|</span> <span class="token function">expr</span> <span class="token operator">|</span> position<span class="token punctuation">}</span> <span class="token punctuation">[</span>asc <span class="token operator">|</span> desc<span class="token punctuation">]</span>, <span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token comment"># 对查询结果进行排序</span>
<span class="token punctuation">[</span>limit <span class="token punctuation">{</span><span class="token punctuation">[</span>offset_val,<span class="token punctuation">]</span> row_count <span class="token operator">|</span> row_count offset offset_val<span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token comment"># 限制行数</span>
</code></pre></div><h3 id="列的选择与指定"><a href="#列的选择与指定" class="header-anchor">#</a> 列的选择与指定</h3> <p>查询数据库mysql_test的表customers中各个客户的姓名、性别和地址信息</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">select</span> cust_name,cust_sex,cust_address from mysql_test.customers<span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; select cust_name,cust_sex,cust_address from mysql_test.customers;</span>
+-----------+----------+--------------+
<span class="token operator">|</span> cust_name <span class="token operator">|</span> cust_sex <span class="token operator">|</span> cust_address <span class="token operator">|</span>
+-----------+----------+--------------+
<span class="token operator">|</span> 张三       <span class="token operator">|</span> F        <span class="token operator">|</span> 武汉         <span class="token operator">|</span>
<span class="token operator">|</span> 李四       <span class="token operator">|</span> F        <span class="token operator">|</span> 北京市       <span class="token operator">|</span>
<span class="token operator">|</span> 李四       <span class="token operator">|</span> M        <span class="token operator">|</span> 武汉         <span class="token operator">|</span>
+-----------+----------+--------------+
<span class="token number">3</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

<span class="token comment"># 查询数据库mysql_test的表customers中各个客户的所有信息</span>
<span class="token keyword">select</span> * from mysql_test.customers<span class="token punctuation">;</span>

</code></pre></div><h4 id="定义并使用列的别名"><a href="#定义并使用列的别名" class="header-anchor">#</a> 定义并使用列的别名</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
column_name <span class="token punctuation">[</span>as<span class="token punctuation">]</span> colums_alias

<span class="token comment"># 示例</span>
<span class="token keyword">select</span> cust_name,cust_address as 地址,cust_contact from mysql_test.customers<span class="token punctuation">;</span>
<span class="token comment"># mysql&gt; select cust_name,cust_address as 地址,cust_contact from mysql_test.customers;</span>
+-----------+-----------+--------------+
<span class="token operator">|</span> cust_name <span class="token operator">|</span> 地址      <span class="token operator">|</span> cust_contact <span class="token operator">|</span>
+-----------+-----------+--------------+
<span class="token operator">|</span> 张三       <span class="token operator">|</span> 武汉      <span class="token operator">|</span> 朝阳区       <span class="token operator">|</span>
<span class="token operator">|</span> 李四       <span class="token operator">|</span> 北京市    <span class="token operator">|</span> 朝阳区       <span class="token operator">|</span>
<span class="token operator">|</span> 李四       <span class="token operator">|</span> 武汉      <span class="token operator">|</span> NULL         <span class="token operator">|</span>
+-----------+-----------+--------------+
</code></pre></div><h4 id="替换查询结果集中的数据"><a href="#替换查询结果集中的数据" class="header-anchor">#</a> 替换查询结果集中的数据</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
<span class="token keyword">case</span> 
when 条件1 <span class="token keyword">then</span> 表达式1
  when 条件2 <span class="token keyword">then</span> 表达式2
  <span class="token punctuation">..</span>.
<span class="token keyword">else</span> 表达式
end <span class="token punctuation">[</span>as<span class="token punctuation">]</span> column_alias
</code></pre></div><p>例子：查询数据库mysql_test的表customers中客户的cust_name和cust_sex列，要求判断结果集中cust_sex列的值，如果该列的值为M，则显示输出&quot;男&quot;，否则为 &quot;女&quot;，同时在结果集的显示中将cust_sex列用别名 &quot;性别&quot;标注</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">select</span> cust_name, 
<span class="token keyword">case</span> 
when <span class="token assign-left variable">cust_sex</span><span class="token operator">=</span><span class="token string">'M'</span> <span class="token keyword">then</span> <span class="token string">'男'</span> 
<span class="token keyword">else</span> <span class="token string">'女'</span> 
end as 性别 
from mysql_test.customers<span class="token punctuation">;</span>

+-----------+--------+
<span class="token operator">|</span> cust_name <span class="token operator">|</span> 性别   <span class="token operator">|</span>
+-----------+--------+
<span class="token operator">|</span> 张三       <span class="token operator">|</span> 女     <span class="token operator">|</span>
<span class="token operator">|</span> 李四       <span class="token operator">|</span> 女     <span class="token operator">|</span>
<span class="token operator">|</span> 李四       <span class="token operator">|</span> 男     <span class="token operator">|</span>
+-----------+--------+
</code></pre></div><h4 id="计算列值"><a href="#计算列值" class="header-anchor">#</a> 计算列值</h4> <p>例子：查询数据库mysql_test的表customers中每个客户的cust_name列，cust_sex列，以及对cust_id列加上数字100后的结果</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">select</span> cust_name,cust_sex,cust_id+100 from mysql_test.customers<span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; select cust_name,cust_sex,cust_id+100 from mysql_test.customers;</span>
+-----------+----------+-------------+
<span class="token operator">|</span> cust_name <span class="token operator">|</span> cust_sex <span class="token operator">|</span> cust_id+100 <span class="token operator">|</span>
+-----------+----------+-------------+
<span class="token operator">|</span> 张三      <span class="token operator">|</span> F        <span class="token operator">|</span>        <span class="token number">1001</span> <span class="token operator">|</span>
<span class="token operator">|</span> 李四      <span class="token operator">|</span> F        <span class="token operator">|</span>        <span class="token number">1002</span> <span class="token operator">|</span>
<span class="token operator">|</span> 李四      <span class="token operator">|</span> M        <span class="token operator">|</span>        <span class="token number">1004</span> <span class="token operator">|</span>
+-----------+----------+-------------+
</code></pre></div><h4 id="聚合函数"><a href="#聚合函数" class="header-anchor">#</a> 聚合函数</h4> <table><thead><tr><th>函数名</th> <th>说明</th></tr></thead> <tbody><tr><td>count</td> <td>求组中项数，返回int类型整数</td></tr> <tr><td>max</td> <td>求最大值</td></tr> <tr><td>min</td> <td>求最小值</td></tr> <tr><td>sum</td> <td>求表达式中所有值的和</td></tr> <tr><td>avg</td> <td>求组中值的平均值</td></tr> <tr><td>std 或 stddev</td> <td>返回给定表达式中所有值的标准值</td></tr> <tr><td>variance</td> <td>返回给定表达式中所有值的方差</td></tr> <tr><td>group_concat</td> <td>返回由属于一组的列值连接组合而成的结果</td></tr> <tr><td>bit_and</td> <td>逻辑或</td></tr> <tr><td>bir_or</td> <td>逻辑与</td></tr> <tr><td>bit_xor</td> <td>逻辑异或</td></tr></tbody></table> <h4 id="练习题-7"><a href="#练习题-7" class="header-anchor">#</a> 练习题</h4> <p>1.使用SQL语句中进行查询操作是，若希望查询出全部存在的元组。一般使用的保留字是（  ）。单选题，答案：D</p> <ul><li>A Unique</li> <li>B Except</li> <li>C Distinct</li> <li>D All</li></ul> <p>2.select语句的子句中，仅在按组计算聚合时使用的是（  ）。单选题：C</p> <ul><li>A FROM</li> <li>B WHERE</li> <li>C GROUP BY</li> <li>D ORDER BY</li></ul> <p>3.查询数据库mysql_test的表customers中各个客户的所有信息，写出相应SQL语句。设计题</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">select</span> * from mysql_test.customers<span class="token punctuation">;</span>
</code></pre></div><p>4.聚合函数通常是数据库系统中一类系统（  ）。填空题，答案：内置函数</p> <p>5.在数据查询时，替换查询结果集中的数据需要用到（  ）表达式。填空题，答案：case</p> <p>6.查询数据库mysql_test的表customers中客户的cust_name列何cust_sex列，要求判断结果集中cust_sex列的值，如果该列的值为M，则显示输出'男'，否则为'女'，同时在结果集的显示中将cust_sex用列名 &quot;性别&quot;标注，写出SQL语句。设计题</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">select</span> cust_name,
<span class="token keyword">case</span> 
when <span class="token assign-left variable">cust_sex</span><span class="token operator">=</span><span class="token string">'M'</span> <span class="token keyword">then</span> <span class="token string">'男'</span>
<span class="token keyword">else</span> <span class="token string">'女'</span>
end as 性别
from mysql_test.customers<span class="token punctuation">;</span>
</code></pre></div><p>7.请写出定义并使用列的别名的语法格式。简答题</p> <div class="language-bash extra-class"><pre class="language-bash"><code>colunm_name <span class="token punctuation">[</span>as<span class="token punctuation">]</span> colum_alias <span class="token comment">#  [ˈeɪliəs] 别名</span>
</code></pre></div><p>8.下列选项中用来表示组中项数的聚合函数是（  ）。单选题，答案：A</p> <ul><li>A count</li> <li>B sum</li> <li>C avg</li> <li>D std</li></ul> <h3 id="from子句与多表连接查询"><a href="#from子句与多表连接查询" class="header-anchor">#</a> from子句与多表连接查询</h3> <h4 id="交叉连接-笛卡尔积"><a href="#交叉连接-笛卡尔积" class="header-anchor">#</a> 交叉连接(笛卡尔积)</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">select</span> * from tb1 cross <span class="token function">join</span> tb2<span class="token punctuation">;</span>
<span class="token comment"># 等价于</span>
<span class="token keyword">select</span> * from tb1,tb2<span class="token punctuation">;</span>

<span class="token comment"># 示例</span>
create table tb1 <span class="token punctuation">(</span>tb1_id int primary key, tb1_col char<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> not null<span class="token punctuation">)</span><span class="token punctuation">;</span>
create table tb2 <span class="token punctuation">(</span>tb2_id int primary key, tb2_col char<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> not null<span class="token punctuation">)</span><span class="token punctuation">;</span>
insert tb1 values <span class="token punctuation">(</span><span class="token number">1</span>, <span class="token string">'tb1_a'</span><span class="token punctuation">)</span>,<span class="token punctuation">(</span><span class="token number">2</span>, <span class="token string">'tb1_b'</span><span class="token punctuation">)</span>,<span class="token punctuation">(</span><span class="token number">3</span>, <span class="token string">'tb1_c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
insert tb2 values <span class="token punctuation">(</span><span class="token number">1</span>, <span class="token string">'tb2_a'</span><span class="token punctuation">)</span>,<span class="token punctuation">(</span><span class="token number">2</span>, <span class="token string">'tb2_b'</span><span class="token punctuation">)</span>,<span class="token punctuation">(</span><span class="token number">3</span>, <span class="token string">'tb2_c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; select * from tb1;</span>
+--------+---------+
<span class="token operator">|</span> tb1_id <span class="token operator">|</span> tb1_col <span class="token operator">|</span>
+--------+---------+
<span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span> tb1_a   <span class="token operator">|</span>
<span class="token operator">|</span>      <span class="token number">2</span> <span class="token operator">|</span> tb1_b   <span class="token operator">|</span>
<span class="token operator">|</span>      <span class="token number">3</span> <span class="token operator">|</span> tb1_c   <span class="token operator">|</span>
+--------+---------+
<span class="token number">3</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

<span class="token comment"># mysql&gt; select * from tb2;</span>
+--------+---------+
<span class="token operator">|</span> tb2_id <span class="token operator">|</span> tb2_col <span class="token operator">|</span>
+--------+---------+
<span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span> tb2_a   <span class="token operator">|</span>
<span class="token operator">|</span>      <span class="token number">2</span> <span class="token operator">|</span> tb2_b   <span class="token operator">|</span>
<span class="token operator">|</span>      <span class="token number">3</span> <span class="token operator">|</span> tb2_c   <span class="token operator">|</span>
+--------+---------+
<span class="token number">3</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

<span class="token comment"># mysql&gt; select * from tb1 cross join tb2;</span>
<span class="token comment"># 或者 mysql&gt; select * from tb1,tb2;</span>
+--------+---------+--------+---------+
<span class="token operator">|</span> tb1_id <span class="token operator">|</span> tb1_col <span class="token operator">|</span> tb2_id <span class="token operator">|</span> tb2_col <span class="token operator">|</span>
+--------+---------+--------+---------+
<span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span> tb1_a   <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span> tb2_a   <span class="token operator">|</span>
<span class="token operator">|</span>      <span class="token number">2</span> <span class="token operator">|</span> tb1_b   <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span> tb2_a   <span class="token operator">|</span>
<span class="token operator">|</span>      <span class="token number">3</span> <span class="token operator">|</span> tb1_c   <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span> tb2_a   <span class="token operator">|</span>
<span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span> tb1_a   <span class="token operator">|</span>      <span class="token number">2</span> <span class="token operator">|</span> tb2_b   <span class="token operator">|</span>
<span class="token operator">|</span>      <span class="token number">2</span> <span class="token operator">|</span> tb1_b   <span class="token operator">|</span>      <span class="token number">2</span> <span class="token operator">|</span> tb2_b   <span class="token operator">|</span>
<span class="token operator">|</span>      <span class="token number">3</span> <span class="token operator">|</span> tb1_c   <span class="token operator">|</span>      <span class="token number">2</span> <span class="token operator">|</span> tb2_b   <span class="token operator">|</span>
<span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span> tb1_a   <span class="token operator">|</span>      <span class="token number">3</span> <span class="token operator">|</span> tb2_c   <span class="token operator">|</span>
<span class="token operator">|</span>      <span class="token number">2</span> <span class="token operator">|</span> tb1_b   <span class="token operator">|</span>      <span class="token number">3</span> <span class="token operator">|</span> tb2_c   <span class="token operator">|</span>
<span class="token operator">|</span>      <span class="token number">3</span> <span class="token operator">|</span> tb1_c   <span class="token operator">|</span>      <span class="token number">3</span> <span class="token operator">|</span> tb2_c   <span class="token operator">|</span>
+--------+---------+--------+---------+
<span class="token number">9</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre></div><h4 id="内连接"><a href="#内连接" class="header-anchor">#</a> 内连接</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># select some_colums from tb1 inner join tb2 on some_conditions;</span>
<span class="token comment"># 大写更好理解，以后要改掉全小写的习惯</span>
SELECT some_colums FROM tb1 INNER JOIN tb2 ON some_conditions<span class="token punctuation">;</span>
<span class="token comment"># some_conditions [tb1.]&lt;列名或列别名&gt;&lt;比较运算符&gt;[tb2.]&lt;列名或列别名&gt;</span>
<span class="token comment"># tb1.b = tb2.b</span>
</code></pre></div><p>例子：根据学生基本信息登记表tb_student何学生成绩表tb_score，使用内连接查询每个学生及其选课成绩的详细信息</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 默认是INNER 内连接，不写INNER，直接写 JOIN就是内连接</span>
SELECT * FROM tb_student INNER JOIN tb_score ON tb_student.stu_id<span class="token operator">=</span>tb_score.stu_id<span class="token punctuation">;</span>
</code></pre></div><p>内连接分类</p> <ul><li>等值连接：使用运算符 =</li> <li>非等值连接：使用除 = 之外的其它比较运算符</li> <li>自连接：将一个表与它自身进行连接</li></ul> <h4 id="外连接"><a href="#外连接" class="header-anchor">#</a> 外连接</h4> <p>在内连接中，一般都是查询到的满足条件的数据，而外连接可以获取到满足条件的和不满足条件的数据</p> <ol><li>左外连接：在FROM子句中使用关键字 LEFT OUTER JOIN 或 LEFT JOIN</li> <li>右外连接：在FROM子句中使用关键字 RIGHT OUTER JOIN 或 RIGHT JOIN</li></ol> <p>例子：根据学生基本信息登记表tb_student何学生成绩表tb_score，使用左连接查询每个学生及其选课成绩的详细信息</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 基表为 tb_student</span>
SELECT * FROM tb_student LEFT JOIN tb_score ON tb_student.stu_id<span class="token operator">=</span>tb_score.stu_id<span class="token punctuation">;</span>
</code></pre></div><h4 id="练习题-8"><a href="#练习题-8" class="header-anchor">#</a> 练习题</h4> <p>1.交叉连接又称（  ）。填空题，答案：笛卡尔积</p> <p>2.SELECT语句的查询对象是由（  ）子句指定的。可根据用户的查询需求实现单表或多表查询。填空题：FROM</p> <p>3.关于内连接的使用，可以将一个表与它本身进行连接，这种连接方式称为（  ）。单选，答案：A</p> <ul><li>A 自连接</li> <li>B 等值连接</li> <li>C 非等值连接</li> <li>D 交叉连接</li></ul> <p>4.SELECT操作使用”连接“运算的连接方式不包括（  ）。单选题，答案：C</p> <ul><li>A 交叉连接</li> <li>B 内连接</li> <li>C 串行连接</li> <li>D 外连接</li></ul> <p>5.假设数据库中有两张表，分别是tb1和tb2，现要求输出这两张表执行交叉连接后所有的数据集，写出相应的SQL。设计题</p> <div class="language-bash extra-class"><pre class="language-bash"><code>SELECT * FROM tb1,tb2<span class="token punctuation">;</span>
<span class="token comment"># 或者</span>
SELECT * FROM tb1 CROSS JOIN tb2<span class="token punctuation">;</span>
</code></pre></div><p>6.写出在MySQL中，内连接的语法格式。简答题</p> <div class="language-bash extra-class"><pre class="language-bash"><code>SELECT <span class="token punctuation">..</span>. FROM tb1 INNER JOIIN tb2 ON some_confition<span class="token punctuation">;</span>
</code></pre></div><p>7.简述左外连接与右外连接的区别。简答题</p> <p>左外连接：也称为左连接。以左表为基表。在FROM子句中使用关键字&quot;LEFT OUTER JOIN&quot; 或关键字 &quot;LEFT JOIN&quot;来连接两张表。</p> <p>右外连接：也称为右连接。以右表为基表。在FROM子句中使用关键字&quot;RIGHT OUTER JOIN&quot; 或关键字 &quot;RIGHT JOIN&quot;来连接两张表。</p> <p>8.关于内连接的使用，如若在ON子句的连接条件中使用运算符 &quot;=&quot;，则此连接方式为（  ）。填空题，答案：等值连接</p> <h3 id="where子句与条件查询"><a href="#where子句与条件查询" class="header-anchor">#</a> where子句与条件查询</h3> <h4 id="比较运算"><a href="#比较运算" class="header-anchor">#</a> 比较运算</h4> <table><thead><tr><th>比较运算符</th> <th>说明</th></tr></thead> <tbody><tr><td>= ，!=</td> <td>等于、不等于</td></tr> <tr><td>&lt; ，&lt;=</td> <td>小于，小于等于</td></tr> <tr><td>&gt; ，&gt;=</td> <td>大于，大于等于</td></tr> <tr><td>&lt;&gt;</td> <td>不等于</td></tr> <tr><td>&lt;=&gt;</td> <td>不等于，不返回UNKNOWN</td></tr></tbody></table> <p>不等于有三种，他们有什么区别？</p> <p>一般where条件判断时，如果左右两边的表达式都不为NULL(空)，那么比较结果返回true或false，但是当左侧表达式或右侧表达式值为空(NULL)的时候，就会返回UNKNOWN。而 <code>&lt;=&gt;</code> 不会返回UNKNOWN，只会返回是否相等true or false</p> <p>示例：在数据库mysql_test的表customers中查找所有男性客户的信息</p> <div class="language-bash extra-class"><pre class="language-bash"><code>SELECT * FROM mysql_test.customers WHERE cust_sex <span class="token operator">=</span> <span class="token string">'M'</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="判定范围-between"><a href="#判定范围-between" class="header-anchor">#</a> 判定范围 BETWEEN</h4> <p>当查询的过滤条件被限定在值的某个范围时，可以使用关键字 &quot;BETWEEN&quot;</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
expression <span class="token punctuation">[</span>NOT<span class="token punctuation">]</span> BETWEEN expression1 AND expression2

<span class="token comment"># 例子：</span>
<span class="token comment"># 在数据库mysql_test的表customers中，查询客户id号在903至912之间的客户信息</span>
SELECT * FROM mysql_test.customers WHERE cust_id BETWEEN <span class="token number">903</span> AND <span class="token number">912</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="判定范围-in"><a href="#判定范围-in" class="header-anchor">#</a> 判定范围 IN</h4> <p>使用 IN 关键字可以指定一个值的枚举表，该表中会列出所有可能的值。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法：</span>
expression IN<span class="token punctuation">(</span>expression1 <span class="token punctuation">[</span>, <span class="token punctuation">..</span>.n<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 示例：查询ID为903，906，908的客户信息</span>
SELECT * FROM mysql_test.customers WHERE cust_id IN<span class="token punctuation">(</span><span class="token number">903,906</span>,908<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="判定空值"><a href="#判定空值" class="header-anchor">#</a> 判定空值</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
expression IS <span class="token punctuation">[</span>NOT<span class="token punctuation">]</span> NULL

<span class="token comment"># 示例：</span>
SELECT cust_name FROM mysql_test.customers WHERE cust_contact IS NULL<span class="token punctuation">;</span>
</code></pre></div><h4 id="练习题-9"><a href="#练习题-9" class="header-anchor">#</a> 练习题</h4> <p>1.当需要判断一个表达式的值是否为空值时，可以使用关键字（  ）来实现。填空题：IS NULL</p> <p>2.在WHERE子句中，用于范围判定的关键字是（  ）和 （  ）。填空题：BETWEEN, IN</p> <p>3.在where子句中，当查询的过滤条件被限定在值的某个范围时，其使用语法格式为：expression [NOT] （  ） Nexpresssion1 （  ） expression2。填空题 BETWEEN, AND</p> <h4 id="子查询"><a href="#子查询" class="header-anchor">#</a> 子查询</h4> <p>两个查询嵌套</p> <ul><li>表子查询</li> <li>行子查询</li> <li>列子查询</li> <li>标量子查询</li></ul> <h5 id="结合-in-使用的子查询"><a href="#结合-in-使用的子查询" class="header-anchor">#</a> 结合 IN 使用的子查询</h5> <p>主要用于判定一个给定值是否存在于子查询的结果集中</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
expression <span class="token punctuation">[</span>NOT<span class="token punctuation">]</span> IN <span class="token punctuation">(</span>subquery<span class="token punctuation">)</span>
</code></pre></div><p>示例：查询任意所选课程成绩高于80分的学生的学号和姓名信息</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT stu_no,stu_name FROM tb_stu 
WHERE stu_no IN(SELECT stu_no FROM tb_score WHERE score &gt; 80)
</code></pre></div><h5 id="结合比较运算符使用的子查询"><a href="#结合比较运算符使用的子查询" class="header-anchor">#</a> 结合比较运算符使用的子查询</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
expression <span class="token punctuation">{</span> <span class="token operator">=</span> <span class="token operator">|</span> <span class="token operator">&lt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token operator">|</span> <span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&gt;</span><span class="token operator">=</span> <span class="token operator">|</span> <span class="token operator">&lt;</span><span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;&gt;</span> <span class="token operator">|</span> <span class="token operator">!=</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>ALL <span class="token operator">|</span> SOME <span class="token operator">|</span> ANY<span class="token punctuation">}</span> <span class="token punctuation">(</span>subquery<span class="token punctuation">)</span>
<span class="token comment"># IN 等同于 = any 等同于 = some</span>
<span class="token comment"># NOT IN 等同于 &lt;&gt; ALL</span>
SELECT stu_no,stu_name FROM tb_stu WHERE stu_no <span class="token operator">=</span>any<span class="token punctuation">(</span>SELECT stu_no FROM tb_score WHERE score <span class="token operator">&gt;</span> <span class="token number">80</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="结合-exist-使用子查询"><a href="#结合-exist-使用子查询" class="header-anchor">#</a> 结合 EXIST 使用子查询</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
EXISTS <span class="token punctuation">(</span>subquery<span class="token punctuation">)</span>

SELECT stu_no,stu_name FROM tb_stu WHERE exists<span class="token punctuation">(</span>SELECT * FROM tb_score WHERE tb_ste.stu_no <span class="token operator">=</span> tb_score.stu_no<span class="token punctuation">)</span>

<span class="token comment"># 子查询的结果不为空，则返回TRUE，否则返回FALSE</span>
</code></pre></div><h3 id="group-by子句与分组数据"><a href="#group-by子句与分组数据" class="header-anchor">#</a> group by子句与分组数据</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
GROUP BY  <span class="token punctuation">{</span>col_name <span class="token operator">|</span> <span class="token function">expr</span> <span class="token operator">|</span> position<span class="token punctuation">}</span> <span class="token punctuation">[</span>ASC <span class="token operator">|</span> DESC<span class="token punctuation">]</span>,<span class="token punctuation">..</span>.<span class="token punctuation">[</span>WITH ROLLUP<span class="token punctuation">]</span>
<span class="token comment"># col_name 指定用于分组的选择列</span>
<span class="token comment"># expr 指定用于分组的表达式</span>
<span class="token comment"># position 指定用于分组的列在SELECT语句结果集中位置，通常是一个正整数</span>
<span class="token comment"># WITH ROLLUP 可选项，指定在结果集中不仅包含由GROUP BY子句分组后的数据行，还包含各分组的汇总行，可以得到每个分组以及每个分组汇总级别的值</span>
</code></pre></div><p>示例1：在数据库mysql_test的表customers中，获取一个数据结果集，要求该结果集中分别包含每个相同地址的男性客户人数和女性客户人数。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">select</span> cust_address,cust_sex,COUNT<span class="token punctuation">(</span>*<span class="token punctuation">)</span> AS <span class="token string">'renshu'</span> FROM mysql_test.customers GROUP BY cust_address,cust_sex<span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; select cust_address,cust_sex,COUNT(*) AS 'renshu' FROM mysql_test.customers GROUP BY cust_address,cust_sex;</span>
+--------------+----------+--------+
<span class="token operator">|</span> cust_address <span class="token operator">|</span> cust_sex <span class="token operator">|</span> renshu <span class="token operator">|</span>
+--------------+----------+--------+
<span class="token operator">|</span> 武汉          <span class="token operator">|</span> F        <span class="token operator">|</span>      <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span> 北京市        <span class="token operator">|</span> F        <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span> 武汉          <span class="token operator">|</span> M        <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>
+--------------+----------+--------+
<span class="token number">3</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

</code></pre></div><p>示例2：在数据库mysql_test的表customers中，获取一个数据结果集，要求该结果集中分别包含每个相同地址的男性客户人数和女性客户人数、总人数以及客户的总人数。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 加上WITH ROLLUP, </span>
<span class="token comment"># mysql&gt; select cust_address,cust_sex,COUNT(*) AS 'renshu' FROM mysql_test.customers GROUP BY cust_address,cust_sex WITH ROLLUP;</span>
+--------------+----------+--------+
<span class="token operator">|</span> cust_address <span class="token operator">|</span> cust_sex <span class="token operator">|</span> renshu <span class="token operator">|</span>
+--------------+----------+--------+
<span class="token operator">|</span> 北京市        <span class="token operator">|</span> F        <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span> 北京市        <span class="token operator">|</span> NULL     <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span> <span class="token comment"># 北京总人数</span>
<span class="token operator">|</span> 武汉          <span class="token operator">|</span> F        <span class="token operator">|</span>      <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span> 武汉          <span class="token operator">|</span> M        <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span> 武汉          <span class="token operator">|</span> NULL     <span class="token operator">|</span>      <span class="token number">3</span> <span class="token operator">|</span> <span class="token comment"># 武汉总人数</span>
<span class="token operator">|</span> NULL         <span class="token operator">|</span> NULL     <span class="token operator">|</span>      <span class="token number">4</span> <span class="token operator">|</span> <span class="token comment"># 总人数</span>
+--------------+----------+--------+
<span class="token number">6</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
</code></pre></div><h3 id="having子句-过滤分组"><a href="#having子句-过滤分组" class="header-anchor">#</a> having子句 过滤分组</h3> <p>HAVING 一般与 GROUP BY 连用，用于过滤分组</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
HAVING where_condition
<span class="token comment"># where_condition 指定过滤条件</span>
</code></pre></div><p>HAVING 与 WHERE 的区别：</p> <ul><li>HAVING用来过滤分组，WHERE用来过滤数据行</li> <li>HAVING可以包含聚合函数，WHERE不可以包含聚合函数</li> <li>HAVING在数据分组后进行过滤，WHERE在数据分组前过滤</li></ul> <p>示例：在数据库mysql_test的表customers中查找一类客户信息：要求在返回的结果集中，列出相同客户地址中满足客户人数少于3的所有客户姓名及其对应地址。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>SELECT cust_name,cust_address FROM mysql_test.customers GROUP BY cust_address HAVING COUNT<span class="token punctuation">(</span>*<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; SELECT cust_name,cust_address,COUNT(*) as  'renshu' FROM mysql_test.customers GROUP BY cust_address HAVING renshu &lt; 3;</span>
+-----------+--------------+--------+
<span class="token operator">|</span> cust_name <span class="token operator">|</span> cust_address <span class="token operator">|</span> renshu <span class="token operator">|</span>
+-----------+--------------+--------+
<span class="token operator">|</span> 李四      <span class="token operator">|</span> 北京市       <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>
+-----------+--------------+--------+
<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

<span class="token comment"># mysql&gt; SELECT cust_name,cust_address,COUNT(*) as  'renshu' FROM mysql_test.customers GROUP BY cust_address;</span>
+-----------+--------------+--------+
<span class="token operator">|</span> cust_name <span class="token operator">|</span> cust_address <span class="token operator">|</span> renshu <span class="token operator">|</span>
+-----------+--------------+--------+
<span class="token operator">|</span> 张三      <span class="token operator">|</span> 武汉         <span class="token operator">|</span>      <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span> 李四      <span class="token operator">|</span> 北京市       <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>
+-----------+--------------+--------+
<span class="token number">2</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre></div><h3 id="order-by子句"><a href="#order-by子句" class="header-anchor">#</a> order by子句</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
ORDER BY <span class="token punctuation">{</span>col_name <span class="token operator">|</span> <span class="token function">expr</span> <span class="token operator">|</span> position<span class="token punctuation">}</span> <span class="token punctuation">{</span>ASC <span class="token operator">|</span> DESC<span class="token punctuation">}</span>
<span class="token comment"># col_name 用于指定排序的列</span>
<span class="token comment"># position 指定用于排序的列在SELECT语句结果集中的位置，通常是一个正整数</span>
</code></pre></div><p>示例：在数据mysql_test的表customers中依次按照客户姓名和地址的降序方式输出客户的姓名和性别。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>SELECT cust_name,cust_sex FROM mysql_test.customers ORDER BY cust_name DESC,cust_address DESC<span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; SELECT cust_name,cust_sex FROM mysql_test.customers ORDER BY cust_name DESC,cust_address DESC;</span>
+-----------+----------+
<span class="token operator">|</span> cust_name <span class="token operator">|</span> cust_sex <span class="token operator">|</span>
+-----------+----------+
<span class="token operator">|</span> 王五       <span class="token operator">|</span> F        <span class="token operator">|</span>
<span class="token operator">|</span> 李四       <span class="token operator">|</span> M        <span class="token operator">|</span>
<span class="token operator">|</span> 李四       <span class="token operator">|</span> F        <span class="token operator">|</span>
<span class="token operator">|</span> 张三       <span class="token operator">|</span> F        <span class="token operator">|</span>
+-----------+----------+
</code></pre></div><h3 id="limit子句"><a href="#limit子句" class="header-anchor">#</a> limit子句</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
LIMIT <span class="token punctuation">{</span><span class="token punctuation">[</span>offset,<span class="token punctuation">]</span> row_count <span class="token operator">|</span> row_count OFFSET offset<span class="token punctuation">}</span>
<span class="token comment"># offset 可选项，默认为0，指定返回数据的第一行在SELECT语句结果集中的偏移量，必须是非负的证书常量 </span>
<span class="token comment"># row_count 指定返回数据的行数，必须是非负的整数常量</span>
<span class="token comment"># row_count OFFSET offset 从 offset+1行开始，取row_count行</span>
</code></pre></div><p>示例：在数据库mysql_test的表customers中查找从第5位客户开始的3位客户的id号和姓名</p> <div class="language-bash extra-class"><pre class="language-bash"><code>SELECT cust_id,cust_name FROM mysql_test.customers LIMIT <span class="token number">3</span> OFFSET <span class="token number">4</span><span class="token punctuation">;</span> 
SELECT cust_id,cust_name FROM mysql_test.customers LIMIT <span class="token number">4,3</span><span class="token punctuation">;</span> 
<span class="token comment"># 从第5行开始的3行数据，(初始行为0,1,2,3,4,5)</span>
</code></pre></div><h3 id="练习题-10"><a href="#练习题-10" class="header-anchor">#</a> 练习题</h3> <p>1.设一个图书借阅管理数据库中包括三个关系模式：</p> <p>图书（图书编号、书名、作者、出版社、单价）</p> <p>读者（借书证号、姓名、性别、单位、地址）</p> <p>借阅（借书证号、图书编号、借阅日期、归还日期、备注）</p> <p>用SQL语句完成下面1-3题。设计图</p> <p>(1)查询价格在50到60之间的图书，结果按出版社及单价升序排列</p> <div class="language-bash extra-class"><pre class="language-bash"><code>SELECT * FROM 图书 WHERE 价格 BETWEEN <span class="token number">50</span> AND <span class="token number">60</span> ORDER BY 出版社,单价<span class="token punctuation">;</span>
</code></pre></div><p>(2)查询王明所借阅的所有图书的书名及借阅时间</p> <div class="language-bash extra-class"><pre class="language-bash"><code>SELECT 图书.书名,借阅.借阅时间 FROM 图书,读者,借阅 WHERE 姓名<span class="token operator">=</span><span class="token string">&quot;王名&quot;</span> AND 借阅.借书证号<span class="token operator">=</span>读者.借书证号 AND 图书.图书编号<span class="token operator">=</span>借阅.图书编号<span class="token punctuation">;</span>
</code></pre></div><p>(3) 查询各个出版社图书的最高价格、最低价格和平均价格。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>SELECT 书名,出版社,MAX<span class="token punctuation">(</span>单价<span class="token punctuation">)</span> AS 最高价格,MIN<span class="token punctuation">(</span>单价<span class="token punctuation">)</span> AS 最低价格, AVG<span class="token punctuation">(</span>单价<span class="token punctuation">)</span> AS 平均价格 FROM 图书 GROUP BY 出版社<span class="token punctuation">;</span>
</code></pre></div><p>2.在SELECT语句中，除了使用GROUP BY子句分钟数据之外，还可以使用（  ）子句来过滤分组。填空题：HAVING</p> <p>3.设有一个关系模式图书(图书编号、书名、作者、出版社、单价)，查询价格在50-60元之间的图书，结果按出版社及单价升序排列，则下列用于排序的是 （  ）。单选题，答案：B</p> <ul><li>A GROUP BY</li> <li>B ORDER BY</li> <li>C HAVING</li> <li>D LIMIT</li></ul> <h2 id="_6-视图-虚表-综合应用"><a href="#_6-视图-虚表-综合应用" class="header-anchor">#</a> 6.视图(虚表，综合应用)</h2> <h3 id="什么是视图-领会"><a href="#什么是视图-领会" class="header-anchor">#</a> 什么是视图(领会)</h3> <p>视图是数据库中的一个对象，它是数据库管理系统提供给用户的以多种角度观察数据库中数据的一种重要机制。</p> <p>视图不是数据库中真实的表，而是一张虚拟的表，其自身并不存储数据。</p> <h3 id="使用视图的优点-领会"><a href="#使用视图的优点-领会" class="header-anchor">#</a> 使用视图的优点(领会)</h3> <ul><li>集中分散的数据</li> <li>简化查询语句</li> <li>重用SQL语句</li> <li>保护数据安全，看不到基表的其它信息，可以保护数据的安全</li> <li>共享所需数据，多个人建多个视图，共享所需的数据</li> <li>更改数据格式，比较灵活，可以在创建视图时修改数据的格式</li></ul> <h3 id="创建视图-create-view"><a href="#创建视图-create-view" class="header-anchor">#</a> 创建视图 CREATE VIEW</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
CREATE <span class="token punctuation">[</span>OR REPLACE<span class="token punctuation">]</span> VIEW view_name <span class="token punctuation">[</span><span class="token punctuation">(</span>column_list<span class="token punctuation">)</span><span class="token punctuation">]</span> AS select_statement 
<span class="token punctuation">[</span>WITH <span class="token punctuation">[</span>CASCADED <span class="token operator">|</span> LOCAL<span class="token punctuation">]</span> CHECK OPTION<span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token comment"># view_name 指定视图名称</span>
<span class="token comment"># column_list 可选项 为每个列指定名称</span>
<span class="token comment"># select_statement 指定 SELECT 语句</span>
<span class="token comment"># [WITH [CASCADED | LOCAL] CHECK OPTION]] 可选项，指定在可更新视图上所进行的修改都需要符合select_statement中所指定的限制条件</span>
</code></pre></div><p>示例：在数据mysql_test中创建视图customers_view，要求该视图包含客户信息表customers中所有男客户的信息，并且要求保证今后对该视图数据的修改都必须符合客户性别为男性这个条件。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>CREATE OR REPLACE VIEW mysql_test.customers_view AS
SELECT * FROM mysql_test.customers WHERE cust_sex <span class="token operator">=</span> <span class="token string">'M'</span> 
WITH CHECK OPTION<span class="token punctuation">;</span>

<span class="token comment"># SHOW TABLES; 可以查看到新建的视图</span>
</code></pre></div><h3 id="删除视图-drop-view"><a href="#删除视图-drop-view" class="header-anchor">#</a> 删除视图 DROP VIEW</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
DROP VIEW <span class="token punctuation">[</span>IF EXISTS<span class="token punctuation">]</span> view_name <span class="token punctuation">[</span>,view_name<span class="token punctuation">]</span><span class="token punctuation">..</span>.
<span class="token punctuation">[</span>RESTICT <span class="token operator">|</span> CASCADE<span class="token punctuation">]</span>

DROP VIEW IF EXISTS customers_view<span class="token punctuation">;</span>
</code></pre></div><h3 id="修改视图定义-alter-view"><a href="#修改视图定义-alter-view" class="header-anchor">#</a> 修改视图定义 ALTER VIEW</h3> <p>对已有视图的定义（结构）进行修改</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
ALTER VIEW view_name <span class="token punctuation">[</span><span class="token punctuation">(</span>column_list<span class="token punctuation">)</span><span class="token punctuation">]</span> AS select_statement 
<span class="token punctuation">[</span>WITH <span class="token punctuation">[</span>CASCADED <span class="token operator">|</span> LOCAL<span class="token punctuation">]</span> CHECK OPTION<span class="token punctuation">]</span><span class="token punctuation">]</span>

ALTER VIEW customers_view <span class="token punctuation">(</span>cust_id,cust_name<span class="token punctuation">)</span> AS SELECT cust_id,cust_name FROM customers<span class="token punctuation">;</span>

<span class="token comment"># mysql&gt; select * from customers_view;</span>
+---------+-----------+
<span class="token operator">|</span> cust_id <span class="token operator">|</span> cust_name <span class="token operator">|</span>
+---------+-----------+
<span class="token operator">|</span>     <span class="token number">901</span> <span class="token operator">|</span> 张三      <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">902</span> <span class="token operator">|</span> 李四      <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">904</span> <span class="token operator">|</span> 李四      <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">909</span> <span class="token operator">|</span> 周明      <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">999</span> <span class="token operator">|</span> 王五      <span class="token operator">|</span>
+---------+-----------+
</code></pre></div><h3 id="查看视图定义-show-create-view"><a href="#查看视图定义-show-create-view" class="header-anchor">#</a> 查看视图定义 SHOW CREATE VIEW</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 语法</span>
SHOW CREATE VIEW view_name
<span class="token comment"># view_name 指定要查看视图的名称</span>

<span class="token comment"># mysql&gt; SHOW CREATE VIEW customers_view;</span>
+----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+
<span class="token operator">|</span> View           <span class="token operator">|</span> Create View                                                                                                                                                                                                                                                                                                                                                                                                                                     <span class="token operator">|</span> character_set_client <span class="token operator">|</span> collation_connection <span class="token operator">|</span>
+----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+
<span class="token operator">|</span> customers_view <span class="token operator">|</span> CREATE <span class="token assign-left variable">ALGORITHM</span><span class="token operator">=</span>UNDEFINED <span class="token assign-left variable">DEFINER</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span>root<span class="token variable">`</span></span>@<span class="token variable"><span class="token variable">`</span>localhost<span class="token variable">`</span></span> SQL SECURITY DEFINER VIEW <span class="token variable"><span class="token variable">`</span>customers_view<span class="token variable">`</span></span> AS <span class="token keyword">select</span> <span class="token variable"><span class="token variable">`</span>customers<span class="token variable">`</span></span><span class="token builtin class-name">.</span><span class="token variable"><span class="token variable">`</span>cust_id<span class="token variable">`</span></span> AS <span class="token variable"><span class="token variable">`</span>cust_id<span class="token variable">`</span></span>,<span class="token variable"><span class="token variable">`</span>customers<span class="token variable">`</span></span><span class="token builtin class-name">.</span><span class="token variable"><span class="token variable">`</span>cust_name<span class="token variable">`</span></span> AS <span class="token variable"><span class="token variable">`</span>cust_name<span class="token variable">`</span></span>,<span class="token variable"><span class="token variable">`</span>customers<span class="token variable">`</span></span><span class="token builtin class-name">.</span><span class="token variable"><span class="token variable">`</span>cust_sex<span class="token variable">`</span></span> AS <span class="token variable"><span class="token variable">`</span>cust_sex<span class="token variable">`</span></span>,<span class="token variable"><span class="token variable">`</span>customers<span class="token variable">`</span></span><span class="token builtin class-name">.</span><span class="token variable"><span class="token variable">`</span>cust_address<span class="token variable">`</span></span> AS <span class="token variable"><span class="token variable">`</span>cust_address<span class="token variable">`</span></span>,<span class="token variable"><span class="token variable">`</span>customers<span class="token variable">`</span></span><span class="token builtin class-name">.</span><span class="token variable"><span class="token variable">`</span>cust_contact<span class="token variable">`</span></span> AS <span class="token variable"><span class="token variable">`</span>cust_contact<span class="token variable">`</span></span>,<span class="token variable"><span class="token variable">`</span>customers<span class="token variable">`</span></span><span class="token builtin class-name">.</span><span class="token variable"><span class="token variable">`</span>create_time<span class="token variable">`</span></span> AS <span class="token variable"><span class="token variable">`</span>create_time<span class="token variable">`</span></span> from <span class="token variable"><span class="token variable">`</span>customers<span class="token variable">`</span></span> where <span class="token punctuation">(</span><span class="token variable"><span class="token variable">`</span>customers<span class="token variable">`</span></span><span class="token builtin class-name">.</span><span class="token variable"><span class="token variable">`</span>cust_sex<span class="token variable">`</span></span> <span class="token operator">=</span> <span class="token string">'M'</span><span class="token punctuation">)</span> WITH CASCADED CHECK OPTION <span class="token operator">|</span> utf8                 <span class="token operator">|</span> utf8_general_ci      <span class="token operator">|</span>
+----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+
<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

</code></pre></div><h3 id="更新视图数据-insert"><a href="#更新视图数据-insert" class="header-anchor">#</a> 更新视图数据 INSERT</h3> <h4 id="insert-通过视图向基本表插入数据"><a href="#insert-通过视图向基本表插入数据" class="header-anchor">#</a> INSERT 通过视图向基本表插入数据</h4> <p>示例：在数据库 mysql_test 中，向视图customer_view插入记录：(909, '周明', 'M', '武汉市', '洪山区')</p> <div class="language-bash extra-class"><pre class="language-bash"><code>INSERT INTO mysql_test.customers_view VALUES <span class="token punctuation">(</span><span class="token number">909</span>, <span class="token string">'周明'</span>, <span class="token string">'M'</span>, <span class="token string">'武汉市'</span>, <span class="token string">'洪山区'</span>, <span class="token string">'2019-12-12'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># mysql&gt; SELECT * FROM customers_view;</span>
+---------+-----------+----------+--------------+--------------+---------------------+
<span class="token operator">|</span> cust_id <span class="token operator">|</span> cust_name <span class="token operator">|</span> cust_sex <span class="token operator">|</span> cust_address <span class="token operator">|</span> cust_contact <span class="token operator">|</span> create_time         <span class="token operator">|</span>
+---------+-----------+----------+--------------+--------------+---------------------+
<span class="token operator">|</span>     <span class="token number">904</span> <span class="token operator">|</span> 李四       <span class="token operator">|</span> M        <span class="token operator">|</span> 武汉          <span class="token operator">|</span> NULL        <span class="token operator">|</span> <span class="token number">2020</span>-02-12 <span class="token number">22</span>:48:38 <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">909</span> <span class="token operator">|</span> 周明       <span class="token operator">|</span> M        <span class="token operator">|</span> 武汉市        <span class="token operator">|</span> 洪山区        <span class="token operator">|</span> <span class="token number">2019</span>-12-12 00:00:00 <span class="token operator">|</span>
+---------+-----------+----------+--------------+--------------+---------------------+
</code></pre></div><h4 id="update-通过视图修改基本表数据"><a href="#update-通过视图修改基本表数据" class="header-anchor">#</a> UPDATE 通过视图修改基本表数据</h4> <p>示例：将视图customers_view中所有cust_address列更新为&quot;上海市&quot;</p> <div class="language-bash extra-class"><pre class="language-bash"><code>UPDATE mysql_test.customers_view SET cust_address <span class="token operator">=</span> <span class="token string">'上海市'</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="delete-通过视图删除基本表数据"><a href="#delete-通过视图删除基本表数据" class="header-anchor">#</a> DELETE 通过视图删除基本表数据</h4> <p>示例：删除视图customers_view中姓名为 &quot;周明&quot; 的客户信息</p> <div class="language-bash extra-class"><pre class="language-bash"><code>DELETE FROM mysql_test.customers_view WHERE <span class="token assign-left variable">cust_name</span><span class="token operator">=</span><span class="token string">'周明'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="查询视图数据"><a href="#查询视图数据" class="header-anchor">#</a> 查询视图数据</h3> <p>示例：在视图customers_view中查找客户id号为905的客户姓名及地址</p> <div class="language-bash extra-class"><pre class="language-bash"><code>SELECT cust_name,cust_address FROM mysql_test.customers_view WHERE <span class="token assign-left variable">cust_id</span><span class="token operator">=</span><span class="token number">905</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="练习题-11"><a href="#练习题-11" class="header-anchor">#</a> 练习题</h3> <p>1.下列关于视图的说法中错误的是（  ）。单选题：C</p> <ul><li>A 视图是从一个或多个基本表导出的表，它是虚表</li> <li>B 视图是数据库中的一个对象</li> <li>C 视图是数据库中真实的表，而不是一张虚表</li> <li>D 视图可以用来定义新的视图</li></ul> <p>2.（  ）是用来查看存储在别处的数据的一种虚拟表，而其自身并不存储数据。填空题：视图</p> <p>3.设有一个关系模式读者(借书证号，姓名，性别，单位，地址)，用SQL语句建立 &quot;红星汽车厂&quot; 读者的视图RST，则创建视图的语句是（  ）。单选题，答案：A</p> <ul><li>A CREATE VIEW RST</li> <li>B ALTER VIEW</li> <li>C DROP VIEW RST</li> <li>D SHOW CREATE VIEW RST</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">10/29/2020, 10:59:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/base/dbtheory/4.html" class="prev">
        数据库设计
      </a></span> <span class="next"><a href="/base/dbtheory/6.html">
        数据库编程
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.9db0a638.js" defer></script><script src="/assets/js/2.4b3539f1.js" defer></script><script src="/assets/js/13.df602e5a.js" defer></script><script src="/assets/js/3.e6a4dd76.js" defer></script>
  </body>
</html>
